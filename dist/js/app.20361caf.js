(function(e){function t(t){for(var n,i,r=t[0],c=t[1],d=t[2],l=0,u=[];l<r.length;l++)i=r[l],a[i]&&u.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(u.length)u.shift()();return o.push.apply(o,d||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],n=!0,i=1;i<s.length;i++){var r=s[i];0!==a[r]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var n={},i={app:0},a={app:0},o=[];function r(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0b09a0ec":"88eb4e03","chunk-0caa9092":"f1a6505e","chunk-0e61bcc0":"22f8694a","chunk-124c07a4":"e8f197bc","chunk-17b75b00":"b2f1c3cb","chunk-1c263337":"ad211990","chunk-21d64005":"da658622","chunk-2d0c7360":"65c52809","chunk-2d0cfa35":"d1d4f68e","chunk-2d0dacb1":"7551fb77","chunk-2d21082e":"001d5413","chunk-2d22d490":"6373125a","chunk-3aa178f9":"eb181a9b","chunk-4170de0c":"455d6ca6","chunk-48875fa6":"a3d07db6","chunk-5a4b5a16":"4fb7f53e","chunk-68557d2a":"c35a3d20","chunk-687027a2":"2986ea01","chunk-7e6c82cc":"21f906ec","chunk-accc4560":"029ba773"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-0b09a0ec":1,"chunk-0caa9092":1,"chunk-0e61bcc0":1,"chunk-124c07a4":1,"chunk-17b75b00":1,"chunk-1c263337":1,"chunk-21d64005":1,"chunk-3aa178f9":1,"chunk-4170de0c":1,"chunk-48875fa6":1,"chunk-5a4b5a16":1,"chunk-68557d2a":1,"chunk-687027a2":1,"chunk-7e6c82cc":1,"chunk-accc4560":1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=new Promise((function(t,s){for(var n="css/"+({}[e]||e)+"."+{"chunk-0b09a0ec":"4f44198f","chunk-0caa9092":"75a1bc97","chunk-0e61bcc0":"25689cdb","chunk-124c07a4":"c0020580","chunk-17b75b00":"a7acdb9d","chunk-1c263337":"482638f2","chunk-21d64005":"d57812c7","chunk-2d0c7360":"31d6cfe0","chunk-2d0cfa35":"31d6cfe0","chunk-2d0dacb1":"31d6cfe0","chunk-2d21082e":"31d6cfe0","chunk-2d22d490":"31d6cfe0","chunk-3aa178f9":"017db1a9","chunk-4170de0c":"ae753e6d","chunk-48875fa6":"65a3d2a6","chunk-5a4b5a16":"20dd676a","chunk-68557d2a":"7a1169fa","chunk-687027a2":"f9cef66d","chunk-7e6c82cc":"670697f7","chunk-accc4560":"348ff9a1"}[e]+".css",a=c.p+n,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var d=o[r],l=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===n||l===a))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){d=u[r],l=d.getAttribute("data-href");if(l===n||l===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[e],p.parentNode.removeChild(p),s(o)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,s){n=a[e]=[t,s]}));t.push(n[2]=o);var d,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=r(e),d=function(t){l.onerror=l.onload=null,clearTimeout(u);var s=a[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,s[1](o)}a[e]=void 0}};var u=setTimeout((function(){d({type:"timeout",target:l})}),12e4);l.onerror=l.onload=d,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(s,n,function(t){return e[t]}.bind(null,n));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var u=0;u<d.length;u++)t(d[u]);var p=l;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0073":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"person-name"},[e._v("\n  "+e._s(e.person.first_name+" "+e.person.last_name)+"\n")])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"person-name",props:["person"],computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]))},l=d,u=(s("65e3"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"9de062a6",null);t["a"]=p.exports},"0084":function(e,t,s){},"011b":function(e,t,s){"use strict";var n=s("978d"),i=s.n(n);i.a},"013b":function(e,t,s){},"0140":function(e,t,s){"use strict";var n=s("0667"),i=s.n(n);i.a},"028b":function(e,t,s){"use strict";var n=s("e590"),i=s.n(n);i.a},"03b1":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"actions has-text-right"},[e.hideEdit||e.entry.canceled?e._e():s("router-link",{staticClass:"button",attrs:{to:e.editRoute}},[s("edit-icon",{staticClass:"icon is-small only-icon"})],1),e.entry.canceled?s("router-link",{staticClass:"button",attrs:{to:e.restoreRoute}},[s("rotate-ccw-icon",{staticClass:"icon is-small only-icon"})],1):e._e(),(e.hideDelete||e.entry.canceled||!e.isCurrentUserAdmin)&&e.hideDelete?e._e():s("router-link",{staticClass:"button",attrs:{to:e.deleteRoute}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1)],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("0a35");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"row-actions",components:{EditIcon:r["k"],RotateCcwIcon:r["y"],TrashIcon:r["E"]},props:{entry:{type:Object,default:function(){return{}}},editRoute:{type:Object,default:function(){return{name:"home"}}},deleteRoute:{type:Object,default:function(){return{name:"home"}}},restoreRoute:{type:Object,default:null},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},computed:d({},Object(o["c"])(["isCurrentUserAdmin"])),methods:d({},Object(o["b"])([]))},u=l,p=(s("a6e9"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"54e0814e",null);t["a"]=f.exports},"0506":function(e,t,s){},"05fb":function(e,t,s){"use strict";var n=s("6a44"),i=s.n(n);i.a},"0667":function(e,t,s){},"074d":function(e,t,s){},"09a4":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"production-name"},[s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"flexrow"},[e.noLink?s("div",[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v("\n          "+e._s(e.generateAvatar(e.entry))+"\n        ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v("\n        "+e._s(e.entry.name)+"\n      ")])]):s("router-link",{attrs:{to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v("\n          "+e._s(e.generateAvatar(e.entry))+"\n        ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v("\n        "+e._s(e.entry.name)+"\n      ")])])],1)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=(s("c5f6"),s("7930")),r=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String},isTooltip:{default:!1,type:Boolean},noLink:{default:!1,type:Boolean}},computed:d({},Object(r["c"])([]),{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.entry.id}};return this.entry.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.entry.first_episode_id),e},productionInfo:function(){var e=this.entry?this.entry.fps:null,t=this.entry?this.entry.ratio:null,s=this.entry?this.entry.resolution:null,n=[];return e&&n.push("".concat(this.$t("productions.fields.fps"),": ").concat(e)),t&&n.push("".concat(this.$t("productions.fields.ratio"),": ").concat(t)),s&&n.push("".concat(this.$t("productions.fields.resolution"),": ").concat(s)),n.length>0&&this.isTooltip?n.join("<br>"):""},tooltipOptions:function(){return{content:this.productionInfo,delay:{hide:5e3}}}}),methods:d({},Object(r["b"])([]),{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},u=l,p=(s("8019"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"1aa51b6d",null);t["a"]=f.exports},"09d3":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return r}));s("7f7f"),s("ac6a"),s("456d"),s("55dd");var n=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count";if(!e[t]||!e[t][s])return[];var i=e[t][s],a="count"===n?"count":"frames";return Object.keys(i).map((function(e){var t=i[e],s="todo"===t.name?"#6F727A":t.color;return[t.name,t[a],s]})).sort((function(e,t){return e[0]&&t[0]?e[0].localeCompare(t[0]):!e[0]&&t[0]?-1:(e[0]&&t[0],1)}))},i=function(e,t,s){return n(e,t,s).map((function(e){return e[2]}))},a=function(e,t,s,n){var i={all:{all:{}}};return e.forEach((function(e){if(!e.canceled){var a=e[t];i[a]||(i[a]={all:{}}),e.tasks.forEach((function(t){var r=n[t];o(s,i,a,e,r)}))}})),i},o=function(e,t,s,n,i){if(i){var a=i.task_type_id,o=e[i.task_status_id];if(o){var r=o.id;t[s][a]||(t[s][a]={}),t.all.all[r]||(t.all.all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t.all[a]||(t.all[a]={}),t.all[a][r]||(t.all[a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s].all[r]||(t[s].all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r]||(t[s][a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r].count++,t[s].all[r].count++,t.all[a][r].count++,t.all.all[r].count++,n.nb_frames&&(t[s][a][r].frames+=n.nb_frames,t[s].all[r].frames+=n.nb_frames,t.all[a][r].frames+=n.nb_frames,t.all.all[r].frames+=n.nb_frames)}}},r=function(e,t){var s=0;return t>0&&(s=e/t*100),s.toFixed(2)}},"0e30":function(e,t,s){},"0f9a":function(e,t,s){"use strict";s("8e6e"),s("456d"),s("8615"),s("20d6"),s("6b54"),s("ac6a"),s("7f7f"),s("7514"),s("6762"),s("2fdb");var n,i=s("bd86"),a=s("ba4c"),o=s.n(a),r=s("ce6b"),c=s("52ad"),d=s("e07d"),l=s("48c6"),u=s("2229"),p=s("2017"),f=s("ca76"),h=s("66e7"),m=s("6185"),_=s("9fb0");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={getTaskStatus:function(e){return d["a"].state.taskStatusMap[e]}},y={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},k=b({},y),S={user:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated},isCurrentUserManager:function(e){return e.user&&["admin","manager"].includes(e.user.role)},isCurrentUserAdmin:function(e){return e.user&&"admin"===e.user.role},isCurrentUserCGArtist:function(e){return e.user&&"user"===e.user.role},isCurrentUserClient:function(e){return e.user&&"client"===e.user.role},isSaveProfileLoading:function(e){return e.isSaveProfileLoading},isSaveProfileLoadingError:function(e){return e.isSaveProfileLoadingError},changePassword:function(e){return e.changePassword},displayedTodos:function(e){return e.displayedTodos},displayedDoneTasks:function(e){return e.displayedDoneTasks},todosSearchText:function(e){return e.todosSearchText},todoSelectionGrid:function(e){return e.todoSelectionGrid},todoSearchQueries:function(e){return e.todoSearchQueries},userFilters:function(e){return e.userFilters},isTodosLoading:function(e){return e.isTodosLoading},isTodosLoadingError:function(e){return e.isTodosLoadingError},todoListScrollPosition:function(e){return e.todoListScrollPosition},timeSpentMap:function(e){return e.timeSpentMap},timeSpentTotal:function(e){return e.timeSpentTotal}},w={saveProfile:function(e,t){var s=e.commit,n=e.state;s(_["Of"]),r["a"].updatePerson(t.form).then((function(){t.form.id=n.user.id,s(_["Pf"],t.form)})).catch((function(e){console.error(e),s(_["Nf"])}))},checkNewPasswordValidityAndSave:function(e,t){var s=e.commit,n=e.state,i=t.form,a=t.callback;l["a"].isPasswordValid(i.password,i.password2)?w.changeUserPassword({commit:s,state:n},{form:i,callback:a}):(s(_["Ef"]),a&&a())},changeUserPassword:function(e,t){var s=e.commit;e.state;s(_["Cf"]),r["a"].changePassword(t.form,(function(e){s(e?_["Bf"]:_["Df"]),t.callback&&t.callback()}))},loadTodos:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=t.callback,o=t.forced,c=t.date,d=i.userFilters,l=i.taskTypeMap;0===n.todos.length||o?(s(_["Jf"]),r["a"].loadTodos((function(e,t){e?(s(_["If"]),a&&a(e)):r["a"].loadDone((function(e,n){e?s(_["If"]):s(_["Ff"],n),r["a"].loadTimeSpents(c,(function(e,n){e?s(_["If"]):(s(_["Gf"],n),s(_["Hf"],{tasks:t,userFilters:d,taskTypeMap:l})),a&&a(e)}))}))}))):a&&a()},uploadAvatar:function(e,t){var s=e.commit,n=e.state;r["a"].postAvatar(n.user.id,n.avatarFormData,(function(e){e||s(_["Af"],n.user.id),t&&t(e)}))},setTodosSearch:function(e,t){var s=e.commit;e.state;s(_["gf"],t)},loadUserSearchFilters:function(e,t){var s=e.commit;r["a"].getUserSearchFilters((function(e,n){e?s(_["Dd"]):s(_["Cd"],n),t(e)}))},saveTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){var i=k.todoSearchQueries.find((function(e){return e.name===t}));i?e():r["a"].createFilter("todos",t,t,null,null,(function(t,i){s(_["Je"],{searchQuery:i}),t?n(t):e(i)}))}))},removeTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){r["a"].removeFilter(t,(function(i){s(_["ve"],{searchQuery:t}),i?n(i):e()}))}))},setTodoListScrollPosition:function(e,t){var s=e.commit;e.rootGetters;s(_["hf"],t)}},O=(n={},Object(i["a"])(n,_["Kf"],(function(e,t){e.user=c["a"].helpers.addAdditionalInformation(t),e.isAuthenticated=!0})),Object(i["a"])(n,_["Mf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(i["a"])(n,_["Lf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(i["a"])(n,_["Of"],(function(e){e.isSaveProfileLoading=!0,e.isSaveProfileLoadingError=!1})),Object(i["a"])(n,_["Nf"],(function(e){e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!0})),Object(i["a"])(n,_["Pf"],(function(e,t){Object.assign(e.user,t),Object.assign(e.user,c["a"].helpers.addAdditionalInformation(e.user)),e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!1})),Object(i["a"])(n,_["Vb"],(function(e,t){e.user&&t&&e.user.id===t.id&&(Object.assign(e.user,t),Object.assign(e.user,c["a"].helpers.addAdditionalInformation(e.user)))})),Object(i["a"])(n,_["Cf"],(function(e){e.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}})),Object(i["a"])(n,_["Bf"],(function(e){e.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}})),Object(i["a"])(n,_["Df"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}})),Object(i["a"])(n,_["Ef"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}})),Object(i["a"])(n,_["Jf"],(function(e){e.isTodosLoadingError=!1,e.isTodosLoading=!0,e.timeSpents={},e.timeSpentTotal=0})),Object(i["a"])(n,_["Hf"],(function(e,t){var s=t.tasks,n=t.userFilters,i=t.taskTypeMap;e.isTodosLoading=!1,s.forEach(h["c"]),s.forEach((function(e){var t=g.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.todoSelectionGrid=Object(m["b"])(s.length,1),e.todos=Object(u["l"])(s,i),e.todosIndex=Object(p["g"])(s);var a=Object(f["e"])(e.todosSearchText),o=Object(p["h"])(e.todosIndex,a);e.displayedTodos=o||e.todos,n.todos&&n.todos.all?e.todoSearchQueries=n.todos.all:e.todoSearchQueries=[]})),Object(i["a"])(n,_["Ff"],(function(e,t){t.forEach(h["c"]),t.forEach((function(e){var t=g.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.displayedDoneTasks=t})),Object(i["a"])(n,_["If"],(function(e,t){e.isTodosLoadingError=!0})),Object(i["a"])(n,_["E"],(function(e,t){e.avatarFormData=t})),Object(i["a"])(n,_["Af"],(function(e){if(e.user){var t=Math.random().toString(36).substring(7);e.user.has_avatar=!0,o.a.set(e.user,"uniqueHash",t),e.user.avatarPath="/api/pictures/thumbnails/persons/".concat(e.user.id)+".png"}})),Object(i["a"])(n,_["Wd"],(function(e,t){var s=t.comment,n=t.taskId,i=e.todos.find((function(e){return e.id===n}));if(i){var a=g.getTaskStatus(s.task_status_id);Object.assign(i,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),e.todosIndex=Object(p["g"])(e.todos)}})),Object(i["a"])(n,_["gf"],(function(e,t){var s=Object(f["e"])(t),n=Object(p["h"])(e.todosIndex,s);e.todosSearchText=t,e.displayedTodos=n||e.todos})),Object(i["a"])(n,_["Je"],(function(e,t){var s=t.searchQuery;e.todoSearchQueries.push(s),e.todoSearchQueries=Object(u["c"])(e.todoSearchQueries)})),Object(i["a"])(n,_["ve"],(function(e,t){var s=t.searchQuery,n=e.todoSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.todoSearchQueries.splice(n,1)})),Object(i["a"])(n,_["l"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[0]&&(e.todoSelectionGrid[t.x][t.y]=!0)})),Object(i["a"])(n,_["oe"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[t.x]&&(e.todoSelectionGrid[t.x][t.y]=!1)})),Object(i["a"])(n,_["N"],(function(e){e.todoSelectionGrid=Object(m["c"])(e.todoSelectionGrid)})),Object(i["a"])(n,_["hf"],(function(e,t){e.todoListScrollPosition=t})),Object(i["a"])(n,_["Dd"],(function(e){})),Object(i["a"])(n,_["Cd"],(function(e,t){e.userFilters=t})),Object(i["a"])(n,_["ff"],(function(e,t){e.user.id===t.person_id&&(e.timeSpentMap[t.task_id]=t),e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,_["Gf"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.timeSpentMap=s,e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,_["Ee"],(function(e,t){var s=t.searchQuery,n=t.production;n&&(e.userFilters.task||(e.userFilters.task={}),e.userFilters.task[n.id]||(e.userFilters.task[n.id]=[]),e.userFilters.task[n.id].includes(s)||(e.userFilters.task[n.id].push(s),e.userFilters.task[n.id]=Object(u["c"])(e.userFilters.task[n.id])))})),Object(i["a"])(n,_["He"],(function(e,t){var s=t.searchQuery,n=t.production;e.userFilters.shot[n.id]||(e.userFilters.shot[n.id]=[]),e.userFilters.shot[n.id].includes(s)||(e.userFilters.shot[n.id].push(s),e.userFilters.shot[n.id]=Object(u["c"])(e.userFilters.shot[n.id]))})),Object(i["a"])(n,_["ie"],(function(e){})),Object(i["a"])(n,_["we"],(function(e){Object.assign(e,b({},y))})),n);t["a"]={namespace:!0,state:k,getters:S,actions:w,mutations:O}},"0fcb":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[e.entry.description&&e.entry.description.length>0&&!e.full?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"description",domProps:{innerHTML:e._s(e.compileMarkdown(e.shortenText(e.entry.description,20)))},on:{click:e.onClick}}):s("span",{domProps:{innerHTML:e._s(e.compileMarkdown(e.entry.description))}})])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("0e54"),r=s.n(o),c=s("2f62"),d=s("8c97");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"description-cell",data:function(){return{isOpen:!1,timeout:null}},components:{},props:{entry:{type:Object,default:function(){}},full:{type:Boolean,default:!1}},computed:u({},Object(c["c"])([]),{tooltipOptions:function(){return{content:this.compileMarkdown(this.entry.description),show:this.isOpen,trigger:"manual"}}}),methods:u({},Object(c["b"])([]),{compileMarkdown:function(e){return r()(e||"")},shortenText:d["a"].shortenText,onClick:function(){this.isOpen=!this.isOpen}})},f=p,h=(s("271f"),s("2877")),m=Object(h["a"])(f,n,i,!1,null,"2067aff3",null);t["a"]=m.exports},"0fe2":function(e,t,s){"use strict";var n=s("ac90"),i=s.n(n);i.a},"0fef":function(e,t,s){"use strict";var n=s("795b"),i=s.n(n);i.a},1:function(e,t){},"104d":function(e,t,s){"use strict";var n=s("0e30"),i=s.n(n);i.a},1149:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v(e._s(e.label))]),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},e.emitKeyup]}})])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(e){this.$emit("keyup",e)},focus:function(){this.$refs.input.focus()}})},l=d,u=(s("736c"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"e433a15c",null);t["a"]=p.exports},1338:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n={computed:{},methods:{onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,n=t.y,i=null;e.altKey&&(37===e.keyCode?i=this.select(s,n-1):38===e.keyCode?i=this.select(s-1,n):39===e.keyCode?i=this.select(s,n+1):40===e.keyCode&&(i=this.select(s+1,n)),this.scrollToValidationCell(i))},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},select:function(e,t){var s="validation-"+e+"-"+t,n=this.$refs[s];return n&&n[0].$el.click(),n?n[0]:0},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),i=s.bottom>n.bottom-t,a=s.top<n.top+t,o=s.right>n.right-t,r=s.left<n.left+t;if(i){var c=s.bottom-n.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var d=n.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-d)}if(o){var l=s.right-n.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+l)}else if(r){var u=n.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}}}}},"13cc":function(e,t,s){"use strict";var n=s("223a"),i=s.n(n);i.a},"15b1":function(e,t,s){"use strict";var n=s("7434"),i=s.n(n);i.a},"1d3d":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.productionToEdit&&e.productionToEdit.id?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("productions.edit_title"))+" "+e._s(e.productionToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("productions.new_production"))+"\n      ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("productions.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.productionToEdit&&e.productionToEdit.id?s("combobox",{attrs:{label:e.$t("productions.fields.status"),options:e.productionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:e.runConfirmation},model:{value:e.form.project_status_id,callback:function(t){e.$set(e.form,"project_status_id",t)},expression:"form.project_status_id"}}):e._e(),s("combobox",{attrs:{label:e.$t("productions.fields.type"),options:e.productionTypeOptions,localeKeyPrefix:"productions.type."},on:{enter:e.runConfirmation},model:{value:e.form.production_type,callback:function(t){e.$set(e.form,"production_type",t)},expression:"form.production_type"}}),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:e.$t("productions.fields.fps")},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:e.$t("productions.fields.ratio")},on:{enter:e.runConfirmation},model:{value:e.form.ratio,callback:function(t){e.$set(e.form,"ratio",t)},expression:"form.ratio"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:e.$t("productions.fields.resolution")},on:{enter:e.runConfirmation},model:{value:e.form.resolution,callback:function(t){e.$set(e.form,"resolution",t)},expression:"form.resolution"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("div",[s("span",{staticClass:"label"},[e._v(e._s(e.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{accept:".png,.jpg,.jpeg"},on:{fileselected:e.onFileSelected}})],1):e._e()],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),e.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v("\n          "+e._s(e.$t("main.cancel"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.cancel"))+"\n        ")])],1),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v("\n        "+e._s(e.$t("assets.edit_fail"))+"\n      ")]):e._e()])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("7f7f"),s("2f62")),r=s("d065"),c=s("992f"),d=s("4085"),l=s("7bf8");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"edit-production-modal",mixins:[r["a"]],components:{Combobox:c["a"],FileUpload:d["a"],TextField:l["a"]},props:["text","active","cancelRoute","isLoading","isError","errorText","productionToEdit"],data:function(){var e={formData:null,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]};return this.productionToEdit&&this.productionToEdit.id?e.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"}:e.form={name:"",project_status_id:this.productionStatus?this.productionStatus[0].id:null,fps:"",ratio:"",resolution:"",production_type:"short"},e},created:function(){this.resetForm(),this.productionTypeOptions=[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]},mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)},computed:p({},Object(o["c"])(["productions","productionStatus","productionStatusOptions"])),methods:p({},Object(o["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},resetForm:function(){var e=this;this.productionToEdit&&this.productionToEdit.id?(this.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"},this.form.project_status_id=null,this.$nextTick((function(){e.form.project_status_id=e.productionToEdit.project_status_id}))):this.form={name:"",project_status_id:this.productionStatusOptions[0].value,fps:"",ratio:"",resolution:"",production_type:"short"}}}),watch:{productionToEdit:function(){this.resetForm()},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus(),e.formData=null,e.$refs.fileField&&e.$refs.fileField.reset()}),100)}}},h=f,m=(s("eef8"),s("2877")),_=Object(m["a"])(h,n,i,!1,null,"543ea5bd",null);t["a"]=_.exports},"1dc9":function(e,t,s){"use strict";var n=s("8bf0"),i=s.n(n);i.a},"1dea":function(e,t,s){"use strict";var n=s("49c3"),i=s.n(n);i.a},"1e0e":function(e,t,s){},"1e4c":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isSimple?s("span",{staticClass:"select"},[s("select",{ref:"select",staticClass:"select-input",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,n){return s("option",{key:n+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v("\n      "+e._s(e.getOptionLabel(t))+"\n    ")])})),0)]):s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0}},[s("select",{ref:"select",staticClass:"select-input",attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,n){return s("option",{key:n+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v("\n          "+e._s(e.getOptionLabel(t))+"\n        ")])})),0)])])])},i=[],a=(s("c5f6"),{name:"combobox",props:{label:{default:"",type:String},value:{default:0,type:Number},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isSimple:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",parseInt(this.$refs.select.value))},emitEnter:function(){this.$emit("enter",parseInt(this.$refs.select.value))},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}}),o=a,r=(s("e007"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"4e1af092",null);t["a"]=c.exports},2:function(e,t){},2017:function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"g",(function(){return a})),s.d(t,"f",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return l})),s.d(t,"h",(function(){return u}));s("ac4d"),s("8a81"),s("5df3"),s("4f7f");var n=s("75fc"),i=(s("a481"),s("28a5"),s("7f7f"),s("ac6a"),function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={},n={};return e.forEach((function(e){var i;e&&(i=e.name?t?e.name.split(" "):[e.name]:[],h(s,n,e,i))})),s}),a=function(e){var t={},s={};return e.forEach((function(e){var n=e.full_entity_name.replace(/_/g," ").replace(/-/g," "),i=n.split(" ").concat([e.task_type_name,e.task_status_short_name,e.project_name]);h(t,s,e,i)})),t},o=function(e,t){var s={},n={};return e.forEach((function(e){var i=e.entity_name.replace(/_/g," ").replace(/-/g," "),a=i.split(" ").concat([e.task_status_short_name]);e.assignees.forEach((function(e){var s=t[e];a.push(s.first_name,s.last_name)})),h(s,n,e,a)})),s},r=function(e){var t={},s={};return e.forEach((function(e){var n=e.name.replace(/_/g," ").replace(/-/g," "),i=e.asset_type_name.split(" "),a=n.split(" ").concat(i);h(t,s,e,a)})),t},c=function(e){var t={},s={};return e.forEach((function(e){var n=[e.name,e.sequence_name,e.episode_name];h(t,s,e,n)})),t},d=function(e){var t={},s={};return e.forEach((function(e){var n=[e.name,e.episode_name];h(t,s,e,n)})),t},l=function(e){var t={},s={};return e.forEach((function(e){var n=[e.name];h(t,s,e,n)})),t},u=function(e,t){t||(t=[]);var s=t.map((function(t){return f(e,t)})).filter((function(e){return null!==e}));return s.length>0?s.reduce(p,Object(n["a"])(s[0])):null},p=function(e,t){return e.filter((function(e){return t.has(e)}))},f=function(e,t){return t&&t.indexOf("=")<0?e[t.toLowerCase()]?new Set(e[t.toLowerCase()]):new Set([]):null},h=function(e,t,s,n){var i=!0,a=!1,o=void 0;try{for(var r,c=n[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var d=r.value,l="";if(d){var u=!0,p=!1,f=void 0;try{for(var h,m=d[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var _=h.value;l+=_.toLowerCase(),void 0===e[l]&&(e[l]=[],t[l]={}),t[l][s.id]||(e[l].push(s),t[l][s.id]=!0)}}catch(v){p=!0,f=v}finally{try{u||null==m.return||m.return()}finally{if(p)throw f}}}}}catch(v){a=!0,o=v}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return e}},"20e2":function(e,t,s){},2229:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"j",(function(){return o})),s.d(t,"i",(function(){return r})),s.d(t,"g",(function(){return c})),s.d(t,"l",(function(){return d})),s.d(t,"d",(function(){return l})),s.d(t,"k",(function(){return u})),s.d(t,"f",(function(){return p})),s.d(t,"e",(function(){return f})),s.d(t,"c",(function(){return h})),s.d(t,"b",(function(){return m})),s.d(t,"m",(function(){return _})),s.d(t,"h",(function(){return v}));s("7f7f"),s("55dd");var n=s("ceca"),i=s.n(n),a=function(e){return e.sort(i()("canceled").thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},o=function(e){return e.sort(i()("canceled").thenBy((function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0})).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},r=function(e){return e.sort(i()("canceled").thenBy((function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},c=function(e){return e.sort((function(e,t){return e.project_status_name===t.project_status_name?e.name.localeCompare(t.name):-1*e.project_status_name.localeCompare(t.project_status_name)}))},d=function(e,t){return e.sort(i()("priority",-1).thenBy((function(e,t){return e.project_name?e.project_name.localeCompare(t.project_name):0})).thenBy((function(e,s){var n=t[e.task_type_id],i=t[s.task_type_id];return n.name.localeCompare(i.name)})).thenBy((function(e,t){return e.full_entity_name?e.full_entity_name.localeCompare(t.full_entity_name):e.entity_name.localeCompare(t.entity_name)})))},l=function(e){return e.sort(i()("pinned",-1).thenBy("created_at",-1))},u=function(e){return e.sort(i()("for_shots").thenBy("priority").thenBy("name"))},p=function(e){return e.sort(i()("created_at",-1).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},f=function(e){return e.sort(i()("active",-1).thenBy((function(e,t){return e.first_name?e.first_name.localeCompare(t.first_name):-1})).thenBy((function(e,t){return e.last_name?e.last_name.localeCompare(t.last_name):-1})))},h=function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))},m=function(e){return e.sort(i()("created_at",-1))},_=function(e,t){return e.sort((function(e,s){var n=t[e],i=t[s];return n.priority===i.priority?n.name.localeCompare(i.name):n.priority>i.priority?1:-1}))},v=function(e,t){return e.sort(i()("for_shots").thenBy("priority").thenBy("name").thenBy("start_date"))}},"223a":function(e,t,s){},"25e6":function(e,t,s){},"26fc":function(e,t,s){},"271f":function(e,t,s){"use strict";var n=s("bd6d"),i=s.n(n);i.a},"274f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.productionId?s("router-link",{attrs:{to:e.taskTypePath}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+e.color}},[e._v("\n    "+e._s(e.taskType.name)+"\n  ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+e.color}},[e._v("\n  "+e._s(e.taskType.name)+"\n")])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"task-type-name",components:{},props:["taskType","productionId"],computed:c({},Object(o["c"])([]),{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"$grey-strong":this.taskType.color},taskTypePath:function(){var e={name:"task-type",params:{production_id:this.productionId,task_type_id:this.taskType.id,type:this.taskType.for_shots?"shots":"assets"}};return(this.taskType.episode_id||this.$route.params.episode_id)&&(e.name="episode-task-type",e.params.episode_id=this.taskType.episode_id||this.$route.params.episode_id),e}}),methods:c({},Object(o["b"])([]))},l=d,u=(s("3aec"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"69204f82",null);t["a"]=p.exports},2838:function(e,t,s){},2842:function(e,t,s){},2866:function(e,t,s){"use strict";var n=s("d3ce"),i=s.n(n);i.a},"287b":function(e,t,s){},"2bdb":function(e,t,s){"use strict";var n=s("f95d"),i=s.n(n);i.a},"2ca8":function(e,t,s){},3:function(e,t){},"33d0":function(e,t,s){},3455:function(e,t,s){"use strict";s("8615"),s("55dd"),s("456d"),s("7f7f");var n=s("75fc"),i=(s("a481"),s("ac6a"),s("3657")),a=s("09d3"),o={generateTimesheet:function(e,t,s,n,i,a,r,c,d){var l=o.getTimesheetHeaders(n,i,a,r,c,d),u=o.getTimesheetEntries(l,s,t);o.buildCsvFile(e,u)},getTimesheetHeaders:function(e,t,s,n,a,o){var r=["Person"],c=[];for(var d in"month"===e?c=Object(i["f"])(t,n,a):"week"===e?c=Object(i["h"])(t,n,o):"day"===e&&(c=Object(i["b"])(t,s,n,a)),c)r.push(d);return r},getTimesheetEntries:function(e,t,s){var n=[e];return t.forEach((function(t){var i=[t.full_name];e.forEach((function(e,n){n>0&&(n--,s&&s[n]&&s[n][t.id]?i.push(s[n][t.id]/60):i.push("-"))})),n.push(i)})),n},buildCsvFile:function(e,t){var s=[];t.forEach((function(e){var t=e.map((function(e){var t="".concat(e||"");return'"'.concat(t.replace(/"/g,""),'"')})),n=t.join(";");s.push(n)}));var n="data:text/csv;charset=utf-8,"+s.join("\n"),i=encodeURI(n),a=document.createElement("a");return a.setAttribute("href",i),a.setAttribute("download","".concat(e,".csv")),document.body.appendChild(a),a.click(),s},generateStatReports:function(e,t,s,i,a,r){var c=o.getStatReportsHeaders(t,s,i),d=o.getStatReportsEntries(t,s,i,a,r),l=[c].concat(Object(n["a"])(d));return o.buildCsvFile(e,l)},getStatReportsHeaders:function(e,t,s){var n=r(e,t),i=["name","","All",""];return n.reduce((function(e,s){if("all"!==s){var n=t[s].name;return e.concat([n,""])}return e}),i)},getStatReportsEntries:function(e,t,s,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=r(e,t),h=c(e,n);return h.forEach((function(t){var r=l(e,t),c=d(e,r,i,t),h=p(n,s,i,e,r,t,c);o.forEach((function(s){if("all"!==s){var n=e[t][s];if(n){var a=u(e,n,i,t,s);f(e,i,t,s,r,a,h)}else Object.keys(e[t].all).forEach((function(e){h[e]=h[e].concat(["",""])}))}})),a=a.concat(Object.values(h).sort((function(e,t){return e[1].localeCompare(t[1])}))),a.push([""])})),a}},r=function(e,t){return Object.keys(e.all).sort((function(e,s){return"all"===e?1:"all"===s?-1:t[e].priority-t[s].priority}))},c=function(e,t){return Object.keys(e).sort((function(e,s){return"all"===e?-1:"all"===s?1:t[e].name.localeCompare(t[s].name)}))},d=function(e,t,s,n){var i=0;return t.forEach((function(t){var a=e[n].all[t];i+=a[s]})),i},l=function(e,t){return Object.keys(e[t].all)},u=function(e,t,s,n,i){var a=0;return Object.keys(t).forEach((function(t){var o=e[n][i][t];a+=o[s]})),a},p=function(e,t,s,n,i,o,r){var c={};return i.forEach((function(i){var d=t[i],l=e[o],u=l?l.name:"All",p=n[o].all[i],f=p[s],h=Object(a["d"])(f,r);c[i]=[u,d.name,f,h+"%"]})),c},f=function(e,t,s,n,i,o,r){i.forEach((function(i){var c=e[s][n][i],d=0;c&&(d=c[t]);var l=Object(a["d"])(d,o);r[i]=r[i].concat([d,l+"%"])}))};t["a"]=o},3521:function(e,t,s){},3657:function(e,t,s){"use strict";s.d(t,"j",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return d})),s.d(t,"b",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"e",(function(){return f})),s.d(t,"g",(function(){return h})),s.d(t,"c",(function(){return m}));s("c5f6"),s("ac6a");var n=s("75fc"),i=s("7f45"),a=s.n(i),o=function(e,t){var s=t-e+1;return s<0&&(s=0),Object(n["a"])(Array(s).keys()).map((function(t){return t+e}))},r=function(e){var t=a.a.tz(e,"UTC");return a()().diff(t,"days")>1?t.format("YYYY-MM-DD HH:mm"):a()(t.format()).fromNow()},c=function(e){var t=a()().year();return a()("".concat(t,"-").concat(e),"YYYY-M").format("MMM")},d=function(e,t,s){return o(1,t===e?s:12)},l=function(e,t,s,n){if(s===e&&n===t)return o(1,a()().date());var i=a()("".concat(e,"-").concat(Number(t)),"YYYY-M","en");return o(1,i.endOf("month").date())},u=function(e,t){return o(1,t===e?a()().week():52)},p=function(e){var t=a()();return e.forEach((function(e){e.startDate.isBefore(t)&&(t=e.startDate.clone())})),t},f=function(e){var t=a()().add(3,"months");return e.forEach((function(e){e.endDate.isAfter(t)&&(t=e.endDate.clone())})),t},h=function(e){return e?a()(e,"YYYY-MM-DD","en"):a()()},m=function(e,t){return t?a()(t,"YYYY-MM-DD","en"):e.clone().add("days",1)}},"392f":function(e,t,s){"use strict";var n=s("b493"),i=s.n(n);i.a},"3aec":function(e,t,s){"use strict";var n=s("2842"),i=s.n(n);i.a},"3aff":function(e,t,s){},"3c7c":function(e,t,s){"use strict";var n=s("c053"),i=s.n(n);i.a},"3cda":function(e,t,s){"use strict";var n=s("7156"),i=s.n(n);i.a},4082:function(e,t,s){"use strict";var n=s("a81e"),i=s.n(n);i.a},4084:function(e,t,s){"use strict";var n=s("5efb"),i=s.n(n);i.a},4085:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"file-upload-wrapper"},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("input",{ref:"uploadInput",staticClass:"input-file",attrs:{type:"file",accept:e.accept,name:e.uploadFieldName,disabled:e.isSaving},on:{change:function(t){return e.filesChange(t.target.name,t.target.files)}}})])])])},i=[],a=(s("7f7f"),{name:"file-upload",props:{uploadFieldName:{default:"file",type:String},accept:{default:".csv",type:String}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},computed:{},watch:{},methods:{filesChange:function(e,t){var s=new FormData;s.append(this.uploadFieldName,t[0],t[0].name),this.$emit("fileselected",s)},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""}},mounted:function(){this.reset()}}),o=a,r=(s("4082"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"cff1c5ec",null);t["a"]=c.exports},"41e2":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"picture-player"},[s("div",{ref:"picture-wrapper",staticClass:"picture-wrapper"},[s("div",{staticClass:"canvas-wrapper"},[e.readOnly?e._e():s("canvas",{ref:"annotation-canvas",staticClass:"canvas",style:{display:"block"},attrs:{id:"annotation-canvas"}})]),s("img",{ref:"picture",attrs:{src:e.picturePath}}),e.isLoading?s("spinner"):e._e()],1),s("div",{ref:"button-bar",staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[e.readOnly?e._e():s("button",{staticClass:"button flexrow-item",on:{click:e.onPreviousClicked}},[s("chevron-left-icon",{staticClass:"icon"})],1),e.readOnly?e._e():s("span",{staticClass:"flexrow-item bar-element"},[e._v("\n        "+e._s(e.currentIndex)+" / "+e._s(e.preview.previews.length)+"\n      ")]),e.readOnly?e._e():s("button",{staticClass:"button flexrow-item",on:{click:e.onNextClicked}},[s("chevron-right-icon",{staticClass:"icon"})],1),e.readOnly?e._e():s("button",{staticClass:"button flexrow-item",on:{click:e.onAddPreviewClicked}},[s("plus-icon",{staticClass:"icon"})],1),e.currentIndex>1&&!e.light&&!e.readOnly?s("button",{staticClass:"button flexrow-item",on:{click:e.onRemovePreviewClicked}},[s("trash-icon",{staticClass:"icon"})],1):e._e()]),s("div",{staticClass:"right flexrow"},[e.isFullScreenEnabled&&!e.readOnly?s("button",{staticClass:"button flexrow-item",on:{click:e.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):e._e(),e.isFullScreenEnabled&&!e.readOnly?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isDrawing},on:{click:e.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):e._e(),e.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:e.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):e._e(),e.readOnly?e._e():s("a",{staticClass:"button flexrow-item",attrs:{href:e.pictureDlPath}},[s("download-icon",{staticClass:"icon"})],1)])])])},i=[],a=(s("8e6e"),s("456d"),s("bd86")),o=(s("6762"),s("2fdb"),s("ac6a"),s("75fc")),r=s("7a94"),c=s("0a35"),d=s("be83");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"picture-viewer",components:{ChevronLeftIcon:c["e"],ChevronRightIcon:c["f"],DownloadIcon:c["i"],Edit2Icon:c["j"],MaximizeIcon:c["r"],PlusIcon:c["w"],Spinner:d["a"],TrashIcon:c["E"],XIcon:c["I"]},props:{preview:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{currentIndex:1,isLoading:!0,isDrawing:!1,annotations:this.preview.annotations?Object(o["a"])(this.preview.annotations):[],fabricCanvas:null}},mounted:function(){var e=this;this.container.style.height=this.getDefaultHeight()+"px",setTimeout((function(){e.picture.complete?(e.isLoading=!1,e.mountPicture()):e.picture.addEventListener("load",(function(){e.isLoading=!1,e.mountPicture()})),window.addEventListener("keydown",e.onKeyDown),window.addEventListener("resize",e.onWindowResize)}),0)},computed:{container:function(){return this.$refs.container},canvas:function(){return this.$refs.canvas},picture:function(){return this.$refs.picture},pictureWrapper:function(){return this.$refs["picture-wrapper"]},picturePath:function(){var e=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(e,".png")},pictureDlPath:function(){var e=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(e,"/download")},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("picture").webkitRequestFullScreen)},currentPreview:function(){return this.preview.previews[this.currentIndex-1]}},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},mountPicture:function(){this.fabricCanvas||this.setupFabricCanvas(),this.container.style.height=this.getDefaultHeight()+"px",this.loadAnnotation(0),this.$nextTick(this.fixCanvasSize)},clearCanvas:function(){var e=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach((function(t){e.fabricCanvas.remove(t)}))},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&(!this.light||this.readOnly)?500:200},getDimensions:function(){var e=1;this.picture.naturalWidth&&(e=this.picture.naturalHeight/this.picture.naturalWidth);var t=this.container.offsetWidth-1,s=Math.floor(t*e);return s>this.getDefaultHeight()&&(s=this.getDefaultHeight()),s-=32,t=Math.floor(s/e),{width:t,height:s}},setupFabricCanvas:function(){if(!this.readOnly){var e=this.getDimensions(),t=e.width,s=e.height,n=new r["fabric"].Canvas("annotation-canvas");this.container.style.height=this.getDefaultHeight()+"px",n.setDimensions({width:t,height:s}),n.freeDrawingBrush.color="#ff3860",n.freeDrawingBrush.width=4,n.off("object:scaling",this.onScaled),n.on("object:scaling",this.onScaled),n.off("object:scaled",this.onScaled),n.on("object:scaled",this.onScaled),n.off("object:moved",this.saveAnnotations),n.off("object:moved",this.saveAnnotations),n.on("object:moved",this.saveAnnotations),n.off("object:scaled",this.saveAnnotations),n.on("object:scaled",this.saveAnnotations),n.off("mouse:up",this.onMouseUp),n.on("mouse:up",this.onMouseUp),this.fabricCanvas=n}},onAddPreviewClicked:function(){this.$emit("add-preview")},onRemovePreviewClicked:function(){this.$emit("remove-extra-preview",this.currentPreview)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onPencilAnnotateClicked:function(){this.fabricCanvas.isDrawingMode?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,setTimeout((function(){e.clearCanvas(),e.mountPicture(),e.reloadAnnotations(),e.$nextTick(e.fixCanvasSize)}),10))},onKeyDown:function(e){46===e.keyCode&&this.fabricCanvas&&this.deleteSelection()},onMouseUp:function(){this.isDrawing&&this.saveAnnotations()},onScaled:function(e){var t=e.target;t&&t.set({strokeWidth:8/(t.scaleX+t.scaleY)})},saveAnnotations:function(){var e=this,t=this.getAnnotation(0);if(this.fabricCanvas.getObjects().forEach((function(t){"path"===t.type&&(t.canvasWidth||(t.canvasWidth=e.fabricCanvas.width),t.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),t)t.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),t.width=this.fabricCanvas.width,t.height=this.fabricCanvas.height;else{this.annotations=[];var s=this.getDimensions(),n={time:0,width:s.width,height:s.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])};this.annotations.push(n)}this.$emit("annotation-changed",{preview:this.currentPreview,annotations:Object(o["a"])(this.annotations)})},getAnnotation:function(e){return Object(o["a"])(this.annotations)[e]},clearAnnotations:function(){var e=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach((function(t){["rect","circle","path"].includes(t.type)&&e.fabricCanvas.remove(t)}))},loadAnnotation:function(e){var t=this,s=this.getAnnotation(e);if(this.clearAnnotations(),s){var n=this.getDimensions(),i=1,a=1;s.width&&(i=n.width/s.width,a=n.width/s.width),s.height&&(a=n.height/s.height),s.drawing.objects.forEach((function(e){var s={left:e.left*i,top:e.top*a,fill:"transparent",stroke:"#ff3860",radius:e.radius*i,width:e.width,height:e.height,scaleX:e.scaleX*i,scaleY:e.scaleY*a};if("path"===e.type){var o=1;e.canvasWidth&&(o=e.canvasWidth/n.width);var c=new r["fabric"].Path(e.path,u({},s,{strokeWidth:3*o,canvasWidth:e.canvasWidth}));c.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(c)}}))}},deleteSelection:function(){this.fabricCanvas.remove(this.fabricCanvas.getActiveObject()),this.saveAnnotations()},reloadAnnotations:function(){return this.currentPreview.annotations?this.annotations=this.currentPreview.annotations:this.annotations=[],this.annotations},onPreviousClicked:function(){this.currentIndex>1?this.currentIndex--:this.currentIndex=this.preview.previews.length},onNextClicked:function(){this.currentIndex<this.preview.previews.length?this.currentIndex++:this.currentIndex=1},displayFirst:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},displayLast:function(){this.currentIndex=this.preview.previews.length},reset:function(){this.clearAnnotations(),this.annotations=[],this.reloadAnnotations(),this.mountPicture(),this.isDrawing=!1,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1)},fixCanvasSize:function(){var e=this,t=this.getDimensions(),s=t.width,n=t.height;if(this.picture.width=s,this.picture.height=n,this.fabricCanvas){this.fabricCanvas.setDimensions({width:s,height:n});for(var i=document.getElementsByClassName("canvas-container"),a=0;a<i.length;a++){var o=i[a];o.style.width=s+"px",o.style.height=n+"px",o.style.margin="auto"}i=document.getElementsByClassName("upper-canvas");for(var r=0;r<i.length;r++){var c=i[r];c.style.width=s+"px",c.style.height=n+"px",c.setAttribute("width",s),c.setAttribute("height",n)}setTimeout((function(){e.fabricCanvas.calcOffset()}),10)}}},watch:{preview:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},currentIndex:function(){this.reset()},light:function(){this.onWindowResize()}}},f=p,h=(s("028b"),s("2877")),m=Object(h["a"])(f,n,i,!1,null,"d4aa197a",null);t["a"]=m.exports},4267:function(e,t,s){"use strict";var n=s("8485"),i=s.n(n);i.a},4279:function(e,t,s){},4360:function(e,t,s){"use strict";var n={};s.r(n),s.d(n,"route",(function(){return c}));var i,a=s("ba4c"),o=s.n(a),r=s("2f62"),c=function(e){return e.route},d=(s("8e6e"),s("456d"),s("20d6"),s("ac6a"),s("7f7f"),s("7514"),s("bd86")),l=s("edbf"),u={getAssetTypes:function(e){l["a"].get("/api/data/asset-types",e)},getAssetType:function(e,t){l["a"].get("/api/data/entity-types/".concat(e),t)},newAssetType:function(e,t){var s={name:e.name};l["a"].post("/api/data/entity-types",s,t)},updateAssetType:function(e,t){var s={name:e.name};l["a"].put("/api/data/entity-types/".concat(e.id),s,t)},deleteAssetType:function(e,t){l["a"].del("/api/data/entity-types/".concat(e.id),t)}},p=s("9fb0"),f=s("2229");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _,v={assetTypes:[],assetTypeMap:{},isAssetTypesLoading:!1,isAssetTypesLoadingError:!1,editAssetType:{isLoading:!1,isError:!1},deleteAssetType:{isLoading:!1,isError:!1}},b=m({},v),g={assetTypes:function(e){return e.assetTypes},assetTypeMap:function(e){return e.assetTypeMap},isAssetTypesLoading:function(e){return e.isAssetTypesLoading},isAssetTypesLoadingError:function(e){return e.isAssetTypesLoadingError},editAssetType:function(e){return e.editAssetType},deleteAssetType:function(e){return e.deleteAssetType},getAssetType:function(e,t){return function(t){return e.assetTypes.find((function(e){return e.id===t}))}},getAssetTypeOptions:function(e){return e.assetTypes.map((function(e){return{label:e.name,value:e.id}}))}},y={loadAssetTypes:function(e,t){var s=e.commit;e.state;s(p["Ic"]),u.getAssetTypes((function(e,n){e?s(p["Hc"]):s(p["Gc"],n),t&&t(e)}))},loadAssetType:function(e,t){var s=e.commit;e.state;u.getAssetType(t,(function(e,t){e?console.error(e):s(p["Lb"],t)}))},newAssetType:function(e,t){var s=e.commit;e.state;s(p["Nb"],t.data),u.newAssetType(t.data,(function(e,n){e?s(p["Mb"]):s(p["Lb"],n),t.callback&&t.callback(e)}))},editAssetType:function(e,t){var s=e.commit;e.state;s(p["Nb"]),u.updateAssetType(t.data,(function(e,n){e?s(p["Mb"]):s(p["Lb"],n),t.callback&&t.callback(e)}))},deleteAssetType:function(e,t){var s=e.commit;e.state;s(p["ab"]);var n=t.assetType;u.deleteAssetType(n,(function(e){e?s(p["Z"]):s(p["Y"],n),t.callback&&t.callback(e)}))}},k=(i={},Object(d["a"])(i,p["Ic"],(function(e){e.isAssetTypesLoading=!0,e.isAssetTypesLoadingError=!1})),Object(d["a"])(i,p["Hc"],(function(e){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!0})),Object(d["a"])(i,p["Gc"],(function(e,t){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!1,e.assetTypes=t,e.assetTypes=Object(f["c"])(e.assetTypes),e.assetTypeMap={},e.assetTypes.forEach((function(t){e.assetTypeMap[t.id]=t}))})),Object(d["a"])(i,p["Nb"],(function(e,t){e.editAssetType.isLoading=!0,e.editAssetType.isError=!1})),Object(d["a"])(i,p["Mb"],(function(e){e.editAssetType.isLoading=!1,e.editAssetType.isError=!0})),Object(d["a"])(i,p["Lb"],(function(e,t){var s=g.getAssetType(e)(t.id);s&&s.id?Object.assign(s,t):(e.assetTypes.push(t),e.assetTypeMap[t.id]=t),e.editAssetType={isLoading:!1,isError:!1},e.assetTypes=Object(f["c"])(e.assetTypes)})),Object(d["a"])(i,p["ab"],(function(e){e.deleteAssetType={isLoading:!0,isError:!1}})),Object(d["a"])(i,p["Z"],(function(e){e.deleteAssetType={isLoading:!1,isError:!0}})),Object(d["a"])(i,p["Y"],(function(e,t){var s=e.assetTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.assetTypes.splice(s,1),delete e.assetTypeMap[t.id],e.deleteAssetType={isLoading:!1,isError:!1}})),Object(d["a"])(i,p["we"],(function(e){Object.assign(e,m({},v))})),i),S={state:b,getters:g,actions:y,mutations:k},w=(s("6762"),s("2fdb"),s("5df3"),s("8615"),s("75fc")),O=(s("55dd"),s("6b54"),{getAssets:function(e,t,s){var n="/api/data/assets/with-tasks";e&&(n+="?project_id=".concat(e.id)),t&&(n+="&episode_id=".concat(t.id)),l["a"].get(n,s)},getAsset:function(e){return l["a"].getModel("assets",e)},newAsset:function(e,t){var s={name:e.name,description:e.description,entity_type_id:e.entity_type_id,project_id:e.project_id,data:e.data};"null"!==e.source_id&&(s.source_id=e.source_id),l["a"].post("/api/data/entities/",s,t)},updateAsset:function(e,t){var s={name:e.name,description:e.description,entity_type_id:e.entity_type_id,project_id:e.project_id,data:e.data};("null"===e.source_id||e.source_id)&&(s.source_id=e.source_id),l["a"].put("/api/data/entities/".concat(e.id),s,t)},deleteAsset:function(e,t){e.canceled?l["a"].del("/api/data/assets/".concat(e.id,"?force=true"),t):l["a"].del("/api/data/assets/".concat(e.id),t)},restoreAsset:function(e,t){var s={canceled:!1};l["a"].put("/api/data/entities/".concat(e.id),s,t)},postCsv:function(e,t,s){l["a"].post("/api/import/csv/projects/".concat(e.id,"/assets"),t,s)}}),T={getSequenceCasting:function(e,t){var s="/api/data/projects/".concat(e,"/sequences/").concat(t,"/casting");return l["a"].pget(s)},getAssetTypeCasting:function(e,t){var s="/api/data/projects/".concat(e,"/asset-types/").concat(t,"/casting");return l["a"].pget(s)},updateCasting:function(e,t,s,n){var i="/api/data/projects/".concat(e,"/entities/").concat(t,"/casting");return l["a"].pput(i,s)},postCastingCsv:function(e,t){var s="/api/import/csv/projects/".concat(e.id,"/casting");return l["a"].ppost(s,t)},getAssetCastIn:function(e){return l["a"].pget("/api/data/assets/".concat(e.id,"/cast-in"))},getShotCasting:function(e){var t="/api/data/projects/".concat(e.project_id,"/entities/")+"".concat(e.id,"/casting");return l["a"].pget(t)}},C=s("ce6b"),P=s("2f24"),E={getTask:function(e,t){l["a"].get("/api/data/tasks/".concat(e,"/full"),t)},updateTask:function(e,t,s){l["a"].put("/api/data/tasks/".concat(e),t,s)},getTaskStatuses:function(e){l["a"].get("/api/data/task-status",e)},getTaskSubscribed:function(e,t){l["a"].get("/api/data/user/tasks/".concat(e,"/subscribed"),t)},subscribeToTask:function(e,t){l["a"].post("/api/actions/user/tasks/".concat(e,"/subscribe"),{},t)},unsubscribeFromTask:function(e,t){l["a"].del("/api/actions/user/tasks/".concat(e,"/unsubscribe"),t)},subscribeToSequence:function(e,t,s){l["a"].post("/api/actions/user/sequences/".concat(e,"/task-types/")+"".concat(t,"/subscribe"),{},s)},unsubscribeFromSequence:function(e,t,s){l["a"].del("/api/actions/user/sequences/".concat(e,"/task-types/")+"".concat(t,"/unsubscribe"),s)},getTaskComments:function(e,t){l["a"].get("/api/data/tasks/".concat(e,"/comments"),t)},getTaskPreviews:function(e,t){l["a"].get("/api/data/tasks/".concat(e,"/previews"),t)},commentTask:function(e,t){var s={task_status_id:e.taskStatusId,comment:e.comment};l["a"].post("/api/actions/tasks/".concat(e.taskId,"/comment"),s,t)},getTaskComment:function(e,t){l["a"].get("/api/data/comments/".concat(e.id),t)},editTaskComment:function(e,t){var s={text:e.text,checklist:e.checklist};l["a"].put("/api/data/comments/".concat(e.id),s,t)},deleteTaskComment:function(e,t,s){l["a"].del("/api/data/tasks/".concat(e,"/comments/").concat(t),s)},createTasks:function(e,t){var s=e.task_type_id,n=e.type,i=e.project_id;l["a"].post("/api/actions/task-types/".concat(s,"/").concat(n,"/create-tasks?project_id=").concat(i),{},t)},createTask:function(e,t){var s=e.entity_id,n=e.task_type_id,i=e.type,a=e.project_id;l["a"].post("/api/actions/task-types/".concat(n,"/").concat(i,"/create-tasks?project_id=").concat(a,"&id=").concat(s),{},t)},deleteTask:function(e,t){l["a"].del("/api/data/tasks/".concat(e.id,"?force=true"),t)},deleteAllTasks:function(e,t,s){l["a"].del("/api/data/projects/".concat(e,"/task-types/").concat(t,"/tasks"),s)},addPreview:function(e,t){var s=e.taskId,n=e.commentId;l["a"].post("/api/actions/tasks/".concat(s,"/comments/").concat(n,"/add-preview"),{},t)},addExtraPreview:function(e,t,s,n){l["a"].post("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/preview-files/")+"".concat(e),{},n)},deletePreview:function(e,t,s,n){return new Promise((function(n,i){l["a"].del("/api/actions/tasks/".concat(e,"/comments/").concat(t,"/preview-files/")+"".concat(s),(function(e,t){e?i(e):n(t)}))}))},setPreview:function(e,t,s){l["a"].put("/api/actions/entities/".concat(e,"/set-main-preview/").concat(t),{},s)},uploadPreview:function(e,t,s){l["a"].post("/api/pictures/preview-files/".concat(e),t,s)},updatePreviewAnnotation:function(e,t){return new Promise((function(s,n){l["a"].put("/api/data/preview-files/".concat(e.id),{annotations:t},(function(e,t){e?n(e):s(t)}))}))},getPreviewFile:function(e){return new Promise((function(t,s){l["a"].get("/api/data/preview-files/".concat(e),(function(e,n){e?s(e):t(n)}))}))},assignTasks:function(e,t,s){l["a"].put("/api/actions/persons/".concat(e,"/assign"),{task_ids:t},s)},unassignTasks:function(e,t){l["a"].put("/api/actions/tasks/clear-assignation",{task_ids:e},t)},pinComment:function(e){return new Promise((function(t,s){var n={pinned:e.pinned};l["a"].put("/api/data/comments/".concat(e.id),n,(function(e,n){e?s(e):t(n)}))}))}},j={getPlaylists:function(e,t,s){var n="/api/data/projects/".concat(e.id);n+=t?"/episodes/".concat(t.id,"/playlists"):"/playlists",l["a"].get(n,s)},getPlaylist:function(e,t,s){var n="/api/data/projects/".concat(e.id,"/playlists/").concat(t.id);l["a"].get(n,s)},getShotPreviewFiles:function(e){var t="/api/data/shots/".concat(e.id,"/preview-files");return l["a"].pget(t)},getEntityPreviewFiles:function(e,t){var s="/api/data/playlists/entities/".concat(e.id,"/preview-files");l["a"].get(s,t)},newPlaylist:function(e,t){var s={name:e.name,project_id:e.production_id,episode_id:e.episode_id};l["a"].post("/api/data/playlists/",s,t)},updatePlaylist:function(e,t){var s={name:e.name};e.shots&&(s.shots=e.shots),l["a"].put("/api/data/playlists/".concat(e.id),s,t)},deletePlaylist:function(e,t){l["a"].del("/api/data/playlists/".concat(e.id),t)},deleteBuildJob:function(e,t){return new Promise((function(t,s){var n="/api/data/playlists/".concat(e.playlist_id,"/jobs/").concat(e.id);l["a"].del(n,(function(e){e?s(e):t()}))}))},runPlaylistBuild:function(e){return new Promise((function(t,s){var n="/api/data/playlists/".concat(e.id,"/build/mp4");l["a"].get(n,(function(e){e?s(e):t()}))}))}},D=s("52ad"),x=s("ef8b");function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var L,I={taskMap:{},taskStatusMap:{},taskStatuses:[],taskComments:{},taskPreviews:{},taskEntityPreviews:{},selectedTasks:{},selectedValidations:{},taskSearchQueries:[],nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,isShowInfos:!0,isSavingCommentPreview:!1,previewFormData:null,lastCommentDraft:""},$=M({},I),q={getPerson:function(e){return D["a"].getters.getPerson(D["a"].state,D["a"].getters)(e)},getTaskType:function(e){return x["a"].state.taskTypeMap[e]}},N={taskMap:function(e){return e.taskMap},getTaskComments:function(e,t){return function(t){return e.taskComments[t]}},getTaskPreviews:function(e,t){return function(t){return e.taskPreviews[t]}},getTaskComment:function(e,t){return function(t,s){return e.taskComments[t].find((function(e){return e.id===s}))}},getTaskStatus:function(e,t){return function(t){return e.taskStatuses.find((function(e){return e.id===t}))}},taskStatusOptions:function(e){return e.taskStatuses.map((function(e){return{label:e.short_name,value:e.id,color:e.color,isArtistAllowed:e.is_artist_allowed}}))},selectedTasks:function(e){return e.selectedTasks},nbSelectedTasks:function(e){return e.nbSelectedTasks},nbSelectedValidations:function(e){return e.nbSelectedValidations},taskSearchQueries:function(e){return e.taskSearchQueries},isShowAssignations:function(e){return e.isShowAssignations},isShowInfos:function(e){return e.isShowInfos},taskEntityPreviews:function(e){return e.taskEntityPreviews},previewFormData:function(e){return e.previewFormData},isSavingCommentPreview:function(e){return e.isSavingCommentPreview},lastCommentDraft:function(e){return e.lastCommentDraft}},F={loadTask:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.callback;E.getTask(n,(function(e,t){e||s(p["td"],t),i&&i(e,t)}))},loadTaskSubscribed:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.callback;E.getTaskSubscribed(n,(function(e,t){e||s(p["yd"],{taskId:n,subscribed:t}),i&&i(e,t)}))},subscribeToTask:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){E.subscribeToTask(t,(function(i){i?n(i):(s(p["yd"],{taskId:t,subscribed:!0}),e())}))}))},subscribeToSequence:function(e,t){var s=e.commit,n=(e.state,t.sequenceId),i=t.taskTypeId;return new Promise((function(e,t){E.subscribeToSequence(n,i,(function(a){a?t(a):(s(p["kd"],{sequenceId:n,taskTypeId:i,subscribed:!0}),e())}))}))},unsubscribeFromTask:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){E.unsubscribeFromTask(t,(function(i){i?n(i):(s(p["yd"],{taskId:t,subscribed:!1}),e())}))}))},unsubscribeFromSequence:function(e,t){var s=e.commit,n=(e.state,t.sequenceId),i=t.taskTypeId;return new Promise((function(e,t){E.unsubscribeFromSequence(n,i,(function(a){a?t(a):(s(p["kd"],{sequenceId:n,taskTypeId:i,subscribed:!1}),e())}))}))},loadTaskComments:function(e,t){var s=e.commit,n=(e.state,e.dispatch),i=t.taskId,a=t.entityId,o=t.callback;E.getTaskComments(i,(function(e,t){e?o(e):(s(p["sd"],{comments:t,taskId:i}),n("loadTaskEntityPreviewFiles",{callback:o,entityId:a}))}))},loadTaskEntityPreviewFiles:function(e,t){var s=e.commit,n=(e.state,t.callback),i=t.entityId,a={id:i};j.getEntityPreviewFiles(a,(function(e,t){s(p["ud"],t),n&&n(e)}))},commentTask:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.taskStatusId,a=t.comment,o=t.callback;E.commentTask({taskId:n,taskStatusId:i,comment:a},(function(e,t){e||s(p["Wd"],{comment:t,taskId:n}),o&&o(e,t)}))},loadComment:function(e,t){var s=e.commit,n=(e.state,t.commentId),i=t.callback;E.getTaskComment({id:n},(function(e,t){e||s(p["Wd"],{comment:t,taskId:t.object_id}),i&&i(e,t)}))},createTasks:function(e,t){e.commit,e.state;var s={task_type_id:t.task_type_id,type:t.type,project_id:t.project_id};E.createTasks(s,(function(e,s){t.callback&&t.callback(e,s)}))},createSelectedTasks:function(e,t){var s=e.commit,n=e.state,i=t.type,a=t.projectId,o=t.callback;P["a"].eachSeries(Object.keys(n.selectedValidations),(function(e,t){var o=n.selectedValidations[e],r={entity_id:o.entity.id,task_type_id:o.column.id,type:i,project_id:a};E.createTask(r,(function(e,n){s(p["S"],n),n.forEach((function(e){s(p["oe"],o),e.assigneesInfo=[],o.task=e,s(p["l"],o)})),t(e,n[0])}))}),o)},deleteSelectedTasks:function(e){var t=e.commit,s=e.state;return new Promise((function(e,n){var i=Object.keys(s.selectedTasks);P["a"].eachSeries(i,(function(e,n){var i=s.taskMap[e];E.deleteTask(i,(function(e){e||t(p["xb"],i),n(e)}))}),(function(t){t?n(t):e()}))}))},deleteAllTasks:function(e,t){e.commit,e.state;var s=t.projectId,n=t.taskTypeId;return new Promise((function(e,t){E.deleteAllTasks(s,n,(function(s){s?t(s):e()}))}))},createTask:function(e,t){var s=e.commit,n=(e.state,e.rootGetters,t.entityId),i=t.projectId,a=t.taskTypeId,o=t.type;return new Promise((function(e,t){var r={entity_id:n,task_type_id:a,type:o,project_id:i};E.createTask(r,(function(n,i){n?t(n):(s(p["Xd"],i[0]),e())}))}))},changeSelectedTaskStatus:function(e,t){var s=e.commit,n=e.state,i=t.taskStatusId,a=t.comment,o=t.callback;P["a"].eachSeries(Object.keys(n.selectedTasks),(function(e,t){var o=n.taskMap[e];o&&o.task_status_id!==i?F.commentTask({commit:s,state:n},{taskId:e,taskStatusId:i,comment:a||"",callback:function(e){t(e)}}):t()}),(function(e){o(e)}))},changeSelectedPriorities:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=t.priority,o=t.callback;P["a"].eachSeries(Object.keys(n.selectedTasks),(function(e,t){var o=n.taskMap[e],r=i.taskTypeMap[o.task_type_id];o&&o.priority!==a?E.updateTask(e,{priority:a},(function(e,n){e||s(p["lc"],{task:n,taskType:r}),t(e)})):t()}),(function(e){o(e)}))},updateTask:function(e,t){var s=e.commit,n=t.taskId,i=t.data;return E.updateTask(n,i,(function(){s(p["kc"],{taskId:n,data:i})}))},changeSelectedEstimations:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters;return new Promise((function(e,a){P["a"].eachSeries(Object.keys(n.selectedTasks),(function(e,a){var o=n.taskMap[e],r=i.taskTypeMap[o.task_type_id];o&&o.estimation!==t?E.updateTask(e,{estimation:t},(function(e,t){e||s(p["lc"],{task:t,taskType:r}),a(e)})):a()}),(function(t){t?a(t):e()}))}))},getTask:function(e,t){var s=e.commit,n=e.rootGetters,i=t.taskId,a=t.callback;E.getTask(i,(function(e,t){if(!e){var i=n.taskTypeMap[t.task_type_id];s(p["lc"],{task:t,taskType:i})}a&&a(e)}))},deleteTask:function(e,t){var s=e.commit,n=t.task,i=t.callback;E.deleteTask(n,(function(e){e||s(p["xb"],n),i&&i(e)}))},editTaskComment:function(e,t){var s=e.commit,n=t.taskId,i=t.comment,a=t.checklist,o=t.callback;a&&s(p["tf"],{taskId:n,comment:i,checklist:a}),E.editTaskComment(i,(function(e,t){e||s(p["Ob"],{taskId:n,comment:t}),o&&o(e)}))},deleteTaskComment:function(e,t){var s=e.commit,n=e.rootState,i=t.taskId,a=t.commentId,o=t.callback,r=n.taskStatus.taskStatus.find((function(e){return"todo"===e.short_name}));E.deleteTaskComment(i,a,(function(e){e||s(p["bb"],{commentId:a,taskId:i,taskStatusMap:n.taskStatus.taskStatusMap,todoStatus:r}),o&&o(e)}))},commentTaskWithPreview:function(e,t){var s=e.commit,n=(e.getters,e.state),i=t.taskId,a=t.commentText,o=t.taskStatusId,r=t.callback,c={taskId:i,taskStatusId:o,comment:a};s(p["i"]),E.commentTask(c,(function(e,t){if(e)r(e);else{var a={taskId:i,commentId:t.id};E.addPreview(a,(function(e,a){e&&r?r(e):E.uploadPreview(a.id,n.previewFormData,(function(e,n){e||(s(p["Wd"],{comment:t,taskId:i}),s(p["h"],{preview:n,taskId:i,commentId:t.id,comment:t})),r&&r(e,n)}))}))}}))},addCommentExtraPreview:function(e,t){var s=e.commit,n=e.getters,i=e.state,a=t.taskId,o=t.commentId,r=t.previewId,c=t.callback;E.addExtraPreview(r,a,o,(function(e,t){e&&c?c(e):E.uploadPreview(t.id,i.previewFormData,(function(e){if(!e){var i=n.getTaskComment(a,o);t.extension="png",s(p["h"],{preview:t,taskId:a,commentId:o,comment:i})}c&&c(e,t)}))}))},deleteTaskPreview:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.commentId,a=t.previewId;return new Promise((function(e,t){E.deletePreview(n,i,a).then((function(){s(p["ob"],{taskId:n,previewId:a}),e()})).catch(t)}))},changeCommentPreview:function(e,t){var s=e.commit,n=e.state,i=t.comment,a=t.preview,o=(t.taskId,t.callback),r=n.previewFormData.get("file").name,c=r.slice(r.length-4);a.extension=c,E.uploadPreview(a.id,n.previewFormData,(function(e){e||s(p["J"],{comment:i,preview:a}),o&&o(e,c)}))},setPreview:function(e,t){var s=e.commit,n=e.state,i=t.taskId,a=t.entityId,o=t.previewId,r=t.callback,c=n.taskMap;E.setPreview(a,o,(function(e,t){e&&r?r(e):r&&(s(p["Ze"],{taskId:i,entityId:a,previewId:o,taskMap:c}),r(e,t))}))},updatePreviewAnnotation:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.preview,a=t.annotations;return new Promise((function(e,t){E.updatePreviewAnnotation(i,a).then((function(t){s(p["wf"],{taskId:n,preview:i,annotations:a}),e()})).catch((function(e){console.log(e),t(e)}))}))},refreshPreview:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.previewId;return new Promise((function(e,t){E.getPreviewFile(i).then((function(t){s(p["wf"],{taskId:n,preview:t,annotations:t.annotations}),e()})).catch(t)}))},assignSelectedTasks:function(e,t){var s=e.commit,n=e.state,i=t.personId,a=t.callback,o=Object.keys(n.selectedTasks);E.assignTasks(i,o,(function(e){e||s(p["r"],{selectedTaskIds:o,personId:i}),a&&a(e)}))},unassignSelectedTasks:function(e,t){var s=e.commit,n=e.state,i=(t.personId,t.callback),a=Object.keys(n.selectedTasks);E.unassignTasks(a,(function(e){e||s(p["rf"],a),i&&i(e)}))},showAssignations:function(e){var t=e.commit;e.state;t(p["Se"],!0)},hideAssignations:function(e){var t=e.commit;e.state;t(p["Se"],!1)},showInfos:function(e){var t=e.commit;e.state;t(p["Te"],!0)},hideInfos:function(e){var t=e.commit;e.state;t(p["Te"],!1)},loadPreviewFileFormData:function(e,t){var s=e.commit;s("PREVIEW_FILE_SELECTED",t)},addSelectedTask:function(e,t){var s=e.commit;s(p["l"],t)},addSelectedTasks:function(e,t){var s=e.commit;s(p["m"],t)},clearSelectedTasks:function(e,t){var s=e.commit;s(p["N"],t)},removeSelectedTask:function(e,t){var s=e.commit;s(p["oe"],t)},saveTaskSearch:function(e,t){var s=e.commit,n=e.rootGetters,i=t.searchQuery,a=t.entityType;return new Promise((function(e,t){var o=$.taskSearchQueries.find((function(e){return e.name===i})),r=n.currentProduction;o?e():C["a"].createFilter("task",i,i,r.id,a,(function(n,i){s(p["Ie"],{searchQuery:i,production:r}),n?t(n):e(i)}))}))},removeTaskSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;C["a"].removeFilter(t,(function(n){s(p["ue"],{searchQuery:t,production:a}),n?i(n):e()}))}))},pinComment:function(e,t){var s=e.commit;s(p["de"],t),E.pinComment(t)}},R=(_={},Object(d["a"])(_,p["Cc"],(function(e,t){var s=t.production,n=t.userFilters;n.task&&n.task[s.id]?e.taskSearchQueries=n.task[s.id]:e.taskSearchQueries=[]})),Object(d["a"])(_,p["md"],(function(e,t){var s=t.production,n=t.userFilters;n.task&&n.task[s.id]?e.taskSearchQueries=n.task[s.id]:e.taskSearchQueries=[]})),Object(d["a"])(_,p["td"],(function(e,t){Object.assign(t,{project_name:t.project.name,entity_type_name:t.entity_type.name}),"Shot"===t.entity_type.name?t.episode?t.entity_name="".concat(t.episode.name," / ").concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.entity_type.name," / ").concat(t.entity.name),e.taskMap[t.id]=t})),Object(d["a"])(_,p["ud"],(function(e,t){e.taskEntityPreviews=t})),Object(d["a"])(_,p["sd"],(function(e,t){var s=t.taskId,n=t.comments;n.forEach((function(e){e.person=D["a"].helpers.addAdditionalInformation(e.person)})),e.taskComments[s]=Object(f["d"])(n),e.taskPreviews[s]=n.reduce((function(e,t){if(t.previews&&t.previews.length>0){var s=t.previews[0];return s.previews=t.previews.map((function(e){return{id:e.id,annotations:e.annotations}})),e.push(s),e}return e}),[])})),Object(d["a"])(_,p["vd"],(function(e,t){e.taskStatuses=Object(f["c"])(t),e.taskStatuses.forEach((function(t){e.taskStatusMap[t.id]=t}))})),Object(d["a"])(_,p["yd"],(function(e,t){t.taskId,t.subscribed})),Object(d["a"])(_,p["Wd"],(function(e,t){var s=t.comment,n=t.taskId,i=e.taskMap[n];if(void 0===s.task_status){var a=N.getTaskStatus(e,N);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=D["a"].getters.getPerson(D["a"].state,D["a"].getters);s.person=o(s.person_id)}s.person=D["a"].helpers.addAdditionalInformation(s.person),e.taskComments[n]||(e.taskComments[n]=[]),e.taskComments[n].find((function(e){return e.id===s.id}))||e.taskComments[n].unshift(s),e.taskComments[n]=Object(f["d"])(e.taskComments[n]),i&&Object.assign(i,{task_status_id:s.task_status_id,last_comment:s})})),Object(d["a"])(_,p["xb"],(function(e,t){e.taskComments[t.id]=void 0,e.taskPreviews[t.id]=void 0,e.taskMap[t.id]=void 0})),Object(d["a"])(_,p["bb"],(function(e,t){var s=t.taskId,n=t.commentId,i=t.taskStatusMap,a=t.todoStatus,o=e.taskMap[s],r=e.taskComments[s],c=r.findIndex((function(e){return e.id===n})),d=r.find((function(e){return e.id===n})),l=r.filter((function(e){return e.pinned})).length;if(r=r.filter((function(e){return e.id!==n})),e.taskComments[s]=r,e.taskPreviews[s]=Object(w["a"])(e.taskPreviews[s]).filter((function(e){return!(d.previews.length>0&&d.previews[0].id===e.id)})),c===l){var u=a;if(r.length>0){var p=r[0].task_status_id;l<r.length&&(p=r[l].task_status_id),u=i[p]}o&&Object.assign(o,{task_status_id:u.id,task_status_priority:u.priority})}})),Object(d["a"])(_,p["Ob"],(function(e,t){var s=t.taskId,n=t.comment,i=e.taskComments[s].find((function(e){return e.id===n.id}));i.text=n.text})),Object(d["a"])(_,p["ee"],(function(e,t){e.previewFormData=t})),Object(d["a"])(_,p["i"],(function(e){e.isSavingCommentPreview=!0})),Object(d["a"])(_,p["h"],(function(e,t){var s=t.preview,n=t.taskId,i=(t.commentId,t.comment);e.isSavingCommentPreview=!1;var a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension},o=e.taskPreviews[n].find((function(e){return e.revision===s.revision}));if(o){var r=o.previews.find((function(e){return e.id===a.id}));r||o.previews.push(a)}else a.previews=[M({},a)],e.taskPreviews[n]=[a].concat(e.taskPreviews[n]),i.preview=a,i.previews=[a]})),Object(d["a"])(_,p["ob"],(function(e,t){var s=t.taskId,n=t.previewId;e.taskPreviews[s].forEach((function(e){var t=e.previews.findIndex((function(e){return e.id===n}));t>=0&&e.previews.splice(t,1)}))})),Object(d["a"])(_,p["wf"],(function(e,t){var s=t.taskId,n=t.preview,i=t.annotations,a=null;e.taskPreviews[s].forEach((function(e){e.previews.forEach((function(e){e.id===n.id&&(a=e)})),e.id===n.id&&(e.annotations=i)})),a&&(a.annotations=i)})),Object(d["a"])(_,p["J"],(function(e,t){var s=t.preview,n=t.comment,i=n.object_id,a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension};e.taskPreviews[i].shift(),e.taskPreviews[i]=[a].concat(e.taskPreviews[i])})),Object(d["a"])(_,p["l"],(function(e,t){if(t.task)e.selectedTasks[t.task.id]=t.task,e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,n=t.entity.id,i="".concat(n,"-").concat(s);e.selectedValidations[i]=t,e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(d["a"])(_,p["m"],(function(e,t){var s=JSON.parse(JSON.stringify(e.selectedTasks)),n=JSON.parse(JSON.stringify(e.selectedValidations)),i=!1;t.forEach((function(e){if(e.task)s[e.task.id]=e.task;else{var t=e.column.id,a=e.entity.id,o="".concat(a,"-").concat(t);n[o]=e,i=!0}})),e.selectedTasks=s,e.nbSelectedTasks=Object.keys(e.selectedTasks).length,i&&(e.selectedValidations=n,e.nbSelectedValidations=Object.keys(e.selectedValidations).length)})),Object(d["a"])(_,p["oe"],(function(e,t){if(t.task)delete e.selectedTasks[t.task.id],e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,n=t.entity.id,i="".concat(n,"-").concat(s);delete e.selectedValidations[i],e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(d["a"])(_,p["N"],(function(e){e.selectedTasks={},e.nbSelectedTasks=0,e.selectedValidations={},e.nbSelectedValidations=0})),Object(d["a"])(_,p["S"],(function(e,t){t.forEach((function(t){e.taskMap[t.id]=t}))})),Object(d["a"])(_,p["Xd"],(function(e,t){e.taskMap[t.id]=t})),Object(d["a"])(_,p["lc"],(function(e,t){var s=t.task,n=e.taskMap[s.id];n&&Object.assign(e.taskMap[s.id],{task_status_id:s.task_status_id,task_status_short_name:e.taskStatusMap[s.task_status_id].short_name,priority:s.priority,estimation:s.estimation,duration:s.duration,real_start_date:s.real_start_date,end_date:s.end_date,real_end_date:s.end_date,last_comment_date:s.last_comment_date,retake_count:s.retake_count})})),Object(d["a"])(_,p["kc"],(function(e,t){var s=t.taskId,n=t.data,i=e.taskMap[s];Object.assign(i,n)})),Object(d["a"])(_,p["r"],(function(e,t){var s=t.selectedTaskIds,n=t.personId;s.forEach((function(t){var s=e.taskMap[t];s&&!s.assignees.find((function(e){return e===n}))&&(s.assignees.push(n),s.assignees=Object(w["a"])(s.assignees))}))})),Object(d["a"])(_,p["rf"],(function(e,t){t.forEach((function(t){var s=e.taskMap[t];s.assignees=[],s.assigneesInfo=[]}))})),Object(d["a"])(_,p["Ze"],(function(e,t){var s=t.taskId,n=t.previewId;e.taskMap[s]&&(e.taskMap[s].entity.preview_file_id=n)})),Object(d["a"])(_,p["Se"],(function(e,t){e.isShowAssignations=t})),Object(d["a"])(_,p["Te"],(function(e,t){e.isShowInfos=t})),Object(d["a"])(_,p["Wc"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=q.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(d["a"])(_,p["Hf"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=q.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(d["a"])(_,p["Ie"],(function(e,t){var s=t.searchQuery;e.taskSearchQueries.includes(s)||(e.taskSearchQueries.push(s),e.taskSearchQueries=Object(f["c"])(e.taskSearchQueries))})),Object(d["a"])(_,p["ue"],(function(e,t){var s=t.searchQuery,n=e.taskSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.taskSearchQueries.splice(n,1)})),Object(d["a"])(_,p["de"],(function(e,t){t.pinned=!t.pinned,e.taskComments[t.object_id]=Object(f["d"])(e.taskComments[t.object_id])})),Object(d["a"])(_,p["tf"],(function(e,t){var s=t.comment,n=t.checklist;s.checklist=n})),Object(d["a"])(_,p["K"],(function(e){e.taskMap={}})),Object(d["a"])(_,p["O"],(function(e){e.taskMap={}})),Object(d["a"])(_,p["Ue"],(function(e,t){e.lastCommentDraft=t})),Object(d["a"])(_,p["we"],(function(e,t){Object.assign(e,M({},I))})),_),z={state:$,getters:N,actions:F,mutations:R},B={getProductions:function(e){l["a"].get("/api/data/projects/all",e)},getProduction:function(e){return l["a"].getModel("projects",e)},getOpenProductions:function(e){l["a"].get("/api/data/projects/open",e)},getProductionStatus:function(e){l["a"].get("/api/data/project-status",e)},newProduction:function(e,t){var s={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type};l["a"].post("/api/data/projects/",s,t)},updateProduction:function(e,t){var s={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type,fps:e.fps,ratio:e.ratio,resolution:e.resolution,start_date:e.start_date,end_date:e.end_date,man_days:e.man_days};l["a"].put("/api/data/projects/".concat(e.id),s,t)},postAvatar:function(e,t,s){l["a"].post("/api/pictures/thumbnails/projects/".concat(e),t,s)},deleteProduction:function(e,t){l["a"].del("/api/data/projects/".concat(e.id),t)},addPersonToTeam:function(e,t){return new Promise((function(s,n){var i={person_id:t};l["a"].post("/api/data/projects/".concat(e,"/team"),i,(function(e,t){e?n(e):s(t)}))}))},removePersonFromTeam:function(e,t){return new Promise((function(s,n){l["a"].del("/api/data/projects/".concat(e,"/team/").concat(t),(function(e,t){e?n(e):s(t)}))}))},addMetadataDescriptor:function(e,t){return new Promise((function(s,n){var i={name:t.name,choices:t.values,entity_type:t.entity_type};l["a"].post("/api/data/projects/".concat(e,"/metadata-descriptors"),i,(function(e,t){e?n(e):s(t)}))}))},getMetadataDescriptor:function(e,t){return new Promise((function(s,n){l["a"].get("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e,t){e?n(e):s(t)}))}))},updateMetadataDescriptor:function(e,t){return new Promise((function(s,n){var i={id:t.id,name:t.name,choices:t.values,entity_type:t.entity_type};l["a"].put("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t.id),i,(function(e,t){e?n(e):s(t)}))}))},deleteMetadataDescriptor:function(e,t){return new Promise((function(s,n){l["a"].del("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e){e?n(e):s()}))}))}},V=s("66e7");function U(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?U(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):U(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var W,Y={productions:[],productionMap:{},openProductions:[],productionStatus:[],productionStatusMap:{},currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,editProduction:{isLoading:!1,isError:!1},deleteProduction:{isLoading:!1,isError:!1},assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"},teamPath:{name:"open-productions"}},G=H({},Y),K={getProductionComponentPath:function(e,t,s){return s?{name:"episode-"+e,params:{episode_id:s,production_id:t}}:t?{name:e,params:{production_id:t}}:{name:"open-productions"}}},Q={productions:function(e){return e.productions},productionMap:function(e){return e.productionMap},openProductions:function(e){return e.openProductions},productionStatus:function(e){return e.productionStatus},productionAvatarFormData:function(e){return e.productionAvatarFormData},isProductionsLoading:function(e){return e.isProductionsLoading},isProductionsLoadingError:function(e){return e.isProductionsLoadingError},isOpenProductionsLoading:function(e){return e.isOpenProductionsLoading},editProduction:function(e){return e.editProduction},deleteProduction:function(e){return e.deleteProduction},assetsPath:function(e){return e.assetsPath},assetTypesPath:function(e){return e.assetTypesPath},shotsPath:function(e){return e.shotsPath},sequencesPath:function(e){return e.sequencesPath},episodesPath:function(e){return e.episodesPath},breakdownPath:function(e){return e.breakdownPath},playlistsPath:function(e){return e.playlistsPath},teamPath:function(e){return e.teamPath},currentProduction:function(e){return e.currentProduction?e.currentProduction:e.openProductions.length>0?e.openProductions[0]:null},isTVShow:function(e){var t=Q.currentProduction(e);return t&&"tvshow"===t.production_type},assetMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(f["c"])(e.currentProduction.descriptors.filter((function(e){return"Asset"===e.entity_type}))):[]},shotMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(f["c"])(e.currentProduction.descriptors.filter((function(e){return"Shot"===e.entity_type}))):[]},productionStatusOptions:function(e){return e.productionStatus.map((function(e){return{label:e.name,value:e.id}}))},openProductionOptions:function(e){return e.openProductions.map((function(e){return{label:e.name,value:e.id}}))},getProduction:function(e,t){return function(t){return e.productions.find((function(e){return e.id===t}))}},getProductionStatus:function(e,t){return function(t){return e.productionStatus.find((function(e){return e.id===t}))}}},X={loadProductionStatus:function(e,t){var s=e.commit;e.state;s(p["id"]),B.getProductionStatus((function(e,n){e?s(p["hd"]):s(p["gd"],n),t&&t(e)}))},loadOpenProductions:function(e,t){var s=e.commit;e.state;s(p["Rc"]),B.getOpenProductions((function(e,n){e?s(p["Qc"]):s(p["Pc"],n),t&&t(e)}))},loadProductions:function(e,t){var s=e.commit;e.state;s(p["fd"]),B.getProductions((function(e,n){e?s(p["ed"]):s(p["dd"],n),t&&t(e)}))},loadProduction:function(e,t){var s=e.commit,n=e.state;return B.getProduction(t).then((function(e){n.productionMap[e.id]?s(p["xf"],e):s(p["k"],e)})).catch((function(e){return console.error(e)}))},newProduction:function(e,t){var s=e.commit,n=(e.state,t.data),i=t.callback;s(p["dc"],n),B.newProduction(n,(function(e,t){e?s(p["cc"]):s(p["bc"],t),i&&i(e,t)}))},editProduction:function(e,t){var s=e.commit;e.state;s(p["dc"]),B.updateProduction(t.data,(function(e,n){e?s(p["cc"]):s(p["bc"],n),t.callback&&t.callback(e)}))},deleteProduction:function(e,t){var s=e.commit;e.state;s(p["rb"]);var n=t.production;B.deleteProduction(n,(function(e){e?s(p["qb"]):(s(p["ne"],n),s(p["pb"])),t.callback&&t.callback(e)}))},setProduction:function(e,t){var s=e.commit,n=e.rootGetters;if(s(p["Oe"],t),n.isTVShow){var i=n.currentEpisode,a=i?i.id:null;t&&a&&s(p["xe"],{productionId:t,episodeId:a})}else t&&s(p["xe"],{productionId:t})},storeProductionPicture:function(e,t){var s=e.commit;s(p["ge"],t)},uploadProductionAvatar:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){B.postAvatar(t,n.productionAvatarFormData,(function(n){s(p["fe"],t),n?i(n):e()}))}))},addPersonToTeam:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return s(p["mf"],t.id),B.addPersonToTeam(n.currentProduction.id,t.id).then(e).catch(i)}))},removePersonFromTeam:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return s(p["nf"],t.id),B.removePersonFromTeam(n.currentProduction.id,t.id).then(e).catch(i)}))},addMetadataDescriptor:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return t.id?B.updateMetadataDescriptor(n.currentProduction.id,t).then((function(t){s(p["vf"],{production:n.currentProduction,descriptor:t}),e()})).catch(i):B.addMetadataDescriptor(n.currentProduction.id,t).then((function(t){s(p["d"],{production:n.currentProduction,descriptor:t}),e()})).catch(i)}))},deleteMetadataDescriptor:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return B.deleteMetadataDescriptor(n.currentProduction.id,t).then((function(){s(p["hb"],{id:t}),e()})).catch(i)}))},refreshMetadataDescriptor:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return B.getMetadataDescriptor(n.currentProduction.id,t).then((function(t){var i={};n.openProductions.forEach((function(e){e.descriptors.forEach((function(e){i[e.id]=e}))})),i[t.id]?s(p["vf"],{production:n.productionMap[t.project_id],descriptor:t}):s(p["d"],{production:n.productionMap[t.project_id],descriptor:t}),e()})).catch(i)}))}},J=(L={},Object(d["a"])(L,p["fd"],(function(e){e.productions=[],e.isProductionsLoading=!0,e.isProductionsLoadingError=!1})),Object(d["a"])(L,p["ed"],(function(e){e.productions=[],e.isProductionsLoading=!1,e.isProductionsLoadingError=!0})),Object(d["a"])(L,p["dd"],(function(e,t){e.isProductionsLoading=!1,e.isProductionsLoadingError=!1,e.productions=Object(f["g"])(t);var s={},n=function(e){s[e.id]||(s[e.id]=e)};e.openProductions.forEach(n),e.productions.forEach(n),e.productionMap=s})),Object(d["a"])(L,p["Rc"],(function(e){e.isOpenProductionsLoading=!0,e.openProductions=[]})),Object(d["a"])(L,p["Qc"],(function(e){e.isOpenProductionsLoading=!1})),Object(d["a"])(L,p["Pc"],(function(e,t){e.isOpenProductionsLoading=!1,e.openProductions=Object(f["c"])(t);var s={};t.forEach((function(e){s[e.id]=e})),e.productionMap=s,!e.currentProduction&&e.openProductions.length>0&&(e.currentProduction=e.openProductions[0])})),Object(d["a"])(L,p["id"],(function(e){e.productionStatus=[]})),Object(d["a"])(L,p["hd"],(function(e){})),Object(d["a"])(L,p["gd"],(function(e,t){var s={};t.forEach((function(e){s[e.id]=e})),e.productionStatus=t,e.productionStatusMap=s})),Object(d["a"])(L,p["dc"],(function(e,t){e.editProduction.isLoading=!0,e.editProduction.isError=!1})),Object(d["a"])(L,p["cc"],(function(e){e.editProduction.isLoading=!1,e.editProduction.isError=!0})),Object(d["a"])(L,p["bc"],(function(e,t){var s=e.productionMap[t.id],n=Q.getProductionStatus(e)(t.project_status_id),i=e.openProductions.find((function(e){return e.id===t.id}));if(t.project_status_name=n.name,s){var a=e.openProductions.findIndex((function(e){return e.id===t.id}));t.project_status_id&&(a>=0&&s.project_status_id!==t.project_status_id?e.openProductions.splice(a,1):a<0&&(e.openProductions.push(s),e.openProductions=Object(f["c"])(e.openProductions))),t.production_type&&t.production_type!==s.production_type&&"short"===t.production_type&&(s.first_episode_id=void 0,i.first_episode_id=void 0),Object.assign(s,t),i&&Object.assign(i,t)}else e.productions.push(t),e.productionMap[t.id]=t,e.openProductions.push(t),e.productions=Object(f["g"])(e.productions),e.openProductions=Object(f["c"])(e.openProductions);e.editProduction={isLoading:!1,isError:!1}})),Object(d["a"])(L,p["k"],(function(e,t){e.productions.push(t),e.openProductions.push(t),e.productions=Object(f["g"])(e.productions),e.openProductions=Object(f["c"])(e.openProductions),e.productionMap[t.id]=t})),Object(d["a"])(L,p["xf"],(function(e,t){var s=e.productionMap[t.id],n=e.productionStatusMap[t.project_status_id],i=e.openProductions.find((function(e){return e.id===t.id})),a=s.project_status_id!==n.id;t.project_status_name=n.name,Object.assign(s,t),i&&Object.assign(i,t),a&&("Open"===t.project_status_name?e.openProductions.push(s):e.openProductions=Object(V["e"])(e.openProductions,s)),e.productions=Object(f["g"])(e.productions),e.openProductions=Object(f["c"])(e.openProductions)})),Object(d["a"])(L,p["rb"],(function(e){e.deleteProduction={isLoading:!0,isError:!1}})),Object(d["a"])(L,p["qb"],(function(e){e.deleteProduction={isLoading:!1,isError:!0}})),Object(d["a"])(L,p["ne"],(function(e,t){e.productions=Object(V["e"])(e.productions,t),e.openProductions=Object(V["e"])(e.openProductions,t),delete e.productionMap[t.id]})),Object(d["a"])(L,p["pb"],(function(e,t){e.deleteProduction={isLoading:!1,isError:!1}})),Object(d["a"])(L,p["ge"],(function(e,t){e.productionAvatarFormData=t})),Object(d["a"])(L,p["fe"],(function(e,t){var s=e.productionMap[t];s&&(s.has_avatar=!0)})),Object(d["a"])(L,p["Oe"],(function(e,t){var s=e.productionMap[t];e.currentProduction=s})),Object(d["a"])(L,p["xe"],(function(e,t){var s=t.productionId,n=t.episodeId;e.assetsPath=K.getProductionComponentPath("assets",s,n),e.assetTypesPath=K.getProductionComponentPath("production-asset-types",s,n),e.shotsPath=K.getProductionComponentPath("shots",s,n),e.sequencesPath=K.getProductionComponentPath("sequences",s,n),e.episodesPath=K.getProductionComponentPath("episodes",s),e.breakdownPath=K.getProductionComponentPath("breakdown",s,n),e.playlistsPath=K.getProductionComponentPath("playlists",s,n),e.teamPath=K.getProductionComponentPath("team",s)})),Object(d["a"])(L,p["mf"],(function(e,t){e.currentProduction.team.find((function(e){return e===t}))||e.currentProduction.team.push(t)})),Object(d["a"])(L,p["nf"],(function(e,t){var s=e.currentProduction.team.findIndex((function(e){return e===t}));null!==s&&e.currentProduction.team.splice(s,1)})),Object(d["a"])(L,p["d"],(function(e,t){var s=t.production,n=t.descriptor;s&&(s.descriptors?s.descriptors.push(n):s.descriptors=[n])})),Object(d["a"])(L,p["vf"],(function(e,t){var s=t.production,n=t.descriptor;s&&(s.descriptors?Object(V["f"])(s.descriptors,n):s.descriptors=[])})),Object(d["a"])(L,p["hb"],(function(e,t){var s=e.openProductions.find((function(e){return e.descriptors.find((function(e){return e.id===t.id}))}));s&&(s.descriptors=Object(V["e"])(s.descriptors,t))})),Object(d["a"])(L,p["r"],(function(e,t){var s=t.personId,n=e.currentProduction&&e.currentProduction.team.some((function(e){return e===s}));!n&&e.currentProduction&&e.currentProduction.team.push(s)})),Object(d["a"])(L,p["we"],(function(e){Object.assign(e,H({},Y))})),L),Z={state:G,getters:Q,actions:X,mutations:J},ee=s("de26"),te=s("6185"),se=s("09d3"),ne=s("2017"),ie=s("ca76");function ae(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ae(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ae(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var re,ce={getCurrentProduction:function(){return Z.getters.currentProduction(Z.state)},getTaskStatus:function(e){return z.state.taskStatusMap[e]},getTaskType:function(e){return x["a"].state.taskTypeMap[e]},getTask:function(e){return z.state.taskMap[e]},getPerson:function(e){return D["a"].state.personMap[e]},populateTask:function(e,t,s){return e.name=ce.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=ce.getTaskStatus(e.task_status_id).short_name,Object.assign(e,{project_id:t.production_id,episode_id:t.source_id,entity_name:"".concat(t.asset_type_name," / ").concat(t.name),entity_type_name:t.asset_type_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},populateAndRegisterAsset:function(e,t,s,n,i,a,o){var r={},c=0;e[o.asset_type]||(e[o.asset_type_id]={id:o.asset_type_id,name:o.asset_type_name}),o.production_id=i.id,o.project_name=i.name,o.production_name=i.name;var d=[];return o.tasks.forEach((function(e){ce.populateTask(e,o),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return n[e].name.localeCompare(n[t].name)})));var i=s[e.task_type_id];a[i.name]||(a[i.name]=e.task_type_id),c+=e.duration,d.push(e.id),r[e.task_type_id]=e.id,t[e.id]=e})),o.tasks=d,o.validations=r,o.timeSpent=c,o},sortValidationColumns:function(e,t,s){var n=Object(w["a"])(e);return Object(f["m"])(n,s)}},de={assetIndex:{},assetTypeIndex:{},assets:[]},le={assetMap:{},assetValidationColumns:[],nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,assetFilledColumns:{},assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},assetTypes:[],isAssetsLoading:!1,isAssetsLoadingError:!1,isAssetTime:!1,assetsCsvFormData:null,assetCreated:"",editAsset:{isCreateError:!1,isLoading:!1,isError:!1},deleteAsset:{isLoading:!1,isError:!1},restoreAsset:{isLoading:!1,isError:!1},personTasks:[],assetListScrollPosition:0},ue=oe({},le),pe={assetMap:function(e){return e.assetMap},assetSearchText:function(e){return e.assetSearchText},assetSearchQueries:function(e){return e.assetSearchQueries},assetSelectionGrid:function(e){return e.assetSelectionGrid},assetValidationColumns:function(e){return e.assetValidationColumns},isAssetsLoading:function(e){return e.isAssetsLoading},isAssetsLoadingError:function(e){return e.isAssetsLoadingError},displayedAssets:function(e){return e.displayedAssets},displayedAssetsLength:function(e){return e.displayedAssetsLength},assetFilledColumns:function(e){return e.assetFilledColumns},displayedAssetTypes:function(e){return e.displayedAssetTypes},displayedAssetTypesLength:function(e){return e.displayedAssetTypesLength},assetTypeSearchText:function(e){return e.assetTypeSearchText},assetTypeStats:function(e){return e.assetTypeStats},assetTypeListScrollPosition:function(e){return e.assetTypeListScrollPosition},assetListScrollPosition:function(e){return e.assetListScrollPosition},displayedAssetsByType:function(e){return Object(V["b"])(e.displayedAssets,"asset_type_name")},assetsByType:function(e){return Object(V["b"])(Object.values(e.displayedAssets),"asset_type_name")},editAsset:function(e){return e.editAsset},deleteAsset:function(e){return e.deleteAsset},restoreAsset:function(e){return e.restoreAsset},assetCreated:function(e){return e.assetCreated},isAssetTime:function(e){return e.isAssetTime},assetsCsvFormData:function(e){return e.assetsCsvFormData}},fe={loadAssets:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=i.currentProduction,o=i.userFilters,r=i.personMap,c=i.currentEpisode,d=i.isTVShow,l=i.taskTypeMap,u=i.taskMap;return d&&!c?t?t():null:n.isAssetsLoading?t():(s(p["Ec"]),void O.getAssets(a,c,(function(e,n){e?s(p["Dc"]):s(p["Cc"],{production:a,assets:n,userFilters:o,personMap:r,taskMap:u,taskTypeMap:l}),t&&t(e)})))},loadAsset:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=i.personMap,o=i.currentProduction,r=i.taskMap,c=i.taskTypeMap;return O.getAsset(t).then((function(e){n.assetMap[e.id]?s(p["sf"],e):s(p["a"],{asset:e,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(e){return console.error(e)}))},loadAssetCastIn:function(e,t){var s=e.commit,n=(e.state,e.rootState),i=n.shots.shotMap;return T.getAssetCastIn(t).then((function(e){s(p["Fc"],{asset:t,castIn:e,shotMap:i})}))},newAsset:function(e,t){var s=e.commit,n=e.dispatch,i=e.state,a=e.rootGetters,o=t.data,r=t.callback;if(de.assets.find((function(e){return e.name===o.name})))return r();s(p["Kb"],o),O.newAsset(o,(function(e,t){if(e)s(p["Jb"]),r&&r(e);else{var o=a.assetTypeMap;s(p["Ib"],{newAsset:t,assetTypeMap:o});var c=i.assetValidationColumns,d=c.map((function(e){return n("createTask",{entityId:t.id,projectId:t.project_id,taskTypeId:e,type:"assets"})}));Promise.all(d).then((function(){r&&r()})).catch((function(e){console.log(e)}))}}))},editAsset:function(e,t){var s=e.commit,n=(e.state,e.rootState),i=t.data,a=t.callback,o=i.name&&de.assets.find((function(e){return e.name===i.name&&i.id!==e.id}));if(o)return a();s(p["Kb"]);var r=n.assetTypes.assetTypeMap;O.updateAsset(i,(function(e,t){e?s(p["Jb"]):s(p["Ib"],{newAsset:t,assetTypeMap:r}),a&&a(e)}))},deleteAsset:function(e,t){var s=e.commit,n=e.state,i=t.asset,a=t.callback;s(p["X"]),O.deleteAsset(i,(function(e){if(e)s(p["W"]);else{var t=n.assetMap[i.id];t&&t.tasks.length>0&&!t.canceled?s(p["s"],t):s(p["he"],i),s(p["V"],i)}a&&a(e)}))},restoreAsset:function(e,t){var s=e.commit;e.state;s(p["Ae"]);var n=t.asset;O.restoreAsset(n,(function(e){e?s(p["ze"]):s(p["ye"],n),t.callback&&t.callback(e)}))},uploadAssetFile:function(e,t){var s=e.commit,n=e.state,i=ce.getCurrentProduction();s(p["wc"]),O.postCsv(i,n.assetsCsvFormData,(function(e){s(p["vc"]),t&&t(e)}))},setAssetSearch:function(e,t){var s=e.commit,n=e.rootGetters,i=n.taskStatusMap,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction;s(p["Le"],{assetSearch:t,taskMap:o,taskStatusMap:i,taskTypeMap:a,production:r})},saveAssetSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=ue.assetSearchQueries.find((function(e){return e.name===t})),o=n.currentProduction;a?e():C["a"].createFilter("asset",t,t,o.id,null,(function(t,n){s(p["Ee"],{searchQuery:n,production:o}),t?i(t):e(n)}))}))},removeAssetSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;C["a"].removeFilter(t,(function(n){s(p["ie"],{searchQuery:t,production:a}),n?i(n):e()}))}))},displayMoreAssets:function(e){var t=e.commit,s=e.rootGetters;t(p["Eb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},initAssetTypes:function(e){e.commit;var t=e.dispatch;e.state,e.rootState,e.rootGetters;return new Promise((function(e,s){t("setLastProductionScreen","production-asset-types"),t("loadAssets",(function(n){n?s(n):(t("computeAssetTypeStats"),e())}))}))},setAssetTypeListScrollPosition:function(e){var t=e.commit;t(p["af"])},computeAssetTypeStats:function(e){var t=e.commit,s=e.rootGetters,n=s.taskStatusMap,i=s.taskMap;t(p["P"],{taskStatusMap:n,taskMap:i})},setAssetTypeSearch:function(e,t){var s=e.commit;s(p["Me"],t)},getAssetsCsvLines:function(e){var t=e.state,s=e.rootGetters,n=s.currentProduction,i=s.episodeMap,a=de.assets;de.result&&de.result.length>0&&(a=de.result);var o=a.map((function(e){var a=[e.episode_id?i[e.episode_id].name:"",e.name,e.description];return Object(f["c"])(Object(w["a"])(n.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(t){a.push(e.data[t.field_name])})),t.isAssetTime&&a.push(e.timeSpent),t.assetValidationColumns.forEach((function(t){var n=s.taskMap[e.validations[t]];n?a.push(n.task_status_short_name):a.push("")})),a}));return o}},he=(W={},Object(d["a"])(W,p["K"],(function(e){de.assets=[],e.assetMap={},de.result=[],e.assetValidationColumns=[],de.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},e.displayedAssetsLength=0,e.assetSearchQueries=[]})),Object(d["a"])(W,p["Ec"],(function(e){de.assets=[],de.result=[],e.assetMap={},e.isAssetsLoading=!0,e.isAssetsLoadingError=!1,e.assetValidationColumns=[],de.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},e.displayedAssetsLength=0,e.assetSearchQueries=[]})),Object(d["a"])(W,p["Dc"],(function(e){e.isAssetsLoading=!1,e.isAssetsLoadingError=!0})),Object(d["a"])(W,p["Cc"],(function(e,t){var s=t.production,n=t.assets,i=t.userFilters,a=t.personMap,o=t.taskMap,r=t.taskTypeMap,c={},d={},l=!1;n=Object(f["a"])(n),de.assets=n,de.assetIndex=Object(ne["a"])(n),e.assetMap={},n.forEach((function(t){ce.populateAndRegisterAsset(d,o,r,a,s,c,t),e.assetMap[t.id]=t,!l&&t.timeSpent>0&&(l=!0)}));var u=Object.values(d);de.assetTypeIndex=Object(ne["c"])(u);var p=de.assets.slice(0,ee["a"]),h=Object(V["a"])(p);e.assetValidationColumns=ce.sortValidationColumns(Object.values(c),h,r),e.isAssetTime=l,e.isAssetsLoading=!1,e.isAssetsLoadingError=!1,e.nbValidationColumns=e.assetValidationColumns.length,e.displayedAssets=p,e.displayedAssetsLength=de.assets?de.assets.length:0,e.assetFilledColumns=h,e.assetTypes=u,e.displayedAssetTypes=u,e.displayedAssetTypesLength=u.length;var m=e.displayedAssets.length,_=e.nbValidationColumns;e.assetSelectionGrid=Object(te["b"])(m,_),i.asset&&i.asset[s.id]?e.assetSearchQueries=i.asset[s.id]:e.assetSearchQueries=[]})),Object(d["a"])(W,p["a"],(function(e,t){var s=t.taskTypeMap,n=t.taskMap,i=t.personMap,a=t.production,o=t.asset;o.tasks=Object(f["l"])(o.tasks,s),o.validations={},o.production_id=o.project_id,o.episode_id=o.source_id,ce.populateAndRegisterAsset({},n,s,i,a,{},o),de.assets.push(o),de.assets=Object(f["a"])(de.assets),e.assetMap[o.id]=o,e.displayedAssets.push(o),e.displayedAssets=Object(f["a"])(e.displayedAssets),e.displayedAssetsLength=de.assets.length,e.assetFilledColumns=Object(V["a"])(e.displayedAssets);var r=e.displayedAssets.length,c=e.nbValidationColumns;e.assetSelectionGrid=Object(te["b"])(r,c),e.assetMap[o.id]=o,de.assetIndex=Object(ne["a"])(de.assets)})),Object(d["a"])(W,p["sf"],(function(e,t){Object.assign(e.assetMap[t.id],t),de.assetIndex=Object(ne["a"])(de.assets)})),Object(d["a"])(W,p["he"],(function(e,t){e.assetMap[t.id]&&(delete e.assetMap[t.id],de.assets=Object(V["e"])(de.assets,t),e.displayedAssets=Object(V["e"])(e.displayedAssets,t),t.timeSpent&&(e.displayedAssetsTimeSpent-=t.timeSpent),e.assetFilledColumns=Object(V["a"])(e.displayedAssets),e.displayedAssetsLength=Math.max(e.displayedAssetsLength-1,0),de.assetIndex=Object(ne["a"])(de.assets))})),Object(d["a"])(W,p["q"],(function(e,t){e.assetsCsvFormData=t})),Object(d["a"])(W,p["wc"],(function(e){})),Object(d["a"])(W,p["vc"],(function(e){e.assetsCsvFormData=null})),Object(d["a"])(W,p["Kb"],(function(e,t){e.editAsset.isLoading=!0,e.editAsset.isError=!1})),Object(d["a"])(W,p["Jb"],(function(e){e.editAsset.isLoading=!1,e.editAsset.isError=!0,e.editAsset.isCreateError=!0})),Object(d["a"])(W,p["Ib"],(function(e,t){var s=t.newAsset,n=t.assetTypeMap;e.editAsset.isCreateError=!1,e.editAsset.isSuccess=!0,e.assetCreated=s.name;var i=e.assetMap[s.id],a=n[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],i)s.episode_id=s.source_id,Object.assign(i,s),e.displayedAssets=Object(f["a"])(e.displayedAssets);else{s.validations={},s.production_id=s.project_id,s.episode_id=s.source_id,de.assets.push(s),de.assets=Object(f["a"])(de.assets),e.displayedAssets.push(s),e.displayedAssets=Object(f["a"])(e.displayedAssets),e.assetFilledColumns=Object(V["a"])(e.displayedAssets),e.displayedAssetsLength=de.assets.length;var o=e.displayedAssets.length,r=e.nbValidationColumns;e.assetSelectionGrid=Object(te["b"])(o,r),e.assetMap[s.id]=s}e.editAsset={isLoading:!1,isError:!1},de.assetIndex=Object(ne["a"])(de.assets)})),Object(d["a"])(W,p["X"],(function(e){e.deleteAsset={isLoading:!0,isError:!1}})),Object(d["a"])(W,p["W"],(function(e){e.deleteAsset={isLoading:!1,isError:!0}})),Object(d["a"])(W,p["s"],(function(e,t){t.canceled=!0})),Object(d["a"])(W,p["V"],(function(e,t){e.deleteAsset={isLoading:!1,isError:!1}})),Object(d["a"])(W,p["Ae"],(function(e){e.restoreAsset={isLoading:!0,isError:!1}})),Object(d["a"])(W,p["ze"],(function(e){e.restoreAsset={isLoading:!1,isError:!0}})),Object(d["a"])(W,p["ye"],(function(e,t){var s=e.assetMap[t.id];s.canceled=!1,e.restoreAsset={isLoading:!1,isError:!1},de.assetIndex=Object(ne["a"])(de.assets)})),Object(d["a"])(W,p["Ae"],(function(e){e.restoreAsset={isLoading:!0,isError:!1}})),Object(d["a"])(W,p["ze"],(function(e){e.restoreAsset={isLoading:!1,isError:!0}})),Object(d["a"])(W,p["ye"],(function(e,t){var s=e.assetMap[t.id];s.canceled=!1,e.restoreAsset={isLoading:!1,isError:!1},de.assetIndex=Object(ne["a"])(de.assets)})),Object(d["a"])(W,p["xb"],(function(e,t){var s=e.displayedAssets.find((function(e){return e.id===t.entity_id}));if(s){var n=JSON.parse(JSON.stringify(s.validations));delete s.validations,o.a.set(s,"validations",n);var i=JSON.parse(JSON.stringify(s.tasks)),a=i.findIndex((function(e){return e===t.id}));i.splice(a,1),o.a.set(s,"tasks",i)}})),Object(d["a"])(W,p["Wd"],(function(e,t){t.comment,t.taskId})),Object(d["a"])(W,p["Le"],(function(e,t){var s=t.assetSearch,n=t.taskStatusMap,i=t.taskTypeMap,a=t.taskMap,o=t.production,r=Object.values(i),c=Object.keys(n).map((function(e){return n[e]})),d=s,l=Object(ie["e"])(d)||[],u=Object(ie["d"])(de.assetIndex,r,c,o.descriptors||[],d),p=Object(ne["h"])(de.assetIndex,l)||de.assets;p=Object(ie["a"])(p,u,a),de.result=p;var f=p.slice(0,ee["a"]),h=f.length,m=e.nbValidationColumns;e.displayedAssets=f,e.assetFilledColumns=Object(V["a"])(f),e.displayedAssetsLength=p?p.length:0,e.assetSearchText=d,e.assetSelectionGrid=Object(te["b"])(h,m)})),Object(d["a"])(W,p["Ee"],(function(e,t){var s=t.searchQuery;e.assetSearchQueries.includes(s)||(e.assetSearchQueries.push(s),e.assetSearchQueries=Object(f["c"])(e.assetSearchQueries))})),Object(d["a"])(W,p["ie"],(function(e,t){var s=t.searchQuery,n=e.assetSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.assetSearchQueries.splice(n,1)})),Object(d["a"])(W,p["Eb"],(function(e,t){var s,n=t.taskTypeMap,i=t.taskStatusMap,a=t.taskMap,o=t.production;if(e.assetSearchText.length>0){var r=Object.values(n),c=Object.values(i),d=e.assetSearchText,l=Object(ie["e"])(d)||[],u=Object(ie["d"])(de.assetIndex,r,c,o.descriptors||[],d);s=Object(ne["h"])(de.assetIndex,l)||de.assets,s=Object(ie["a"])(s,u,a)}else s=de.assets;e.displayedAssets=s.slice(0,e.displayedAssets.length+ee["a"]),e.assetFilledColumns=Object(V["a"])(e.displayedAssets);var p=e.displayedAssets.length-ee["a"],f=e.displayedAssets.length,h=e.nbValidationColumns;p>=0&&(e.assetSelectionGrid=Object(te["a"])(e.assetSelectionGrid,p,f,h))})),Object(d["a"])(W,p["Oe"],(function(e,t){e.assetSearchText=""})),Object(d["a"])(W,p["Ze"],(function(e,t){var s=t.entityId,n=(t.taskId,t.previewId),i=t.taskMap,a=e.assetMap[s];a&&(a.preview_file_id=n,a.tasks.forEach((function(e){var t=i[e];t.entity.preview_file_id=n})))})),Object(d["a"])(W,p["Ke"],(function(e,t){e.assetListScrollPosition=t})),Object(d["a"])(W,p["af"],(function(e,t){e.assetTypeListScrollPosition=t})),Object(d["a"])(W,p["oe"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!1)})),Object(d["a"])(W,p["l"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!0)})),Object(d["a"])(W,p["m"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.assetSelectionGrid=s})),Object(d["a"])(W,p["N"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));e.assetSelectionGrid=Object(te["c"])(s)})),Object(d["a"])(W,p["Xd"],(function(e,t){var s=e.assetMap[t.entity_id];s&&t&&(t=ce.populateTask(t,s),s.tasks.push(t),s.validations||(s.validations={}),o.a.set(s.validations,t.task_type_id,t.id))})),Object(d["a"])(W,p["S"],(function(e,t){t.forEach((function(t){if(t){var s=e.assetMap[t.entity_id];if(s){var n=oe({},s.validations);o.a.set(n,t.task_type_id,t.id),delete s.validations,o.a.set(s,"validations",n)}}}))})),Object(d["a"])(W,p["Me"],(function(e,t){var s=Object(ie["e"])(t),n=Object(ne["h"])(de.assetTypeIndex,s)||e.assetTypes;Object.assign(e,{displayedAssetTypes:n,displayedAssetTypesLength:n?n.length:0,assetTypeSearchText:t})})),Object(d["a"])(W,p["P"],(function(e,t){var s=t.taskStatusMap,n=t.taskMap;e.assetTypeStats=Object(se["a"])(de.assets,"asset_type_id",s,n)})),Object(d["a"])(W,p["we"],(function(e){de.assets=[],de.assetIndex={},de.result=[],Object.assign(e,oe({},le))})),W),me={state:ue,getters:pe,actions:fe,mutations:he};function _e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ve(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_e(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_e(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var be,ge={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingAssetTypeAssets:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingAssetTypesOptions:[],castingCurrentShot:null,casting:{},castingByType:[]},ye=ve({},ge),ke={castingEpisodeSequences:function(e){return e.castingEpisodeSequences},castingSequenceId:function(e){return e.castingSequenceId},castingSequenceShots:function(e){return e.castingSequenceShots},castingAssetTypeAssets:function(e){return e.castingAssetTypeAssets},castingSequenceOptions:function(e){return e.castingSequenceOptions},castingAssetTypesOptions:function(e){return e.castingAssetTypesOptions},casting:function(e){return e.casting},castingByType:function(e){return e.castingByType},castingCurrentShot:function(e){return e.castingCurrentShot}},Se={setCastingSequence:function(e,t){var s=e.commit,n=e.rootState;if(!t)return console.error("SequenceId is undefined, no casting can be set.");var i=n.productions.currentProduction,a=n.assets.assetMap,o=Object.values(n.shots.shotMap).filter((function(e){return e.sequence_id===t}));return s(p["B"],t),s(p["D"],o),T.getSequenceCasting(i.id,t).then((function(e){s(p["z"],{casting:e,assetMap:a})}))},setCastingAssetType:function(e,t){var s=e.commit,n=e.rootState;if(!t)return console.error("assetTypeId is undefined, no casting can be set.");var i=n.productions.currentProduction,a=n.assets.assetMap,o=Object.values(n.assets.assetMap).filter((function(e){return e.asset_type_id===t}));return s(p["x"],t),s(p["w"],o),T.getAssetTypeCasting(i.id,t).then((function(e){s(p["z"],{casting:e,assetMap:a})}))},setCastingEpisode:function(e,t){var s=e.commit,n=e.rootState,i=n.shots.sequences;s(p["C"],i),s(p["A"],t)},setCastingAssetTypes:function(e){var t=e.commit,s=e.rootState,n=s.assets.assetTypes;t(p["y"],n)},addAssetToCasting:function(e,t){var s=e.commit,n=e.rootState,i=t.entityId,a=t.assetId,o=t.nbOccurences,r=n.assets.assetMap[a];s(p["u"],{entityId:i,asset:r,nbOccurences:o})},removeAssetFromCasting:function(e,t){var s=e.commit,n=e.rootState,i=t.entityId,a=t.assetId,o=t.nbOccurences,r=n.assets.assetMap[a];s(p["v"],{entityId:i,asset:r,nbOccurences:o})},saveCasting:function(e,t){e.commit;var s=e.rootGetters;if(!t)return console.error("ShotId is undefined, no casting can be saved.");var n=s.currentProduction,i=[];return Object.values(ye.casting[t]).forEach((function(e){i.push({asset_id:e.asset_id,nb_occurences:e.nb_occurences||1})})),T.updateCasting(n.id,t,i)},uploadCastingFile:function(e,t){e.commit,e.state;var s=e.rootGetters,n=s.currentProduction;return T.postCastingCsv(n,t)}},we=(re={},Object(d["a"])(re,p["D"],(function(e,t){var s=[],n=[];e.castingSequenceShots=t,t.forEach((function(e){s[e.id]=[],n[e.id]=[]})),e.casting=s,e.castingByType=n})),Object(d["a"])(re,p["w"],(function(e,t){var s=[],n=[];e.castingAssetTypeAssets=t,t.forEach((function(e){s[e.id]=[],n[e.id]=[]})),e.casting=s,e.castingByType=n})),Object(d["a"])(re,p["C"],(function(e,t){e.castingEpisodeSequences=t,e.castingSequenceOptions=t.map((function(e){var t={name:"breakdown-sequence",params:{production_id:e.project_id,sequence_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(d["a"])(re,p["y"],(function(e,t){e.castingAssetTypesOptions=t.map((function(e){var t={name:"breakdown-asset-type",params:{production_id:e.project_id,asset_type_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(d["a"])(re,p["B"],(function(e,t){e.castingSequenceId=t})),Object(d["a"])(re,p["A"],(function(e,t){e.castingEpisodeId=t})),Object(d["a"])(re,p["x"],(function(e,t){e.castingAssetTypeId=t})),Object(d["a"])(re,p["z"],(function(e,t){var s=t.casting,n=(t.assetMap,{}),i=Object.keys(s);i.forEach((function(e){var t=s[e];n[e]=Object(V["b"])(t,"asset_type_name")})),Object.assign(e.casting,s),e.casting=ve({},e.casting),Object.assign(e.castingByType,n),e.castingByType=ve({},e.castingByType)})),Object(d["a"])(re,p["u"],(function(e,t){var s=t.entityId,n=t.asset,i=t.nbOccurences;e.casting[s]||(e.casting[s]=[]);var a=e.casting[s].find((function(e){return e.asset_id===n.id}));if(a)a.nb_occurences+=i;else{var o={asset_id:n.id,name:n.name,asset_name:n.name,asset_type_name:n.asset_type_name,nb_occurences:i,preview_file_id:n.preview_file_id};e.casting[s].push(o)}e.casting[s]=Object(f["a"])(e.casting[s]),e.castingByType[s]=Object(V["b"])(e.casting[s],"asset_type_name")})),Object(d["a"])(re,p["v"],(function(e,t){var s=t.entityId,n=t.asset,i=t.nbOccurences,a=e.casting[s].find((function(e){return e.asset_id===n.id}));a&&(a.nb_occurences-=i,a.nb_occurences<1&&(delete e.casting[s][n.id],e.casting[s]=e.casting[s].filter((function(e){return e.asset_id!==n.id}))),e.castingByType[s]=Object(V["b"])(e.casting[s],"asset_type_name"))})),Object(d["a"])(re,p["pd"],(function(e,t){e.state,e.rootState;var s=t.shot,n=t.casting;s.casting=n,o.a.set(s,"castingAssetsByType",Object(V["b"])(n,"asset_type_name"))})),Object(d["a"])(re,p["Fc"],(function(e,t){e.state,e.rootState;var s=t.asset,n=t.castIn;n.forEach((function(e){e.episode_name&&(e.sequence_name="".concat(e.episode_name," / ").concat(e.sequence_name))})),s.castIn=n,o.a.set(s,"castInShotsBySequence",Object(V["b"])(n,"sequence_name"))})),Object(d["a"])(re,p["we"],(function(e){Object.assign(e,ve({},ge))})),re),Oe={state:ye,getters:ke,actions:Se,mutations:we},Te=s("db82"),Ce=s.n(Te),Pe={getCustomActions:function(e){l["a"].get("/api/data/custom-actions",e)},newCustomAction:function(e,t){var s={name:e.name,url:e.url};l["a"].post("/api/data/custom-actions/",s,t)},updateCustomAction:function(e,t){var s={name:e.name,url:e.url,entity_type:e.entityType,is_ajax:"true"===e.isAjax};l["a"].put("/api/data/custom-actions/".concat(e.id),s,t)},deleteCustomAction:function(e,t){l["a"].del("/api/data/custom-actions/".concat(e.id),t)},postCustomAction:function(e,t){return new Promise((function(s,n){Ce.a.post(e).withCredentials().send(t).end((function(e,t){e?n(e):s()}))}))}};function Ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function je(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ee(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ee(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var De,xe={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},Ae=je({},xe),Me={customActions:function(e){return e.customActions},isCustomActionsLoading:function(e){return e.isCustomActionsLoading},isCustomActionsLoadingError:function(e){return e.isCustomActionsLoadingError},editCustomAction:function(e){return e.editCustomAction},deleteCustomAction:function(e){return e.deleteCustomAction},customAction:function(e,t,s){return function(t){return e.customActions.find((function(e){return e.id===t}))}},allCustomActions:function(e){return e.customActions.filter((function(e){return"all"===e.entity_type}))},assetCustomActions:function(e){return e.customActions.filter((function(e){return["all","asset"].includes(e.entity_type)}))},shotCustomActions:function(e){return e.customActions.filter((function(e){return["all","shot"].includes(e.entity_type)}))}},Le={loadCustomActions:function(e,t){var s=e.commit;e.state;s(p["Lc"]),Pe.getCustomActions((function(e,n){e?s(p["Kc"]):s(p["Jc"],n),t&&t(e)}))},newCustomAction:function(e,t){var s=e.commit,n=(e.state,t.data),i=t.callback;s(p["Rb"],n),Pe.newCustomAction(n,(function(e,t){e?s(p["Qb"]):s(p["Pb"],t),i&&i(e)}))},editCustomAction:function(e,t){var s=e.commit,n=(e.state,t.data),i=t.callback;s(p["Rb"]),Pe.updateCustomAction(n,(function(e,t){e?s(p["Qb"]):s(p["Pb"],t),i&&i(e)}))},deleteCustomAction:function(e,t){var s=e.commit,n=(e.state,t.customAction),i=t.callback;s(p["eb"]),Pe.deleteCustomAction(n,(function(e){e?s(p["db"]):s(p["cb"],n),i&&i(e)}))},postCustomAction:function(e,t){e.commit;var s=t.data,n=t.url;Pe.postCustomAction(n,s)}},Ie=(be={},Object(d["a"])(be,p["Lc"],(function(e){e.isCustomActionsLoading=!0,e.isCustomActionsLoadingError=!1})),Object(d["a"])(be,p["Kc"],(function(e){e.isCustomActionsLoading=!1,e.isCustomActionsLoadingError=!0})),Object(d["a"])(be,p["Jc"],(function(e,t){e.isCustomActionsLoading=!1,e.isCustomActionsLoadingError=!1,e.customActions=t,e.customActions=Object(f["c"])(e.customActions)})),Object(d["a"])(be,p["Rb"],(function(e,t){e.editCustomAction.isLoading=!0,e.editCustomAction.isError=!1})),Object(d["a"])(be,p["Qb"],(function(e){e.editCustomAction.isLoading=!1,e.editCustomAction.isError=!0})),Object(d["a"])(be,p["Pb"],(function(e,t){var s=Me.customAction(e)(t.id);s&&s.id?Object.assign(s,t):(e.customActions.push(t),e.customActions=Object(f["c"])(e.customActions)),e.editCustomAction={isLoading:!1,isError:!1}})),Object(d["a"])(be,p["eb"],(function(e){e.deleteCustomAction={isLoading:!0,isError:!1}})),Object(d["a"])(be,p["db"],(function(e){e.deleteCustomAction={isLoading:!1,isError:!0}})),Object(d["a"])(be,p["cb"],(function(e,t){var s=e.customActions.findIndex((function(e){return e.id===t.id}));e.customActions.splice(s,1),e.deleteCustomAction={isLoading:!1,isError:!1}})),Object(d["a"])(be,p["we"],(function(e){Object.assign(e,je({},xe))})),be),$e={state:Ae,getters:Me,actions:Le,mutations:Ie},qe=s("48c6");function Ne(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ne(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ne(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Re,ze={email:"",password:"",isLdap:!1,isLoginLoading:!1,isLoginError:!1,isDataLoading:!1},Be=Fe({},ze),Ve={email:function(e){return e.email},password:function(e){return e.password},isLdap:function(e){return e.isLdap},isLoginLoading:function(e){return e.isLoginLoading},isLoginError:function(e){return e.isLoginError},isDataLoading:function(e){return e.isDataLoading}},Ue={changeEmail:function(e,t){var s=e.commit;e.state;s(p["F"],t)},changePassword:function(e,t){var s=e.commit;e.state;s(p["G"],t)},logIn:function(e,t){var s=e.commit,n=e.state;s(p["Fd"]),qe["a"].logIn(n.email,n.password,(function(e){e?(s(p["Ed"]),t(e,!1)):(s(p["Gd"]),t(null,!0))}))},logout:function(e,t){var s=e.commit;e.state;qe["a"].logout((function(e){e?(s(p["Hd"]),t(null,!1)):(s(p["we"]),s(p["Id"]),s(p["qf"]),t(null,!0))}))},resetPassword:function(e,t){e.commit;return new Promise((function(e,s){qe["a"].resetPassword(t).then(e).catch(s)}))},resetChangePassword:function(e,t){var s=e.commit,n=t.token,i=t.password,a=t.password2;return new Promise((function(e,t){qe["a"].resetChangePassword(n,i,a).then((function(){s(p["Gd"]),e()})).catch(t)}))}},He=(De={},Object(d["a"])(De,p["F"],(function(e,t){e.email=t})),Object(d["a"])(De,p["G"],(function(e,t){e.password=t})),Object(d["a"])(De,p["Fd"],(function(e){e.isLoginLoading=!0,e.isLoginError=!1})),Object(d["a"])(De,p["Gd"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(d["a"])(De,p["Ed"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!0})),Object(d["a"])(De,p["Id"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(d["a"])(De,p["U"],(function(e,t){e.isDataLoading=!0,t&&void 0!==t.isLdap&&(e.isLdap=t.isLdap)})),Object(d["a"])(De,p["T"],(function(e){e.isDataLoading=!1})),Object(d["a"])(De,p["we"],(function(e,t){Object.assign(e,Fe({},ze))})),De),We={state:Be,getters:Ve,actions:Ue,mutations:He};function Ye(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ge(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ye(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ye(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ke,Qe={currentProductionScreen:"assets",isDarkTheme:!1,isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets",lastProductionViewed:null},Xe=Ge({},Qe),Je={isDarkTheme:function(e){return e.isDarkTheme},isSidebarHidden:function(e){return e.isSidebarHidden},isUserMenuHidden:function(e){return e.isUserMenuHidden},lastProductionScreen:function(e){return e.lastProductionScreen},lastProductionViewed:function(e){return e.lastProductionViewed},currentProductionScreen:function(e){return e.currentProductionScreen}},Ze={toggleDarkTheme:function(e){var t=e.commit,s=e.state;t(p["of"]),localStorage&&localStorage.setItem("dark-theme",s.isDarkTheme)},toggleSidebar:function(e){var t=e.commit;e.state;t(p["pf"])},toggleUserMenu:function(e){var t=e.commit;e.state;t(p["qf"])},setLastProductionScreen:function(e,t){var s=e.commit;e.state;s(p["Ve"],t)}},et=(Re={},Object(d["a"])(Re,p["of"],(function(e){e.isDarkTheme=!e.isDarkTheme})),Object(d["a"])(Re,p["pf"],(function(e){e.isSidebarHidden=!e.isSidebarHidden})),Object(d["a"])(Re,p["qf"],(function(e){e.isUserMenuHidden=!e.isUserMenuHidden})),Object(d["a"])(Re,p["Ve"],(function(e,t){e.lastProductionScreen=t})),Object(d["a"])(Re,p["Oe"],(function(e,t){t&&(e.lastProductionViewed=t)})),Object(d["a"])(Re,p["we"],(function(e){var t=e.isDarkTheme;Object.assign(e,Ge({},Qe)),e.isDarkTheme=t})),Re),tt={state:Xe,getters:Je,actions:Ze,mutations:et},st=function(e,t){var s="".concat(e,"?"),n=[];return Object.keys(t).forEach((function(e){t[e]&&n.push("".concat(e,"=").concat(t[e]))})),s+n.join("&")},nt={getLastNews:function(e){return new Promise((function(t,s){var n=e.productionId;delete e.productionId;var i=st("/api/data/projects/".concat(n,"/news"),e);l["a"].get(i,(function(e,n){e?s(e):t(n)}))}))},getNews:function(e,t){return new Promise((function(s,n){var i="/api/data/projects/".concat(e,"/news/").concat(t);l["a"].get(i,(function(e,t){e?n(e):s(t[0])}))}))}};function it(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function at(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?it(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):it(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ot,rt={newsList:[]},ct=at({},rt),dt={newsList:function(e){return e.newsList},newsListByDay:function(e){if(0===e.newsList.length)return[];var t=[],s=[],n=e.newsList[0].created_at.substring(0,10);return e.newsList.forEach((function(e){var i=e.created_at.substring(0,10);i!==n&&(t.push(s),n=i,s=[]),s.push(e)})),0!==s.length&&t.push(s),t}},lt={loadNews:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(p["M"]),nt.getLastNews(t).then((function(e){return s(p["j"],e)})).then(e).catch(n)}))},loadMoreNews:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){nt.getLastNews(t).then((function(e){return s(p["j"],e)})).then(e).catch(n)}))},loadSingleNews:function(e,t){var s=e.commit,n=(e.state,t.productionId),i=t.newsId;return new Promise((function(e,t){nt.getNews(n,i).then((function(e){return s(p["c"],e)})).catch(t)}))}},ut=(Ke={},Object(d["a"])(Ke,p["M"],(function(e){e.newsList=[]})),Object(d["a"])(Ke,p["j"],(function(e,t){e.newsList=[].concat(Object(w["a"])(e.newsList),Object(w["a"])(Object(f["b"])(t)))})),Object(d["a"])(Ke,p["c"],(function(e,t){e.newsList.unshift(t)})),Object(d["a"])(Ke,p["Ld"],(function(e,t){var s=t.commentId,n=t.previewId,i=t.extension;if(s){var a=e.newsList.find((function(e){return e.comment_id===s}));a&&(a.preview_file_id=n,a.preview_file_extension=i)}})),Object(d["a"])(Ke,p["we"],(function(e){Object.assign(e,at({},rt))})),Ke),pt={state:ct,getters:dt,actions:lt,mutations:ut},ft={getNotifications:function(e){l["a"].get("/api/data/user/notifications",e)},getNotification:function(e,t){l["a"].get("/api/data/user/notifications/".concat(e),t)}};function ht(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ht(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ht(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _t,vt={notifications:[]},bt=mt({},vt),gt={notifications:function(e){return e.notifications},isNewNotification:function(e){var t=e.notifications.filter((function(e){return!e.read}));return t.length>0}},yt={loadNotifications:function(e,t){var s=e.commit;e.state;if(!t)return new Promise((function(e,t){s(p["Nc"],[]),ft.getNotifications((function(n,i){n?t(n):(s(p["Nc"],i),e())}))}));s(p["Nc"],[]),ft.getNotifications((function(e,n){e?t(e):(s(p["Nc"],n),t())}))},loadNotification:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){ft.getNotification(t,(function(t,i){t?n(t):(s(p["Oc"],i),e())}))}))},markAllNotificationsAsRead:function(e){var t=e.commit;t(p["Jd"])}},kt=(ot={},Object(d["a"])(ot,p["Nc"],(function(e,t){e.notifications=Object(f["b"])(t)})),Object(d["a"])(ot,p["Oc"],(function(e,t){e.notifications.push(t),e.notifications=Object(f["b"])(e.notifications)})),Object(d["a"])(ot,p["Jd"],(function(e){e.notifications.forEach((function(e){e.read=!0}))})),Object(d["a"])(ot,p["Yd"],(function(e,t){var s=t.commentId,n=t.previewId,i=e.notifications.find((function(e){return e.comment_id===s}));i&&(i.preview_file_id=n)})),Object(d["a"])(ot,p["we"],(function(e){Object.assign(e,mt({},vt))})),ot),St={state:bt,getters:gt,actions:yt,mutations:kt},wt=s("0f9a");function Ot(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ot(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ot(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ct,Pt={playlists:[],playlistMap:{}},Et=Tt({},Pt),jt={playlists:function(e){return e.playlists},playlistMap:function(e){return e.playlistMap}},Dt={loadPlaylists:function(e,t){var s=e.commit,n=e.rootGetters,i=n.currentProduction,a=n.currentEpisode,o=n.isTVShow;if(o&&!a)return t?t():null;s(p["Zc"]),j.getPlaylists(i,a,(function(e,n){e?s(p["Yc"]):s(p["Xc"],n),t&&t(e)}))},loadPlaylist:function(e,t){var s=e.commit,n=e.rootGetters,i=t.playlist,a=t.callback,o=n.currentProduction;s(p["cd"]),j.getPlaylist(o,i,(function(e,t){e?s(p["bd"]):s(p["ad"],t),a&&a(e,t)}))},refreshPlaylist:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;j.getPlaylist(a,{id:t},(function(t,n){t?i(t):(s(p["Yb"],n),e(n))}))}))},loadShotPreviewFiles:function(e,t){e.commit;return j.getShotPreviewFiles(t)},newPlaylist:function(e,t){var s=e.commit,n=t.data,i=t.callback;s(p["ac"],n),j.newPlaylist(n,(function(e,t){e?s(p["Zb"]):s(p["Yb"],t),i&&i(e,t)}))},editPlaylist:function(e,t){var s=e.commit,n=t.data,i=t.callback;s(p["ac"]),j.updatePlaylist(n,(function(e,t){e?s(p["Zb"]):s(p["Yb"],t),i&&i(e)}))},deletePlaylist:function(e,t){var s=e.commit,n=t.playlist,i=t.callback;s(p["nb"]),j.deletePlaylist(n,(function(e){e?s(p["mb"]):s(p["lb"],n),i&&i(e)}))},addShotPreviewToPlaylist:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.shot,o=t.previewFiles;t.callback;return new Promise((function(e,t){s(p["rd"],{playlist:i,shot:a,previewFiles:o}),s(p["p"],{playlist:i,shot:a}),n("editPlaylist",{data:i,callback:function(){var t={shot_id:a.id,id:a.preview_file_id,extension:a.preview_file_extension,annotations:a.preview_file_annotations,task_id:a.preview_file_task_id,preview_files:o};e(t)}})}))},removeShotPreviewFromPlaylist:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.shot,o=t.callback;s(p["se"],{playlist:i,shot:a}),n("editPlaylist",{data:i,callback:o})},changePlaylistOrder:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.info,o=t.callback;s(p["H"],{playlist:i,info:a}),n("editPlaylist",{data:i,callback:o})},changePlaylistPreview:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.shot,o=t.previewFileId,r=t.callback;s(p["I"],{playlist:i,shotId:a.id,previewFileId:o}),n("editPlaylist",{data:i,callback:r})},removeBuildJob:function(e,t){var s=e.commit;s(p["je"],t),j.deleteBuildJob(t)},removeBuildJobFromList:function(e,t){var s=e.commit;s(p["je"],t)},addNewBuildJob:function(e,t){var s=e.commit;s(p["g"],t)},markBuildJobAsDone:function(e,t){var s=e.commit;s(p["Kd"],t)},runPlaylistBuild:function(e,t){e.commit;j.runPlaylistBuild(t)}},xt=(_t={},Object(d["a"])(_t,p["Zc"],(function(e){})),Object(d["a"])(_t,p["Yc"],(function(e){})),Object(d["a"])(_t,p["Xc"],(function(e,t){e.playlists=t,e.playlists=Object(f["f"])(e.playlists),e.playlistMap={},t.forEach((function(t){t.shots||(t.shots=[]),e.playlistMap[t.id]=t}))})),Object(d["a"])(_t,p["cd"],(function(e){})),Object(d["a"])(_t,p["bd"],(function(e){})),Object(d["a"])(_t,p["ad"],(function(e,t){e.playlistMap[t.id].build_jobs=t.build_jobs})),Object(d["a"])(_t,p["ac"],(function(e,t){})),Object(d["a"])(_t,p["Zb"],(function(e){})),Object(d["a"])(_t,p["Yb"],(function(e,t){var s=e.playlistMap[t.id];s&&s.id?Object.assign(s,t):(e.playlists.push(t),e.playlistMap[t.id]=t),e.playlists=Object(f["f"])(e.playlists)})),Object(d["a"])(_t,p["nb"],(function(e){})),Object(d["a"])(_t,p["mb"],(function(e){})),Object(d["a"])(_t,p["lb"],(function(e,t){e.playlists=Object(V["e"])(e.playlists,t),delete e.playlistMap[t.id]})),Object(d["a"])(_t,p["rd"],(function(e,t){t.playlist;var s=t.shot,n=t.previewFiles,i=[];if(Object.keys(n).forEach((function(e){n[e].forEach((function(e){i.push(e)}))})),i=Object(f["b"])(i),i.length>0){var a=i[0];s.preview_file_id=a.id,s.preview_file_extension=a.extension,s.preview_file_annotations=a.annotations,s.preview_file_task_id=a.task_id}s.preview_files=n})),Object(d["a"])(_t,p["p"],(function(e,t){var s=t.playlist,n=t.shot;s.shots||(s.shots=[]),s.shots.push({shot_id:n.id,preview_file_id:n.preview_file_id,preview_file_extension:n.preview_file_extension,preview_file_annotations:n.preview_file_annotations,preview_files:n.preview_files})})),Object(d["a"])(_t,p["se"],(function(e,t){var s=t.playlist,n=t.shot;s.shots||(s.shots=[]);var i=s.shots.findIndex((function(e){return e.shot_id===n.id}));s.shots.splice(i,1)})),Object(d["a"])(_t,p["H"],(function(e,t){var s=t.playlist,n=t.info,i=s.shots.find((function(e){return e.shot_id===n.after})),a=s.shots.findIndex((function(e){return e.shot_id===n.after})),o=s.shots.findIndex((function(e){return e.shot_id===n.before}));a>=0&&o>=0&&(s.shots.splice(a,1),a>o&&o++,s.shots.splice(o,0,i))})),Object(d["a"])(_t,p["I"],(function(e,t){var s=t.playlist,n=t.shotId,i=t.previewFileId,a=s.shots.find((function(e){return e.shot_id===n}));a.preview_file_id=i})),Object(d["a"])(_t,p["g"],(function(e,t){var s=e.playlistMap[t.playlist_id];s.build_jobs=[{id:t.build_job_id,created_at:t.created_at,status:"running",playlist_id:s.id}].concat(s.build_jobs)})),Object(d["a"])(_t,p["Kd"],(function(e,t){var s=e.playlistMap[t.playlist_id];Object(V["f"])(s.build_jobs,{id:t.build_job_id,status:"succeeded"})})),Object(d["a"])(_t,p["je"],(function(e,t){var s=e.playlistMap[t.playlist_id];o.a.set(s,"build_jobs",Object(V["e"])(s.build_jobs,t))})),Object(d["a"])(_t,p["we"],(function(e){Object.assign(e,Tt({},Pt))})),_t),At={state:Et,getters:jt,actions:Dt,mutations:xt},Mt={getMilestones:function(e){return new Promise((function(t,s){var n="/api/data/projects/".concat(e.id,"/milestones");l["a"].get(n,(function(e,n){e?s(e):t(n)}))}))},createMilestone:function(e,t){return new Promise((function(s,n){var i={date:t.date.format("YYYY-MM-DD"),name:t.name,task_type_id:t.task_type_id,project_id:e.id};l["a"].post("/api/data/milestones",i,(function(e,t){e?n(e):s(t)}))}))},updateMilestone:function(e){return new Promise((function(t,s){var n={date:e.date.format("YYYY-MM-DD"),name:e.name,task_type_id:e.task_type_id},i="/api/data/milestones/".concat(e.id);l["a"].put(i,n,(function(e,n){e?s(e):t(n)}))}))},deleteMilestone:function(e){return new Promise((function(t,s){var n="/api/data/milestones/".concat(e.id);l["a"].del(n,(function(n){n?s(n):t(e)}))}))},getScheduleItems:function(e){return new Promise((function(t,s){l["a"].get("/api/data/projects/".concat(e.id,"/schedule-items/task-types"),(function(e,n){e?s(e):t(n)}))}))},getAssetTypeScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"asset-types")},getSequenceScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"sequences")},getEpisodeScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"episodes")},getEntitycheduleItems:function(e,t,s){return new Promise((function(n,i){l["a"].get("/api/data/projects/".concat(e.id,"/schedule-items/")+"".concat(t.id,"/").concat(s),(function(e,t){e?i(e):n(t)}))}))},updateScheduleItem:function(e){return new Promise((function(t,s){e.endDate||(e.endDate=e.startDate.add("days",1).clone());var n={start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD"),man_days:e.man_days};l["a"].put("/api/data/schedule-items/".concat(e.id),n,(function(e,n){e?s(e):t(n)}))}))}};function Lt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function It(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Lt(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Lt(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var $t,qt={milestones:{}},Nt=It({},qt),Ft={milestones:function(e){return e.milestones}},Rt={loadScheduleItems:function(e,t){e.commit;return Mt.getScheduleItems(t)},loadAssetTypeScheduleItems:function(e,t){e.commit;var s=t.production,n=t.taskType;return Mt.getAssetTypeScheduleItems(s,n)},loadSequenceScheduleItems:function(e,t){e.commit;var s=t.production,n=t.taskType;return Mt.getSequenceScheduleItems(s,n)},loadEpisodeScheduleItems:function(e,t){e.commit;var s=t.production,n=t.taskType;return Mt.getEpisodeScheduleItems(s,n)},saveScheduleItem:function(e,t){e.commit;return Mt.updateScheduleItem(t)},loadMilestones:function(e){var t=e.commit,s=e.rootState,n=s.productions.currentProduction;return Mt.getMilestones(n).then((function(e){t(p["f"],e)}))},saveMilestone:function(e,t){var s=e.commit,n=e.rootState,i=n.productions.currentProduction;return t.id?Mt.updateMilestone(t).then((function(e){s(p["e"],e)})):Mt.createMilestone(i,t).then((function(e){s(p["e"],e)}))},deleteMilestone:function(e,t){var s=e.commit;e.rootState;return Mt.deleteMilestone(t).then((function(e){s(p["le"],e)}))}},zt=(Ct={},Object(d["a"])(Ct,p["e"],(function(e,t){e.milestones[t.date]=t})),Object(d["a"])(Ct,p["f"],(function(e,t){e.milestones={},t.forEach((function(t){e.milestones[t.date]=t}))})),Object(d["a"])(Ct,p["le"],(function(e,t){delete e.milestones[t.date.format("YYYY-MM-DD")]})),Object(d["a"])(Ct,p["we"],(function(e){Object.assign(e,It({},qt))})),Ct),Bt={state:Nt,getters:Ft,actions:Rt,mutations:zt},Vt=s("c1df"),Ut=s.n(Vt),Ht={getShot:function(e,t){return l["a"].getModel("shots",e)},getShots:function(e,t,s){var n="/api/data/shots/with-tasks";e&&(n+="?project_id=".concat(e.id)),t&&(n+="&episode_id=".concat(t.id)),l["a"].get(n,s)},getSequence:function(e){return l["a"].getModel("sequences",e)},getSequences:function(e,t,s){var n="/api/data/projects/".concat(e.id,"/sequences");t&&(n="/api/data/episodes/".concat(t.id,"/sequences")),l["a"].get(n,s)},getEpisode:function(e){return l["a"].getModel("episodes",e)},getEpisodes:function(e,t){var s="/api/data/projects/".concat(e.id,"/episodes");l["a"].get(s,t)},getShotType:function(e){l["a"].get("/api/data/shot-type",e)},newShot:function(e,t){var s={name:e.name,description:e.description,sequence_id:e.sequence_id};l["a"].post("/api/data/projects/".concat(e.project_id,"/shots"),s,t)},newSequence:function(e,t){var s={name:e.name,episode_id:e.episode_id};l["a"].post("/api/data/projects/".concat(e.project_id,"/sequences"),s,t)},newEpisode:function(e,t){var s={name:e.name};l["a"].post("/api/data/projects/".concat(e.project_id,"/episodes"),s,t)},updateShot:function(e,t){var s={name:e.name,parent_id:e.sequence_id,description:e.description,nb_frames:parseInt(e.nb_frames),data:e.data};void 0===e.frameOut&&void 0===e.frameIn&&void 0===e.fps||Object.assign(s.data,{frame_in:e.frameIn,frame_out:e.frameOut,fps:e.fps}),l["a"].put("/api/data/entities/".concat(e.id),s,t)},updateSequence:function(e,t){var s={name:e.name,description:e.description};l["a"].put("/api/data/entities/".concat(e.id),s,t)},updateEpisode:function(e,t){var s={name:e.name,description:e.description};l["a"].put("/api/data/entities/".concat(e.id),s,t)},deleteShot:function(e,t){e.canceled?l["a"].del("/api/data/shots/".concat(e.id,"?force=true"),t):l["a"].del("/api/data/shots/".concat(e.id),t)},deleteSequence:function(e,t){l["a"].del("/api/data/entities/".concat(e.id),t)},deleteEpisode:function(e,t){l["a"].del("/api/data/entities/".concat(e.id),t)},restoreShot:function(e,t){var s={canceled:!1};l["a"].put("/api/data/entities/".concat(e.id),s,t)},postCsv:function(e,t,s){l["a"].post("/api/import/csv/projects/".concat(e.id,"/shots"),t,s)},getEpisodeStats:function(e){return l["a"].pget("/api/data/projects/".concat(e,"/episodes/stats"))}};function Wt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Yt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wt(s,!0).forEach((function(t){Object(d["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wt(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Gt={shots:[],shotIndex:[]},Kt={getTask:function(e){return z.state.taskMap[e]},getTaskStatus:function(e){return z.state.taskStatusMap[e]},getTaskType:function(e){return x["a"].state.taskTypeMap[e]},getPerson:function(e){return D["a"].state.personMap[e]},populateTask:function(e,t,s){e.name=Kt.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=Kt.getTaskStatus(e.task_status_id).short_name;var n="".concat(t.sequence_name," / ").concat(t.name);return t.episode_name&&(n="".concat(t.episode_name," / ").concat(n)),Object.assign(e,{project_id:t.production_id,entity_name:n,entity_type_name:"Shot",sequence_name:t.sequence_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},setListStats:function(e,t){var s=0,n=0;t.forEach((function(e){s+=e.timeSpent,n+=e.nb_frames})),Object.assign(e,{displayedShotsLength:t.length,displayedShotsTimeSpent:s,displayedShotsFrames:n})},sortValidationColumns:function(e,t,s){var n=Object(w["a"])(e);return Object(f["m"])(n,s)}},Qt={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeStats:{},currentEpisode:null,episodeValidationColumns:[],isFps:!1,isFrameIn:!1,isFrameOut:!1,isTime:!1,displayedShots:[],displayedShotsLength:0,displayedShotsTimeSpent:0,displayedShotsFrames:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},shotFilledColumns:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,editShot:{isLoading:!1,isError:!1},deleteShot:{isLoading:!1,isError:!1},restoreShot:{isLoading:!1,isError:!1},shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0,searchSequenceFilters:[],shotValidationColumns:[]},Xt=Yt({},Qt),Jt={sequences:function(e){return e.sequences},sequenceMap:function(e){return e.sequenceMap},sequenceStats:function(e){return e.sequenceStats},episodes:function(e){return e.episodes},episodeMap:function(e){return e.episodeMap},episodeStats:function(e){return e.episodeStats},shotValidationColumns:function(e){return e.shotValidationColumns},currentEpisode:function(e){return e.currentEpisode},shotSearchQueries:function(e){return e.shotSearchQueries},sequenceSearchQueries:function(e){return e.sequenceSearchQueries},shotMap:function(e){return e.shotMap},isFps:function(e){return e.isFps},isFrameIn:function(e){return e.isFrameIn},isFrameOut:function(e){return e.isFrameOut},isTime:function(e){return e.isTime},shotSearchText:function(e){return e.shotSearchText},sequenceSearchText:function(e){return e.sequenceSearchText},episodeSearchText:function(e){return e.episodeSearchText},shotSelectionGrid:function(e){return e.shotSelectionGrid},sequenceSelectionGrid:function(e){return e.sequenceSelectionGrid},displayedShots:function(e){return e.displayedShots},displayedShotsLength:function(e){return e.displayedShotsLength},displayedShotsTimeSpent:function(e){return e.displayedShotsTimeSpent},displayedShotsFrames:function(e){return e.displayedShotsFrames},displayedSequences:function(e){return e.displayedSequences},displayedSequencesLength:function(e){return e.displayedSequencesLength},displayedEpisodes:function(e){return e.displayedEpisodes},displayedEpisodesLength:function(e){return e.displayedEpisodesLength},shotFilledColumns:function(e){return e.shotFilledColumns},displayedShotsBySequence:function(e){return Object(V["b"])(e.displayedShots,"sequence_name")},isShotsLoading:function(e){return e.isShotsLoading},isShotsLoadingError:function(e){return e.isShotsLoadingError},editShot:function(e){return e.editShot},deleteShot:function(e){return e.deleteShot},restoreShot:function(e){return e.restoreShot},shotCreated:function(e){return e.shotCreated},shotsCsvFormData:function(e){return e.shotsCsvFormData},shotListScrollPosition:function(e){return e.shotListScrollPosition},sequenceListScrollPosition:function(e){return e.sequenceListScrollPosition},episodeListScrollPosition:function(e){return e.episodeListScrollPosition},episodeValidationColumns:function(e){return e.episodeValidationColumns},shotsByEpisode:function(e){for(var t=[],s=[],n=null,i=0,a=Object.values(e.shotMap);i<a.length;i++){var o=a[i];n&&o.sequence_name!==n.sequence_name&&(t.push(s.slice(0)),s=[]),s.push(o),n=o}return t.push(s),t},searchSequenceFilters:function(e){return e.searchSequenceFilters},getSequenceOptions:function(e){return e.sequences.map((function(e){return{label:e.name,value:e.id}}))},getEpisodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))},isSingleEpisode:function(e){return e.episodes.length<2},episodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))}},Zt={getPending:function(e){e.commit;var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(e,s){var n=[];Gt.shots.forEach((function(e){var s=!1;e.tasks.forEach((function(e){var n=z.state.taskMap[e];if(!s)if(t){if(n.last_comment_date){var i=Ut()(n.last_comment_date),a=Ut()().subtract(1,"days");s="wfa"===n.task_status_short_name&&i.isAfter(a)}}else s="wfa"===n.task_status_short_name})),s&&n.push(e)})),e(n)}))},clearEpisodes:function(e){var t=e.commit;t(p["L"])},loadEpisodes:function(e,t){var s=e.commit,n=(e.state,e.rootGetters),i=n.currentProduction;Ht.getEpisodes(i,(function(e,n){e&&console.error(e),s(p["Mc"],n),t&&t()}))},loadShots:function(e,t){var s=e.commit,n=(e.dispatch,e.state),i=e.rootGetters,a=i.currentProduction,o=i.userFilters,r=i.taskTypeMap,c=i.taskMap,d=i.personMap,l=i.isTVShow,u=l?i.currentEpisode:null;return l&&!u?t():n.isShotsLoading?t():(s(p["od"]),void Ht.getSequences(a,u,(function(e,n){e?s(p["nd"]):Ht.getShots(a,u,(function(e,i){e?s(p["nd"]):(s(p["jd"],n),s(p["md"],{production:a,shots:i,userFilters:o,taskTypeMap:r,taskMap:c,personMap:d})),t&&t(e)}))})))},loadEpisode:function(e,t){var s=e.commit,n=e.state;return Ht.getEpisode(t).then((function(e){n.episodeMap[e.id]?s(p["uf"],e):s(p["b"],e)})).catch((function(e){return console.error(e)}))},loadSequence:function(e,t){var s=e.commit,n=e.state;return Ht.getSequence(t).then((function(e){n.sequenceMap[e.id]?s(p["yf"],e):s(p["n"],e)})).catch((function(e){return console.error(e)}))},loadShot:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=i.personMap,o=i.currentProduction,r=i.taskMap,c=i.taskTypeMap;return Ht.getShot(t).then((function(e){n.shotMap[e.id]?s(p["zf"],e):s(p["o"],{shot:e,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(e){return console.error(e)}))},loadShotCasting:function(e,t){var s=e.commit,n=e.rootGetters,i=n.assetMap;return T.getShotCasting(t).then((function(e){s(p["pd"],{shot:t,casting:e,assetMap:i})}))},newShot:function(e,t){var s=e.commit,n=e.dispatch,i=(e.rootGetters,t.shot),a=t.callback;s(p["Vd"]),Ht.newShot(i,(function(e,t){if(e)s(p["Ud"]),a&&a(e);else{s(p["Td"],t);var i=Xt.shotValidationColumns,o=i.map((function(e){return n("createTask",{entityId:t.id,projectId:t.project_id,taskTypeId:e,type:"shots"})}));Promise.all(o).then((function(){a&&a(null,t)})).catch((function(e){console.log(e)}))}}))},newSequence:function(e,t){var s=e.commit,n=(e.state,t.sequence),i=t.callback;s(p["Sd"]),Ht.newSequence(n,(function(e,t){e?s(p["Rd"]):s(p["Qd"],t),i&&i(e,t)}))},newEpisode:function(e,t){var s=e.commit;e.state;s(p["Od"]),Ht.newEpisode(t.episode,(function(e,n){e?s(p["Nd"]):s(p["Md"],n),t.callback&&t.callback(e,n)}))},editShot:function(e,t){var s=e.commit;e.state;s(p["jc"]),Ht.updateShot(t.data,(function(e,n){e?s(p["ic"]):s(p["hc"],n),t.callback&&t.callback(e)}))},editEpisode:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(p["Ub"]),Ht.updateEpisode(t,(function(t,i){t?(s(p["Tb"]),n(t)):(s(p["Sb"],i),e(i))}))}))},editSequence:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(p["gc"]),Ht.updateSequence(t,(function(t,i){t?(s(p["fc"]),n(t)):(s(p["ec"],i),e(i))}))}))},deleteShot:function(e,t){var s=e.commit,n=e.state,i=t.shot,a=t.callback;s(p["wb"]),Ht.deleteShot(i,(function(e){if(e)s(p["vb"]);else{var t=n.shotMap[i.id];t&&t.tasks.length>0&&!t.canceled?s(p["t"],t):s(p["re"],i),s(p["ub"],i)}a&&a(e)}))},deleteEpisode:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(p["gb"]),Ht.deleteEpisode(t,(function(i){i?(s(p["fb"]),n(i)):(s(p["ke"],t),e(t))}))}))},deleteSequence:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(p["tb"]),Ht.deleteSequence(t,(function(i){i?s(p["sb"]):s(p["pe"],t),i?n(i):e(t)}))}))},restoreShot:function(e,t){var s=e.commit;e.state;s(p["De"]);var n=t.shot;Ht.restoreShot(n,(function(e){e?s(p["Ce"]):s(p["Be"],n),t.callback&&t.callback(e)}))},uploadShotFile:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters;s(p["Bc"]);var a=i.currentProduction;Ht.postCsv(a,n.shotsCsvFormData,(function(e){s(p["Ac"]),t&&t(e)}))},displayMoreShots:function(e){var t=e.commit,s=e.rootGetters;t(p["Hb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},displayMoreSequences:function(e){var t=e.commit;t(p["Gb"])},displayMoreEpisodes:function(e){var t=e.commit;t(p["Fb"])},setShotSearch:function(e,t){var s=e.commit,n=e.rootGetters,i=n.taskStatusMap,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction;s(p["ef"],{shotSearch:t,taskStatusMap:i,taskMap:o,taskTypeMap:a,production:r})},saveShotSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=Xt.shotSearchQueries.find((function(e){return e.name===t})),o=n.currentProduction;a?e():C["a"].createFilter("shot",t,t,o.id,null,(function(t,n){s(p["He"],{searchQuery:n,production:o}),t?i(t):e(n)}))}))},removeShotSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;C["a"].removeFilter(t,(function(n){s(p["te"],{searchQuery:t,production:a}),n?i(n):e()}))}))},saveSequenceSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=Xt.sequenceSearchQueries.find((function(e){return e.name===t})),o=n.currentProduction;a?e():C["a"].createFilter("sequence",t,t,o.id,null,(function(t,n){s(p["Ge"],{searchQuery:n,production:o}),t?i(t):e(n)}))}))},removeSequenceSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;C["a"].removeFilter(t,(function(n){s(p["qe"],{searchQuery:t,production:a}),n?i(n):e()}))}))},initSequences:function(e){e.commit;var t=e.dispatch,s=e.state,n=e.rootState;e.rootGetters;return new Promise((function(e,i){var a=n.route.params.production_id;t("setLastProductionScreen","sequences"),0!==s.sequences.length&&s.sequences[0].production_id===a||t("loadShots",(function(s){s?i(s):(t("computeSequenceStats"),e())}))}))},setSequenceSearch:function(e,t){var s=e.commit,n=e.rootGetters;s(p["cf"],{sequenceSearch:t,production:n.currentProduction})},setSequenceListScrollPosition:function(e,t){var s=e.commit;s(p["bf"],t)},computeSequenceStats:function(e){var t=e.commit,s=e.rootGetters,n=s.taskStatusMap,i=s.taskMap;t(p["R"],{taskStatusMap:n,taskMap:i})},setCurrentEpisode:function(e,t){var s=e.commit,n=e.rootGetters;s(p["Ne"],t);var i=n.currentProduction.id;s(p["xe"],{productionId:i,episodeId:t})},initEpisodes:function(e){e.commit;var t=e.dispatch,s=e.state,n=e.rootState,i=e.rootGetters;return new Promise((function(e,a){var o=n.route.params.production_id,r=i.isTVShow;t("setLastProductionScreen","episodes"),0!==s.episodes.length&&s.episodes[0].production_id===o||(r?t("loadEpisodes",(function(){return t("loadEpisodeStats",o)})):(t("computEpisodeStats"),e()))}))},loadEpisodeStats:function(e,t){var s=e.commit;return new Promise((function(e,n){s(p["Re"],{}),Ht.getEpisodeStats(t).then((function(t){s(p["Re"],t),e()})).catch(n)}))},setEpisodeSearch:function(e,t){var s=e.commit;s(p["Qe"],t)},setEpisodeListScrollPosition:function(e,t){var s=e.commit;s(p["Pe"],t)},computeEpisodeStats:function(e){var t=e.commit,s=e.dispatch,n=e.rootGetters,i=n.taskStatusMap,a=n.taskMap,o=n.isTVShow;o?s("loadEpisodeStats",n.currentProduction.id):t(p["Q"],{taskStatusMap:i,taskMap:a})},getShotsCsvLines:function(e){var t=e.state,s=e.rootGetters,n=s.currentProduction,i=Gt.shots;Gt.result&&Gt.result.length>0&&(i=Gt.result);var a=i.map((function(e){var i=[e.name,e.description];return Object(f["c"])(Object(w["a"])(n.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(t){i.push(e.data[t.field_name])})),i.push(e.nb_frames),t.isFrameIn&&i.push(e.data.frame_in),t.isFrameOut&&i.push(e.data.frame_out),t.isFps&&i.push(e.data.fps),t.isTime&&i.push(e.timeSpent),t.shotValidationColumns.forEach((function(t){var n=s.taskMap[e.validations[t]];n?i.push(n.task_status_short_name):i.push("")})),i}));return a}},es=($t={},Object(d["a"])($t,p["O"],(function(e){Gt.shots=[],Gt.result=[],Gt.shotIndex={},e.shotMap={},e.sequences=[],e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(d["a"])($t,p["od"],(function(e){Gt.shots=[],Gt.result=[],Gt.shotIndex={},e.shotMap={},e.shotValidationColumns=[],e.sequences=[],e.isShotsLoading=!0,e.isShotsLoadingError=!1,e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(d["a"])($t,p["nd"],(function(e){e.isShotsLoading=!1,e.isShotsLoadingError=!0})),Object(d["a"])($t,p["md"],(function(e,t){var s=t.production,n=t.shots,i=t.userFilters,a=t.taskMap,o=t.taskTypeMap,r=t.personMap,c={},d=!1,l=!1,u=!1,p=!1;n=Object(f["j"])(n),Gt.shots=n,Gt.shotIndex=Object(ne["e"])(n),e.shotMap={},n.forEach((function(t){var n=[],i={},f=0;t.project_name=s.name,t.production_id=s.id,t.tasks.forEach((function(e){Kt.populateTask(e,t,s),f+=e.duration,e.episode_id=t.episode_id,a[e.id]=e,i[e.task_type_id]=e.id,n.push(e.id);var d=o[e.task_type_id];c[d.name]||(c[d.name]=d.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return r[e].name.localeCompare(r[t])})))})),t.tasks=n,t.validations=i,t.timeSpent=f,!d&&t.data.fps&&(d=!0),!l&&t.data.frame_in&&(l=!0),!u&&t.data.frame_out&&(u=!0),!p&&t.timeSpent>0&&(p=!0),e.shotMap[t.id]=t}));var h=n.slice(0,ee["a"]),m=Object(V["a"])(h);e.shotValidationColumns=Kt.sortValidationColumns(Object.values(c),m,o),e.nbValidationColumns=e.shotValidationColumns.length,e.isFps=d,e.isFrameIn=l,e.isFrameOut=u,e.isTime=p,e.isShotsLoading=!1,e.isShotsLoadingError=!1,e.displayedShots=h,e.shotFilledColumns=m;var _=e.displayedShots.length,v=e.nbValidationColumns;e.shotSelectionGrid=Object(te["b"])(_,v),Kt.setListStats(e,n),i.shot&&i.shot[s.id]?e.shotSearchQueries=i.shot[s.id]:e.shotSearchQueries=[],i.sequence&&i.sequence[s.id]?e.sequenceSearchQueries=i.sequence[s.id]:e.sequenceSearchQueries=[]})),Object(d["a"])($t,p["He"],(function(e,t){var s=t.searchQuery;e.shotSearchQueries.push(s),e.shotSearchQueries=Object(f["c"])(e.shotSearchQueries)})),Object(d["a"])($t,p["te"],(function(e,t){var s=t.searchQuery,n=e.shotSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.shotSearchQueries.splice(n,1)})),Object(d["a"])($t,p["Ge"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries.push(s),e.sequenceSearchQueries=Object(f["c"])(e.sequenceSearchQueries)})),Object(d["a"])($t,p["qe"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries=e.sequenceSearchQueries.filter((function(e){return e.name!==s.name}))})),Object(d["a"])($t,p["jd"],(function(e,t){var s={};t.forEach((function(t){if(s[t.id]=t,t.parent_id){var n=e.episodeMap[t.parent_id];n&&Object.assign(t,{episode_id:n.id,episode_name:n.name})}}));var n=Object(f["i"])(t);e.sequenceMap=s,e.sequences=n,e.sequenceIndex=Object(ne["d"])(n),e.displayedSequences=n.slice(0,2*ee["a"]),e.displayedSequencesLength=n.length})),Object(d["a"])($t,p["Mc"],(function(e,t){var s={};t||(t=[]),t.forEach((function(e){s[e.id]=e})),e.episodeMap=s,e.episodes=Object(f["c"])(t),e.episodeIndex=Object(ne["b"])(e.episodes),e.displayedEpisodes=e.episodes.slice(0,ee["a"]),e.displayedEpisodesLength=e.episodes.length,e.episodes.length>0?e.currentEpisode=e.episodes[0]:e.currentEpisode=null})),Object(d["a"])($t,p["qd"],(function(e,t){var s=t.shot,n=t.taskTypeMap;s.tasks.forEach((function(e){Kt.populateTask(e,s)})),s.tasks=Object(f["l"])(s.tasks,n),e.shotMap[s.id]=s})),Object(d["a"])($t,p["if"],(function(e,t){e.shotsCsvFormData=t})),Object(d["a"])($t,p["Bc"],(function(e){})),Object(d["a"])($t,p["Ac"],(function(e){e.shotsCsvFormData=null})),Object(d["a"])($t,p["Pc"],(function(e,t){e.openProductions=t})),Object(d["a"])($t,p["jc"],(function(e,t){e.editShot.isLoading=!0,e.editShot.isError=!1})),Object(d["a"])($t,p["ic"],(function(e){e.editShot.isLoading=!1,e.editShot.isError=!0})),Object(d["a"])($t,p["hc"],(function(e,t){var s=e.shotMap[t.id],n=e.sequences.find((function(e){return e.id===t.parent_id}));if(t.sequence_name=n.name,s)Object.assign(s,t);else{Gt.shots.push(t),Gt.shots=Object(f["j"])(Gt.shots),e.shotMap[t.id]=t;var i=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(te["b"])(i,a)}e.editShot={isLoading:!1,isError:!1},Gt.shotIndex=Object(ne["e"])(Gt.shots),e.shotCreated=t.name,e.shotSearchText?Kt.setListStats(e,Gt.result):Kt.setListStats(e,Gt.shots),t.data.fps&&(e.isFps=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0)})),Object(d["a"])($t,p["gc"],(function(e,t){})),Object(d["a"])($t,p["fc"],(function(e){})),Object(d["a"])($t,p["ec"],(function(e,t){var s=e.sequenceMap[t.id];s&&Object.assign(s,t),e.sequenceIndex=Object(ne["d"])(e.sequences)})),Object(d["a"])($t,p["Ub"],(function(e,t){})),Object(d["a"])($t,p["Tb"],(function(e){})),Object(d["a"])($t,p["Sb"],(function(e,t){var s=e.episodeMap[t.id];s&&Object.assign(s,t),e.episodeIndex=Object(ne["b"])(e.episodes)})),Object(d["a"])($t,p["wb"],(function(e){e.deleteShot={isLoading:!0,isError:!1}})),Object(d["a"])($t,p["vb"],(function(e){e.deleteShot={isLoading:!1,isError:!0}})),Object(d["a"])($t,p["ub"],(function(e,t){e.deleteShot={isLoading:!1,isError:!1}})),Object(d["a"])($t,p["tb"],(function(e){})),Object(d["a"])($t,p["sb"],(function(e){})),Object(d["a"])($t,p["gb"],(function(e){})),Object(d["a"])($t,p["fb"],(function(e){})),Object(d["a"])($t,p["De"],(function(e){e.restoreShot={isLoading:!0,isError:!1}})),Object(d["a"])($t,p["Ce"],(function(e){e.restoreShot={isLoading:!1,isError:!0}})),Object(d["a"])($t,p["Be"],(function(e,t){var s=e.shotMap[t.id];s.canceled=!1,e.restoreShot={isLoading:!1,isError:!1},Gt.shotIndex=Object(ne["e"])(Gt.shots)})),Object(d["a"])($t,p["Wd"],(function(e,t){t.comment,t.taskId})),Object(d["a"])($t,p["ef"],(function(e,t){var s=t.shotSearch,n=t.taskStatusMap,i=t.taskMap,a=t.taskTypeMap,o=t.production,r=Object.values(a),c=Object.values(n),d=s,l=Object(ie["e"])(d)||[],u=Object(ie["d"])(Gt.shotIndex,r,c,o.descriptors,d),p=Object(ne["h"])(Gt.shotIndex,l)||Gt.shots;p=Object(ie["a"])(p,u,i),Gt.result=p;var f=p.slice(0,ee["a"]),h=f.length,m=e.nbValidationColumns;Kt.setListStats(e,p),Object.assign(e,{displayedShots:f,shotFilledColumns:Object(V["a"])(f),shotSearchText:s,shotSelectionGrid:Object(te["b"])(h,m)})})),Object(d["a"])($t,p["cf"],(function(e,t){var s=t.sequenceSearch,n=t.production,i=Object(ie["e"])(s),a=Object(ne["h"])(e.sequenceIndex,i)||e.sequences;e.searchSequenceFilters=Object(ie["d"])(Gt.shotIndex,[],[],n.descriptors.filter((function(e){return"Shot"===e.entity_type})),s),e.displayedSequences=a.slice(0,2*ee["a"]),e.displayedSequencesLength=a.length,e.sequenceSearchText=s})),Object(d["a"])($t,p["Qe"],(function(e,t){var s=Object(ie["e"])(t),n=Object(ne["h"])(e.episodeIndex,s)||e.episodes;e.displayedEpisodes=n.slice(0,ee["a"]),e.displayedEpisodesLength=n.length,e.episodeSearchText=t})),Object(d["a"])($t,p["Vd"],(function(e){})),Object(d["a"])($t,p["Ud"],(function(e){})),Object(d["a"])($t,p["Td"],(function(e,t){var s=e.sequenceMap[t.parent_id],n=e.episodeMap[s.parent_id];t.production_id=t.project_id,t.sequence_name=s.name,t.sequence_id=s.id,t.episode_name=n?n.name:null,t.episode_id=n?n.id:null,t.preview_file_id="",t.tasks=[],t.validations={},t.data={},Gt.shots.push(t),Gt.shots=Object(f["j"])(Gt.shots),e.displayedShots=Gt.shots.slice(0,ee["a"]),Kt.setListStats(e,Gt.shots),e.shotFilledColumns=Object(V["a"])(e.displayedShots),e.shotMap[t.id]=t,Gt.shotIndex=Object(ne["e"])(Gt.shots);var i=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(te["b"])(i,a),t.data.fps&&(e.isFps=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0)})),Object(d["a"])($t,p["Sd"],(function(e){})),Object(d["a"])($t,p["Rd"],(function(e){})),Object(d["a"])($t,p["Qd"],(function(e,t){if(t.parent_id){var s=e.episodeMap[t.parent_id];t.episode_id=s.id,t.episode_name=s.name}e.sequences.push(t),e.sequences=Object(f["i"])(e.sequences),e.sequenceMap[t.id]=t,e.sequenceIndex=Object(ne["d"])(e.sequences)})),Object(d["a"])($t,p["Od"],(function(e){})),Object(d["a"])($t,p["Nd"],(function(e){})),Object(d["a"])($t,p["Md"],(function(e,t){e.episodes.push(t),e.episodes=Object(f["c"])(e.episodes),e.displayedEpisodes=e.episodes,e.episodeMap[t.id]=t})),Object(d["a"])($t,p["S"],(function(e,t){t.forEach((function(t){if(t){var s=e.shotMap[t.entity_id];if(s){var n=Yt({},s.validations);o.a.set(n,t.task_type_id,t.id),delete s.validations,o.a.set(s,"validations",n)}}}))})),Object(d["a"])($t,p["Hb"],(function(e,t){var s=t.taskTypeMap,n=t.taskStatusMap,i=t.taskMap,a=t.production,o=Gt.shots;if(e.shotSearchText.length>0){var r=Object.values(s),c=Object.values(n),d=e.shotSearchText,l=Object(ie["e"])(d)||[],u=Object(ie["d"])(Gt.shotIndex,r,c,a.descriptors||[],d);o=Object(ne["h"])(Gt.shotIndex,l)||Gt.shots,o=Object(ie["a"])(o,u,i)}e.displayedShots=o.slice(0,e.displayedShots.length+ee["a"]),e.shotFilledColumns=Object(V["a"])(e.displayedShots);var p=e.displayedShots.length-ee["a"],f=e.displayedShots.length,h=e.nbValidationColumns;p>=0&&(e.shotSelectionGrid=Object(te["a"])(e.shotSelectionGrid,p,f,h))})),Object(d["a"])($t,p["Gb"],(function(e,t){var s=e.sequences;if(e.sequenceSearchText.length>0){var n=Object(ie["e"])(e.sequenceSearchText);s=Object(ne["h"])(e.sequenceIndex,n)}e.displayedSequences=s.slice(0,e.displayedSequences.length+ee["a"])})),Object(d["a"])($t,p["Fb"],(function(e,t){var s=e.episodes;if(e.episodeSearchText.length>0){var n=Object(ie["e"])(e.episodeSearchText);s=Object(ne["h"])(e.episodeIndex,n)}e.displayedEpisodes=s.slice(0,e.displayedEpisodes.length+ee["a"])})),Object(d["a"])($t,p["Oe"],(function(e,t){e.shotSearchText="",e.sequenceSearchText=""})),Object(d["a"])($t,p["L"],(function(e){e.episodes=[],e.currentEpisode=null})),Object(d["a"])($t,p["Ze"],(function(e,t){var s=t.entityId,n=(t.taskId,t.previewId),i=t.taskMap,a=e.shotMap[s];a&&(a.preview_file_id=n,a.tasks.forEach((function(e){var t=i[e];t.entity.preview_file_id=n})))})),Object(d["a"])($t,p["df"],(function(e,t){e.shotListScrollPosition=t})),Object(d["a"])($t,p["bf"],(function(e,t){e.sequenceListScrollPosition=t})),Object(d["a"])($t,p["Pe"],(function(e,t){e.episodeListScrollPosition=t})),Object(d["a"])($t,p["oe"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!1)})),Object(d["a"])($t,p["l"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!0)})),Object(d["a"])($t,p["N"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));e.shotSelectionGrid=Object(te["c"])(s)})),Object(d["a"])($t,p["Xd"],(function(e,t){var s=e.shotMap[t.entity_id];s&&t&&(t=Kt.populateTask(t,s),s.tasks.push(t),o.a.set(s.validations,t.task_type_id,t.id))})),Object(d["a"])($t,p["xb"],(function(e,t){var s=e.displayedShots.find((function(e){return e.id===t.entity_id}));if(s){var n=JSON.parse(JSON.stringify(s.validations));delete n[t.task_type_id],delete s.validations,o.a.set(s,"validations",n);var i=s.tasks.findIndex((function(e){return e===t.id}));s.tasks.splice(i,1)}})),Object(d["a"])($t,p["S"],(function(e,t){t.forEach((function(t){if(t){var s=e.shotMap[t.entity_id];if(s){var n=Yt({},s.validations);o.a.set(n,t.task_type_id,t.id),delete s.validations,o.a.set(s,"validations",n)}}}))})),Object(d["a"])($t,p["m"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.shotSelectionGrid=s})),Object(d["a"])($t,p["Ne"],(function(e,t){t&&(e.currentEpisode=e.episodeMap[t])})),Object(d["a"])($t,p["Re"],(function(e,t){var s={};t.all&&Object.keys(t.all).forEach((function(e){"all"===e||t.all[e].name||(s[e]=!0)})),e.episodeStats=t,e.episodeValidationColumns=Object.keys(s)})),Object(d["a"])($t,p["R"],(function(e,t){var s=t.taskMap,n=t.taskStatusMap,i=Gt.shots;e.searchSequenceFilters.length>0&&(i=Object(ie["a"])(Gt.shots,e.searchSequenceFilters,{})),e.sequenceStats=Object(se["a"])(i,"sequence_id",n,s)})),Object(d["a"])($t,p["Q"],(function(e,t){var s=t.taskMap,n=t.taskStatusMap;e.episodeStats=Object(se["a"])(Gt.shots,"episode_id",n,s)})),Object(d["a"])($t,p["b"],(function(e,t){e.episodes.push(t);var s=Object(f["c"])(e.episodes);e.episodeMap[t.id]=t,e.episodes=s,e.displayedEpisodes.push(t),e.displayedEpisodes=Object(f["c"])(e.displayedEpisodes),e.episodeIndex=Object(ne["b"])(s),e.displayedEpisodesLength=s.length})),Object(d["a"])($t,p["uf"],(function(e,t){Object.assign(e.episodeMap[t.id],t),e.episodeIndex=Object(ne["d"])(e.episodes)})),Object(d["a"])($t,p["ke"],(function(e,t){delete e.episodeMap[t.id],e.episodes=Object(V["e"])(e.episodes,t),e.displayedEpisodes=Object(V["e"])(e.displayedEpisodes,t),e.episodeIndex=Object(ne["b"])(e.episodes)})),Object(d["a"])($t,p["n"],(function(e,t){e.sequences.push(t);var s=Object(f["i"])(e.sequences);if(e.sequenceMap[t.id]=t,t.parent_id){var n=e.episodeMap[t.parent_id];n&&Object.assign(t,{episode_id:n.id,episode_name:n.name})}e.sequences=s,e.displayedSequences.push(t),e.displayedSequences=Object(f["i"])(e.displayedSequences),e.sequenceIndex=Object(ne["d"])(s),e.displayedSequencesLength=s.length})),Object(d["a"])($t,p["yf"],(function(e,t){Object.assign(e.sequenceMap[t.id],t),e.sequenceIndex=Object(ne["d"])(e.sequences)})),Object(d["a"])($t,p["pe"],(function(e,t){delete e.sequenceMap[t.id],e.sequences=Object(V["e"])(e.sequences,t),e.displayedSequences=Object(V["e"])(e.displayedSequences,t),e.sequenceIndex=Object(ne["d"])(e.sequences)})),Object(d["a"])($t,p["o"],(function(e,t){t.taskTypeMap;var s=t.taskMap,n=t.personMap,i=t.production,a=t.shot,o=[],r={},c=0;a.project_name=i.name,a.production_id=i.id,a.tasks.forEach((function(e){Kt.populateTask(e,a,i),c+=e.duration,e.episode_id=a.episode_id,s[e.id]=e,r[e.task_type_id]=e.id,o.push(e.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return n[e].name.localeCompare(n[t])})))})),a.tasks=o,a.validations=r,a.timeSpent=c,Gt.shots.push(a),Gt.shots=Object(f["j"])(Gt.shots),e.shotMap[a.id]=a,e.displayedShots.push(a),e.displayedShots=Object(f["j"])(e.displayedShots),e.displayedShotsLength=Gt.shots.length,e.shotFilledColumns=Object(V["a"])(e.displayedShots);var d=e.displayedShots.length,l=e.nbValidationColumns;e.shotSelectionGrid=Object(te["b"])(d,l),e.shotMap[a.id]=a})),Object(d["a"])($t,p["zf"],(function(e,t){Object.assign(e.shotMap[t.id],t),Gt.shotIndex=Object(ne["e"])(Gt.shots)})),Object(d["a"])($t,p["re"],(function(e,t){Gt.shots=Object(V["e"])(Gt.shots,t),e.displayedShots=Object(V["e"])(e.displayedShots,t),delete e.shotMap[t.id],t.timeSpent&&(e.displayedShotsTimeSpent-=t.timeSpent),t.nb_frames&&(e.displayedShotsFrames-=t.nb_frames)})),Object(d["a"])($t,p["t"],(function(e,t){t.canceled=!0})),Object(d["a"])($t,p["we"],(function(e){Object.assign(e,Yt({},Qt)),Gt.shots=[],Gt.result=[],Gt.shotIndex={}})),$t),ts={state:Xt,getters:Jt,actions:Zt,mutations:es},ss=s("e07d");o.a.use(r["a"]);var ns={assetTypes:S,assets:me,breakdown:Oe,customActions:$e,login:We,main:tt,people:D["a"],playlists:At,productions:Z,news:pt,notifications:St,schedule:Bt,shots:ts,tasks:z,taskTypes:x["a"],taskStatus:ss["a"],user:wt["a"]};t["a"]=new r["a"].Store({getters:n,strict:!0,modules:ns})},"440f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("main.csv.import_title"))+"\n      ")]),s("p",{staticClass:"description",on:{submit:function(e){e.preventDefault()}}},[e._v("\n        "+e._s(e.$t("main.csv.required_fields"))+"\n        "),s("ul",e._l(e.columns,(function(t){return s("li",{key:t},[e._v("\n            "+e._s(t)+"\n          ")])})),0)]),s("p",[e._v("\n        "+e._s(e.$t("main.csv.select_file"))+"\n      ")]),s("file-upload",{on:{fileselected:e.onFileSelected}}),s("modal-footer",{attrs:{"error-text":e.$t("main.csv.error_upload"),"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("d065"),c=s("4085"),d=s("d5c9");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"import-people-modal",mixins:[r["a"]],components:{FileUpload:c["a"],ModalFooter:d["a"]},data:function(){return{formData:null}},props:{active:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:u({},Object(o["c"])([])),methods:u({},Object(o["b"])([]),{onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},onConfirmClicked:function(){this.$emit("confirm")}}),watch:{}},f=p,h=(s("592c"),s("2877")),m=Object(h["a"])(f,n,i,!1,null,"7396ddf8",null);t["a"]=m.exports},4663:function(e,t,s){},4678:function(e,t,s){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=a(e);return s(t)}function a(e){var t=n[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}i.keys=function(){return Object.keys(n)},i.resolve=a,e.exports=i,i.id="4678"},4736:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"production-name"},[s("router-link",{staticClass:"flexrow",attrs:{title:e.productionInfo,to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.project),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.project.has_avatar?s("img",{style:{width:e.size+"px",height:e.size+"px"},attrs:{src:e.getThumbnailPath(e.project)}}):s("span",[e._v("\n        "+e._s(e.generateAvatar(e.project))+"\n      ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v("\n      "+e._s(e.project.name)+"\n    ")])])],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=(s("c5f6"),s("7930")),r=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"production-name",props:{project:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:d({},Object(r["c"])([]),{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.project.id}};return this.project.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.project.first_episode_id),e},productionInfo:function(){var e=this.project.fps,t=this.project.ratio,s=this.project.resolution;return e||t||s?"fps: ".concat(e,"\nratio: ").concat(t,"\nresolution: ").concat(s):""}}),methods:d({},Object(r["b"])([]),{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},u=l,p=(s("e8f3"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"523fdabc",null);t["a"]=f.exports},"48c6":function(e,t,s){"use strict";s("6762"),s("2fdb");var n=s("db82"),i=s.n(n),a=s("4360"),o=s("9fb0"),r={logIn:function(e,t,s){i.a.post("/api/auth/login").send({email:e,password:t}).end((function(e,t){if(e)t.body.default_password&&(e.default_password=t.body.default_password,e.token=t.body.token),s(e);else if(t.body.login){var n=t.body.user,i=t.body.ldap;a["a"].commit(o["U"],{isLdap:i}),s(null,n)}else a["a"].commit(o["Lf"]),s(new Error("Login failed"))}))},logout:function(e){i.a.get("/api/auth/logout").end((function(t,s){t&&(console.error(t),e(t)),a["a"].commit(o["Mf"]),e()}))},resetPassword:function(e){return new Promise((function(t,s){i.a.post("/api/auth/reset-password").send({email:e}).end((function(e,n){e?s(e):t()}))}))},resetChangePassword:function(e,t,s){return new Promise((function(n,a){i.a.put("/api/auth/reset-password").send({token:e,password:t,password2:s}).end((function(e,t){e?a(e):n()}))}))},isServerLoggedIn:function(e){i.a.get("/api/auth/authenticated").end((function(t,s){if(t&&s&&[401,422].includes(s.statusCode))a["a"].commit(o["Lf"]),e(null);else if(t)a["a"].commit(o["Lf"]),e(t);else if(s&&null===s.body)a["a"].commit(o["Lf"]),e(t);else{var n=s.body.user,i=s.body.organisation||{},r=s.body.ldap;i.use_original_file_name=i.use_original_file_name?"true":"false",a["a"].commit(o["We"],i),a["a"].commit(o["Kf"],n),e(null,r)}}))},requireAuth:function(e,t,s){var n=function(t){a["a"].state.user.isAuthenticated?(a["a"].commit(o["U"],{isLdap:t}),s()):a["a"].dispatch("getOrganisation").then((function(){s({path:"/login",query:{redirect:e.fullPath}})})).catch((function(t){console.error(t),s({path:"/login",query:{redirect:e.fullPath}})}))};null===a["a"].state.user.user?r.isServerLoggedIn((function(t,i){t?s({path:"/server-down",query:{redirect:e.fullPath}}):n(i)})):n()},isPasswordValid:function(e,t){return e.length>6&&e===t}};t["a"]=r},"49b6":function(e,t,s){"use strict";var n=s("6ac8"),i=s.n(n);i.a},"49c1":function(e,t,s){},"49c3":function(e,t,s){},"4ca5":function(e,t,s){"use strict";var n=s("d949"),i=s.n(n);i.a},"4cb5":function(e,t,s){},"4d04":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"flexrow search-field-wrapper",on:{click:e.focus}},[s("div",{staticClass:"flexrow-item"},[s("search-icon",{staticClass:"search-icon"})],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:e.placeholder},on:{input:e.onSearchChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSaveClicked(t)},focus:e.setFocusedStyle,blur:e.unsetFocusedStyle}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:e.clearSearch}},[e._v("\n      x\n    ")])]),e.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button save-button",on:{click:e.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):e._e()])},i=[],a=s("0a35"),o={name:"search-field",data:function(){return{}},props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:a["z"],SearchIcon:a["A"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var e=this.$refs.input.value.trim();e.length>0&&this.canSave&&this.$emit("save",e)},getValue:function(e){return this.$refs.input.value},setValue:function(e){this.$refs.input.value=e},focus:function(){this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()},setFocusedStyle:function(){this.$refs["wrapper"].className="flexrow search-field-wrapper focused"},unsetFocusedStyle:function(){this.$refs["wrapper"].className="flexrow search-field-wrapper"}}},r=o,c=(s("a29d"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"4680770d",null);t["a"]=d.exports},"4d98":function(e,t,s){},"4e2d":function(e,t,s){},"4e8d":function(e,t,s){},"4f18":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("8e6e"),s("ac6a"),s("456d");var n=s("bd86"),i=s("2f62");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(s,!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var r={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:o({},Object(i["c"])(["organisation"])),methods:{formatDuration:function(e){return e?(e/60/this.organisation.hours_by_day).toLocaleString("fullwide",{maximumFractionDigits:1}):0},formatBoolean:function(e){return e?this.$t("main.yes"):this.$t("main.no")},formatEstimation:function(e){return e?e<10?e:this.formatDuration(e):0}}}},5037:function(e,t,s){"use strict";var n=s("66cf"),i=s.n(n);i.a},"52ad":function(e,t,s){"use strict";s("8e6e"),s("456d"),s("8615"),s("20d6"),s("ac6a"),s("7514");var n,i=s("bd86"),a=(s("6b54"),s("7f7f"),s("ba4c")),o=s.n(a),r=s("ce6b"),c=s("7930"),d=s("6185"),l=s("66e7"),u=s("2229"),p=s("2017"),f=s("ca76"),h=s("e07d"),m=s("9fb0");function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={addAdditionalInformation:function(e){if(e&&(e.first_name&&e.last_name?(e.name="".concat(e.first_name," ").concat(e.last_name),e.initials="".concat(e.first_name[0]).concat(e.last_name[0])):e.first_name?(e.name=e.first_name,e.initials=e.first_name[0]):e.last_name?(e.name=e.last_name,e.initials=e.last_name[0]):e.email?(e.name=e.email,e.initials=e.email[0]):e.initials="NN",o.a.set(e,"initials",e.initials.toUpperCase()),e.color=c["a"].fromString(e.name),e.has_avatar&&!e.uniqueHash)){var t=Math.random().toString(36).substring(7);o.a.set(e,"uniqueHash",t),e.avatarPath="/api/pictures/thumbnails/persons/".concat(e.id)+".png"}return e},getTaskStatus:function(e){return h["a"].state.taskStatusMap[e]}},g={organisation:{name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:"false"},people:[],displayedPeople:[],peopleIndex:{},personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,personToEdit:{role:"user"},isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personToDelete:void 0,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0},y=v({},g),k={organisation:function(e){return e.organisation},people:function(e){return e.people},displayedPeople:function(e){return e.displayedPeople},peopleIndex:function(e){return e.peopleIndex},personMap:function(e){return e.personMap},isPeopleLoading:function(e){return e.isPeopleLoading},isPeopleLoadingError:function(e){return e.isPeopleLoadingError},isImportPeopleModalShown:function(e){return e.isImportPeopleModalShown},isImportPeopleLoading:function(e){return e.isImportPeopleLoading},isImportPeopleLoadingError:function(e){return e.isImportPeopleLoadingError},isDeleteModalShown:function(e){return e.isDeleteModalShown},isDeleteLoading:function(e){return e.isDeleteLoading},isDeleteLoadingError:function(e){return e.isDeleteLoadingError},personToDelete:function(e){return e.personToDelete},isEditModalShown:function(e){return e.isEditModalShown},isEditLoading:function(e){return e.isEditLoading},isEditLoadingError:function(e){return e.isEditLoadingError},personToEdit:function(e){return e.personToEdit},personCsvFormData:function(e){return e.personCsvFormData},displayedPersonTasks:function(e){return e.displayedPersonTasks},displayedPersonDoneTasks:function(e){return e.displayedPersonDoneTasks},personTasksSearchText:function(e){return e.personTasksSearchText},personTaskSearchQueries:function(e){return e.personTaskSearchQueries},personTaskSelectionGrid:function(e){return e.personTaskSelectionGrid},personTasksScrollPosition:function(e){return e.personTasksScrollPosition},getPerson:function(e,t){return function(t){return e.personMap[t]}},getPersonOptions:function(e){return e.people.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}))},timesheet:function(e){return e.timesheet},personTimeSpentMap:function(e){return e.personTimeSpentMap},personTimeSpentTotal:function(e){return e.personTimeSpentTotal}},S={getOrganisation:function(e){var t=e.commit;return r["a"].getOrganisation().then((function(e){t(m["We"],e)}))},saveOrganisation:function(e,t){var s=e.commit;return new Promise((function(e,n){t.id=y.organisation.id,r["a"].updateOrganisation(t).then((function(t){s(m["We"],t),e()})).catch(n)}))},uploadOrganisationLogo:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){var a=n.organisation.id;r["a"].postOrganisationLogo(a,t).then((function(t){s(m["We"],{has_avatar:!0}),e()})).catch(i)}))},loadPeople:function(e,t){var s=e.commit;e.state;s(m["Uc"]),r["a"].getPeople((function(e,n){e?s(m["Tc"]):s(m["Sc"],n.map((function(e){return e.departments=e.departments||"",e}))),t&&t(e)}))},loadPerson:function(e,t){var s=e.commit;e.state;r["a"].getPerson(t,(function(e,t){e?console.error(e):t.email&&(s(m["Xb"],t),s(m["Vb"],t))}))},newPerson:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){s(m["Xb"],t),r["a"].newPerson(n.personToEdit).then((function(t){s(m["tc"]),e(t)})).catch((function(e){s(m["Wb"]),i(e)}))}))},newPersonAndInvite:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){s(m["Xb"],t),r["a"].newPerson(n.personToEdit).then(r["a"].invitePerson).then((function(){s(m["tc"]),e()})).catch((function(e){s(m["Wb"]),i(e)}))}))},invitePerson:function(e){e.commit;var t=e.state;return r["a"].invitePerson(t.personToEdit)},editPerson:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){s(m["Xb"],t),r["a"].updatePerson(n.personToEdit).then((function(t){s(m["Vb"],n.personToEdit),s(m["tc"]),e(t)})).catch((function(e){s(m["Wb"]),i(e)}))}))},deletePeople:function(e,t){var s=e.commit,n=e.state;s(m["kb"]),r["a"].deletePerson(n.personToDelete.id,(function(e,i){e?s(m["jb"]):(s(m["ib"],n.personToDelete),s(m["sc"])),t&&t(e)}))},uploadPersonFile:function(e,t){var s=e.commit,n=e.state;s(m["zc"]),r["a"].postCsv(n.personCsvFormData,(function(e){e&&s(m["yc"]),s(m["xc"]),t&&t(e)}))},loadPersonTasks:function(e,t){var s=e.commit,n=(e.state,e.rootGetters),i=t.personId,a=(t.forced,t.date),o=t.callback,c=n.userFilters,d=n.taskTypeMap;s(m["Wc"],{personId:i,tasks:[],userFilters:c,taskTypeMap:d}),s(m["Vc"],[]),r["a"].getPersonTasks(i,(function(e,t){e&&(t=[]),r["a"].getPersonDoneTasks(i,(function(e,n){e&&(n=[]),s(m["Vc"],n),r["a"].getTimeSpents(i,a,(function(e,n){e&&(n=[]),s(m["ce"],n),s(m["Wc"],{personId:i,tasks:t,userFilters:c,taskTypeMap:d}),o&&o(e)}))}))}))},loadAggregatedPersonTimeSpents:function(e,t){e.commit,e.state,e.rootGetters;var s=t.personId,n=t.detailLevel,i=t.year,a=t.month,o=t.week,c=t.day;return new Promise((function(e,t){r["a"].getAggregatedPersonTimeSpents(s,n,i,a,o,c).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},showPersonImportModal:function(e,t){var s=e.commit;e.state;s(m["lf"])},hidePersonImportModal:function(e,t){var s=e.commit;e.state;s(m["uc"])},showPersonEditModal:function(e,t){var s=e.commit;e.state;s(m["kf"],t)},hidePersonEditModal:function(e,t){var s=e.commit;e.state;s(m["tc"],t)},showPersonDeleteModal:function(e,t){var s=e.commit;e.state;s(m["jf"],t)},hidePersonDeleteModal:function(e,t){var s=e.commit;e.state;s(m["sc"],t)},setPersonTasksSearch:function(e,t){var s=e.commit;e.state;s(m["Ye"],t)},savePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){var i=y.personTaskSearchQueries.find((function(e){return e.name===t}));i?e():r["a"].createFilter("persontasks",t,t,null,null,(function(t,i){s(m["Fe"],{searchQuery:i}),t?n(t):e(i)}))}))},removePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){r["a"].removeFilter(t,(function(i){s(m["me"],{searchQuery:t}),i?n(i):e()}))}))},setTimeSpent:function(e,t){var s=e.commit,n=t.personId,i=t.taskId,a=t.date,o=t.duration;return new Promise((function(e,t){r["a"].setTimeSpent(i,n,a,o,(function(n,i){n?t(n):(s(m["ff"],i),e())}))}))},setPersonTasksScrollPosition:function(e,t){var s=e.commit;s(m["Xe"],t)},loadTimesheets:function(e,t){var s=e.commit,n=t.detailLevel,i=t.year,a=t.month;return new Promise((function(e,t){var o=1===a.length?"0".concat(parseInt(a)+1):"".concat(a),c=r["a"].getMonthTable;"day"===n&&(c=r["a"].getDayTable),"week"===n&&(c=r["a"].getWeekTable),c(i,o).then((function(t){s(m["ae"],t),e()})).catch(t)}))},peopleSearchChange:function(e,t){var s=e.commit;s(m["Zd"],t)}},w=(n={},Object(i["a"])(n,m["Uc"],(function(e){e.isPeopleLoading=!0,e.isPeopleLoadingError=!1,e.personMap={}})),Object(i["a"])(n,m["Tc"],(function(e){e.isPeopleLoading=!1,e.isPeopleLoadingError=!0})),Object(i["a"])(n,m["Sc"],(function(e,t){e.isPeopleLoading=!1,e.isPeopleLoadingError=!1,e.people=Object(u["e"])(t),e.displayedPeople=e.people,e.people.forEach((function(t){t=b.addAdditionalInformation(t),e.personMap[t.id]=t})),e.peopleIndex=Object(p["c"])(e.people)})),Object(i["a"])(n,m["kb"],(function(e){e.isDeleteLoading=!0,e.isDeleteLoadingError=!1})),Object(i["a"])(n,m["ib"],(function(e,t){if(e.isDeleteLoading=!1,e.personToDelete=void 0,t){var s=e.people.findIndex((function(e){return e.id===t.id}));s>=0&&e.people.splice(s,1),delete e.personMap[t.id]}})),Object(i["a"])(n,m["jb"],(function(e){e.isDeleteLoading=!1,e.isDeleteLoadingError=!0})),Object(i["a"])(n,m["jf"],(function(e,t){e.isDeleteModalShown=!0,e.isDeleteLoadingError=!1,e.isDeleteLoading=!1,e.personToDelete=e.people.find((function(e){return e.id===t}))})),Object(i["a"])(n,m["sc"],(function(e,t){e.isDeleteModalShown=!1,e.personToDelete=void 0})),Object(i["a"])(n,m["Xb"],(function(e,t){e.isEditLoading=!0,e.isEditLoadingError=!1,e.personToEdit=Object.assign(e.personToEdit,t)})),Object(i["a"])(n,m["Pd"],(function(e){})),Object(i["a"])(n,m["Vb"],(function(e,t){e.isEditLoading=!1,e.isEditLoadingError=!1;var s=v({},t);s=b.addAdditionalInformation(s);var n=e.people.findIndex((function(e){return e.id===s.id}));s.name&&(n>=0?(e.personMap[e.personToEdit.id]=s,delete e.people[n],e.people[n]=e.personMap[e.personToEdit.id]):e.personMap[s.id]||(e.people.push(s),e.personMap[s.id]=s),e.people=Object(u["e"])(e.people),e.displayedPeople=e.people,e.peopleIndex=Object(p["c"])(e.people),e.personToEdit={role:"user"})})),Object(i["a"])(n,m["Wb"],(function(e){e.isEditLoading=!1,e.isEditLoadingError=!0})),Object(i["a"])(n,m["zc"],(function(e,t){e.isImportPeopleLoading=!0,e.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["xc"],(function(e,t){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["yc"],(function(e){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!0})),Object(i["a"])(n,m["kf"],(function(e,t){e.isEditModalShown=!0,e.isEditLoadingError=!1,e.isEditLoading=!1,e.personToEdit=void 0!==t?e.people.find((function(e){return e.id===t})):{first_name:"",last_name:"",phone:"",email:"",role:"user"}})),Object(i["a"])(n,m["tc"],(function(e){e.isEditModalShown=!1,e.personToEdit={}})),Object(i["a"])(n,m["lf"],(function(e){e.isImportPeopleModalShown=!0,e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["uc"],(function(e){e.isImportPeopleModalShown=!1})),Object(i["a"])(n,m["be"],(function(e,t){e.personCsvFormData=t})),Object(i["a"])(n,m["Af"],(function(e,t){var s=e.personMap[t];if(s){var n=Math.random().toString(36).substring(7);s.has_avatar=!0,o.a.set(s,"uniqueHash",n),s.avatarPath="/api/pictures/thumbnails/persons/".concat(s.id,".png")}})),Object(i["a"])(n,m["Wc"],(function(e,t){var s=t.personId,n=t.tasks,i=t.userFilters,a=t.taskTypeMap;e.person=e.personMap[s],n.forEach(l["c"]),n.forEach((function(e){var t=b.getTaskStatus(e.task_status_id);e.taskStatus=t}));for(var o={},r=0;r<n.length;r++)o[r]={0:!1};e.personTaskSelectionGrid=o,e.personTasks=Object(u["l"])(n,a),e.personTasksIndex=Object(p["g"])(n);var c=Object(f["e"])(e.personTasksSearchText),d=Object(p["h"])(e.personTasksIndex,c);e.displayedPersonTasks=d||e.personTasks,i.persontasks&&i.persontasks.all?e.personTaskSearchQueries=i.persontasks.all:e.personTaskSearchQueries=[]})),Object(i["a"])(n,m["Vc"],(function(e,t){t.forEach(l["c"]),e.displayedPersonDoneTasks=t})),Object(i["a"])(n,m["Ye"],(function(e,t){e.displayedPersonTasks=[];var s=Object(f["e"])(t),n=Object(p["h"])(e.personTasksIndex,s);e.personTasksSearchText=t,e.displayedPersonTasks=n||e.personTasks})),Object(i["a"])(n,m["Fe"],(function(e,t){var s=t.searchQuery;e.personTaskSearchQueries.push(s),e.personTaskSearchQueries=Object(u["c"])(e.personTaskSearchQueries)})),Object(i["a"])(n,m["me"],(function(e,t){var s=t.searchQuery,n=e.personTaskSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.personTaskSearchQueries.splice(n,1)})),Object(i["a"])(n,m["Wd"],(function(e,t){var s=t.comment,n=t.taskId,i=e.personTasks.find((function(e){return e.id===n}));if(i){var a=b.getTaskStatus(s.task_status_id);Object.assign(i,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),e.personTasksIndex=Object(p["g"])(e.personTasks)}})),Object(i["a"])(n,m["oe"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!1)})),Object(i["a"])(n,m["l"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!0)})),Object(i["a"])(n,m["N"],(function(e,t){e.personTaskSelectionGrid=Object(d["c"])(e.personTaskSelectionGrid)})),Object(i["a"])(n,m["ae"],(function(e,t){e.timesheet=t})),Object(i["a"])(n,m["ff"],(function(e,t){e.person.id===t.person_id&&(e.personTimeSpentMap[t.task_id]=t),e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,m["ce"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.personTimeSpentMap=s,e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,m["Xe"],(function(e,t){e.personTasksScrollPosition=t})),Object(i["a"])(n,m["Zd"],(function(e,t){if(t){var s=Object(f["e"])(t);e.displayedPeople=Object(p["h"])(e.peopleIndex,s)}else e.displayedPeople=e.people})),Object(i["a"])(n,m["Pf"],(function(e,t){var s=e.personMap[t.id];s&&(Object.assign(s,t),b.addAdditionalInformation(s))})),Object(i["a"])(n,m["We"],(function(e,t){Object.assign(e.organisation,t),e.organisation=v({},e.organisation)})),Object(i["a"])(n,m["we"],(function(e,t){Object.assign(e,v({},g))})),n);t["a"]={state:y,getters:k,actions:S,mutations:w,helpers:b}},5306:function(e,t,s){},"544d":function(e,t,s){"use strict";var n=s("0506"),i=s.n(n);i.a},"55ce":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-queries"},e._l(e.queries,(function(t){return s("span",{key:t.id,staticClass:"tag",on:{click:function(s){return e.changeSearch(s,t)}}},[e._v("\n    "+e._s(t.name)+"\n    "),s("button",{staticClass:"delete",on:{click:function(s){return s.preventDefault(),e.removeSearch(t)}}})])})),0)},i=[],a={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{},computed:{},methods:{changeSearch:function(e,t){"delete"!==e.target.className&&this.$emit("changesearch",t)},removeSearch:function(e){this.$emit("removesearch",e)}}},o=a,r=(s("a068"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,null,null);t["a"]=c.exports},"56a0":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),s("div",{staticClass:"status-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleStatusList}},[s("div",{staticClass:"selected-status-line flexrow-item"},[s("span",{staticClass:"tag",style:{background:e.backgroundColor(e.currentStatus),color:e.color(e.currentStatus)}},[e._v("\n          "+e._s(e.currentStatus.short_name)+"\n        ")])]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showStatusList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskStatusList,(function(t){return s("div",{key:t.id,staticClass:"status-line",on:{click:function(s){return e.selectStatus(t)}}},[s("span",{staticClass:"tag",style:{background:e.backgroundColor(t),color:e.color(t)}},[e._v("\n          "+e._s(t.short_name)+"\n        ")])])})),0):e._e()])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("0a35"),c=s("7930");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"combobox-status",components:{ChevronDownIcon:r["d"]},data:function(){return{showStatusList:!1}},props:{label:{default:"",type:String},taskStatusList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.selectedTaskStatus=this.taskStatus},computed:l({},Object(o["c"])(["isDarkTheme","taskStatusMap"]),{currentStatus:function(){return this.value?this.taskStatusMap[this.value]:this.taskStatusList[0]}}),methods:{selectStatus:function(e){this.$emit("input",e.id),this.showStatusList=!1},backgroundColor:function(e){return"todo"!==e.short_name||this.isDarkTheme?"todo"===e.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?c["a"].darkenColor(e.color):e.color:"#ECECEC"},color:function(e){return"todo"!==e.short_name||this.isDarkTheme?"white":"#333"},toggleStatusList:function(){this.showStatusList=!this.showStatusList}}},p=u,f=(s("3cda"),s("2877")),h=Object(f["a"])(p,n,i,!1,null,"5a8cecca",null);t["a"]=h.exports},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("ba4c"),i=s.n(n),a=s("31bd"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{theme:!0,dark:e.isDarkTheme}},[e.user&&e.isDataLoading?s("div",{staticClass:"has-text-centered mt2 loading-info"},[s("span",[e._v(e._s(e.$t("main.loading_data"))+"...")]),s("spinner",{staticClass:"mt2"})],1):s("router-view")],1)},r=[],c=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),d=s("2f62"),l=s("be83");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"app",components:{Spinner:l["a"]},computed:p({},Object(d["c"])(["assetMap","assetTypeMap","currentProduction","episodeMap","isCurrentUserAdmin","isDataLoading","isDarkTheme","isLoginLoading","isSavingCommentPreview","route","personMap","productionMap","sequenceMap","shotMap","taskMap","taskStatusMap","taskTypeMap","user"])),mounted:function(){"true"!==localStorage.getItem("dark-theme")||this.isDarkTheme?(document.documentElement.style.background="#FFF",document.body.style.background="#FFF"):(this.$store.commit("TOGGLE_DARK_THEME"),document.documentElement.style.background="#36393F",document.body.style.background="#36393F")},metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:p({},Object(d["b"])(["getOrganisation","getTask","loadAsset","loadAssetType","loadComment","loadEpisode","loadPerson","loadPersonTasks","loadProduction","loadSequence","loadShot","loadTaskStatus","loadTaskType","refreshPreview","refreshMetadataDescriptor","removeAsset"]),{onAssignation:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=e.person_id,n=[e.task_id];t?this.$store.commit("ASSIGN_TASKS",{selectedTaskIds:n,personId:s}):this.$store.commit("UNASSIGN_TASKS",n),this.route.path.indexOf(e.person_id)>0&&this.loadPersonTasks({personId:e.person_id,forced:!0})}}),watch:{isDarkTheme:function(){this.isDarkTheme?(document.documentElement.style.background="#36393F",document.body.style.background="#36393F"):(document.documentElement.style.background="#FFF",document.body.style.background="#FFF")}},socket:{events:{"project:new":function(e){this.productionMap[e.project_id]||this.loadProduction(e.project_id)},"project:update":function(e){this.productionMap[e.project_id]&&this.loadProduction(e.project_id)},"project:delete":function(e){this.productionMap[e.project_id]&&this.$store.commit("REMOVE_PRODUCTION",{id:e.project_id})},"sequence:new":function(e){!this.sequenceMap[e.sequence_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadSequence(e.sequence_id)},"sequence:update":function(e){this.sequenceMap[e.sequence_id]&&this.loadSequence(e.sequence_id)},"sequence:delete":function(e){this.sequenceMap[e.sequence_id]&&this.$store.commit("REMOVE_SEQUENCE",{id:e.sequence_id})},"episode:new":function(e){!this.episodeMap[e.episode_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadEpisode(e.episode_id)},"episode:update":function(e){this.episodeMap[e.episode_id]&&this.loadEpisode(e.episode_id)},"episode:delete":function(e){this.episodeMap[e.episode_id]&&this.$store.commit("REMOVE_EPISODE",{id:e.episode_id})},"shot:new":function(e){var t=this;!this.shotMap[e.shot_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&setTimeout((function(){t.loadShot(e.shot_id)}),1e3)},"shot:update":function(e){this.shotMap[e.shot_id]&&this.loadShot(e.shot_id)},"shot:delete":function(e){this.shotMap[e.shot_id]&&this.$store.commit("REMOVE_SHOT",{id:e.shot_id})},"asset:new":function(e){var t=this;!this.assetMap[e.asset_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&setTimeout((function(){t.loadAsset(e.asset_id)}),1e3)},"asset:update":function(e){this.assetMap[e.asset_id]&&this.loadAsset(e.asset_id)},"asset:delete":function(e){this.assetMap[e.asset_id]&&this.$store.commit("REMOVE_ASSET",{id:e.asset_id})},"task-type:new":function(e){this.taskTypeMap[e.task_type_id]||this.loadTaskType(e.task_type_id)},"task-type:update":function(e){this.taskTypeMap[e.task_type_id]&&this.loadTaskType(e.task_type_id)},"task-type:delete":function(e){this.taskTypeMap[e.task_type_id]&&this.$store.commit("DELETE_TASK_TYPE_END",{id:e.task_type_id})},"task-status:new":function(e){this.taskStatusMap[e.task_status_id]||this.loadTaskStatus(e.task_status_id)},"task-status:update":function(e){this.taskStatusMap[e.task_status_id]&&this.loadTaskStatus(e.task_status_id)},"task-status:delete":function(e){this.taskStatusMap[e.task_status_id]&&this.$store.commit("DELETE_TASK_STATUS_END",{id:e.task_status_id})},"asset-type:new":function(e){this.assetTypeMap[e.asset_type_id]||this.loadAssetType(e.asset_type_id)},"asset-type:update":function(e){this.assetTypeMap[e.asset_type_id]&&this.loadAssetType(e.asset_type_id)},"asset-type:delete":function(e){this.assetTypeMap[e.asset_type_id]&&this.$store.commit("DELETE_ASSET_TYPE_END",{id:e.asset_type_id})},"person:new":function(e){this.personMap[e.person_id]||this.loadPerson(e.person_id)},"person:update":function(e){this.personMap[e.person_id]&&this.loadPerson(e.person_id)},"person:delete":function(e){var t=this.personMap[e.person_id];t&&(this.$store.commit("DELETE_PEOPLE_START",t),this.$store.commit("DELETE_PEOPLE_END",t))},"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e,!1)},"comment:new":function(e){var t=e.comment_id;this.isSavingCommentPreview||this.loadComment({commentId:t})},"task:update":function(e){this.taskMap[e.task_id]&&this.getTask({taskId:e.task_id})},"metadata-descriptor:new":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:update":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:delete":function(e){this.$store.commit("DELETE_METADATA_DESCRIPTOR_END",{id:e.metadata_descriptor_id})},"organisation:update":function(e){this.isCurrentUserAdmin&&this.getOrganisation()}}}},h=f,m=(s("5c0b"),s("2877")),_=Object(m["a"])(h,o,r,!1,null,null,null),v=_.exports,b=s("a925"),g={assets:{cast_in:"Cast in",delete_error:"An error occured while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Creation or edition failed, a server error occured.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",empty_list_client:"There is no asset in this production.",new_asset:"Add an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",episode:"Ep.",name:"Name",production:"Prod",time_spent:"Time",type:"Type"}},asset_types:{all_asset_types:"All asset types",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",production_title:"Asset Types Stats",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",empty:"Empty casting",title:"Breakdown"},comments:{add_comment:"Add a comment...",add_checklist:"Add checklist",add_preview:"Attach preview",change_preview:"Change preview",empty_text:"This comment is empty",edit_title:"Edit comment",error:"An error occured while posting comment",no_file_attached:"No file attached",post_status:"Post comment",retake:"Retake",pin:"Pin",pinned:"Pinned",revision:"revision",unpin:"Unpin",validated:"Validated!",validation_required:"Validation Required",set_status_to:"Set status to",fields:{text:"text"}},custom_actions:{delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occured while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type",is_ajax:"Use AJAX"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},episodes:{all_episodes:"All episodes",delete_error:"An error occured while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",empty_list_client:"There is no episode in this production.",new_episode:"New episode",number:"episode | episodes",title:"Episode Stats",fields:{name:"name",description:"description"}},login:{forgot_password:"Forgot password?",login:"Log in",login_failed:"Log in failed, please verify your credentials",login_page:"Cancel",reset_change_password:"Change password",reset_change_password_form_failed:"There is a problem with the password you gave. Please, verify that it is at least 7 chars long and that both passwords match.",reset_change_password_failed:"Changing password failed. Please, restart the whole procedure again.",reset_change_password_succeed:"Your password was changed successfully. Please, go back to the login page to use it.",reset_change_password_title:"Enter a new password",reset_password:"Reset Password",reset_password_failed:"Reset Password failed. Please verify your email.",reset_password_succeed:"Reset Password succeeded. Please check your inbox.",reset_password_title:"Enter your email to reset your password",title:"Log in to Kitsu",fields:{email:"Email",password:"Password",password2:"Password again"}},main:{about:"About",add:"add",all:"All",admin:"Admin",cancel:"Cancel",clear_selection:"Clear current selection",documentation:"Documentation",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",dark_theme:"Dark Theme",days_spent:"day spent | days spent",delete:"Delete",delete_all:"Delete all",delete_text:"Are you sure you want to remove {name} from your database?",edit:"Edit",empty_comment:"Empty comment",end_date:"End date",for:"For",go_productions:"Go to productions",history:"history",info:"Information",or:"or",no:"No",loading:"Loading...",loading_data:"Loading data",loading_error:"An error occured while loading data.",logout:"Logout",modify:"Modify",minimize:"Minimize",maximize:"Maximize",nb_frames:"frame | frames",profile:"Profile",production:"Production",remove:"Remove",save:"Save",start_date:"Start date",sorted_by:"Tasks sorted by",studio:"Studio",user:"User",white_theme:"White Theme",yes:"Yes",csv:{export_file:"Export",error_upload:"An error occured while uploading your CSV file.",import_file:"Import",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:"}},menu:{assign_tasks:"Assign tasks",change_priority:"Change priority",change_status:"Change status",create_tasks:"Create tasks",delete_tasks:"Delete tasks",run_custom_action:"Run custom action",set_estimations:"Set estimations"},news:{all:"All",commented_on:"commented on",infos:"Infos",no_news:"There is no news for this production or for this filter.",only_comments:"Only comments",only_previews:"Only previews",set_preview_on:"set preview on",task_status:"Task status",task_type:"Task type",title:"News Feed"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",assigned_you:"assigned you to",commented_on:"commented on",mention_you_on:"mentioned you on",no_notifications:"There is currently no notification for you for your current projects.",title:"Notifications",with_preview:"with a preview"},people:{active:"Active",add_member_to_team:"Add a member to the team: ",create_invite:"Create and send invitation",delete_error:"An error occured while deleting this person. There are probably data linked to it. Are you sure this person has no assignation or wrote no comment?",delete_text:"Are you sure you want to remove {personName} from your database?",edit_title:"Edit person",empty_team:"There is no one listed in the project team.",invite:"Send invitation",invite_error:"An error occured while sending the invitation",invite_success:"Invitation was successfully sent",new_person:"Add a new employee",no_task_assigned:"There are no running tasks assigned to you",persons:"person | persons",running_tasks:"Running tasks",select_person:"Select a person...",team:"Team",title:"People",unactive:"Unactive",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occured while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Studio Manager",client:"Client",manager:"Supervisor",user:"CG Artist"}},playlists:{add_shots:"Add shots",add_sequence:"Add whole sequence",available_build:"Available builds",build_daily:"Daily pending",build_weekly:"All Pending",build_mp4:"Build .mp4",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this playlist.",download_zip:"Download .zip",edit_title:"Edit playlist",loading_error:"A server error occured. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_build:"No build",no_playlist:"There is currently no playlist for this project.",no_preview:"No preview for this shot",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",no_shot_for_sequence:"There is no shot for this sequence",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",title:"Playlists",remove:"remove",fields:{name:"Name"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it? Kitsu doesn't allow production deletion. If you don't want to see the production anymore, you can close it instead.",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",open_productions:"My productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have any production open. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",no_prod_for_client:"You don't have access to any production. Contact your contractor to obtain an access.",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:"Closed",open:"Open",active:"Open",archived:"Closed"},type:{short:"Short",featurefilm:"Feature Film",tvshow:"TV Show"}},profile:{change_avatar:"Change avatar",info_title:"Information",language:"Language",notifications_enabled:"Email notifications enabled",notifications_slack_enabled:"Slack notifications enabled",notifications_slack_user:"Slack username",password_title:"Change password",timezone:"Timezone",title:"Your Profile",avatar:{title:"Change avatar",error_upload:"There was an error while uploading picture."},change_password:{button:"Change password",error:"An error occured while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occured while saving changes"}},settings:{change_logo:"Change logo",integrations:"Integrations",logo:"Studio logo",no_logo:"There is no logo set.",set_logo:"Set studio logo",title:"Settings",fields:{name:"Studio name",hours_by_day:"Hours by day",slack_token:"Slack Token (Optional)",use_original_name:"Use original file name for downloads"},save:{button:"Save settings",error:"A server error occured while saving settings"}},task_status:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{is_artist_allowed:"Is artist allowed",color:"Color",is_done:"Is done",is_reviewable:"Is reviewable",is_retake:"Has retake value",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{dedicated_to:"For",color:"Color",name:"Name",allow_timelog:"Timelog",priority:"Priority"}},sequences:{all_sequences:"All sequences",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",empty_list_client:"There is no sequence in this production.",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequence Stats",fields:{name:"name",description:"description"}},schedule:{title:"Schedule",title_main:"Main Schedule",overall_man_days:"Man-days",md:"md",zoom_level:"Zoom level",milestone:{add_milestone:"Add milestone for",edit_milestone:"Edit milestone for",name:"Name",error:"An error occured while adding or editing the milestone. Please try again."}},shots:{casting:"Shot casting",creation_explaination:"To add shots you need first to create an episode and a sequence. Type an episode name in the bottom of the left column then click on add to create a new episode. Select this episode and repeat the same operation for sequence. Finally select a sequence and type a shot name in the field in the bottom of the right column. Click on the add button below. Your first shot was created. You can now add many more! If it's not a TV Show, you have to directly create a sequence.",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occured. Make sure that you are not renaming the shot with a name already listed for given sequence.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",empty_list_client:"There is no shot in this production.",episodes:"Episodes",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Create shots",new_success:"Shot {name} successfully created.",padding:"Shot Padding",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this shot.",sequences:"Sequences",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",nb_frames:"Frames",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Name",production:"Prod",sequence:"Sequence",time_spent:"Time"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"Counts",count_mode:"Count mode",display_mode:"Display mode",frames:"Frames",pie:"Pie charts",shots:"Shots"},tasks:{add_preview:"Add preview",add_preview_error:"An error occured while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",back_to_list:"back to list",bigger:"Widen task panel",change_status_to:"Change task status to:",change_preview:"Change preview",change_priority:"Change priority to:",clear_assignations:"clear assignations",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current list for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occured while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current list for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occured while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_all_text:"Are you sure you want to delete all tasks for given {name}? Please, confirm by typing the task type name of the tasks you want to delete in the text field.",delete_all_error:"Deleting all tasks for given task type failed.",delete_error:"An error occured while deleting task.",delete_comment:"Are you sure you want to delete last comment?",delete_comment_error:"An error occured while deleting comment.",delete_for_selection:"Delete selected tasks:",delete_preview:"Are you sure you want to delete this preview?",delete_preview_error:"An error occured while deleting preview.",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download .{extension} file",feedback:"feedback",full_screen:"Display in full screen",hide_assignations:"Hide assignations",hide_infos:"Hide additional information",my_tasks:"My tasks",next:"next task",no_assignation_right:"You are not allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",no_task_selected:"No task selected",number:"task | tasks",preview:"Previews",previous:"previous task",unsubscribe_notifications:"Unsubscribe from notifications",set_estimations:"Set estimations for selected tasks:",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occured while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a picture from your hard drive to be used as a preview for the current task:",show_assignations:"Show assignations",show_infos:"Show additional information",subscribe_notifications:"Subscribe to notifications",validation:"Validation",tasks:"Tasks",with_comment:"With a comment...",fields:{asset_type:"Asset type",assignees:"Assignees",end_date:"End date",due_date:"Due date",duration:"Duration",entity:"Entity",entity_name:"Name",estimation:"Estimation",frames:"Fram.",last_comment:"Last comment",last_comment_date:"Last comment",priority:"Priority",production:"Prod",real_end_date:"Validation date",real_start_date:"WIP date",retake_count:"Retakes",sequence:"Sequence",task_status:"Status",task_status_short_name:"Status",task_type:"Type"},colors:{title:"Coloring",neutral:"Neutral",status:"Status color",late:"Late in red"},priority:{emergency:"Emergency",normal:"Normal",high:"High",very_high:"Very High"}},timesheets:{detail_level:"Detail level",done_tasks:"Done tasks",export_timesheet:"Export Timesheet",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"},wrong_browser:{title:"Your browser is not supported by Kitsu",text:"Kitsu can only be used with Firefox and Chrome browsers."}},y={assets:{cast_in:"Echado en",delete_error:"Se ha producido un error al borrar este asset. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de asset no tiene ninguna tarea vinculada a él?",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",edit_fail:"La creación o edición falló, se produjo un error.",edit_success:"Asset fijo {name} tratado con éxito.",edit_title:"Editar asset fijo",empty_list:"No hay ningún asset en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay ningún asset en esta producción.",new_asset:"Añadir un asset",new_assets:"Añadir assets",new_success:"Asset fijo {name} creado con éxito.",no_cast_in:"Este asset no es lanzado en ninguna toma.",number:"bienes",restore_text:"¿Está seguro de que desea restaurar {name} en su base de datos?",restore_error:"Se ha producido un error al restaurar este asset.",tasks:"Tareas de los assets",title:"Assets",fields:{description:"Descripción",episode:"Ep.",name:"Nombre",production:"Prod",time_spent:"Tiempo",type:"Tipo"}},asset_types:{all_asset_types:"Todos los tipos de assets",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar este tipo de asset. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de asset no tiene ningún asset vinculado a él?",edit_title:"Editar tipo de asset fijo",new_asset_type:"Añadir un tipo de asset fijo",number:"tipo de assets | tipos de assets",title:"Tipos de assets",production_title:"Estadísticas de tipos de assets",fields:{name:"Nombre"}},breakdown:{all_assets:"Todos los assets disponibles",empty:"Fundición en vacío",title:"Casting"},comments:{add_comment:"Añadir un comentario....",add_checklist:"Agregar lista de verificación",add_preview:"Adjuntar vista previa",change_preview:"Cambiar la vista previa",empty_text:"Este comentario está vacío",edit_title:"Editar cómo",error:"Se ha producido un error al publicar un comentario",no_file_attached:"No se adjunta ningún archivo",post_status:"Publicar cómo",retake:"Retomar",pin:"Alfiler",pinned:"inmovilizado",revision:"modificación",unpin:"Desenganchar",validated:"Validado!",validation_required:"Validación Requerida",set_status_to:"Fijar el status en",fields:{text:"texto"}},custom_actions:{delete_text:"¿Está seguro de que desea eliminar una acción personalizada {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta acción personalizada.",edit_title:"Editar una acción personalizada",new_custom_action:"Añadir una acción personalizada",number:"acción personalizada | acciones personalizadas",run_for_selection:"Ejecute una acción personalizada para las tareas seleccionadas:",title:"Acciones personalizadas",fields:{name:"Nombre",url:"URL",entity_type:"Tipo de entidad",is_ajax:"Usar AJAX"},entity_types:{all:"Todos",shot:"Plan",asset:"Asset"}},episodes:{all_episodes:"Todos los episodios",delete_error:"Se ha producido un error al borrar este episodio. Es probable que haya datos vinculados a él. ¿Estás seguro de que este episodio no tiene una secuencia vinculada a él?",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",edit_title:"Editar episodio",empty_list:"No hay ningún episodio en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay ningún episodio en esta producción.",new_episode:"Nuevo episodio",number:"episodio | episodios",title:"Estadísticas del episodio",fields:{name:"denominar",description:"descripción"}},login:{forgot_password:"¿Olvidó su contraseña?",login:"Iniciar sesión",login_failed:"Error de inicio de sesión, por favor verifique sus credenciales",login_page:"Cancelar",reset_change_password:"Cambiar contraseña",reset_change_password_form_failed:"Hay un problema con la contraseña que dio. Por favor, verifique que tenga al menos 7 caracteres y que ambas contraseñas coincidan.",reset_change_password_failed:"Error al cambiar la contraseña. Por favor, reinicie todo el procedimiento de nuevo.",reset_change_password_succeed:"Su contraseña ha sido cambiada con éxito. Por favor, vuelva a la página de inicio de sesión para utilizarlo.",reset_change_password_title:"Introduzca una nueva contraseña",reset_password:"Restablecer contraseña",reset_password_failed:"Error al restablecer la contraseña. Por favor, verifique su correo electrónico.",reset_password_succeed:"Restablecer contraseña correctamente. Por favor, compruebe su bandeja de entrada.",reset_password_title:"Ingrese su correo electrónico para restablecer su contraseña",title:"Iniciar sesión en Kitsu",fields:{email:"Correo electrónico",password:"Contraseña",password2:"Contraseña de nuevo"}},main:{about:"Acerca de",add:"añadir",all:"Todos",admin:"Admin",cancel:"Cancelar",clear_selection:"Borrar la selección actual",documentation:"Documentación",close:"Cerrar",confirmation:"Confirmar",confirmation_and_stay:"Confirmar y quedarse",dark_theme:"Tema oscuro",days_spent:"días pasados | días pasados",delete:"Borrar",delete_all:"Borrar todo",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",edit:"Tratar",empty_comment:"Vaciar comentario",end_date:"Fecha de finalización",for:"Para",go_productions:"Ir a producciones",history:"trayectoria",info:"Información",or:"o",no:"No",loading:"Carga...",loading_data:"Carga de datos",loading_error:"Se ha producido un error al cargar los datos.",logout:"Cierre de sesión",modify:"Modificar",minimize:"Minimizar",maximize:"Maximizar",nb_frames:"marcos | marcos",profile:"Perfil",production:"Producción",remove:"Quitar",save:"Guardar",start_date:"Fecha de inicio",sorted_by:"Tareas ordenadas por",studio:"Estudio",user:"Usuario",white_theme:"Tema Blanco",yes:"Sí",csv:{export_file:"Exportación",error_upload:"Se ha producido un error al cargar el archivo CSV.",import_file:"Importar",import_title:"Importar datos de un archivo CSV",required_fields:"Su archivo CSV requiere las siguientes columnas",select_file:"Por favor, seleccione un archivo de una de sus carpetas:"}},menu:{assign_tasks:"Asignar tareas",change_priority:"Modificar prioridad",change_status:"Status de modificación",create_tasks:"Crear tareas",delete_tasks:"Borrar medidas",run_custom_action:"Ejecutar una acción personalizada",set_estimations:"Fijar estimaciones"},news:{all:"Todos",commented_on:"comentado",infos:"Información",no_news:"No hay noticias de esta producción ni de este filtro.",only_comments:"Sólo comentarios",only_previews:"Sólo previsualizaciones",set_preview_on:"establecer vista previa en",task_status:"Status de la tarea",task_type:"Tipo de tarea",title:"Últimas noticias"},not_found:{text:"Había algo mal en el enlace en el que hiciste clic, te animamos a que vuelvas a la página de inicio.",title:"Página no encontrada... ¿buscas algo que has borrado?"},notifications:{and_change_status:"y ha cambiado el status a",assigned_you:"te asignó a",commented_on:"comentado",mention_you_on:"te mencioné en",no_notifications:"Actualmente no hay ninguna notificación para usted para sus proyectos actuales.",title:"Notificaciones",with_preview:"con una vista previa"},people:{active:"Asset",add_member_to_team:"Añada un miembro al equipo:",create_invite:"Crear y enviar invitación",delete_error:"Se ha producido un error al borrar a esta persona. Es probable que haya datos vinculados a él. ¿Está seguro de que esta persona no tiene ninguna cita o escribió ningún comentario?",delete_text:"¿Está seguro de que desea eliminar {personName} de su base de datos?",edit_title:"Tratar persona",empty_team:"No hay nadie en el equipo del proyecto.",invite:"Enviar invitación",invite_error:"Se ha producido un error al enviar la invitación",invite_success:"La invitación fue enviada con éxito",new_person:"Añadir un nuevo empleado",no_task_assigned:"No hay tareas de ejecución asignadas a usted",persons:"persona | personas",running_tasks:"Ejecutar tareas",select_person:"Seleccione una persona....",team:"Equipo",title:"Gente",unactive:"Inasset",csv:{import_file:"Importar un archivo.csv",export_file:"Descargar como archivo.csv",import_title:"Importar datos de un archivo CSV",required_fields:"Su archivo CSV requiere las siguientes columnas",select_file:"Por favor, seleccione un archivo de una de sus carpetas:",error_upload:"Se ha producido un error al cargar el archivo CSV."},fields:{first_name:"Nombre de pila",last_name:"Apellido",email:"Correo electrónico",phone:"llamar",role:"Papel",old_password:"Contraseña actual",password:"Nueva contraseña",password_2:"Nueva contraseña (repetir)",active:"Asset"},list:{name:"Nombre",email:"Correo electrónico",phone:"llamar",role:"Papel",active:"Asset"},role:{admin:"Director del estudio",client:"Mandante",manager:"Supervisor",user:"Artista CG"}},playlists:{add_shots:"Añadir tomas",add_sequence:"Añadir secuencia completa",available_build:"Construcciones disponibles",build_daily:"Diario pendiente",build_weekly:"Todos Pendientes",build_mp4:"Construir .mp4",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta lista de reproducción.",download_zip:"Descargar.zip",edit_title:"Editar lista de reproducción",loading_error:"Se ha producido un error en el servidor. Las listas de reproducción no se pueden cargar.",new_playlist:"Añadir una lista de reproducción",no_build:"Sin construcción",no_playlist:"Actualmente no hay ninguna lista de reproducción para este proyecto.",no_preview:"No hay vista previa de esta toma",no_selection:"Por favor, seleccione una lista de reproducción a la izquierda.",no_sequence_for_episode:"No hay secuencia para este episodio",no_shot_for_production:"No hay ninguna toma para esta producción.",no_shot_for_sequence:"No hay ninguna toma para esta secuencia",select_shot:"Por favor, seleccione una toma en la columna de la derecha",select_playlist:"Por favor, seleccione una lista de reproducción en la columna de la izquierda",title:"Listas de reproducción",remove:"quitar",fields:{name:"Nombre"}},productions:{current:"Producción seleccionada",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta producción. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta producción no tiene ninguna tarea, toma o asset relacionado con ella? Kitsu no permite la eliminación de la producción. Si no quieres ver más la producción, puedes cerrarla.",edit_title:"Editar producción",new_production:"Añadir una producción",number:"producción | producciones",open_productions:"Mis producciones",picture:"Cambiar imagen",title:"Producciones",home:{create_new:"Crear una nueva producción",empty:"No tienes ninguna producción abierta. ¿Qué tal si creamos uno nuevo?",no_task:"No tiene ninguna tarea asignada. Consulte a su supervisor para ver qué puede hacer!",no_prod_for_client:"No tienes acceso a ninguna producción. Póngase en contacto con su contratista para obtener un acceso.",title:"Producciones en marcha",welcome:"Bienvenido a Kitsu"},fields:{fps:"SPD",name:"Nombre",ratio:"razonar",resolution:"Resolución",status:"Estado",type:"Tipo"},metadata:{add_explaination:"Añada los datos específicos requeridos por este proyecto.",add_failed:"Se ha producido un error al añadir metadatos al proyecto.",add_new_values:"Actualmente no hay valores disponibles.",available_values:"Valores disponibles",choices:"Lista de valores",delete_text:"¿Está seguro de que desea borrar esta columna y los datos relacionados para todos los assets de esta producción?",delete_error:"Se ha producido un error al eliminar esta columna de metadatos.",error:"Se ha producido un error al añadir la columna de metadatos. Asegúrese de que no hay ninguna columna con un nombre similar y que todos los campos están completos. Si el problema persiste, póngase en contacto con el equipo de soporte.",free:"Valor libre",title:"Add metadata column"},status:{closed:"Cerrado",open:"Abrir",active:"Abrir",archived:"Cerrado"},type:{short:"Corto",featurefilm:"Largometraje",tvshow:"programa de televisión"}},profile:{change_avatar:"Cambiar avatar",info_title:"Información",language:"Idioma",notifications_enabled:"Notificaciones de correo electrónico habilitadas",notifications_slack_enabled:"Notificaciones de Slack activadas",notifications_slack_user:"Slack ID",password_title:"Cambiar contraseña",timezone:"Zona horaria",title:"Su perfil",avatar:{title:"Cambiar avatar",error_upload:"Se ha producido un error al subir la imagen."},change_password:{button:"Cambiar contraseña",error:"Se ha producido un error al cambiar la contraseña. Por favor, verifique su contraseña actual.",success:"Su contraseña ha sido cambiada con éxito!",unvalid:"La confirmación de su nueva contraseña no coincide o es demasiado corta (se esperan al menos 7 caracteres)."},save:{button:"Guardar cambios",error:"Se ha producido un error al guardar los cambios"}},settings:{change_logo:"Cambiar logotipo",integrations:"Integraciones",logo:"Estudio de logotipos",no_logo:"No hay conjunto de logotipos.",set_logo:"Logotipo de estudio",title:"Ajustes",fields:{name:"Nombre del estudio",hours_by_day:"Horas por día",slack_token:"Slack token (opcional)",use_original_name:"Usar el nombre del archivo original para las descargas"},save:{button:"Grabar parametrizaciones",error:"Se ha producido un error del servidor al guardar la configuración"}},task_status:{delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar este estado de la tarea. Es probable que haya datos vinculados a él. ¿Está seguro de que este status de tarea no tiene ninguna tarea vinculada a él?",edit_title:"Editar el estado de la tarea",number:"estado de la tarea | estado de la tarea",new_task_status:"Añadir un status de tarea",title:"Estado de la tarea",fields:{is_artist_allowed:"Se permite al artista",color:"Color",is_done:"Se hace",is_reviewable:"Es revisable",is_retake:"Tiene valor de retomar",name:"Nombre",short_name:"Denominación breve"}},task_types:{delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar este tipo de tarea. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de tarea no tiene ninguna tarea vinculada a ella?",edit_title:"Tratar tipo de tarea",new_task_type:"Añadir un tipo de tarea",number:"tipo de tarea | tipos de tarea",title:"Tipos de tareas",fields:{dedicated_to:"Para",color:"Color",name:"Nombre",allow_timelog:"Registro de tiempo",priority:"Prioridad"}},sequences:{all_sequences:"Todas las secuencias",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar esta secuencia. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta secuencia no tiene ninguna toma vinculada a ella?",edit_title:"Tratar secuencia",empty_list:"No hay ninguna secuencia en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay secuencia en esta producción.",new_sequence:"Nueva secuencia",number:"secuencia | secuencias",title:"Estadísticas de secuencia",fields:{name:"denominar",description:"descripción"}},schedule:{title:"Calendario",title_main:"Calendario principal",overall_man_days:"Días-hombre",md:"md",zoom_level:"Nivel de zoom",milestone:{add_milestone:"Añadir hito para",edit_milestone:"Tratar hito para",name:"Nombre",error:"Se ha producido un error al añadir o editar el hito. Por favor, inténtalo de nuevo."}},shots:{casting:"Casting",creation_explaination:'Para añadir tomas, primero tienes que crear un episodio y una secuencia. Escriba el nombre de un episodio en la parte inferior de la columna de la izquierda y luego haga clic en añadir para crear un nuevo episodio. Seleccione este episodio y repita la misma operación para la secuencia. Finalmente seleccione una secuencia y escriba el nombre de una toma en el campo en la parte inferior de la columna derecha. Haga clic en el botón "Agregar" que aparece a continuación. Tu primera toma fue creada. Ahora puede añadir muchos más! Si no es un programa de televisión, tienes que crear directamente una secuencia.',delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar esta imagen. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta toma no tiene ninguna tarea relacionada con ella?",edit_success:"Plan {name} editado con éxito.",edit_fail:"La creación o edición falló, se produjo un error. Asegúrese de que no está renombrando la toma con un nombre ya listado para una secuencia dada.",edit_title:"Editar foto",empty_list:"No hay ninguna toma en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay ninguna toma en esta producción.",episodes:"Episodios",new_shot:"Agregar una foto",new_shots:"Añadir tomas",new_sequences:"Añadir secuencias",new_episodes:"Añadir episodios",no_casting:"El lanzamiento de granadas está vacío.",number:"Plan | Disparos",manage:"Crear tomas",new_success:"Plan {name} creado con éxito.",padding:"Acolchado de chupitos",restore_text:"¿Está seguro de que desea restaurar {name} en su base de datos?",restore_error:"Se ha producido un error al restaurar esta toma.",sequences:"Secuencias",tasks:"Tareas de los chupitos",title:"Plans",fields:{description:"Descripción",nb_frames:"Marcos",episode:"Episodio",frame_in:"En",frame_out:"Fuera",fps:"SPD",name:"Nombre",production:"Prod",sequence:"Secuencia",time_spent:"Tiempo"}},server_down:{text:"Póngase en contacto con el servicio de asistencia técnica de su proveedor, su administrador de sistemas o su departamento de TI para comprender qué es lo que está fallando.",title:"Kitsu encontró un error al alcanzar su API de datos."},statistics:{count:"Conteos",count_mode:"Modo de recuento",display_mode:"Modo de visualización",frames:"Marcos",pie:"Gráficos circulares",shots:"Plans"},tasks:{add_preview:"Añadir vista previa",add_preview_error:"Se ha producido un error al añadir la vista previa.",assign:"Asigne una tarea a: | Asignar {nbSelectedTasks} tareas a:",back_to_list:"volver a la lista",bigger:"Ampliar el panel de tareas",change_status_to:"Cambiar el estado de la tarea a:",change_preview:"Cambiar la vista previa",change_priority:"Cambiar la prioridad a:",clear_assignations:"asignaciones claras",create_for_selection:"Crear tarea para cada celda vacía:",create_tasks:"Añadir tareas",create_tasks_shot:"Añadir tareas para las tomas actuales",create_tasks_shot_explaination:"Va a crear una nueva tarea para cada toma de la lista actual para el tipo de tarea dado. ¿Quieres continuar?",create_tasks_shot_failed:"Se ha producido un error en el servidor durante el proceso de creación.",create_tasks_asset:"Añadir tareas para los assets actuales",create_tasks_asset_explaination:"Va a crear una nueva tarea para cada asset fijo de la lista actual para el tipo de tarea en cuestión. ¿Quieres continuar?",create_tasks_asset_failed:"Se ha producido un error en el servidor durante el proceso de creación.",current:"Tarea a realizar",current_status:"Situación actual",delete_all_text:"¿Está seguro de que desea eliminar todas las tareas de {name}? Por favor, confirme escribiendo el nombre del tipo de tarea que desea eliminar en el campo de texto.",delete_all_error:"Ha fallado la eliminación de todas las tareas de un determinado tipo de tarea.",delete_error:"Se ha producido un error al eliminar la tarea.",delete_comment:"¿Estás seguro de que quieres borrar el último comentario?",delete_comment_error:"Se ha producido un error al eliminar un comentario.",delete_for_selection:"Eliminar tareas seleccionadas:",delete_preview:"¿Estás seguro de que quieres borrar esta vista previa?",delete_preview_error:"Se ha producido un error al eliminar la vista previa.",edit_comment:"Editar cómo",done:"Hecho",download_pdf_file:"Descargar archivo.{extension}",feedback:"retroalimentación",full_screen:"Visualización en pantalla completa",hide_assignations:"Suprimir asignaciones",hide_infos:"Ocultar información adicional",my_tasks:"Mis tareas",next:"tarea siguiente",no_assignation_right:"No se le permite gestionar asignaciones",no_comment:"Actualmente no hay ningún comentario para esta tarea.",no_preview:"Actualmente no hay ninguna vista previa para esta tarea.",no_task_selected:"Ninguna tarea seleccionada",number:"tarea | tareas",preview:"Previsualizaciones",previous:"tarea previa",unsubscribe_notifications:"Darse de baja de las notificaciones",set_estimations:"Establecer estimaciones para las tareas seleccionadas:",set_preview:"Establecer esta vista previa como miniatura",set_preview_error:"Se ha producido un error al configurar la vista previa como miniatura.",set_preview_done:"Esta vista previa se utiliza como miniatura para la entidad actual.",select_preview_file:"Por favor, seleccione una imagen de su disco duro para utilizarla como vista previa de la tarea actual:",show_assignations:"Mostrar asignaciones",show_infos:"Mostrar información adicional",subscribe_notifications:"Suscribirse a las notificaciones",validation:"Validación",tasks:"Tareas",with_comment:"Con un comentario....",fields:{asset_type:"Tipo de asset",assignees:"Asignados",end_date:"Fecha de finalización",due_date:"Dos fechas",duration:"Duración",entity:"Entidad",entity_name:"Nombre",estimation:"Estimación",frames:"Marco.",last_comment:"Último comentario",last_comment_date:"Último comentario",priority:"Prioridad",production:"Prod",real_end_date:"Fecha de validación",real_start_date:"Fecha WIP",retake_count:"Reasignaciones",sequence:"Secuencia",task_status:"Estado",task_status_short_name:"Estado",task_type:"Tipo"},colors:{title:"Colorear",neutral:"Neutral",status:"Color de estado",late:"Tarde en rojo"},priority:{emergency:"Emergencia",normal:"Normal",high:"Alto",very_high:"Muy Alto"}},timesheets:{detail_level:"Nivel de detalle",done_tasks:"Tareas realizadas",export_timesheet:"Hoja de horas de exportación",hours:"horario",month:"Mes",time_spents:"Tiempo empleado (horas)",title:"Hojas horarias",year:"Año"},wrong_browser:{title:"Tu navegador no es compatible con Kitsu",text:"Kitsu sólo puede ser usado con navegadores Firefox y Chrome."}},k={assets:{cast_in:"Eingießen",delete_error:"Beim Löschen dieses Assets ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Anlagentyp keine Aufgabe hat, die mit ihm verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten.",edit_success:"Anlage {name} erfolgreich bearbeitet.",edit_title:"Anlage bearbeiten",empty_list:"In der Produktion gibt es keine Anlage. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Anlage in dieser Produktion.",new_asset:"Hinzufügen einer Anlage",new_assets:"Assets hinzufügen",new_success:"Anlage {name} erfolgreich erstellt.",no_cast_in:"Dieser Gegenstand wird in keinem Schuss geworfen.",number:"Vermögenswerte",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen möchten?",restore_error:"Bei der Wiederherstellung dieses Assets ist ein Fehler aufgetreten.",tasks:"Asset-Aufgaben",title:"Vermögenswerte",fields:{description:"Beschreibung",episode:"Ep.",name:"Name",production:"Produkt",time_spent:"Zeit",type:"Typ"}},asset_types:{all_asset_types:"Alle asset typen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Anlagentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Anlageart keine Anlage mit ihr verbunden hat?",edit_title:"Anlagenart bearbeiten",new_asset_type:"Hinzufügen einer Anlagenart",number:"asset type | asset types",title:"Vermögensarten",production_title:"Vermögensarten Statistiken",fields:{name:"Name"}},breakdown:{all_assets:"Alle verfügbaren Vermögenswerte",empty:"Leerguss",title:"Aufschlüsselung"},comments:{add_comment:"Einen Kommentar hinzufügen.....",add_checklist:"Checkliste hinzufügen",add_preview:"Vorschau anhängen",change_preview:"Änderungsvorschau",empty_text:"Dieser Kommentar ist leer",edit_title:"Bearbeiten Sie, wie",error:"Beim Posten von Kommentaren ist ein Fehler aufgetreten.",no_file_attached:"Keine Datei angehängt",post_status:"Veröffentlichen Sie, wie",retake:"Wiederaufnahme",pin:"Pin",pinned:"Pinned",revision:"Überarbeitung",unpin:"Unbekannt",validated:"Validiert!",validation_required:"Validierung erforderlich",set_status_to:"Status auf setzen",fields:{text:"Text"}},custom_actions:{delete_text:"Sind Sie sicher, dass Sie benutzerdefinierte Aktionen {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser benutzerdefinierten Aktion ist ein Fehler aufgetreten.",edit_title:"Bearbeiten einer benutzerdefinierten Aktion",new_custom_action:"Hinzufügen einer benutzerdefinierten Aktion",number:"benutzerdefinierte Aktion | benutzerdefinierte Aktionen",run_for_selection:"Benutzerdefinierte Aktion für ausgewählte Aufgaben ausführen:",title:"Benutzerdefinierte Aktionen",fields:{name:"Name",url:"URL",entity_type:"Entitätstyp",is_ajax:"AJAX verwenden"},entity_types:{all:"Alle",shot:"Erschossen",asset:"Vermögen"}},episodes:{all_episodes:"Alle Episoden",delete_error:"Beim Löschen dieser Episode ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Episode keine Sequenz hat, die mit ihr verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit_title:"Episode bearbeiten",empty_list:"Es gibt keine Episode in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Episode in dieser Produktion.",new_episode:"Neue Episode",number:"episode | episoden",title:"Episodenstatistiken",fields:{name:"Name",description:"Beschreibung"}},login:{forgot_password:"Passwort vergessen?",login:"Einloggen",login_failed:"Die Anmeldung ist fehlgeschlagen, bitte überprüfen Sie Ihre Zugangsdaten.",login_page:"Abbrechen",reset_change_password:"Passwort ändern",reset_change_password_form_failed:"Es gibt ein Problem mit dem von dir angegebenen Passwort. Bitte überprüfen Sie, ob es mindestens 7 Zeichen lang ist und ob beide Passwörter übereinstimmen.",reset_change_password_failed:"Die Änderung des Passworts ist fehlgeschlagen. Bitte starten Sie den gesamten Vorgang erneut.",reset_change_password_succeed:"Dein Passwort wurde erfolgreich geändert. Bitte gehen Sie zurück zur Login-Seite, um sie zu verwenden.",reset_change_password_title:"Geben Sie ein neues Passwort ein",reset_password:"Passwort zurücksetzen",reset_password_failed:"Passwort zurücksetzen fehlgeschlagen. Bitte überprüfen Sie Ihre E-Mail-Adresse.",reset_password_succeed:"Passwort zurücksetzen erfolgreich. Bitte überprüfen Sie Ihren Posteingang.",reset_password_title:"Gib deine E-Mail-Adresse ein, um dein Passwort zurückzusetzen.",title:"Einloggen bei Kitsu",fields:{email:"E-Mail",password:"Passwort",password2:"Passwort wiederholen"}},main:{about:"Über",add:"hinzufügen",all:"Alle",admin:"Admin",cancel:"Abbrechen",clear_selection:"Aktuelle Auswahl löschen",documentation:"Dokumentation",close:"Schließen",confirmation:"Bestätigen",confirmation_and_stay:"Bestätigen und bleiben",dark_theme:"Dunkles Thema",days_spent:"Tag verbracht | Tage verbracht",delete:"Löschen",delete_all:"Alle löschen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit:"Bearbeiten",empty_comment:"Leerer Kommentar",end_date:"Enddatum",for:"Für",go_productions:"Zu den Produktionen",history:"Historie",info:"Informationen",or:"oder",no:"Nein",loading:"Laden...",loading_data:"Laden von Daten",loading_error:"Beim Laden von Daten ist ein Fehler aufgetreten.",logout:"Abmeldung",modify:"Modify",minimize:"Minimieren",maximize:"Maximieren",nb_frames:"frame | frames",profile:"Profil",production:"Produktion",remove:"Entfernen",save:"Speichern",start_date:"Startdatum",sorted_by:"Aufgaben sortiert nach",studio:"Studio",user:"Benutzer",white_theme:"Weißes Thema",yes:"Ja",csv:{export_file:"Exportieren",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten.",import_file:"Importieren",import_title:"Daten aus einer CSV-Datei importieren",required_fields:"Ihre CSV-Datei benötigt die folgenden Spalten",select_file:"Bitte wählen Sie eine Datei aus einem Ihrer Ordner aus:"}},menu:{assign_tasks:"Aufgaben zuweisen",change_priority:"Priorität ändern",change_status:"Status ändern",create_tasks:"Aufgaben erstellen",delete_tasks:"Aufgaben löschen",run_custom_action:"Benutzerdefinierte Aktion ausführen",set_estimations:"Schätzungen festlegen"},news:{all:"Alle",commented_on:"kommentiert",infos:"Infos",no_news:"Es gibt keine Neuigkeiten für diese Produktion oder für diesen Filter.",only_comments:"Nur Kommentare",only_previews:"Nur Vorschauen",set_preview_on:"Vorschau einstellen auf",task_status:"Aufgabenstatus",task_type:"Aufgabentyp",title:"News Feed"},not_found:{text:"Mit dem Link, auf den du geklickt hast, war etwas nicht in Ordnung, wir empfehlen dir, auf der Homepage wieder vorbeizuschauen.",title:"Seite nicht gefunden.... suchen Sie nach etwas, das Sie gelöscht haben?"},notifications:{and_change_status:"und änderte den Status auf",assigned_you:"die Sie zugeordnet haben",commented_on:"kommentiert",mention_you_on:"hat dich erwähnt",no_notifications:"Für Ihre aktuellen Projekte gibt es derzeit keine Benachrichtigung für Sie.",title:"Benachrichtigungen",with_preview:"mit einer Vorschau"},people:{active:"Aktiv",add_member_to_team:"Füge ein Mitglied zum Team hinzu:",create_invite:"Einladung erstellen und versenden",delete_error:"Beim Löschen dieser Person ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Person keine Zuordnung hat oder keinen Kommentar geschrieben hat?",delete_text:"Sind Sie sicher, dass Sie {personName} aus Ihrer Datenbank entfernen möchten?",edit_title:"Person bearbeiten",empty_team:"Im Projektteam ist niemand gelistet.",invite:"Einladung senden",invite_error:"Beim Senden der Einladung ist ein Fehler aufgetreten.",invite_success:"Einladung wurde erfolgreich versendet",new_person:"Einen neuen Mitarbeiter hinzufügen",no_task_assigned:"Es gibt keine laufenden Aufgaben, die Ihnen zugeordnet sind.",persons:"Person | Personen",running_tasks:"Laufende Aufgaben",select_person:"Eine Person auswählen.....",team:"Team",title:"Menschen",unactive:"Inaktiv",csv:{import_file:"Importieren einer.csv-Datei",export_file:"Als.csv-Datei herunterladen",import_title:"Daten aus einer CSV-Datei importieren",required_fields:"Ihre CSV-Datei benötigt die folgenden Spalten",select_file:"Bitte wählen Sie eine Datei aus einem Ihrer Ordner aus:",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten."},fields:{first_name:"Vorname",last_name:"Nachname",email:"E-Mail",phone:"Phone",role:"Rolle",old_password:"Aktuelles Passwort",password:"Neues Passwort",password_2:"Neues Passwort (wiederholen)",active:"Aktiv"},list:{name:"Name",email:"E-Mail",phone:"Phone",role:"Rolle",active:"Aktiv"},role:{admin:"Studio-Manager",client:"Client",manager:"Vorgesetzter",user:"CG Artist"}},playlists:{add_shots:"Schüsse hinzufügen",add_sequence:"Ganze Sequenz hinzufügen",available_build:"Verfügbare Builds",build_daily:"Täglich ausstehend",build_weekly:"Alle ausstehend",build_mp4:"Build .mp4",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Playlist ist ein Fehler aufgetreten.",download_zip:"Download.zip",edit_title:"Wiedergabeliste bearbeiten",loading_error:"Es ist ein Serverfehler aufgetreten. Wiedergabelisten können nicht geladen werden.",new_playlist:"Eine Wiedergabeliste hinzufügen",no_build:"Kein Build",no_playlist:"Für dieses Projekt gibt es derzeit keine Playlist.",no_preview:"Keine Vorschau für diese Aufnahme",no_selection:"Bitte wählen Sie links eine Playlist aus.",no_sequence_for_episode:"Es gibt keine Sequenz für diese Episode.",no_shot_for_production:"Für diese Produktion gibt es keine Chance.",no_shot_for_sequence:"Es gibt keinen Schuss für diese Sequenz.",select_shot:"Bitte wählen Sie einen Schuss in der rechten Spalte aus.",select_playlist:"Bitte wählen Sie eine Playlist in der linken Spalte aus.",title:"Wiedergabelisten",remove:"entfernen",fields:{name:"Name"}},productions:{current:"Ausgewählte Produktion",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Produktion ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Produktion keine Aufgabe, keinen Schuss oder Vermögenswert hat, der mit ihr verbunden ist? Kitsu erlaubt es nicht, die Produktion zu löschen. Wenn du die Produktion nicht mehr sehen willst, kannst du sie stattdessen schließen.",edit_title:"Produktion bearbeiten",new_production:"Eine Produktion hinzufügen",number:"Produktion | Produktionen",open_productions:"Meine Produktionen",picture:"Bild ändern",title:"Produktionen",home:{create_new:"Erstellen Sie eine neue Produktion",empty:"Du hast keine offene Produktion. Wie wäre es mit der Erstellung eines neuen?",no_task:"Du hast keine Aufgabe zugewiesen. Wenden Sie sich an Ihren Vorgesetzten, um zu sehen, was Sie tun können!",no_prod_for_client:"Du hast keinen Zugang zu einer Produktion. Wenden Sie sich an Ihren Auftragnehmer, um einen Zugang zu erhalten.",title:"Laufende Produktionen",welcome:"Willkommen bei Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Auflösung",status:"Status",type:"Typ"},metadata:{add_explaination:"Fügen Sie spezifische Daten hinzu, die für dieses Projekt erforderlich sind.",add_failed:"Beim Hinzufügen von Metadaten zu Ihrem Projekt ist ein Fehler aufgetreten.",add_new_values:"Es sind derzeit keine Werte verfügbar.",available_values:"Verfügbare Werte",choices:"Liste der Werte",delete_text:"Sind Sie sicher, dass Sie diese Spalte und die zugehörigen Daten für alle Anlagen dieser Produktion löschen möchten?",delete_error:"Beim Löschen dieser Metadatenspalte ist ein Fehler aufgetreten.",error:"Beim Hinzufügen der Metadatenspalte ist ein Fehler aufgetreten. Stellen Sie sicher, dass es keine Spalte mit ähnlichem Namen gibt und dass alle Felder ausgefüllt sind. Wenn das Problem weiterhin besteht, wenden Sie sich bitte an das Support-Team.",free:"Freier Wert",title:"Metadatenspalte hinzufügen"},status:{closed:"Geschlossen",open:"Offen",active:"Offen",archived:"Geschlossen"},type:{short:"Kurz",featurefilm:"Spielfilm",tvshow:"TV-Show"}},profile:{change_avatar:"Avatar ändern",info_title:"Informationen",language:"Sprache",notifications_enabled:"E-Mail-Benachrichtigungen aktiviert",notifications_slack_enabled:"Slack-Benachrichtigungen aktiviert",notifications_slack_user:"Slack-Benutzername",password_title:"Passwort ändern",timezone:"Zeitzone",title:"Dein Profil",avatar:{title:"Avatar ändern",error_upload:"Beim Hochladen des Bildes ist ein Fehler aufgetreten."},change_password:{button:"Passwort ändern",error:"Beim Ändern des Passworts ist ein Fehler aufgetreten. Bitte überprüfen Sie Ihr aktuelles Passwort.",success:"Dein Passwort wurde erfolgreich geändert!",unvalid:"Deine neue Passwort-Bestätigung stimmt nicht oder dein Passwort ist zu kurz (es werden mindestens 7 Zeichen erwartet)."},save:{button:"Änderungen speichern",error:"Beim Speichern von Änderungen ist ein Fehler aufgetreten."}},settings:{change_logo:"Logo ändern",integrations:"Integrationen",logo:"Logo-Studio",no_logo:"Es gibt kein Logo-Set.",set_logo:"Logo Studio-Set",title:"Einstellungen",fields:{name:"Studio-Name",hours_by_day:"Stunden am Tag",slack_token:"Slack Token (Optional)",use_original_name:"Original-Dateinamen für Downloads verwenden"},save:{button:"Einstellungen speichern",error:"Beim Speichern von Einstellungen ist ein Serverfehler aufgetreten."}},task_status:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Aufgabenstatus ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Aufgabenstatus keine Aufgabe zugeordnet hat?",edit_title:"Aufgabenstatus bearbeiten",number:"Aufgabenstatus | Aufgabenstatus",new_task_status:"Hinzufügen eines Aufgabenstatus",title:"Aufgabenstatus",fields:{is_artist_allowed:"Ist der Künstler erlaubt",color:"Farbe",is_done:"Ist erledigt",is_reviewable:"Ist überprüfbar",is_retake:"Hat Wiederholungswert",name:"Name",short_name:"Kurzname"}},task_types:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Aufgabentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Aufgabentyp keine Aufgabe hat, die mit ihm verknüpft ist?",edit_title:"Aufgabentyp bearbeiten",new_task_type:"Hinzufügen eines Aufgabentyps",number:"Aufgabentyp | Aufgabentypen",title:"Aufgabentypen",fields:{dedicated_to:"Für",color:"Farbe",name:"Name",allow_timelog:"Zeiterfassung",priority:"Priorität"}},sequences:{all_sequences:"Alle Sequenzen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Sequenz ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Sequenz keinen Schuss damit zu tun hat?",edit_title:"Sequenz bearbeiten",empty_list:"Es gibt keine Reihenfolge in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Reihenfolge.",new_sequence:"Neue Sequenz",number:"Sequenz | Sequenzen",title:"Sequenz-Statistiken",fields:{name:"Name",description:"Beschreibung"}},schedule:{title:"Zeitplan",title_main:"Hauptterminplan",overall_man_days:"Manntage",md:"md",zoom_level:"Zoomstufe",milestone:{add_milestone:"Meilenstein hinzufügen für",edit_milestone:"Meilenstein bearbeiten für",name:"Name",error:"Beim Hinzufügen oder Bearbeiten des Meilensteins ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut."}},shots:{casting:"Druckguss",creation_explaination:"Um Aufnahmen hinzuzufügen, musst du zuerst eine Episode und eine Sequenz erstellen. Geben Sie unten in der linken Spalte einen Episodennamen ein und klicken Sie dann auf Hinzufügen, um eine neue Episode zu erstellen. Wählen Sie diese Episode aus und wiederholen Sie den gleichen Vorgang für die Sequenz. Wählen Sie schließlich eine Sequenz aus und geben Sie einen Schussnamen in das Feld unten in der rechten Spalte ein. Klicken Sie auf die Schaltfläche Hinzufügen unten. Dein erster Schuss wurde erstellt. Du kannst jetzt viel mehr hinzufügen! Wenn es sich nicht um eine TV-Show handelt, müssen Sie direkt eine Sequenz erstellen.",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Schusses ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Aufnahme keine Aufgabe hat?",edit_success:"Shot {name} erfolgreich bearbeitet.",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten. Achte darauf, dass du den Schuss nicht mit einem Namen umbenennst, der bereits für eine bestimmte Sequenz vergeben wurde.",edit_title:"Schuss bearbeiten",empty_list:"Es gibt keinen Schuss in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Aufnahme.",episodes:"Episoden",new_shot:"Einen Schuss hinzufügen",new_shots:"Schüsse hinzufügen",new_sequences:"Sequenzen hinzufügen",new_episodes:"Episoden hinzufügen",no_casting:"Der Schuss ist leer.",number:"Schuss | Schüsse",manage:"Schüsse erstellen",new_success:"Schuss {name} erfolgreich erstellt.",padding:"Schusspolsterung",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen möchten?",restore_error:"Bei der Wiederherstellung dieser Aufnahme ist ein Fehler aufgetreten.",sequences:"Sequenzen",tasks:"Schuss-Aufgaben",title:"Shots",fields:{description:"Beschreibung",nb_frames:"Rahmen",episode:"Episode",frame_in:"In",frame_out:"Aus",fps:"FPS",name:"Name",production:"Produkt",sequence:"Sequenz",time_spent:"Zeit"}},server_down:{text:"Bitte wenden Sie sich an Ihren Lieferantensupport, Ihren Systemadministrator oder Ihre IT-Abteilung, um zu erfahren, was schief läuft.",title:"Kitsu ist beim Erreichen seiner Daten-API auf einen Fehler gestoßen."},statistics:{count:"Zählt",count_mode:"Zählmodus",display_mode:"Anzeigemodus",frames:"Rahmen",pie:"Kreisdiagramme",shots:"Shots"},tasks:{add_preview:"Vorschau hinzufügen",add_preview_error:"Beim Hinzufügen einer Vorschau ist ein Fehler aufgetreten.",assign:"Weisen Sie eine Aufgabe zu: | Aufgaben zuweisen {nbSelectedTasks} Aufgaben zu:",back_to_list:"zurück zur Liste",bigger:"Erweitern Sie das Aufgabenfeld",change_status_to:"Ändern des Aufgabenstatus in:",change_preview:"Änderungsvorschau",change_priority:"Ändern Sie die Priorität auf:",clear_assignations:"klare Zuordnungen",create_for_selection:"Erstellen Sie eine Aufgabe für jede leere Zelle:",create_tasks:"Aufgaben hinzufügen",create_tasks_shot:"Aufgaben für aktuelle Aufnahmen hinzufügen",create_tasks_shot_explaination:"Du wirst eine neue Aufgabe für jeden Schuss der aktuellen Liste für den angegebenen Aufgabentyp erstellen. Willst du fortfahren?",create_tasks_shot_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",create_tasks_asset:"Hinzufügen von Aufgaben für aktuelle Assets",create_tasks_asset_explaination:"Sie werden für jede Kühlstelle der aktuellen Liste für den angegebenen Aufgabentyp eine neue Aufgabe erstellen. Willst du fortfahren?",create_tasks_asset_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",current:"Zu erledigende Aufgabe",current_status:"Aktueller Status :",delete_all_text:"Sind Sie sicher, dass Sie alle Aufgaben für bestimmte {name}} löschen möchten? Bitte bestätigen Sie dies, indem Sie den Namen des Aufgabentyps der zu löschenden Aufgaben in das Textfeld eingeben.",delete_all_error:"Das Löschen aller Aufgaben für einen bestimmten Aufgabentyp ist fehlgeschlagen.",delete_error:"Beim Löschen der Aufgabe ist ein Fehler aufgetreten.",delete_comment:"Sind Sie sicher, dass Sie den letzten Kommentar löschen möchten?",delete_comment_error:"Beim Löschen eines Kommentars ist ein Fehler aufgetreten.",delete_for_selection:"Löschen Sie ausgewählte Aufgaben:",delete_preview:"Sind Sie sicher, dass Sie diese Vorschau löschen möchten?",delete_preview_error:"Beim Löschen der Vorschau ist ein Fehler aufgetreten.",edit_comment:"Bearbeiten Sie, wie",done:"Erledigt",download_pdf_file:"Datei herunterladen .{extension} Datei",feedback:"Rückmeldung",full_screen:"Anzeige im Vollbildmodus",hide_assignations:"Zuordnungen ausblenden",hide_infos:"Zusätzliche Informationen ausblenden",my_tasks:"Meine Aufgaben",next:"nächste Aufgabe",no_assignation_right:"Sie dürfen keine Zuordnungen verwalten.",no_comment:"Zu dieser Aufgabe gibt es derzeit keinen Kommentar.",no_preview:"Für diese Aufgabe gibt es derzeit keine Vorschau.",no_task_selected:"Keine Aufgabe ausgewählt",number:"Aufgabe | Aufgaben",preview:"Vorschauen",previous:"vorherige Aufgabe",unsubscribe_notifications:"Abmeldung von Benachrichtigungen",set_estimations:"Setzt Schätzungen für ausgewählte Aufgaben:",set_preview:"Diese Vorschau als Miniaturansicht festlegen",set_preview_error:"Bei der Einstellung der Vorschau als Miniaturansicht ist ein Fehler aufgetreten.",set_preview_done:"Diese Vorschau wird als Miniaturansicht für das aktuelle Objekt verwendet.",select_preview_file:"Bitte wählen Sie ein Bild von Ihrer Festplatte aus, das Sie als Vorschau für die aktuelle Aufgabe verwenden möchten:",show_assignations:"Zuordnungen anzeigen",show_infos:"Zusätzliche Informationen anzeigen",subscribe_notifications:"Benachrichtigungen abonnieren",validation:"Validierung",tasks:"Aufgaben",with_comment:"Mit einem Kommentar...",fields:{asset_type:"Anlagenart",assignees:"Zessionare",end_date:"Enddatum",due_date:"Zwei Termine",duration:"Dauer",entity:"Entität",entity_name:"Name",estimation:"Schätzung",frames:"Fram.",last_comment:"Letzter Kommentar",last_comment_date:"Letzter Kommentar",priority:"Priorität",production:"Produkt",real_end_date:"Validierungsdatum",real_start_date:"WIP-Datum",retake_count:"Wiederholungen",sequence:"Sequenz",task_status:"Status",task_status_short_name:"Status",task_type:"Typ"},colors:{title:"Einfärbung",neutral:"Neutral",status:"Statusfarbe",late:"Spät in Rot"},priority:{emergency:"Notfall",normal:"Normal",high:"Hoch",very_high:"Sehr hoch"}},timesheets:{detail_level:"Detaillierungsgrad",done_tasks:"Erledigte Aufgaben",export_timesheet:"Zeiterfassung exportieren",hours:"Stunden",month:"Monat",time_spents:"Zeitaufwand (Stunden)",title:"Stundenzettel",year:"Jahr"},wrong_browser:{title:"Dein Browser wird von Kitsu nicht unterstützt.",text:"Kitsu kann nur mit Firefox und Chrome-Browsern verwendet werden."}},S={asset_types:{all_asset_types:"Tous les types d'assets",delete_error:"Une erreur est survenue en supprimant un type d'asset. Êtes vous sûr qu'aucun asset est lié à ce type d'asset?",delete_text:"Êtes vous sur de vouloir enlever {name} de la base de données ?",edit_title:"Modifier le type d'asset",new_asset_type:"Ajouter un type d'asset",number:"type d'asset | types d'assets",production_title:"Stats types d'assets",title:"Types d'assets",fields:{name:"Nom"}},assets:{cast_in:"Présent dans",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant l'asset, êtes vous sûr de vouloir que l'asset n'ait plus aucun lien ?",edit_fail:"La création ou l'édition a échoué, une erreur est survenue.",edit_title:"Modifier asset",edit_success:"Asset {name} édité avec succès.",empty_list:"Il n'y a pas d'assets dans la production. Voulez vous en créer ?",new_asset:"Ajouter un asset",new_assets:"Ajouter des assets",new_success:"Asset {name} créé avec succès.",no_cast_in:"Cet asset n'apparait dans aucun shot.",number:"asset | assets",restore_text:"Êtes vous sûr de vouloir restaurer {name} dans votre base de données ?",restore_error:"Une erreur est survenue en restaurant l'asset.",tasks:"Tâches de fabrication",title:"Assets",fields:{description:"Description",episode:"Ép.",name:"Nom",production:"Prod",time_spent:"Jours",type:"Type"}},breakdown:{all_assets:"Tous les assets disponibles",empty:"Casting vide",title:"Casting"},comments:{add_checklist:"Ajout checklist",add_comment:"Ajouter un commentaire...",add_preview:"Attacher un fichier",edit_title:"Modifier le commentaire",empty_text:"Ce commentaire est vide",no_file_attached:"Aucun fichier attaché",pin:"Épingler",pinned:"Épinglé",post_status:"Publier",retake:"Reprise",revision:"révision",set_status_to:"Positionner le statut à",unpin:"Désépingler",validated:"Validé !",validation_required:"Validation requise",fields:{text:"Texte"}},custom_actions:{delete_text:"Êtes-vous sûr de supprimer l'action personnalisée {name} de la base de données?",delete_error:"Une erreur est survenue en supprimant l'action personnalisée.",edit_title:"Modifier une action personnalisée",new_custom_action:"Ajouter une action personnalisée",number:"action pesonnalisée | actions personnalisées",run_for_selection:"Lancer une action personnalisée pour les tâche sélectionnées :",title:"Actions",fields:{name:"Nom",url:"URL",entity_type:"Type d'entité",is_ajax:"Utiliser AJAX"},entity_types:{all:"Tous",shot:"Plan",asset:"Asset"}},episodes:{all_episodes:"Tous les épisodes",edit_title:"Éditer épisode",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas d'épisodes dans la production. Voulez vous en créer ?",new_episode:"Nouvel épisode",number:"épisode | épisodes",title:"Stats épisodes",fields:{name:"Nom",description:"Description"}},login:{login:"Se connecter",login_failed:"La connexion a échoué, vérifiez vos identifiants",title:"Se connecter à Kitsu",fields:{email:"Adresse Mail",password:"Mot de passe"}},main:{about:"À propos",add:"Ajouter",all:"Tous",admin:"Admin",back_to_list:"retour à la liste",cancel:"Annuler",confirmation:"Confirmer",confirmation_and_stay:"Confirmer et rester",clear_selection:"Effacer la sélection",close:"Fermer",days_spent:"Jours passés",edit:"Modifier",dark_theme:"Thème sombre",days_spents:"Jours passés",delete:"Supprimer",delete_all:"Supprimer tout",documentation:"Documentation",delete_text:"Etes vous sûr de vouloir supprimer {name} de la base de données ?",empty_comment:"Commentaire vide",end_date:"Date de fin",go_productions:"Aller aux productions",history:"Historique",info:"Information",loading:"Chargement...",loading_data:"Chargement des données",loading_error:"Une erreur est survenue en chargeant les données.",logout:"Se déconnecter",maximize:"Maximiser",minimize:"Minimiser",nb_frames:"Nb de frames",no:"non",or:"ou",production:"Production",profile:"Profil",remove:"Enlever",studio:"Studio",user:"Utilisateur",save:"Enregistrer",sorted_by:"Tâches triées par",start_date:"Date de début",white_theme:"Thème blanc",yes:"oui",csv:{import_file:"Importer",export_file:"Exporter",import_title:"Importer depuis un .csv",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionner un fichier depuis votre dossier :",error_upload:"Une erreur est survenue en téleversant votre fichier .csv."}},menu:{assign_tasks:"Assigner des tâches",create_tasks:"Créer des tâches",change_status:"Changer le statut",change_priority:"Change priority",delete_tasks:"Supprimer des tâches",run_custom_action:"Lancer des actions",set_estimations:"Définir estimations"},notifications:{and_change_status:"et changé le statut à",assigned_you:"vous a assigné à",commented_on:"a commenté",mention_you_on:"vous a mentionné sur",no_notifications:"Il n'y a pas encore de notifications pour vous pour les projets en cours",title:"Notifications",with_preview:"avec une version"},news:{all:"Tous",commented_on:"a commenté sur",infos:"Infos",no_news:"Il n'y a pas de nouveautés pour cette production ou ce filtre",only_comments:"Seulement les commentaires",only_previews:"Seulement les previews",set_preview_on:"a mis un preview sur",task_status:"Statut de tâche",task_type:"Type de tâche",title:"Flux de nouveautés "},playlists:{add_shots:"Sélectonner les plans",add_sequence:"Ajouter séquence",available_build:"Builds disponibles",build_daily:"Valid. quotidienne",build_weekly:"Valid. hebodomadaire",build_mp4:"Construire .mp4",delete_text:"Êtes vous sûr de vouloir supprimer {name} de la base de données ?",delete_error:"Une erreur est survenue en supprimant la playlist.",download_zip:"Télécharger en .zip",edit_title:"Modifier la playlist",no_preview:"Aucun preview",remove:"enlever",loading_error:"Une erreur serveur est apparue, les playlists ne peuvent pas être chargées.",new_playlist:"Ajouter une playlist",no_build:"Pas de build",no_playlist:"Il n'y a pas de playlist pour ce projet.",no_selection:"Séléctionnez une playlist sur la gauche.",no_sequence_for_episode:"Il n'y a pas de séquence pour cette épisode",no_shot_for_production:"Il n'y pas de plan pour cette production",select_shot:"Sélectionnez un plan dans la colonne de droite",select_playlist:"Sélectionnez une playlist dans la colonne de gauche",title:"Playlists",fields:{name:"Nom"}},people:{active:"Présents",add_member_to_team:"Ajouter un membre à l'équipe: ",create_invite:"Créer et envoyer une invitation",delete_text:"Êtes vous sûr de vouloir retirer {personName} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à elle. Etes vous sur que cette personne n'a aucune tâche assignée et n'a fait aucun commentaire ?",edit_title:"Modifier les informations de",empty_team:"Personne n'a été affecté à cette production.",episodes:"Épisodes",no_task_assigned:"Il n'y a aucune tâche assignée.",new_person:"Ajouter un employé",padding:"Ecart",persons:"Personnes",picture:"Changer l'image",running_tasks:"Tâches en cours",select_person:"Sélectionner une personne...",team:"Équipe",title:"Employés",unactive:"Absents",csv:{export_file:"Télécharger",import_file:"Importer",import_title:"Import employees from a CSV file",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionnez un fichier de votre disque dur :"},list:{active:"Actif",email:"Adresse Mail",name:"Nom",phone:"Téléphone",role:"Rôle"},fields:{active:"Actif",email:"Adresse email",first_name:"Prénom",last_name:"Nom",old_password:"Mot de passe actuel",password:"Nouveau mot de passe",password_2:"Répétez le nouveau mot de passe",phone:"Téléphone",role:"Rôle"},role:{admin:"Studio Manager",manager:"Superviseur",user:"Graphiste",client:"Client"}},productions:{current:"Production sélectionnée ",delete_text:"Êtes vous sûr de vouloir retirer {name} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à cette production. Etes vous sur que cette production n'a aucune tâche, shot ou asset lié ? Kitsu n'autorise pas la suppression de production. Si vous ne souhaitez plus la voir apparaitre, vous pouvez fermer la production.",edit_title:"Modifier la production",new_production:"Ajouter une production",number:"production | productions",open_productions:"Mes productions",picture:"Changer l'image",title:"Productions",home:{create_new:"Créer une nouvelle production",empty:"Vous n'avez pas de production ouverte, voulez vous en créer une nouvelle ?",no_task:"Vous n'avez pas de tâches assignées. Demandez à votre superviseur ce que vous pouvez faire !",title:"Productions en cours",welcome:"Bienvenue sur Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Ajouter des données spécifiques au projet.",add_failed:"Une erreur s'est produite en ajoutant des métadonnées au projet.",add_new_values:"Il n'y a pour le moment aucune valeur enregistrée.",available_values:"Valeurs disponibles",choices:"Liste de valeurs",delete_text:"Êtes vous sûr de vouloir supprimmer cette colonne et toutes les données liées?",delete_error:"Une erreur est survenue en supprimant la colone de métadonnées.",error:"Une erreur est survenue en ajoutant la colone de métadonnées. Assurez vous qu'aucune colonne ne porte le même nom et que les champs sont bien renseignés. Si le problème persiste, contactez le support.",free:"Valeur libre",title:"Ajouter une colonne de métadonnées"},status:{open:"Ouvert",closed:"Fermé"},type:{short:"Format court",featurefilm:"Long Métrage",tvshow:"Série télé"}},profile:{change_avatar:"Changer Avatar",info_title:"Informations",language:"Langue",notifications_enabled:"Notifications mail activées",notifications_slack_enabled:"Notifications Slack activées",notifications_slack_user:"Nom d'utilisateur Slack",password_title:"Changement de mot de passe",timezone:"Fuseau horaire",title:"Votre Profil",avatar:{title:"Changer votre avatar",error_upload:"Une erreur est survenue en envoyant l'image."},change_password:{button:"Changez de mot de passe",success:"Votre mot de passe a été changé avec succès !",unvalid:"Les nouveaux mots de passe sont différents ou votre mot de passe est trop court (7 caractères minimum).",error:"Une erreur s'est produite lors du changement de mot de passe. Veuillez vérifier votre mot de pass actuel."},save:{button:"Sauvegardez vos changements",error:"Une erreur est survenue pendant la sauvegarde de vos changememts."}},schedule:{md:"jh",overall_man_days:"Jours Homme",title:"Planning",title_main:"Planning principal",zoom_level:"Niveau de zoom",milestone:{add_milestone:"Ajouter milestone",delete_milestone:"Supprimer milestone",edit_milestone:"Modifier milestone",error:"Error",name:"Name"}},sequences:{all_sequences:"Toutes les séquences",title:"Stats séquences",number:"séquence | séquences",new_sequence:"Nouvelle séquence",edit_title:"Éditer séquence",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas de séquence dans la production. Voulez vous en créer ?",fields:{name:"Nom",description:"Description"}},settings:{change_logo:"Changer logo",integrations:"Intégrations",logo:"Logo du studio",no_logo:"Aucun logo n' a été positionné.",set_logo:"Changer le logo",title:"Paramètres",fields:{name:"Nom du studio",slack_token:"Token Slack (optionnel)",hours_by_day:"Heures par jour",use_original_name:"Utiliser les noms de fichiers originaux pour le téléchargement"},save:{button:"Sauvegarder les paramètres",error:"Une erreur serveur est survenue en sauvegardant les paramètres"}},server_down:{text:"Contactez votre fournisseur, votre administrateur système ou votre département informatique pour comprendre ce qui ne va pas.",title:"Kitsu a rencontré une erreur en communiquant avec son API de données."},shots:{casting:"Casting",creation_explaination:"Pour ajouter des shot, you devez d'abord créer un épisode. Taper le nom de l'épisode dans la colonne de gauche en bas. Séléctionnez cette épisode et répétez l'opération pour créer une séquence. Enfin créez un shot en sélectionnant la séquence créée, en tapant son nom en bas de la colonne de droite. Cliquez sur le bouton add pour ajouter le shot. Vous pouvez maintenant créer de nombreux shots. Si cette production n'est pas une série, vous pouvez directement créer une séquence).",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que le plan n'a plus aucun lien ?",description:"Description",edit_fail:"La création ou l'édition a échoué, une erreur est survenue. Assurez-vous qu'il n'y pas déjà un shot portant le nom que vous donnez pour la séqence choisie.",episodes:"Épisodes",edit_title:"Modifier plan",edit_success:"Plan {name} édité avec succès.",empty_list:"Il n'y a pas de plans dans la production. Voulez vous en créer ?",no_casting:"Le casting du plan est vide.",number:"plan | plans",new_episodes:"Ajouter des épisodes",new_sequences:"Ajouter des séquences",new_shot:"Ajouter un plan",new_shots:"Ajouter des plans",new_success:"Plan {name} créé avec succès.",manage:"Créer des plans",restore_error:"Une erreur est survenue en restorant le plan.",restore_text:"Etes vous sûr de vouloir restorer {name} dans la base de données ?",sequence:"Séquence",sequences:"Séquences",tasks:"Tâches de fabrication",padding:"Distance",title:"Plans",fields:{name:"Plan",episode:"Épisode",sequence:"Séquence",frame_in:"In",frame_out:"Out",fps:"FPS",nb_frames:"Frames",description:"Description",production:"Prod"}},statistics:{count:"Comptages",count_mode:"Mode de comptage",display_mode:" Mode d'affichage",frames:"Frames",pie:"Graphiques",shots:"Plans"},task_status:{delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du statut de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce statut de tâche ?",edit_title:"Modifier statut",number:"statut | statuts de tâche",new_task_status:"Ajouter un statut de tâche",title:"Statuts de tâche",fields:{name:"Nom",short_name:"Nom court",color:"Couleur",is_retake:"A valeur de retake",is_reviewable:"Est vérifiable",is_done:"Est terminé",is_artist_allowed:"Autorisé aux artistes"}},task_types:{delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du type de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce type de tâche ?",edit_title:"Modifier le type de tâches",number:"type de tâche | types de tâches",new_task_type:"Ajouter un type de tâche",title:"Types de tâches",fields:{allow_timelog:"Temps passé",name:"Nom",color:"Couleur",priority:"Priorité",dedicated_to:"Pour"}},tasks:{add_preview:"Attacher une préviz",add_preview_error:"Une erreur est survenue en ajoutant la preview.",assign:"Assigner une tâche à : | Assigner {nbSelectedTasks} tâches à :",back_to_list:"Retour à la liste",bigger:"Élargir le panneau de tâche",change_status_to:"Changer le statut de la tâche à : ",change_priority:"Changer le priorité de la tâche à : ",change_preview:"Modifier preview",clear_assignations:"effacer les assignations",create_tasks:"Ajouter des tâches",create_tasks_shot:"Ajouter des tâches pour les plans affichés",create_tasks_shot_explaination:"Vous allez créer une nouvelle tâche pour chaque plan de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_shot_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_tasks_asset:"Ajouter des tâches pour les assets affichés",create_tasks_asset_explaination:"Vous allez créer une nouvelle tâche pour chaque asset de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_asset_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_for_selection:"Créer une tâche pour chaque cellule vide :",current:"Tâches à faire",current_status:"Statut actuel :",delete_all_error:"Supprimer toutes les tâches pour ce type de tâche a échoué",delete_comment:"Êtes vous sûr de vouloir supprimer ce commentaire ?",delete_comment_error:"Une erreur est survenue en supprimant le commentaire.",delete_error:"Une erreur est survenue en supprimant la tâche.",delete_for_selection:"Delete selected tasks:",delete_preview:"Êtes vous sûr de vouloir supprimer cette préviz ?",delete_preview_error:"Une erreur est survenue en supprimant la preview.",done:"Terminées",download_pdf_file:"Télécharger le fichier .{extension}",feedback:"retours",full_screen:"Afficher en plein écran",hide_assignations:"Cacher assignations",hide_infos:"Cacher informations additionnelles",my_tasks:"Mes tâches",no_preview:"Il n'y a pas de préviz pour cette tâche.",no_task_selected:"Pas de tâche sélectionnée",no_comment:"Il n'y a pas de commentaires pour cette tâche.",no_assignation_right:"vous n'êtes pas autorisé à gérer les assigations.",number:"tâche | tâches",next:"Suivante",preview:"Pré-visualisation",previous:"Précédente",select_preview_file:"Choisissez une preview sur votre disque dur:",set_estimations:"Donner une estimation pour les tâches sélectionnées :",set_preview:"Utilisez cette previz comme vignette",set_preview_error:"Une erreur est survenue en utilisant cette vignette.",set_preview_done:"Cette previz sert de vignette à l'entité courante.",subscribe_notifications:"S'abonner aux notifications",show_assignations:"Voir assignations",show_infos:"Montrer informations additionnelles",unsubscribe_notifications:"Se désabonner des notifications",tasks:"Tâches",with_comment:"Avec un commentaire...",validation:"Validation",fields:{asset_type:"Type d'asset",assignees:"Assignés",duration:"Duration",due_date:"Pour le",end_date:"Date de fin",estimation:"Estimation",entity:"Entité",entity_name:"Nom",frames:"Frames",last_comment_date:"Dernier comm.",priority:"Priorité",production:"Prod",real_end_date:"Date de valid.",real_start_date:"Date de début",retake_count:"Retakes",sequence:"Séquence",task_status:"Statut",last_comment:"Dernier commentaire",task_status_short_name:"Statut",task_type:"Type"},colors:{title:"Coloration",neutral:"Neutre",status:"Couleur des status",late:"En retard en rouge"},priority:{emergency:"Urgence",normal:"Normale",high:"Haute",very_high:"Très haute"}},timesheets:{detail_level:"Niveau de détail",done_tasks:"Tâches terminées",export_timesheet:"Exporter la feuille de temps",month:"Mois",hours:"heures",title:"Feuille de temps",time_spents:"Temps passé (heures)",year:"Année"},wrong_browser:{title:"Votre navigateur n'est pas pris en charges par Kitsu",text:"Kitsu ne peut être utilisé qu'avec les navigateurs Firefox et Chrome."}},w={assets:{cast_in:"角色分配",delete_error:"删除此资源时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此资源类型吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_fail:"创建或编辑失败, 有错误出现.",edit_success:"已成功编辑资源{name}.",edit_title:"编辑资源",empty_list:"制作中没有资源. 要创建一些吗?",empty_list_client:"此制作中没有资源.",new_asset:"添加资源",new_assets:"添加多个资源",new_success:"已成功创建资源{name}.",no_cast_in:"任何镜头中都没为此资源分配角色.",number:"资源 | 资源(多个)",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此资源时出现错误.",tasks:"资源任务(多个)",title:"资源(多个)",fields:{description:"说明",episode:"片段",name:"名称",production:"制作",type:"类型"}},asset_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此资源类型时出现错误. 很可能存在有链接至此的数据. 您确定没有资源链接至此资源类型吗?",edit_title:"编辑资源类型",new_asset_type:"添加资源类型",number:"资源类型 | 资源类型(多种)",title:"资源类型(多种)",fields:{name:"名称"}},breakdown:{all_assets:"所有可用资源",select_shot:"请从左侧选择一镜头来管理其角色分配.",selected_shot:"{sequence_name}中的多个资源 / {name}的角色分配",save_error:"保存支配表时出现错误.",title:"支配表"},comments:{add_comment:"添加注释...",add_preview:"附加预览",change_preview:"更换预览",empty_text:"此条注释为空",edit_title:"编辑注释",error:"发布注释时出现错误",no_file_attached:"未附加文件",post_status:"发布注释",retake:"重拍",validated:"已确认!",validation_required:"需要得到确认",set_status_to:"将状态设为",fields:{text:"文本"}},custom_actions:{delete_text:"您确定要从您的数据库移除自定义操作{name}吗?",delete_error:"删除此自定义操作时出现错误.",edit_title:"编辑自定义操作",new_custom_action:"添加自定义操作",number:"自定义操作 | 自定义操作(多个)",run_for_selection:"为所选的多个任务执行自定义操作:",title:"自定义操作(多个)",fields:{name:"名称",url:"URL",entity_type:"实体类型"},entity_types:{all:"所有",shot:"镜头",asset:"资源"}},episodes:{delete_error:"删除此片段时出现错误. 很可能存在有链接至此的数据. 您确定没有序列链接至此片段吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_title:"编辑片段",empty_list:"制作中没有片段. 要创建一些吗?",empty_list_client:"此制作中没有片段.",new_episode:"新建片段",number:"片段 | 片段(多个)",title:"片段(多个)",fields:{name:"名称",description:"说明"}},login:{forgot_password:"密码忘记了?",login:"登录",login_failed:"登录失败, 请核实您的凭据",login_page:"取消",reset_change_password:"更改密码",reset_change_password_form_failed:"您给出的密码有问题. 请核实密码长度大于6个字符且两次密码一致.",reset_change_password_failed:"更改密码失败. 请再次重启整个步骤.",reset_change_password_succeed:"您的密码已成功更改. 请返回到登录页面来使用它.",reset_change_password_title:"输入新密码",reset_password:"重置密码",reset_password_failed:"重置密码失败. 请核实您的电子邮箱.",reset_password_succeed:"已成功重置密码. 请查看您的收件箱.",reset_password_title:"进入您的电子邮件来重置密码",title:"登录Kitsu",fields:{email:"电子邮箱",password:"密码",password2:"再次输入密码"}},main:{add:"添加",all:"全部",admin:"管理员",cancel:"取消",clear_selection:"清除当前所选",documentation:"文档",close:"关闭",confirmation:"确认",confirmation_and_stay:"做确认, 之后不离开",dark_theme:"黑色主题",delete:"删除",delete_all:"全部删除",delete_text:"您确定要从您的数据库移除{name}吗?",edit:"编辑",empty_comment:"空注释",history:"历史",info:"信息",or:"或",no:"否",loading_data:"正在加载数据",loading_error:"加载数据时出现错误.",logout:"退出",modify:"修改",minimize:"最小化",maximize:"最大化",profile:"简介",production:"制作",remove:"移除",save:"保存",studio:"工作室",user:"用户",white_theme:"白色主题",yes:"是",csv:{export_file:"导出",error_upload:"上传您的CSV文件时出现错误.",import_file:"导入",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:"}},menu:{assign_tasks:"分配多个任务",change_priority:"更改优先级",change_status:"更改状态",create_tasks:"创建多个任务",delete_tasks:"删除多个任务",run_custom_action:"执行自定义操作"},not_found:{text:"您点击的链接有问题, 我们提倡您返回主页.",title:"页面未找到..., 您要找一下自己已删除的内容吗?"},notifications:{and_change_status:", 也已经将状态更改为了",commented_on:"已给出针对性注释, 注释对象为",no_notifications:"目前没有关于您当前项目的通知.",title:"通知(多个)",with_preview:"带有预览"},people:{active:"活动",add_member_to_team:"向团队添加成员: ",delete_error:"删除此人员时出现错误. 很可能存在有链接至此的数据. 您确定此人员没有分配任务或是没写注释吗?",delete_text:"您确定要从您的数据库移除{personName}吗?",edit_title:"编辑人员",empty_team:"项目团队里没有所列人员.",new_person:"添加新员工",no_task_assigned:"在执行任务未进行分配.",persons:"人员 | 人员(多名)",running_tasks:"在执行任务",select_person:"选择人员...",team:"团队",title:"人员(多名)",unactive:"非活动",csv:{import_file:"导入.csv文件",export_file:"下载为.csv文件",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:",error_upload:"上传您的CSV文件时出现错误."},fields:{first_name:"名称",last_name:"姓氏",email:"电子邮箱",phone:"电话",role:"职责",old_password:"当前密码",password:"新密码",password_2:"新密码(重复)",active:"活动"},list:{name:"名称",email:"电子邮箱",phone:"电话",role:"职责",active:"活动"},role:{admin:"工作室经理",client:"客户",manager:"监制",user:"CG艺术家"}},playlists:{add_shots:"选择多个镜头",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此播放列表时出现错误.",edit_title:"编辑播放列表",loading_error:"出现服务器错误. 多个播放列表无法被加载.",new_playlist:"添加播放列表",no_playlist:"此项目当前没有播放列表.",no_selection:"请从左侧选择播放列表.",no_sequence_for_episode:"此片段没有序列",no_shot_for_production:"此制作没有镜头",no_shot_for_sequence:"此序列没有镜头",select_shot:"请从右列中选择镜头",select_playlist:"请从左列中选择播放列表",title:"播放列表(多个)",remove:"移除",fields:{name:"名称"}},productions:{current:"所选制作",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此制作时出现错误. 很可能存在有链接至此的数据. 您确定没有任务, 镜头或资源链接至此制作吗?",edit_title:"编辑制作",new_production:"添加制作",number:"制作 | 制作(多个)",open_productions:"我的制作",picture:"更换图片",title:"制作(多个)",home:{create_new:"创建新制作",empty:"您什么制作也没开启. 要创建一个新的吗?",no_task:"还没有任务分配给您. 您可以到监制那儿了解一下自己能做些什么!",no_prod_for_client:"您无权访问任何制作. 请联系您的承包商获取访问权限.",title:"执行多个制作",welcome:"欢迎使用Kitsu"},fields:{fps:"FPS",name:"名称",ratio:"宽高比",resolution:"分辨率",status:"状态",type:"类型"},metadata:{add_explaination:"添加此项目需要的特定数据.",add_failed:"向您的项目添加元数据时出现错误.",add_new_values:"当前没有可用值.",available_values:"可用值",choices:"值列表",delete_text:"您确定要删除此列以及此制作的所有资源方面的相关数据吗?",delete_error:"删除此元数据列时出现错误.",error:"添加元数据列时出现错误. 要确保没有相似名称的列, 还要确保填充了所有字段. 如果问题仍然存在, 还请联系我们的支持团队.",free:"空闲值",title:"添加元数据列"},status:{closed:"已关闭",open:"开启",active:"开启",archived:"已关闭"},type:{short:"短片",featurefilm:"故事片",tvshow:"电视节目"}},profile:{info_title:"信息",language:"语种",password_title:"更改密码",timezone:"时区",title:"您的简介",change_avatar:"更换头像",avatar:{title:"更换头像"},change_password:{button:"更改密码",error:"更改密码时出现错误. 请核实您当前的密码.",success:"您的密码已成功更改!",unvalid:"您的确认密码与新密码不相符或您的密码长度太短(预期至少是7个字符)."},save:{button:"保存更改",error:"保存更改时出现错误"}},task_status:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务状态时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务状态吗?",edit_title:"编辑任务状态",number:"任务状态 | 任务状态(多种)",new_task_status:"添加任务状态",title:"任务状态(多种)",fields:{color:"颜色",is_done:"已完成",is_reviewable:"可回顾",is_artist_allowed:"得到了艺术家的获准",name:"名称",short_name:"短名称"}},task_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务类型时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务类型吗?",edit_title:"编辑任务类型",new_task_type:"添加任务类型",number:"任务类型 | 任务类型(多种)",title:"任务类型(多种)",fields:{dedicated_to:"专用于",color:"颜色",name:"名称",allow_timelog:"时间日志",priority:"优先级"}},sequences:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此序列时出现错误. 很可能存在有链接至此的数据. 您确定没有镜头链接至此序列吗?",edit_title:"编辑序列",empty_list:"制作中没有序列. 要创建一些吗?",empty_list_client:"此制作中没有序列.",new_sequence:"新建序列",number:"序列 | 序列(多个)",title:"序列(多个)",fields:{name:"名称",description:"说明"}},shots:{casting:"镜头的角色分配",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此镜头时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此镜头吗?",edit_success:"已成功编辑镜头{name}.",edit_fail:"创建或编辑失败, 有错误出现. 要确保您没要重命名其名称已为给定序列列出的镜头.",edit_title:"编辑镜头",empty_list:"制作中没有镜头. 要创建一些吗?",empty_list_client:"此制作中没有镜头.",new_shot:"添加镜头",new_shots:"添加多个镜头",new_sequences:"添加多个序列",new_episodes:"添加多个片段",no_casting:"镜头的角色分配为空.",number:"镜头 | 镜头(多个)",manage:"创建多个镜头",new_success:"已成功创建镜头{name}.",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此镜头时出现错误.",tasks:"镜头任务(多个)",title:"镜头(多个)",fields:{description:"说明",episode:"片段",frame_in:"入镜",frame_out:"出镜",fps:"FPS",name:"镜头",production:"制作",sequence:"序列"}},server_down:{text:"请联系您的供应商支持, 您的系统管理员或您的IT部门来搞清楚出什么问题了.",title:"Kitsu在访问其数据API时出现错误."},tasks:{add_preview:"添加预览",add_preview_error:"添加预览时出现错误.",assign:"将单个任务分配给: | 将{nbSelectedTasks}个任务分配给:",back_to_list:"返回列表",change_status_to:"将任务状态改为:",change_preview:"更换预览",change_priority:"将优先级改为:",clear_assignations:"清除多个任务分配",create_for_selection:"为每个空单元格都创建任务:",create_tasks:"添加多个任务",create_tasks_shot:"为当前的多个镜头添加多个任务",create_tasks_shot_explaination:"您将要为当前列表的每个镜头都创建给定任务类型的新任务. 要继续吗?",create_tasks_shot_failed:"继续进行多个创建时出现服务器错误.",create_tasks_asset:"为当前的多个资源添加多个任务",create_tasks_asset_explaination:"您将要为当前列表的每个资源都创建给定任务类型的新任务. 要继续吗?",create_tasks_asset_failed:"继续进行多个创建时出现服务器错误.",current:"待执行任务",current_status:"当前状态:",delete_all_text:"您确定要删除所有给定{name}的任务吗? 请通过在文本字段输入您想要删除的那些任务的任务类型名称来确认.",delete_all_error:"删除所有给定任务类型的任务失败.",delete_error:"删除任务时出现错误.",delete_comment:"您确定要删除最新注释吗?",delete_comment_error:"删除注释时出现错误",delete_for_selection:"删除所选的多个任务:",delete_preview:"您确定要删除此预览吗?",delete_preview_error:"删除预览时出现错误.",edit_comment:"编辑注释",done:"已完成",download_pdf_file:"下载.{extension}文件",feedback:"反馈",full_screen:"全屏显示",hide_assignations:"隐藏多个任务分配",my_tasks:"我的任务(多个)",next:"下一个任务",no_assignation_right:"不允许您管理多个任务分配",no_comment:"此任务当前没有注释.",no_preview:"此任务当前没有预览.",preview:"预览(多个)",previous:"上一个任务",unsubscribe_notifications:"通过通知取消订阅",set_preview:"将此预览设置为缩略图",set_preview_error:"将预览设置为缩略图时出现错误",set_preview_done:"此预览被用作当前实体的缩略图.",select_preview_file:"请从您的硬盘选择一张要被用作当前任务的预览的图片:",show_assignations:"显示多个任务分配",subscribe_notifications:"订阅通知",validation:"确认",tasks:"任务(多个)",fields:{assignees:"被分配任务人员(多名)",end_date:"结束日期",entity:"实体",last_comment:"最新注释",production:"制作",task_status:"状态",task_type:"类型"},priority:{emergency:"紧急",normal:"正常",high:"高",very_high:"非常高"}},timesheets:{detail_level:"细节层次",done_tasks:"已完成任务",hours:"小时",month:"月",time_spents:"已用时长(小时)",title:"时间表(多个)",year:"年"}},O={de:k,en:g,es:y,zh:w,fr:S};i.a.use(b["a"]);var T=new b["a"]({locale:"en",fallbackLocale:"en",messages:O}),C=T,P=s("8c4f"),E=s("a6e4"),j=s("48c6"),D=s("7f45"),x=s.n(D),A=s("4360"),M={setLocale:function(){var e=A["a"].state.user.user.locale;C.locale=e.substring(0,2),"zh_Hans_CN"===e?x.a.locale("zh_CN"):x.a.locale(e.substring(0,2))}},L=M,I={setTimezone:function(){var e=A["a"].state.user.user.timezone||x.a.tz.guess();x.a.tz.setDefault(e)}},$=s("2f24"),q=s("9fb0"),N=function(e){A["a"].commit(q["U"]);var t=["loadProductionStatus","loadTaskStatuses","loadAssetTypes","loadTaskTypes","loadPeople","loadOpenProductions","loadCustomActions","loadUserSearchFilters","loadNotifications"];$["a"].mapSeries(t,A["a"].dispatch,(function(t){t&&console.log("An init operation failed: ",t),A["a"].commit(q["T"]),e()}))},F=N,R=s("0f9a"),z=s("ef8b"),B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page asset"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:e.assetsPath}},[s("chevron-left-icon")],1),e.currentAsset?s("entity-thumbnail",{staticClass:"asset-thumbnail flexrow-item",attrs:{entity:e.currentAsset,"with-link":!1}}):e._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:e.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(t){e.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:e.$t("assets.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:e.currentAsset?e.currentAsset.tasks:[],"is-loading":!e.currentAsset,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:e.$t("main.info")}}),s("div",{staticClass:"table-body"},[e.currentAsset?s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("assets.fields.description")))]),s("description-cell",{attrs:{entry:e.currentAsset,full:!0}})],1),e._l(e.assetMetadataDescriptors,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"field-label"},[e._v(e._s(t.name))]),s("td",[e._v("\n                "+e._s(e.currentAsset.data?e.currentAsset.data[t.field_name]:"")+"\n              ")])])}))],2)]):e._e()])],1)]),s("div",{staticClass:"asset-casted-in"},[s("page-subtitle",{attrs:{text:e.$t("assets.cast_in")}}),e.currentAsset?s("div",[e.currentAsset.castInShotsBySequence&&e.currentAsset.castInShotsBySequence[0].length>0?s("div",e._l(e.currentAsset.castInShotsBySequence,(function(t){return s("div",{key:t.length>0?t[0].sequence_name:"",staticClass:"sequence-shots"},[s("div",{staticClass:"shot-sequence"},[e._v("\n            "+e._s(t.length>0?t[0].sequence_name:"")+"\n          ")]),s("div",{staticClass:"shot-list"},e._l(t,(function(t){return s("router-link",{key:t.shot_id,staticClass:"shot-link",attrs:{to:{name:"shot",params:{production_id:e.currentProduction.id,shot_id:t.shot_id}}}},[s("entity-thumbnail",{attrs:{entity:t,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[e._v(e._s(t.shot_name))]),t.nb_occurences>1?s("span",[e._v("\n                  ("+e._s(t.nb_occurences)+")\n                ")]):e._e()])],1)})),1)])})),0):s("div",[e._v("\n        "+e._s(e.$t("assets.no_cast_in"))+"\n      ")])]):s("table-info",{attrs:{"is-loading":e.castIn.isLoadin,"is-error":e.castIn.isError}})],1),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"asset-to-edit":e.currentAsset},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditAsset}})],1)},V=[],U=(s("7f7f"),s("0a35")),H=s("de40"),W=s("0fcb"),Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("assets.edit_title"))+" "+e._s(e.assetToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("assets.new_asset"))+"\n      ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("assets.fields.type"),options:e.getAssetTypeOptions},model:{value:e.form.entity_type_id,callback:function(t){e.$set(e.form,"entity_type_id",t)},expression:"form.entity_type_id"}}),e.isTVShow?s("combobox",{attrs:{label:e.$t("assets.fields.episode"),options:e.episodeOptions},model:{value:e.form.source_id,callback:function(t){e.$set(e.form,"source_id",t)},expression:"form.source_id"}}):e._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:e.$t("assets.fields.description")},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._l(e.assetMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[e.assetToEdit&&e.assetToEdit.id?e._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoadingStay},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmAndStayClicked}},[e._v("\n          "+e._s(e.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmClicked}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),e.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v("\n          "+e._s(e.$t("main.close"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.close"))+"\n        ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v("\n          "+e._s(e.$t("assets.edit_fail"))+"\n        ")]):e._e(),s("p",{staticClass:"success has-text-right info-message"},[e._v("\n          "+e._s(e.assetSuccessText)+"\n        ")])],1)])])])},G=[],K=s("75fc"),Q=s("d065"),X=s("7bf8"),J=s("1149"),Z=s("992f");function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var se={name:"edit-asset-modal",mixins:[Q["a"]],components:{TextField:X["a"],TextareaField:J["a"],Combobox:Z["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","assetToEdit","errorText"],data:function(){return{form:{name:"",description:"",source_id:null,data:{}},assetSuccessText:""}},computed:te({},Object(d["c"])(["assets","assetCreated","assetMetadataDescriptors","assetTypes","currentProduction","currentEpisode","episodes","getAssetTypeOptions","getOpenProductionOptions","isTVShow","openProductions"]),{episodeOptions:function(){var e=this.episodes.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("main.all"),value:"null"}),e}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},methods:te({},Object(d["b"])([]),{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(K["a"])(t))},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description,source_id:this.assetToEdit.source_id||this.assetToEdit.episode_id,data:te({},this.assetToEdit.data)||{}}:(!this.form.entity_type_id&&this.assetTypes.length>0&&(this.form.entity_type_id=this.assetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.form.name="",this.form.description="",this.form.source_id=this.currentEpisode?this.currentEpisode.id:null,this.form.data={})}}),watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var e=this;this.assetSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)}}},ne=se,ie=(s("971a"),Object(m["a"])(ne,Y,G,!1,null,"61fcc8b2",null)),ae=ie.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"type"},[e._v("\n            "+e._s(e.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"status"},[e._v("\n            "+e._s(e.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{staticClass:"assignees"},[e._v("\n            "+e._s(e.$t("tasks.fields.assignees"))+"\n          ")]),s("th",{staticClass:"end-cell"})])])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.entries,(function(t){return s("tr",{key:t.task_type_id},[e.getTaskType(t)?s("task-type-name",{staticClass:"type",attrs:{entry:e.getTaskType(t),"production-id":e.currentProduction.id}}):e._e(),s("td",{staticClass:"status"},[e.getTask(t)?s("validation-tag",{attrs:{task:e.getTask(t)}}):e._e()],1),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},e._l(e.getAssignees(t),(function(n){return s("div",{key:n,staticClass:"avatar-wrapper"},[s("people-avatar",{key:t.id+"-"+n,staticClass:"person-avatar flexrow-item",attrs:{person:e.personMap[n],size:30,"font-size":15}})],1)})),0)]),s("td",{staticClass:"end-cell"})],1)})),0)])]):e._e()],1)},re=[],ce=s("58f5"),de=s("e60b"),le=s("fe13"),ue=s("eb8c");function pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pe(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pe(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var he={name:"todos-list",components:{TableInfo:de["a"],TaskTypeName:ce["a"],PeopleAvatar:ue["a"],ValidationTag:le["a"]},props:{entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:fe({},Object(d["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:fe({},Object(d["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")},getTask:function(e){return"string"===typeof e?this.taskMap[e]:e},getTaskType:function(e){var t=this.getTask(e);return t?this.taskTypeMap[t.task_type_id]:null},getAssignees:function(e){var t=this.getTask(e);return t?t.assignees:[]}})},me=he,_e=(s("95de"),Object(m["a"])(me,oe,re,!1,null,"f3bf6096",null)),ve=_e.exports,be=s("bb21"),ge=s("8d07"),ye=s("8751");function ke(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ke(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ke(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var we={name:"asset",components:{ButtonSimple:H["a"],ChevronLeftIcon:U["e"],DescriptionCell:W["a"],EditAssetModal:ae,EntityThumbnail:be["a"],EntityTaskList:ve,PageSubtitle:ye["a"],PageTitle:ge["a"],TableInfo:de["a"]},data:function(){return{currentAsset:null,castIn:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var e=this;if(this.currentProduction){var t={productionId:this.currentProduction.id};this.currentEpisode&&(t.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",t)}else this.setProduction(this.$route.params.production_id);this.clearSelectedTasks(),this.currentAsset=this.getCurrentAsset(),this.castIn.isLoading=!0,this.castIn.isError=!1,this.currentAsset?this.loadAssetCastIn(this.currentAsset).then((function(){e.castIn.isLoading=!1})).catch((function(t){e.castIn.isError=!0,console.error(t)})):this.loadAsset(this.route.params.asset_id).then((function(){return e.currentAsset=e.getCurrentAsset(),e.loadAssetCastIn(e.currentAsset)})).then((function(){e.castIn.isLoading=!1})).catch((function(t){e.castIn.isError=!0,console.error(t)}))},computed:Se({},Object(d["c"])(["assetMap","assetMetadataDescriptors","assetsPath","currentProduction","route"]),{title:function(){return this.currentAsset?"".concat(this.currentAsset.asset_type_name," / ")+"".concat(this.currentAsset.name):"Loading..."},assetThumbnailPath:function(){var e=this.currentAsset.preview_file_id;return"/api/pictures/originals/preview-files/".concat(e,".png")},isPreview:function(){return this.currentAsset&&this.currentAsset.preview_file_id&&this.currentAsset.preview_file_id.length>0}}),methods:Se({},Object(d["b"])(["editAsset","loadAsset","loadAssetCastIn","clearSelectedTasks"]),{changeTab:function(e){this.selectedTab=e},getCurrentAsset:function(){return this.assetMap[this.route.params.asset_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditAsset:function(e){var t=this;e.id=this.currentAsset.id,this.loading.edit=!0,this.errors.edit=!1,this.editAsset({data:e,callback:function(e){e?(t.loading.edit=!1,t.errors.edit=!0):(t.loading.edit=!1,t.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Oe=we,Te=(s("3c7c"),Object(m["a"])(Oe,B,V,!1,null,"e1ede192",null)),Ce=Te.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"assets page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"asset-search-field",attrs:{"can-save":!0,placeholder:"ex: props modeling=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right flexrow"},[s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload",path:e.importPath},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-link",{staticClass:"flexrow-item",attrs:{text:e.$t("assets.new_asset"),icon:"plus",path:e.newAssetPath}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isAssetsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.assetSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1)]),s("asset-list",{ref:"asset-list",attrs:{"displayed-assets":e.displayedAssetsByType,"is-loading":e.isAssetsLoading||e.initialLoading,"is-error":e.isAssetsLoadingError,"validation-columns":e.assetValidationColumns},on:{"create-tasks":e.showCreateTasksModal,scroll:e.saveScrollPosition,"delete-all-tasks":e.onDeleteAllTasksClicked,"add-metadata":e.onAddMetadataClicked,"delete-metadata":e.onDeleteMetadataClicked,"edit-metadata":e.onEditMetadataClicked}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-loading-stay":e.loading.stay,"is-error":e.editAsset.isCreateError,"is-success":e.editAsset.isSuccess,"cancel-route":e.assetsPath,"asset-to-edit":e.assetToEdit},on:{confirm:e.confirmEditAsset,confirmAndStay:e.confirmNewAssetStay}}),s("delete-modal",{ref:"delete-asset-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.deleteAsset.isLoading,"is-error":e.deleteAsset.isError,"cancel-route":e.assetsPath,text:e.deleteText(),"error-text":e.$t("assets.delete_error")},on:{confirm:e.confirmDeleteAsset}}),s("delete-modal",{ref:"restore-asset-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.restoreAsset.isLoading,"is-error":e.restoreAsset.isDeleteError,"cancel-route":e.assetsPath,text:e.restoreText(),"error-text":e.$t("assets.restore_error")},on:{confirm:e.confirmRestoreAsset}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,"cancel-route":e.assetsPath,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText},on:{confirm:e.confirmDeleteAllTasks}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1},confirm:e.confirmDeleteMetadata}}),s("import-modal",{attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.assetsCsvFormData,columns:e.columns},on:{fileselected:e.selectFile,confirm:e.uploadImportFile,cancel:e.hideImportModal}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.taskStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_asset"),text:e.$t("tasks.create_tasks_asset_explaination"),"error-text":e.$t("tasks.create_tasks_asset_failed")},on:{cancel:e.hideCreateTasksModal,confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{cancel:function(t){e.modals.isAddMetadataDisplayed=!1},confirm:e.confirmAddMetadata}})],1)},Ee=[],je=(s("7514"),s("c1df")),De=s.n(je),xe=s("3455"),Ae=s("2229"),Me=s("8c97"),Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[e.isTVShow?s("th",{ref:"th-episode",staticClass:"episode"},[e._v("\n            "+e._s(e.$t("assets.fields.episode"))+"\n          ")]):e._e(),s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[e._v(e._s(e.$t("assets.fields.name")))]),!e.isCurrentUserClient&&e.isShowInfos?s("th",{ref:"th-description",staticClass:"description"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v("\n              "+e._s(e.$t("assets.fields.description"))+"\n              ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow-item",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]):e._e(),e._l(e.assetMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[e._v("\n              "+e._s(t.name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("th",{ref:"th-spent",staticClass:"time-spent"},[e._v("\n            "+e._s(e.$t("assets.fields.time_spent"))+"\n          ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},style:e.getValidationStyle(t)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item validation-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v("\n                "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions"},[e.isCurrentUserManager&&e.displayedAssets.length>0&&!e.isLoading?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:e.$t("assets.new_assets"),path:e.newAssetPath()}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list_client")))])]):e._e(),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[e.isListVisible?s("table",{staticClass:"table splitted-table unselectable"},e._l(e.displayedAssets,(function(t,n){return s("tbody",{key:t[0]?t[0].asset_type_id+t[0].canceled:"",ref:"body-tbody",refInFor:!0,staticClass:"tbody"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[e._v("\n            "+e._s(t[0]?t[0].asset_type_name:"")+"\n          ")])]),e._l(t,(function(t,i){return s("tr",{key:t.id,class:{canceled:t.canceled}},[e.isTVShow?s("td",{staticClass:"episode"},[e._v("\n            "+e._s(e.episodeMap[t.episode_id]?e.episodeMap[t.episode_id].name:e.$t("main.all"))+"\n          ")]):e._e(),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:t}})],1),s("td",{class:{name:!0,bold:!t.canceled}},[s("router-link",{staticClass:"asset-link",attrs:{to:e.assetPath(t.id)}},[e._v("\n              "+e._s(t.name)+"\n            ")])],1),!e.isCurrentUserClient&&e.isShowInfos?s("description-cell",{staticClass:"description",attrs:{entry:t}}):e._e(),e._l(e.assetMetadataDescriptors,(function(n){return e.isShowInfos?s("td",{key:t.id+"-"+n.id,staticClass:"metadata-descriptor"},[e._v("\n            "+e._s(t.data?t.data[n.field_name]:"")+"\n          ")]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("td",{staticClass:"time-spent"},[e._v("\n            "+e._s(e.formatDuration(t.timeSpent))+"\n          ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(i,n)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],selected:e.assetSelectionGrid[e.getIndex(i,n)][o],rowX:e.getIndex(i,n),columnY:o,minimized:e.hiddenColumns[a],"is-static":!0,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"edit-route":e.editPath(t.id),"delete-route":e.deletePath(t.id),"restore-route":e.restorePath(t.id)}}):s("td",{staticClass:"actions"})],2)})),e._m(2,!0)],2)})),0):e._e()]),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-assets"},[e._v("\n    "+e._s(e.displayedAssetsLength)+" "+e._s(e.$tc("assets.number",e.displayedAssetsLength))+"\n  ")])],1)},Ie=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("66a5")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("66a5")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",{staticClass:"empty-line"},[s("td",{attrs:{colspan:"30"}})])}],$e=s("e9c6"),qe=s("4f18"),Ne=s("1338"),Fe=s("e211"),Re=s("03b1"),ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[s("div",{on:{click:function(t){return e.$emit("minimize-clicked")}}},[e.isMinimized?s("span",[e._v("\n      "+e._s(e.$t("main.maximize"))+"\n    ")]):s("span",[e._v(e._s(e.$t("main.minimize")))])]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-all-clicked")}}},[e._v("\n    "+e._s(e.$t("main.delete_all"))+"\n  ")]):e._e()])},Be=[];function Ve(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ue(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ve(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ve(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var He={name:"table-header-menu",props:{isMinimized:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Ue({},Object(d["c"])([])),methods:Ue({},Object(d["b"])([]))},We=He,Ye=(s("05fb"),Object(m["a"])(We,ze,Be,!1,null,"53a8772e",null)),Ge=Ye.exports,Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[e.isCurrentUserAdmin?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v("\n    "+e._s(e.$t("main.edit"))+"\n  ")]):e._e(),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v("\n    "+e._s(e.$t("main.delete"))+"\n  ")]):e._e()])},Qe=[];function Xe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Je(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xe(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xe(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ze={name:"table-metadata-header-menu",props:{isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Je({},Object(d["c"])([])),methods:Je({},Object(d["b"])([]))},et=Ze,tt=(s("9b9d"),Object(m["a"])(et,Ke,Qe,!1,null,"32da9ee2",null)),st=tt.exports,nt=s("cb0e");function it(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function at(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?it(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):it(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ot={name:"asset-list",mixins:[$e["a"],qe["a"],Ne["a"]],props:{displayedAssets:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},isError:{type:Boolean,default:!0},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonLink:Fe["a"],ButtonSimple:H["a"],DescriptionCell:W["a"],EntityThumbnail:be["a"],ChevronDownIcon:U["d"],RowActions:Re["a"],TableInfo:de["a"],TableHeaderMenu:Ge,TableMetadataHeaderMenu:st,ValidationCell:nt["a"]},computed:at({},Object(d["c"])(["assets","assetFilledColumns","assetMetadataDescriptors","assetSearchText","assetSelectionGrid","episodeMap","currentEpisode","currentProduction","displayedAssetsLength","nbSelectedTasks","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isShowAssignations","isShowInfos","isAssetTime","isTVShow","selectedTasks","taskMap","taskTypeMap"]),{createTasksPath:function(){return this.getPath("create-asset-tasks")},isEmptyList:function(){return 0===this.displayedAssetsLength&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedAssetsLength>0},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.assetFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:at({},Object(d["b"])(["displayMoreAssets"]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreAssets()},loadMoreAssets:function(){this.displayMoreAssets(),this.$nextTick(this.resizeHeaders)},getIndex:function(e,t){var s=0,n=0;while(s<t)n+=this.displayedAssets[s].length,s++;return e+n},newAssetPath:function(){return this.getPath("new-asset")},assetPath:function(e){return this.getPath("asset",e)},editPath:function(e){return this.getPath("edit-asset",e)},deletePath:function(e){return this.getPath("delete-asset",e)},restorePath:function(e){return this.getPath("restore-asset",e)},taskTypePath:function(e){var t={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-task-type",t.params.episode_id=this.currentEpisode.id),t},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.asset_id=t),s},resizeHeaders:function(){this.$refs["th-episode"]?this.resizeSplittedTableHeaders([{index:0,name:"episode"},{index:1,name:"thumbnail"},{index:2,name:"name"},{index:3,name:"description"}]):this.resizeSplittedTableHeaders([{index:0,name:"thumbnail"},{index:1,name:"name"},{index:2,name:"description"}])}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},rt=ot,ct=(s("4084"),Object(m["a"])(rt,Le,Ie,!1,null,"7540575d",null)),dt=ct.exports,lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("productions.metadata.title"))+"\n      ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("combobox",{directives:[{name:"focus",rawName:"v-focus"}],ref:"typeField",attrs:{label:e.$t("assets.fields.type"),options:e.typeOptions},on:{enter:e.confirm},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),"choices"===e.type?s("div",[s("p",{staticClass:"strong"},[e._v("\n          "+e._s(e.$t("productions.metadata.available_values"))+"\n        ")]),e.form.values.length>0?s("div",{ref:"valueList",staticClass:"choice-value-wrapper"},e._l(e.form.values,(function(t){return s("p",{key:t,staticClass:"choice-value"},[s("span",[e._v("\n              "+e._s(t)+"\n            ")]),s("span",{staticClass:"remove-button pull-right",on:{click:function(s){return e.removeValue(t)}}},[e._v("\n             x\n            ")])])})),0):s("div",[e._v("\n          "+e._s(e.$t("productions.metadata.add_new_values"))+"\n        ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"addChoiceField",attrs:{"button-label":e.$t("Add value")},on:{enter:e.addValue},model:{value:e.valueToAdd,callback:function(t){e.valueToAdd=t},expression:"valueToAdd"}})],1):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("productions.metadata.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},ut=[],pt=s("66e7"),ft=s("d5c9");function ht(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ht(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ht(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _t={name:"add-metadata-modal",mixins:[Q["a"]],components:{Combobox:Z["a"],ModalFooter:ft["a"],TextField:X["a"]},props:{active:{type:Boolean,default:!1},descriptorToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:"",values:[]},valueToAdd:"",type:"free",typeOptions:[{label:this.$t("productions.metadata.free"),value:"free"},{label:this.$t("productions.metadata.choices"),value:"choices"}]}},mounted:function(){this.reset()},computed:mt({},Object(d["c"])([]),{isFormFilled:function(){return this.form.name.length>0&&(this.form.values.length>0||"free"===this.type)},valueList:function(){return this.$refs.valueList}}),methods:mt({},Object(d["b"])([]),{addValue:function(){var e=this,t=this.$refs.addChoiceField.value;return!this.form.values.find((function(e){return e===t}))&&t&&(this.form.values.push(t),this.valueToAdd="",this.$nextTick((function(){e.valueList.scrollTop=e.valueList.scrollHeight}))),t},confirm:function(){return"free"===this.type&&(this.form.values=[]),this.$emit("confirm",this.form)},removeValue:function(e){this.form.values=Object(pt["d"])(this.form.values,e)},reset:function(){this.form={name:"",values:[]},this.valueToAdd="",this.descriptorToEdit.name&&(this.form={id:this.descriptorToEdit.id,name:"".concat(this.descriptorToEdit.name),values:Object(K["a"])(this.descriptorToEdit.choices)}),this.type=this.form.values.length>0?"choices":"free"}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},vt=_t,bt=(s("d114"),Object(m["a"])(vt,lt,ut,!1,null,"37e06676",null)),gt=bt.exports,yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:e.title}}),s("p",[e._v(e._s(e.text))]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("tasks.fields.task_type"),options:e.isAssetTasks?e.getAssetTaskTypeOptions:e.getShotTaskTypeOptions},model:{value:e.form.task_type_id,callback:function(t){e.$set(e.form,"task_type_id",t)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoadingStay},on:{click:e.confirmAndStayClicked}},[e._v("\n          "+e._s(e.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.cancel"))+"\n        ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v("\n          "+e._s(e.errorText)+"\n        ")]):e._e()])],1)])])},kt=[];function St(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?St(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):St(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ot={name:"create-task-modal",mixins:[Q["a"]],components:{PageTitle:ge["a"],Combobox:Z["a"]},props:{active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},data:function(){return{form:{task_type_id:""}}},computed:wt({},Object(d["c"])(["taskTypes","getAssetTaskTypeOptions","getShotTaskTypeOptions"]),{isAssetTasks:function(){return this.$route.path.indexOf("assets")>=0}}),methods:wt({},Object(d["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},confirmAndStayClicked:function(){this.$emit("confirm-and-stay",this.form)}}),mounted:function(){this.isAssetTasks?this.getAssetTaskTypeOptions.length>0&&(this.form.task_type_id=this.getAssetTaskTypeOptions[0].value):this.getShotTaskTypeOptions.length>0&&(this.form.task_type_id=this.getShotTaskTypeOptions[0].value)}},Tt=Ot,Ct=(s("fd61"),Object(m["a"])(Tt,yt,kt,!1,null,"b1c1d4b6",null)),Pt=Ct.exports,Et=s("5f48"),jt=s("440f"),Dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userLockText,expression:"userLockText"}],ref:"confirmation-name",staticClass:"input",attrs:{type:"text"},domProps:{value:e.userLockText},on:{input:function(t){t.target.composing||(e.userLockText=t.target.value)}}})]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},attrs:{disabled:e.isLocked},on:{click:function(t){return e.$emit("confirm")}}},[e._v("\n            "+e._s(e.$t("main.confirmation"))+"\n          ")]),s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v("\n            "+e._s(e.$t("main.cancel"))+"\n          ")])],1)])])])},xt=[];function At(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?At(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):At(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Lt={name:"hard-delete-modal",data:function(){return{userLockText:""}},props:{text:{type:String,default:""},active:{type:Boolean,default:!1},cancelRoute:{type:Object,default:function(){}},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},lockText:{type:String,default:"locked"}},computed:Mt({},Object(d["c"])([]),{isLocked:function(){return"locked"===this.lockText||this.lockText!==this.userLockText}}),methods:Mt({},Object(d["b"])([])),watch:{active:function(){var e=this;this.active&&(this.userLockText="",this.$nextTick((function(){e.$refs["confirmation-name"]&&e.$refs["confirmation-name"].focus()})))}}},It=Lt,$t=(s("4ca5"),Object(m["a"])(It,Dt,xt,!1,null,"0eb9c986",null)),qt=$t.exports,Nt=s("4d04"),Ft=s("55ce"),Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowAssignations},attrs:{title:e.$t(e.isShowAssignations?"tasks.hide_assignations":"tasks.show_assignations")},on:{click:e.toggleAssignations}},[s("users-icon",{staticClass:"icon is-small"})],1)},zt=[];function Bt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bt(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bt(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ut={name:"show-assignations-button",components:{UsersIcon:U["H"]},props:{},computed:Vt({},Object(d["c"])(["isShowAssignations"])),methods:Vt({},Object(d["b"])(["showAssignations","hideAssignations"]),{toggleAssignations:function(){this.isShowAssignations?this.hideAssignations():this.showAssignations()}}),mounted:function(){"false"===localStorage.getItem("show-assignations")?this.hideAssignations():this.showAssignations()},watch:{isShowAssignations:function(){localStorage.setItem("show-assignations",this.isShowAssignations,{expires:"1M"})}}},Ht=Ut,Wt=Object(m["a"])(Ht,Rt,zt,!1,null,null,null),Yt=Wt.exports,Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowInfos},attrs:{title:e.$t(e.isShowInfos?"tasks.hide_infos":"tasks.show_infos")},on:{click:e.toggleInfos}},[s("database-icon",{staticClass:"icon is-small"})],1)},Kt=[];function Qt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qt(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qt(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Jt={name:"show-infos-button",components:{DatabaseIcon:U["h"]},props:{},computed:Xt({},Object(d["c"])(["isShowInfos"])),methods:Xt({},Object(d["b"])(["showInfos","hideInfos"]),{toggleInfos:function(){this.isShowInfos?this.hideInfos():this.showInfos()}}),mounted:function(){"false"===localStorage.getItem("show-infos")?this.hideInfos():this.showInfos()},watch:{isShowInfos:function(){localStorage.setItem("show-infos",this.isShowInfos,{expires:"1M"})}}},Zt=Jt,es=Object(m["a"])(Zt,Gt,Kt,!1,null,null,null),ts=es.exports,ss=s("9d94");function ns(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function is(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ns(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ns(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var as={name:"assets",components:{AssetList:dt,AddMetadataModal:gt,ButtonLink:Fe["a"],ButtonSimple:H["a"],CreateTasksModal:Pt,DeleteModal:Et["a"],EditAssetModal:ae,HardDeleteModal:qt,ImportModal:jt["a"],SearchField:Nt["a"],SearchQueryList:Ft["a"],ShowAssignationsButton:Yt,ShowInfosButton:ts,TaskInfo:ss["a"]},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1},loading:{addMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1,taskStay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,importing:!1},assetToDelete:null,assetToRestore:null,assetToEdit:null,assetFilters:[{type:"Type",value:{name:"open"}}],assetFilterTypes:["Type"],descriptorToEdit:{},columns:["Type","Name","Description"],deleteAllTasksLockText:null}},computed:is({},Object(d["c"])(["assetMap","assetsPath","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentEpisode","currentProduction","editAsset","deleteAsset","displayedAssetsByType","openProductions","isAssetsLoading","isAssetsLoadingError","isCurrentUserManager","isAssetTime","isTVShow","nbSelectedTasks","restoreAsset","selectedTasks","taskTypeMap"]),{newAssetPath:function(){return this.getPath("new-asset")},importPath:function(){return this.getPath("import-assets")}}),created:function(){this.setLastProductionScreen("assets")},mounted:function(){var e=this;this.assetSearchText.length>0&&this.$refs["asset-search-field"].setValue(this.assetSearchText),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition),Object.keys(this.assetMap).length<2||this.assetValidationColumns.length>0&&!Object.keys(this.assetMap)[0].validations?setTimeout((function(){e.loadAssets((function(t){t||(e.handleModalsDisplay(),e.onSearchChange(),setTimeout((function(){e.$refs["asset-list"]&&e.$refs["asset-list"].setScrollPosition(e.assetListScrollPosition)}),500)),setTimeout((function(){e.initialLoading=!1,e.resizeHeaders()}),200)}))}),0):(this.isAssetsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition))},methods:is({},Object(d["b"])(["addMetadataDescriptor","getAssetsCsvLines","deleteAllTasks","deleteMetadataDescriptor","loadAssets","loadComment","removeAssetSearch","saveAssetSearch","setLastProductionScreen","setAssetSearch"]),{confirmNewAssetStay:function(e){var t=this,s="newAsset";this.loading.stay=!0,this.editAsset.isSuccess=!1,this.editAsset.isError=!1,this.$store.dispatch(s,{data:e,callback:function(e){t.loading.stay=!1,e?t.loading.edit=!1:(t.resetLightEditModal(),t.$refs["edit-asset-modal"].focusName(),t.editAsset.isSuccess=!0,t.resizeHeaders())}})},confirmEditAsset:function(e){var t=this,s="newAsset";this.loading.edit=!0,this.editAsset.isCreateError=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",e.id=this.assetToEdit.id),this.$store.dispatch(s,{data:e,callback:function(e){e?(t.loading.edit=!1,t.editAsset.isCreateError=!0):(t.loading.edit=!1,t.modals.isNewDisplayed=!1,t.$router.push(t.assetsPath),t.resizeHeaders())}})},confirmDeleteAsset:function(){var e=this;this.$store.dispatch("deleteAsset",{asset:this.assetToDelete,callback:function(t){t||e.$router.push(e.assetsPath)}})},confirmRestoreAsset:function(){var e=this;this.$store.dispatch("restoreAsset",{asset:this.assetToRestore,callback:function(t){t||(e.modals.isRestoreDisplayed=!1)}})},confirmCreateTasks:function(e){var t=this;this.loading.creatingTasks=!0,this.runTasksCreation(e,(function(){t.hideCreateTasksModal(),t.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(e){var t=this;this.loading.taskStay=!0,this.runTasksCreation(e,(function(){t.loading.taskStay=!1}))},runTasksCreation:function(e,t){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:e.task_type_id,type:"assets",project_id:this.currentProduction.id,callback:function(e){e?s.errors.creatingTasks=!0:s.loadAssets((function(){s.resizeHeaders()})),t(e)}})},confirmDeleteAllTasks:function(){var e=this,t=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:t}).then((function(){e.loading.deleteAllTasks=!1,e.loadAssets((function(){e.resizeHeaders()})),e.$router.push(e.assetsPath)})).catch((function(t){console.error(t),e.loading.deleteAllTasks=!1,e.errors.deleteAllTasks=!0}))},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},resetLightEditModal:function(){var e={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=e},resetEditModal:function(){var e={name:""};this.assetTypes.length>0&&(e.asset_type_id=this.assetTypes[0].id),e.production_id=this.currentProduction.id,this.assetToEdit=e},deleteText:function(){var e=this.assetToDelete;return e?this.$t("assets.delete_text",{name:e.name}):""},deleteAllTasksText:function(){var e=this.taskTypeMap[this.$route.params.task_type_id];return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText:function(){var e=this.assetToRestore;return e?this.$t("assets.restore_text",{name:e.name}):""},handleModalsDisplay:function(){var e=this.$store.state.route.path,t=this.$store.state.route.params.asset_id;if(this.editAsset.isSuccess=!1,this.editAsset.isError=!1,e.indexOf("new")>0)this.resetEditModal(),this.editAsset.isSuccess=!1,this.modals.isNewDisplayed=!0;else if(e.indexOf("edit")>0)this.editAsset.isSuccess=!1,this.assetToEdit=this.assetMap[t],this.modals.isNewDisplayed=!0;else if(e.indexOf("delete-all-tasks")>0){var s=this.taskTypeMap[this.$route.params.task_type_id];this.deleteAllTasksLockText=s.name,this.modals.isDeleteAllTasksDisplayed=!0}else e.indexOf("delete")>0?(this.assetToDelete=this.assetMap[t],this.modals.isDeleteDisplayed=!0):e.indexOf("restore")>0?(this.assetToRestore=this.assetMap[t],this.modals.isRestoreDisplayed=!0):this.modals={isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}},selectFile:function(e){this.$store.commit("ASSET_CSV_FILE_SELECTED",e)},uploadImportFile:function(){var e=this;this.loading.importing=!0,this.errors.importing=!1,this.$store.dispatch("uploadAssetFile",(function(t){t?(e.loading.importing=!1,e.errors.importing=!0):(e.loading.importing=!1,e.loadAssets((function(){e.resizeHeaders()})),e.hideImportModal())}))},onSearchChange:function(){var e=this.$refs["asset-search-field"].getValue();1!==e.length&&(this.setAssetSearch(e),this.resizeHeaders())},changeSearch:function(e){this.$refs["asset-search-field"].setValue(e.search_query),this.$refs["asset-search-field"].$emit("change",e.search_query),this.resizeHeaders()},saveSearchQuery:function(e){this.saveAssetSearch(e).then((function(){})).catch((function(e){e&&console.log("error")}))},removeSearchQuery:function(e){this.removeAssetSearch(e).then((function(){})).catch((function(e){e&&console.log("error")}))},saveScrollPosition:function(e){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",e)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},resizeHeaders:function(){var e=this;setTimeout((function(){e.$refs["asset-list"]&&e.$refs["asset-list"].resizeHeaders()}),0)},onDeleteAllTasksClicked:function(e){var t=this.getPath("delete-all-asset-tasks"),s=this.taskTypeMap[e];t.params.task_type_id=e,this.deleteAllTasksLockText=s.name,this.$router.push(t)},confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Asset",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1},onExportClick:function(){var e=this;this.getAssetsCsvLines().then((function(t){var s=[De()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("assets.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var n=Object(Me["b"])(s.join("_")),i=[e.$t("assets.fields.episode"),e.$t("assets.fields.name"),e.$t("assets.fields.description")];Object(Ae["c"])(Object(K["a"])(e.currentProduction.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(e){i.push(e.field_name)})),e.isAssetTime&&i.push(e.$t("shots.fields.time_spent")),e.assetValidationColumns.forEach((function(t){i.push(e.taskTypeMap[t].name)})),xe["a"].buildCsvFile(n,[i].concat(t))}))}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var e=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow||(this.initialLoading=!0,this.loadAssets((function(t){e.initialLoading=!1,e.resizeHeaders(),t||e.handleModalsDisplay()})))},currentEpisode:function(){var e=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadAssets((function(t){t||(e.handleModalsDisplay(),e.initialLoading=!1,e.resizeHeaders())})))},displayedAssets:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("assets.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("assets.title")," - Kitsu")}}},os=as,rs=(s("bf43"),Object(m["a"])(os,Pe,Ee,!1,null,"64a32ce0",null)),cs=rs.exports,ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[e._m(0),s("div",{staticClass:"field mt1"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:e.$t("login.fields.email")},on:{input:e.updateEmail,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icon"},[s("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:e.$t("login.fields.password")},on:{input:e.updatePassword,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("p",{staticClass:"control"},[s("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":e.isLoginLoading},on:{click:e.confirmLogIn}},[e._v("\n          "+e._s(e.$t("login.login"))+"\n        ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[e._v("\n        "+e._s(e.$t("login.login_failed"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"reset-password"}}},[e._v("\n          "+e._s(e.$t("login.forgot_password"))+"\n        ")])],1)])])])},ls=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"has-text-centered login-header"},[n("img",{attrs:{src:s("ad6c")}}),n("h1",{staticClass:"title"},[e._v("\n          Kitsu\n        ")])])}];function us(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ps(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?us(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):us(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var fs={name:"login",components:{MailIcon:U["q"],LockIcon:U["p"]},computed:ps({},Object(d["c"])(["isLoginLoading","isLoginError"])),methods:ps({},Object(d["b"])(["logIn"]),{updateEmail:function(e){this.$store.dispatch("changeEmail",e.target.value)},updatePassword:function(e){this.$store.dispatch("changePassword",e.target.value)},confirmLogIn:function(){var e=this;this.logIn((function(t,s){t&&(t.default_password?e.$router.push({name:"reset-change-password",params:{token:t.token}}):console.log(t)),s&&e.$router.push("/")}))}}),metaInfo:function(){return{title:this.$t("login.title")}}},hs=fs,ms=(s("5aca"),Object(m["a"])(hs,ds,ls,!1,null,"0f148f0e",null)),_s=ms.exports,vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},bs=[],gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topbar"},[s("div",{class:{"is-active":!e.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(t){return e.toggleUserMenu()}}}),s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-left"},[s("a",{staticClass:"nav-item sidebar-button",class:{selected:!e.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(t){return e.toggleSidebar()}}},[e._v("\n        ≡\n      ")]),e.isProductionContext?s("div",{class:{"nav-item":!0}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("combobox",{staticClass:"context-selector",attrs:{options:e.openProductionOptions,"is-top":!0},model:{value:e.currentProductionId,callback:function(t){e.currentProductionId=t},expression:"currentProductionId"}}),s("strong",[e._v("\n            >\n            ")]),s("combobox",{staticClass:"context-selector",attrs:{options:e.navigationOptions,"is-top":!0},model:{value:e.currentProjectSection,callback:function(t){e.currentProjectSection=t},expression:"currentProjectSection"}}),e.isEpisodeContext?s("strong",[e._v("\n            >\n            ")]):e._e(),e.isEpisodeContext?s("combobox",{staticClass:"context-selector",attrs:{options:e.episodeOptions,"is-top":!0},model:{value:e.currentEpisodeId,callback:function(t){e.currentEpisodeId=t},expression:"currentEpisodeId"}}):e._e()],1)])]):e.lastProduction&&"/open-productions"!==e.$route.path?s("div",{staticClass:"nav-item"},[s("router-link",{staticClass:"flexrow",attrs:{to:e.lastSectionPath}},[s("chevron-left-icon"),e._v("\n          "+e._s(e.$t("main.go_productions"))+"\n        ")],1)],1):e._e()]),s("div",{staticClass:"nav-right"},[s("notification-bell"),s("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!e.isUserMenuHidden},on:{click:e.toggleUserMenu}},[s("people-avatar",{ref:"avatar",staticClass:"avatar",attrs:{"no-cache":!0,person:e.user,"is-link":!1}}),s("people-name",{staticClass:"user-name",attrs:{person:e.user}})],1)],1)]),s("nav",{directives:[{name:"show",rawName:"v-show",value:!e.isUserMenuHidden,expression:"!isUserMenuHidden"}],ref:"user-menu",staticClass:"user-menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(t){return e.toggleUserMenu()}}},[e._v("\n          "+e._s(e.$t("main.profile"))+"\n        ")])],1),s("li",{on:{click:e.toggleDarkTheme}},[e.isDarkTheme?s("span",[e._v("\n          "+e._s(e.$t("main.white_theme"))+"\n        ")]):s("span",[e._v("\n          "+e._s(e.$t("main.dark_theme"))+"\n        ")])]),s("li",[s("a",{attrs:{href:"https://kitsu.cg-wire.com",target:"_blank"}},[e._v("\n          "+e._s(e.$t("main.documentation"))+"\n        ")])]),e._m(0),e._m(1),s("li",[s("a",{attrs:{href:"https://cg-wire.com/en/about.html",target:"_blank"}},[e._v("\n          "+e._s(e.$t("main.about"))+"\n        ")])]),s("li",{on:{click:e.onLogoutClicked}},[e._v("\n        "+e._s(e.$t("main.logout"))+"\n      ")]),s("li",{staticClass:"version"},[e._v("\n        Kitsu "+e._s(e.kitsuVersion)+"\n      ")])])])])},ys=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://slack.cg-wire.com",target:"_blank"}},[e._v("\n          Slack\n        ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://trello.com/b/TGi6LZNa/kitsu-roadmap",target:"_blank"}},[e._v("\n          Roadmap\n        ")])])}],ks=(s("28a5"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"nav-item"},[s("router-link",{attrs:{to:{name:"notifications"}}},[s("bell-icon",{class:e.notificationBellClass})],1)],1)}),Ss=[];function ws(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Os(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ws(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ws(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ts={name:"notification-bell",components:{BellIcon:U["b"]},props:{isWhite:{type:Boolean,default:!1}},computed:Os({},Object(d["c"])(["isNewNotification"]),{notificationBellClass:function(){return this.isNewNotification?{"has-notifications":!0}:this.isWhite?{"has-no-notifications":!0,white:!0}:{"has-no-notifications":!0}}})},Cs=Ts,Ps=(s("6366"),Object(m["a"])(Cs,ks,Ss,!1,null,"29330b35",null)),Es=Ps.exports,js=s("0073"),Ds=s("9224");function xs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function As(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xs(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xs(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ms={name:"topbar",components:{Combobox:Z["a"],ChevronLeftIcon:U["e"],NotificationBell:Es,PeopleName:js["a"],PeopleAvatar:ue["a"]},data:function(){return{currentProductionId:this.$route.params.production_id,currentEpisodeId:this.$route.params.episode_id,currentProjectSection:null,kitsuVersion:Ds["a"],silent:!1}},mounted:function(){var e=this.$refs["user-menu"],t=this.$refs["user-name"];if(t){var s=t.clientWidth;s>100&&(e.style.width="".concat(s,"px"),t.style.width="".concat(s,"px"))}this.setProductionFromRoute()},computed:As({},Object(d["c"])(["assetsPath","currentEpisode","currentProduction","episodes","episodeOptions","isDarkTheme","isSidebarHidden","isUserMenuHidden","isTVShow","isNewNotification","lastProductionScreen","lastProductionViewed","openProductions","openProductionOptions","productionMap","user"]),{isShotPage:function(){return this.$route.params.episode_id},isProductionContext:function(){return void 0!==this.$route.params.production_id||this.$route.path.indexOf("tasks")>0},isEpisodeContext:function(){return this.isTVShow&&this.isShotPage&&this.episodes.length>0},lastProduction:function(){var e=this.productionMap[this.lastProductionViewed];return e||(e=this.currentProduction),e},lastSectionPath:function(){var e=this.lastProduction,t=this.lastProductionScreen,s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id=e.first_episode_id),s},navigationOptions:function(){var e=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"},{label:this.$t("breakdown.title"),value:"breakdown"},{label:this.$t("playlists.title"),value:"playlists"},{label:this.$t("people.team"),value:"team"},{label:this.$t("news.title"),value:"newsFeed"},{label:this.$t("schedule.title"),value:"schedule"}];return this.isTVShow||e.splice(3,1),e}}),methods:As({},Object(d["b"])(["clearEpisodes","loadEpisodes","loadNotification","logout","setProduction","setCurrentEpisode","toggleDarkTheme","toggleSidebar","toggleUserMenu"]),{onLogoutClicked:function(){var e=this;this.logout((function(t,s){t&&console.log(t),e.toggleUserMenu(),s&&e.$router.push("/login")}))},getCurrentSectionFromRoute:function(){var e="",t=this.$route.path.split("/");return this.isTVShow&&(e=t[5]),e||(e=t[3],"episodes"===e&&6===t.length&&(e=t[5])),"asset-types"===e&&(e="assetTypes"),"news-feed"===e&&(e="newsFeed"),e},updateRoute:function(){var e=this.getCurrentSectionFromRoute(),t=this.currentProjectSection,s=t&&this.$route.path.indexOf("manage")<0,n=t!==e||this.$route.params.production_id!==this.currentProductionId||this.currentEpisodeId&&this.$route.params.episode_id&&this.$route.params.episode_id!==this.currentEpisodeId;return t&&"newsFeed"===t&&(t="news-feed"),s&&n&&("assetTypes"===t&&(t="production-asset-types"),this.pushContextRoute(t)),this.$route.path},pushContextRoute:function(e){var t=this.currentEpisodeId,s=!!this.currentEpisodeId,n={name:e,params:{production_id:this.currentProductionId}};!this.productionMap[this.currentProductionId]||this.$route.params.production_id===this.currentProductionId&&t||(t=this.productionMap[this.currentProductionId].first_episode_id,s="tvshow"===this.productionMap[this.currentProductionId].production_type);var i=s&&"team"!==e&&"news-feed"!==e&&"schedule"!==e&&"episodes"!==e;i?(n.name="episode-".concat(e),n.params.episode_id=t):"episodes"!==e||s||(n.name="assets"),n.params.production_id&&this.$router.push(n)},clearContext:function(){this.silent=!0,this.currentProductionId=null,this.currentEpisodeId=null,this.currentProjectSection=null,this.setCurrentEpisode(null),this.setProduction(null),this.silent=!1},setProductionFromRoute:function(){var e=this,t=this.$route.params.production_id,s=this.$route.params.episode_id;this.currentProduction&&this.currentProductionId===t&&this.currentProduction.id===t?this.episodes.length<2&&this.isTVShow&&(!this.currentEpisode||this.currentEpisode.id!==s)?this.loadEpisodes((function(){e.setEpisodeFromRoute(),e.updateComboFromRoute()})):("open-productions"===this.assetsPath.name&&t&&this.setProduction(t),this.setEpisodeFromRoute(),this.updateComboFromRoute()):(this.setProduction(t),this.isTVShow?this.loadEpisodes((function(){e.setEpisodeFromRoute(),e.updateComboFromRoute()})):(this.clearEpisodes(),this.updateComboFromRoute()))},setEpisodeFromRoute:function(){var e=this.$route.params.episode_id;this.isTVShow?this.currentEpisode&&this.currentEpisodeId===e&&this.currentEpisode.id===e||this.setCurrentEpisode(e):(this.silent=!0,this.clearEpisodes(),this.currentEpisodeId=null,this.silent=!1)},updateContext:function(e){e?this.setProductionFromRoute():this.clearContext()},updateComboFromRoute:function(){var e=this.$route.params.production_id,t=this.$route.params.episode_id,s=this.getCurrentSectionFromRoute();this.silent=!0,this.currentProductionId=e,this.currentEpisodeId=t,this.currentProjectSection=s,this.silent=!1}}),watch:{$route:function(){var e=this.$route.params.production_id;this.updateContext(e)},currentProductionId:function(){this.silent||this.updateRoute()},currentEpisodeId:function(){var e=this;this.silent||this.updateRoute();var t=this.getCurrentSectionFromRoute();this.currentProjectSection=null,this.$nextTick((function(){e.currentProjectSection=t}))},currentProjectSection:function(){this.silent||this.updateRoute()}},socket:{events:{"notification:new":function(e){if(this.user.id===e.person_id){var t=e.notification_id;this.loadNotification(t)}},"person:update":function(e){this.user.id===e.person_id&&this.$refs.avatar.reloadAvatar()}}}},Ls=Ms,Is=(s("8d3c"),Object(m["a"])(Ls,gs,ys,!1,null,"01226f8b",null)),$s=Is.exports,qs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:{"action-topbar":!0,hidden:e.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:e.toggleMenu}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v("\n            "+e._s(e.currentMenuLabel)+"\n          ")]),s("chevron-down-icon",{staticClass:"flexrow-item"})],1)]),"assignation"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[e._v("\n            "+e._s(e.$tc("tasks.assign",e.nbSelectedTasks,{nbSelectedTasks:e.nbSelectedTasks}))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("people-field",{ref:"assignation-field",attrs:{people:e.currentTeam},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}})],1),e.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0,size:25}})],1):e._e(),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmAssign}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")])]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[e._v("\n            "+e._s(e.$t("main.or"))+"\n          ")]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:e.clearAssignation}},[e._v("\n              "+e._s(e.$t("tasks.clear_assignations"))+"\n            ")])])]):s("div",{staticStyle:{"padding-left":"1em"}},[e._v("\n          "+e._s(e.$t("tasks.no_assignation_right"))+"\n        ")])]):e._e(),"change-status"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v("\n            "+e._s(e.$t("tasks.change_status_to"))+"\n          ")]),s("div",{staticClass:"flexrow-item"},[s("combobox-status",{attrs:{"task-status-list":e.taskStatusForCurrentUser},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}})],1),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskStatusChange}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")])]),e.isChangeStatusLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e(),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.statusComment,expression:"statusComment"}],staticClass:"comment-text input",attrs:{type:"text",placeholder:e.$t("tasks.with_comment")},domProps:{value:e.statusComment},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.confirmTaskStatusChange(t):null},input:function(t){t.target.composing||(e.statusComment=t.target.value)}}})])])]):e._e(),"priorities"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v("\n            "+e._s(e.$t("tasks.change_priority"))+"\n          ")]),s("div",{staticClass:"flexrow-item priority-combobox"},[s("combobox",{attrs:{options:e.priorityOptions},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e.isChangePriorityLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPriorityChange}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")])]),e.isChangePriorityLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])]):e._e(),"estimations"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v("\n            "+e._s(e.$t("tasks.set_estimations"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.estimation,expression:"estimation"}],staticClass:"input estimation-input",attrs:{type:"number",min:"0"},domProps:{value:e.estimation},on:{input:function(t){t.target.composing||(e.estimation=t.target.value)}}})]),e.isChangeEstimationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmEstimationChange}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")])]),e.isChangeEstimationLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])]):e._e(),"tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v("\n            "+e._s(e.$t("tasks.create_for_selection"))+"\n          ")]),e.isCreationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskCreation}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")]),e.isCreationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])])]):e._e(),"delete-tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v("\n            "+e._s(e.$t("tasks.delete_for_selection"))+"\n          ")]),e.isDeletionLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-danger confirm-button",on:{click:e.confirmTaskDeletion}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")])])])]):e._e(),"custom-actions"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v("\n            "+e._s(e.$t("custom_actions.run_for_selection"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox-model",{attrs:{models:e.customActions},model:{value:e.customAction,callback:function(t){e.customAction=t},expression:"customAction"}})],1),e.customAction&&!e.customAction.is_ajax?s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:e.customAction.url}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:e.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:e.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:e.currentProduction?e.currentProduction.id:null}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:e.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:e.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:e.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entitytype",name:"entitytype"},domProps:{value:e.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[e._v("\n                "+e._s(e.$t("main.confirmation"))+"\n              ")])])]):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success",on:{click:e.runCustomAction}},[e._v("\n              "+e._s(e.$t("main.confirmation"))+"\n            ")])])])]):e._e(),s("div",{staticClass:"flexrow-item clear-selection-container has-text-right"},[s("div",{staticClass:"flexrow has-text-right"},[s("div",{staticStyle:{flex:"1"}}),s("notification-bell",{staticClass:"flexrow-item",attrs:{"is-white":!0}}),s("div",{staticClass:"clear-selection flexrow flexrow-item",on:{click:e.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v("\n              "+e._s(e.$t("main.clear_selection"))+"\n            ")])],1)],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":e.isMoreMenuDisplayed}},[e.isCurrentViewAsset||e.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("assignation")}}},[e._v("\n        "+e._s(e.$t("menu.assign_tasks"))+"\n      ")]):e._e(),s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("change-status")}}},[e._v("\n        "+e._s(e.$t("menu.change_status"))+"\n      ")]),e.isCurrentViewAsset||e.isCurrentViewShot||e.isCurrentViewPerson?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("priorities")}}},[e._v("\n        "+e._s(e.$t("menu.change_priority"))+"\n      ")]):e._e(),e.isCurrentViewTaskType||e.isCurrentViewPerson?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("estimations")}}},[e._v("\n        "+e._s(e.$t("menu.set_estimations"))+"\n      ")]):e._e(),!e.isCurrentViewAsset&&!e.isCurrentViewShot||e.isCurrentViewTaskType?e._e():s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("tasks")}}},[e._v("\n        "+e._s(e.$t("menu.create_tasks"))+"\n      ")]),e.isCurrentViewAsset||e.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("delete-tasks")}}},[e._v("\n        "+e._s(e.$t("menu.delete_tasks"))+"\n      ")]):e._e(),e.isCurrentViewTaskType?e._e():s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("custom-actions")}}},[e._v("\n        "+e._s(e.$t("menu.run_custom_action"))+"\n      ")])])]),s("div",{class:{"menu-mask":!0,"is-hidden":e.isMoreMenuDisplayed},on:{click:e.toggleMenu}})])},Ns=[],Fs=(s("20d6"),s("c5f6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.modelOptions,value:e.currentModelId},on:{input:e.emitValue,enter:e.emitEnter}})}),Rs=[],zs={name:"combobox-model",components:{Combobox:Z["a"]},props:{label:{default:"",type:String},value:{default:function(){},type:Object},models:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{currentModelId:"",modelMap:{},modelOptions:[]}},mounted:function(){this.reset()},computed:{},methods:{emitValue:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("input",t)},emitEnter:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("enter",t)},reset:function(){var e=this;this.models.length>0&&(this.currentModelId=this.models[0].id,this.modelMap={},this.modelOptions=this.models.map((function(e){return{label:e.name,value:e.id}})),this.models.forEach((function(t){e.modelMap[t.id]=t})))}},watch:{models:function(){this.reset()}}},Bs=zs,Vs=Object(m["a"])(Bs,Fs,Rs,!1,null,"7a8e9a6c",null),Us=Vs.exports,Hs=s("56a0"),Ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-autocomplete",{ref:"autocomplete",attrs:{items:e.items,"get-label":e.getAssignationLabel,"component-item":e.assignationItem,"min-len":1,"auto-select-one-item":!1,"input-attrs":{placeholder:this.$t("people.select_person")}},on:{"update-items":e.update,input:e.onChange},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})},Ys=[],Gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{"no-cache":!0,person:e.item,size:30}}),s("span",{staticClass:"flexrow-item"},[e._v("\n    "+e._s(e.item.name)+"\n  ")])],1)},Ks=[],Qs={name:"assignation-item",components:{PeopleAvatar:ue["a"]},props:{item:{required:!0},searchText:{required:!0}},computed:{nonHighilightedText:function(){return this.searchText===this.item.first_name?"&nbsp;"+this.item.name.substring(this.searchText.length):this.item.name.substring(this.searchText.length)}}},Xs=Qs,Js=(s("620e"),Object(m["a"])(Xs,Gs,Ks,!1,null,"c09f3b40",null)),Zs=Js.exports,en=s("2017");function tn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tn(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tn(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var nn={name:"people-field",data:function(){return{assignationItem:Zs,items:[],item:{},searchText:""}},created:function(){this.items=this.people,this.item=this.value,this.index=Object(en["c"])(this.people)},mounted:function(){var e=this;this.items=this.people,this.$refs.autocomplete.$el.children[0].children[0].addEventListener("keyup",(function(t){13===t.keyCode&&e.item&&e.$emit("enter"),e.searchText=e.$refs.autocomplete.$el.children[0].children[0].value,e.item||0!==e.searchText.length||(e.items=[])}))},props:{value:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}}},computed:sn({},Object(d["c"])(["peopleIndex"])),methods:{getAssignationLabel:function(e){return e?e.name:""},update:function(e){if(e&&e.length>0){var t=Object(en["h"])(this.index,[e]);this.items=t}else this.items=this.people},onChange:function(){this.$emit("input",this.item)},clear:function(){this.item=null},focus:function(){var e=this.$el.querySelector(".v-autocomplete-input");e&&e.focus()}},watch:{item:function(){this.item||(this.items=this.people)},people:function(){this.items=null,this.items=this.people,this.index=Object(en["c"])(this.people)}}},an=nn,on=(s("f883"),Object(m["a"])(an,Ws,Ys,!1,null,null,null)),rn=on.exports;function cn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cn(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cn(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ln={name:"action-topbar",components:{ChevronDownIcon:U["d"],Combobox:Z["a"],ComboboxModel:Us,ComboboxStatus:Hs["a"],NotificationBell:Es,PeopleField:rn,Spinner:l["a"],XIcon:U["I"]},data:function(){return{currentTeam:[],customAction:{},customActions:[],estimation:0,isAssignationLoading:!1,isChangeEstimationLoading:!1,isChangePriorityLoading:!1,isChangeStatusLoading:!1,isCreationLoading:!1,isDeletionLoading:!1,isMoreMenuDisplayed:!0,selectedBar:"assignation",person:null,priority:"0",selectedTaskIds:[],taskStatusId:"",statusComment:"",priorityOptions:[{label:this.$t("tasks.priority.normal"),value:"0"},{label:this.$t("tasks.priority.high"),value:"1"},{label:this.$t("tasks.priority.very_high"),value:"2"},{label:this.$t("tasks.priority.emergency"),value:"3"}]}},computed:dn({},Object(d["c"])(["allCustomActions","assetMap","assetCustomActions","currentProduction","getPersonOptions","isCurrentUserManager","nbSelectedTasks","nbSelectedValidations","organisation","people","personMap","selectedTasks","shotCustomActions","taskStatusForCurrentUser","user"]),{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)||!this.isCurrentViewTodos&&!this.isCurrentUserManager},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomAction:function(){return this.customActions.length>0?this.customActions[0]:{}},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPerson:function(){return this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isCurrentViewTaskType:function(){return this.$route.path.indexOf("task-type")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot},selectedPersonId:function(){return this.person?this.person.id:null},currentProductionTeam:function(){return this.currentProduction?this.currentProduction.team:[]},currentMenuLabel:function(){var e={assignation:"menu.assign_tasks",estimations:"menu.set_estimations","change-status":"menu.change_status",priorities:"menu.change_priority",tasks:"menu.create_tasks","delete-tasks":"menu.delete_tasks","custom-actions":"menu.run_custom_action"};return this.$t(e[this.selectedBar])},storagePrefix:function(){var e="todos-";return(this.isCurrentViewAsset||this.isCurrentViewShot)&&(e="entities-"),this.isCurrentViewTaskType&&(e="tasks-"),e}}),methods:dn({},Object(d["b"])(["assignSelectedTasks","changeSelectedEstimations","createSelectedTasks","deleteSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","changeSelectedPriorities","clearSelectedTasks","postCustomAction"]),{confirmAssign:function(){var e=this;this.selectedPersonId&&(this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.selectedPersonId,callback:function(){e.isAssignationLoading=!1}}))},confirmTaskStatusChange:function(){var e=this;this.isChangeStatusLoading=!0,this.taskStatusId||(this.taskStatusId=this.taskStatusForCurrentUser[0].id),this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,comment:this.statusComment,callback:function(){e.isChangeStatusLoading=!1,e.statusComment=""}})},confirmPriorityChange:function(){var e=this;this.isChangePriorityLoading=!0,this.changeSelectedPriorities({priority:Number(this.priority),callback:function(){e.isChangePriorityLoading=!1}})},confirmEstimationChange:function(){var e=this;this.isChangeEstimationLoading=!0;var t=this.organisation.hours_by_day,s=Math.floor(this.estimation*t*60);this.changeSelectedEstimations(s).then((function(){e.isChangeEstimationLoading=!1})).catch((function(t){e.isChangeEstimationLoading=!1,e.isChangeEstimationError=!0,console.error(t)}))},confirmTaskCreation:function(){var e=this,t=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:t,projectId:this.currentProduction.id,callback:function(){e.isCreationLoading=!1}})},confirmTaskDeletion:function(){var e=this;this.isDeletionLoading=!0,this.deleteSelectedTasks().then((function(){e.isDeletionLoading=!1})).catch((function(e){console.error(e)}))},clearAssignation:function(){var e=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){e.isAssignationLoading=!1}})},selectBar:function(e){localStorage.setItem("".concat(this.storagePrefix,"-selected-bar"),e,{expires:"1M"}),this.selectedBar=e,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed},setCurrentTeam:function(){var e=this;return this.people.length>10&&this.currentProduction?this.currentTeam=Object(Ae["e"])(this.currentProduction.team.map((function(t){return e.personMap[t]}))):this.currentTeam=this.people,this.currentTeam},runCustomAction:function(){this.postCustomAction({data:{entitytype:this.currentEntityType,originurl:this.currentUrl,originserver:this.currentHost,selection:this.selectedTaskIds,productionid:this.currentProduction.id,userid:this.user.id,useremail:this.user.email},url:this.customAction.url})}}),mounted:function(){this.customAction=this.defaultCustomAction,this.setCurrentTeam()},watch:{isHidden:function(){if(!this.isHidden){var e=this.storagePrefix,t=localStorage.getItem("".concat(e,"-selected-bar"));t?this.selectedBar=t:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){var e=this;if(this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0){for(var t=!1,s=!1,n=0,i=Object.keys(this.selectedTasks);n<i.length;n++){var a=i[n],o=this.selectedTasks[a];o.sequence_name?t=!0:s=!0}if(this.customActions=t&&s?this.allCustomActions:t?this.shotCustomActions:this.assetCustomActions,this.customActions.length>0){var r=this.customAction.url&&this.customActions.findIndex((function(t){return t.id===e.customAction.id}))>=0;r||(this.customAction=this.customActions[0])}}},selectedBar:function(){var e=this;"assignation"===this.selectedBar&&this.$nextTick((function(){e.$refs["assignation-field"].focus()}))},currentProduction:function(){this.setCurrentTeam()},currentProductionTeam:function(){this.setCurrentTeam()},people:function(){this.setCurrentTeam()},$route:function(){this.clearSelectedTasks()}}},un=ln,pn=(s("0fe2"),Object(m["a"])(un,qs,Ns,!1,null,"14a446e2",null)),fn=pn.exports,hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[n("aside",{class:{hidden:e.isSidebarHidden}},[n("div",[n("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(t){return e.toggleSidebar()}}},[n("div",{staticClass:"company-logo has-text-centered"},[e.organisation&&e.organisation.has_avatar?n("img",{attrs:{src:e.logoPath}}):n("img",{attrs:{src:s("ad6c")}})])]),n("section",[e.isCurrentUserClient?e._e():n("div",[n("h2",[e._v(e._s(e.$t("main.user")))]),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"todos"}}},[e._v("\n             "+e._s(e.$t("tasks.my_tasks"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"open-productions"}}},[e._v("\n             "+e._s(e.$t("productions.open_productions"))+"\n           ")])],1)]),e.isCurrentUserAdmin?n("div",[n("h2",[e._v(e._s(e.$t("main.studio")))]),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"productions"}}},[e._v("\n           "+e._s(e.$t("productions.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"people"}}},[e._v("\n           "+e._s(e.$t("people.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"timesheets"}}},[e._v("\n           "+e._s(e.$t("timesheets.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"main-schedule"}}},[e._v("\n           "+e._s(e.$t("schedule.title_main"))+"\n           ")])],1)]):e._e(),e.isCurrentUserAdmin?n("div",[n("h2",[e._v(e._s(e.$t("main.admin")))]),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:"/task-types"}},[e._v("\n           "+e._s(e.$t("task_types.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[e._v("\n           "+e._s(e.$t("task_status.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:"/asset-types"}},[e._v("\n           "+e._s(e.$t("asset_types.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"custom-actions"}}},[e._v("\n           "+e._s(e.$t("custom_actions.title"))+"\n           ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"settings"}}},[e._v("\n             "+e._s(e.$t("settings.title"))+"\n           ")])],1)]):e._e()])],1)]),n("div",{class:{"is-active":!e.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(t){return e.toggleSidebar()}}})])},mn=[];function _n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_n(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_n(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var bn={name:"sidebar",data:function(){return{title:"",logoPath:""}},mounted:function(){this.reset()},computed:vn({},Object(d["c"])(["isSidebarHidden","isCurrentUserClient","isCurrentUserCGArtist","isCurrentUserManager","isCurrentUserAdmin","organisation"])),methods:vn({},Object(d["b"])(["toggleSidebar"]),{reset:function(){this.title=this.organisation.name,this.logoPath="/api/pictures/thumbnails/organisations/"+"".concat(this.organisation.id,".png?t=")+(new Date).toISOString()}}),watch:{organisation:function(){this.reset()}}},gn=bn,yn=(s("0140"),Object(m["a"])(gn,hn,mn,!1,null,"5d28f0b2",null)),kn=yn.exports,Sn={name:"main-wrapper",components:{ActionTopbar:fn,Topbar:$s,Sidebar:kn}},wn=Sn,On=(s("c266"),Object(m["a"])(wn,vs,bs,!1,null,null,null)),Tn=On.exports,Cn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"notifications page"},[e.loading.notifications||e.notifications&&0!==e.notifications.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v("\n      "+e._s(e.$t("notifications.no_notifications"))+"\n    ")]),e.loading.notifications?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e(),e._l(e.notifications,(function(t){return s("div",{key:t.id,class:{notification:!0,unread:!t.read,selected:t.id===e.currentNotificationId},on:{click:function(s){return e.onNotificationSelected(t)}}},[s("div",{staticClass:"flexrow notification-line"},[s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[e.isMention(t)?s("at-sign-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isComment(t)?s("message-square-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isAssignation(t)?s("user-icon",{staticClass:"icon flexrow-item"}):e._e(),s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNotification(t),"production-id":t.project_id}})],1),s("div",{staticClass:"mt1"},[t.change?s("validation-tag",{staticClass:"validation-tag flexrow-item mt1",attrs:{task:e.buildTaskFromNotification(t)}}):e._e()],1)]),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"notification-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30}}):e._e(),s("router-link",{staticClass:"person-name flexrow-item",attrs:{to:{name:"person",params:{person_id:t.author_id}}}},[e._v("\n            "+e._s(e.personName(t))+"\n          ")]),e.isComment(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v("\n            "+e._s(e.$t("notifications.commented_on"))+"\n          ")]):e._e(),e.isAssignation(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v("\n            "+e._s(e.$t("notifications.assigned_you"))+"\n          ")]):e._e(),e.isMention(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v("\n            "+e._s(e.$t("notifications.mention_you_on"))+"\n          ")]):e._e(),s("router-link",{staticClass:" flexrow-item",attrs:{to:e.entityPath(t)}},[e._v("\n            "+e._s(t.project_name)+" / "+e._s(t.full_entity_name)+"\n          ")])],1)]),(e.isComment(t)||e.isMention(t))&&t.comment_text?s("div",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(t.comment_text,t.mentions,e.personMap))}}):e._e(),t.preview_file_id?s("div",{staticClass:"flexrow"},[s("paperclip-icon",{staticClass:"icon flexrow-item"}),t.preview_file_id?s("div",{staticClass:"thumbnail-picture-wrapper flexrow-item"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:t.preview_file_id},height:40}})],1):e._e()],1):e._e(),!e.isComment(t)&&!e.isMention(t)||t.comment_text?e._e():s("div",{staticClass:"comment-text"},[e._v("\n        "+e._s(e.$t("comments.empty_text"))+"\n      ")]),s("div",{staticClass:"date flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v("\n          "+e._s(e.formatDate(t.created_at))+"\n        ")])])])])])}))],2)]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},Pn=[],En=s("0e54"),jn=s.n(En),Dn=s("66be"),xn=s("274f");function An(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?An(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):An(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ln={name:"notification-page",components:{AtSignIcon:U["a"],EntityThumbnail:be["a"],PaperclipIcon:U["t"],PeopleAvatar:ue["a"],MessageSquareIcon:U["s"],Spinner:l["a"],TaskInfo:ss["a"],TaskTypeName:xn["a"],UserIcon:U["G"],ValidationTag:le["a"]},data:function(){return{loading:{notifications:!1,currentTask:!0},errors:{notifications:!1},currentTask:null,currentNotificationId:null}},mounted:function(){var e=this;this.loading.notifications=!0,this.errors.notifications=!1,this.currentTask=null,this.loadNotifications().then((function(){e.loading.notifications=!1})).catch((function(t){console.error(t),e.errors.notifications=!0}))},computed:Mn({},Object(d["c"])(["notifications","personMap","taskTypeMap","taskStatusMap","personMap"])),methods:Mn({},Object(d["b"])(["loadNotifications","loadTask","markAllNotificationsAsRead"]),{entityPath:function(e){var t=this.getTaskType(e).for_shots?"shot":"asset",s={name:"task",params:{production_id:e.project_id,task_id:e.task_id,type:t}};return e.episode_id&&(s.name="episode-task",s.params.episode_id=e.episode_id),s},getTaskType:function(e){return this.taskTypeMap[e.task_type_id]},formatDate:function(e){var t=x.a.tz(e,"UTC");return e=x()(t.format()).fromNow(),e[0].toUpperCase()+e.slice(1)},compileMarkdown:function(e){return jn()(e||"")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNotification:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNotification:function(e){return Mn({},this.taskTypeMap[e.task_type_id],{episode_id:e.episode_id})},onNotificationSelected:function(e){var t=this;this.loading.currentTask=!0,this.loadTask({taskId:e.task_id,callback:function(s,n){s&&console.log(s),t.loading.currentTask=!1,t.currentTask=n,t.currentNotificationId=e.id}})},renderComment:Dn["b"],isComment:function(e){return!e.notification_type||"comment"===e.notification_type},isMention:function(e){return"mention"===e.notification_type},isAssignation:function(e){return"assignation"===e.notification_type}}),socket:{events:{"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:t})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},In=Ln,$n=(s("cd0b"),Object(m["a"])(In,Cn,Pn,!1,null,"2cb9092d",null)),qn=$n.exports,Nn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"open-productions page"},[e.isOpenProductionsLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e.openProductions.length>0?s("div",{staticClass:"open-productions-box"},[s("img",{attrs:{src:""}}),s("h1",{staticClass:"title has-text-centered"},[e._v("\n      "+e._s(e.$t("productions.home.title"))+"\n    ")]),s("div",{class:{"open-productions-list":!0,"is-grid":e.openProductions&&e.openProductions.length>4}},e._l(e.openProductions,(function(t){return s("div",{key:t.id,staticClass:"open-production has-text-centered"},[s("router-link",{attrs:{to:e.getPath(t)}},[s("div",{staticClass:"avatar has-text-centered",style:{background:e.getAvatarColor(t)}},[t.has_avatar?s("img",{attrs:{src:e.getThumbnailPath(t)}}):s("span",[e._v("\n              "+e._s(e.generateAvatar(t))+"\n            ")])]),s("div",{staticClass:"production-name"},[e._v("\n            "+e._s(t.name)+"\n          ")])]),s("router-link",{staticClass:"secondary",attrs:{to:e.assetsPath(t)}},[e._v("\n          "+e._s(e.$t("assets.title"))+"\n        ")]),e._v("\n        -\n        "),s("router-link",{staticClass:"secondary",attrs:{to:e.shotsPath(t)}},[e._v("\n          "+e._s(e.$t("shots.title"))+"\n        ")])],1)})),0),e.isCurrentUserClient?e._e():s("div",{staticClass:"has-text-centered new-production-link"},[s("a",{on:{click:e.showNewModal}},[e._v("\n        "+e._s(e.$t("productions.home.create_new"))+"\n      ")])])]):s("div",{staticClass:"has-text-centered welcome"},[e._m(0),s("h1",{staticClass:"title has-text-centered"},[e._v("\n      "+e._s(e.$t("productions.home.welcome"))+"\n    ")]),e.isCurrentUserManager?s("div",[s("p",{staticClass:"has-text-centered info"},[e._v("\n        "+e._s(e.$t("productions.home.empty"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("productions.home.create_new"),"is-responsive":!1},on:{click:e.showNewModal}})],1)]):e.isCurrentUserClient?s("div",[s("p",{staticClass:"has-text-centered"},[e._v("\n        "+e._s(e.$t("productions.home.no_prod_for_client"))+"\n      ")])]):s("div",[s("p",{staticClass:"has-text-centered"},[e._v("\n        "+e._s(e.$t("productions.home.no_task"))+"\n      ")])])]),s("edit-production-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.editProduction.isLoading,"is-error":e.editProduction.isError},on:{confirm:e.confirmEditProduction,cancel:e.hideNewModal}})],1)},Fn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"kitsu-logo info"},[n("img",{attrs:{src:s("cb88")}})])}],Rn=s("7930"),zn=s("1d3d");function Bn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bn(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bn(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Un={name:"open-productions",components:{ButtonSimple:H["a"],EditProductionModal:zn["a"],Spinner:l["a"]},data:function(){return{modals:{isNewDisplayed:!1}}},computed:Vn({},Object(d["c"])(["editProduction","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","openProductions"])),methods:Vn({},Object(d["b"])(["newProduction"]),{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return Rn["a"].fromString(e.name)},getPath:function(e){return this.sectionPath(e,this.lastProductionScreen)},assetsPath:function(e){return this.sectionPath(e,"assets")},shotsPath:function(e){return this.sectionPath(e,"shots")},sequencesPath:function(e){return this.sectionPath(e,"sequences")},sectionPath:function(e,t){var s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id=e.first_episode_id),s},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")},confirmEditProduction:function(e){var t=this;this.newProduction({data:e,callback:function(e,s){e||(t.modals.isNewDisplayed=!1)}})},showNewModal:function(){this.modals.isNewDisplayed=!0},hideNewModal:function(){this.modals.isNewDisplayed=!1}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},Hn=Un,Wn=(s("011b"),Object(m["a"])(Hn,Nn,Fn,!1,null,"110c2e16",null)),Yn=Wn.exports,Gn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"news page"},[s("div",{staticClass:"timeline-wrapper"},[s("div",{staticClass:"filters flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.infos"),options:e.previewOptions},model:{value:e.previewMode,callback:function(t){e.previewMode=t},expression:"previewMode"}}),s("combobox-status",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_status"),"task-status-list":e.taskStatusList},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}}),s("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("span",{staticClass:"filler"})],1),s("div",{staticClass:"timeline"},[e.loading.news||e.newsList&&0!==e.newsList.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v("\n            "+e._s(e.$t("news.no_news"))+"\n          ")]),e.loading.news?s("div",{staticClass:"has-text-centered mt2"},[s("spinner")],1):e._e(),e._l(e.newsListByDay,(function(t){return s("div",{key:t.length>0?t[0].created_at:""},[s("div",{staticClass:"has-text-centered subtitle timeline-entry"},[s("span",{staticClass:"big-dot"}),e._v("\n              "+e._s(t.length>0?e.formatDay(t[0].created_at):"")+"\n            ")]),e._l(t,(function(t){return s("div",{key:"news-"+t.id,ref:"news-"+t.id,refInFor:!0},["comments"===e.previewMode?s("div",[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v("\n                    "+e._s(e.formatTime(t.created_at))+"\n                  ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item validation-wrapper"},[t.change?s("validation-tag",{staticClass:"validation-tag",attrs:{task:e.buildTaskFromNews(t)}}):e._e()],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"no-link":!0}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v("\n                            "+e._s(e.personName(t))+"\n                          ")]),s("span",[e._v("\n                            "+e._s(e.$t("news.commented_on"))+"\n                          ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v("\n                            "+e._s(t.full_entity_name)+"\n                          ")])],1)],1)])])])]):e._e(),t.preview_file_id&&"previews"===e.previewMode?s("div",{staticClass:"preview"},[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v("\n                    "+e._s(e.formatTime(t.created_at))+"\n                  ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"no-link":!0}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v("\n                            "+e._s(e.personName(t))+"\n                          ")]),s("span",[e._v("\n                            "+e._s(e.$t("news.set_preview_on"))+"\n                          ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v("\n                            "+e._s(t.full_entity_name)+"\n                          ")])],1)],1)])])]),"previews"==e.previewMode?s("div",{staticClass:"has-text-centered"},["mp4"==t.preview_file_extension?s("div",[s("video-player",{attrs:{preview:{id:t.preview_file_id},"task-type-map":e.taskTypeMap,"read-only":!0,light:!0}})],1):"obj"==t.preview_file_extension?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":e.getPreviewPath(t),"preview-dl-path":e.getPreviewDlPath(t),light:!0,"read-only":!0}}):"png"==t.preview_file_extension?s("picture-viewer",{ref:"preview-picture",refInFor:!0,attrs:{preview:{previews:[{id:t.preview_file_id}]},light:!0,"read-only":!0}}):s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",refInFor:!0,staticClass:"button",attrs:{href:e.getPreviewDlPath(t)}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v("\n                        "+e._s(e.$t("tasks.download_pdf_file",{extension:t.preview_file_extension}))+"\n                      ")])],1)])],1):e._e()]):e._e()])}))],2)}))],2)])])]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},Kn=[],Qn=(s("6762"),s("2fdb"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),s("div",{staticClass:"task-type-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleTaskTypeList}},[s("div",{staticClass:"selected-task-type-line flexrow-item"},[e.currentTaskType?s("task-type-name",{attrs:{"task-type":e.currentTaskType}}):e._e()],1),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showTaskTypeList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskTypeList,(function(t){return s("div",{key:t.id,staticClass:"task-type-line",on:{click:function(s){return e.selectTaskType(t)}}},[s("task-type-name",{attrs:{"task-type":t}})],1)})),0):e._e()])])}),Xn=[];function Jn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jn(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jn(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ei={name:"combobox-task-type",components:{ChevronDownIcon:U["d"],TaskTypeName:xn["a"]},data:function(){return{showTaskTypeList:!1}},props:{label:{default:"",type:String},taskTypeList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.selectedTaskType=this.taskType},computed:Zn({},Object(d["c"])(["taskTypeMap"]),{currentTaskType:function(){return this.value?this.taskTypeMap[this.value]:this.taskTypeList[0]}}),methods:{selectTaskType:function(e){this.$emit("input",e.id),this.showTaskTypeList=!1},toggleTaskTypeList:function(){this.showTaskTypeList=!this.showTaskTypeList}}},ti=ei,si=(s("ad52"),Object(m["a"])(ti,Qn,Xn,!1,null,"b9cbf9d2",null)),ni=si.exports,ii=s("8078"),ai=s("41e2"),oi=s("7d5f");function ri(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ci(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ri(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ri(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var di={name:"news-page",components:{Combobox:Z["a"],ComboboxStatus:Hs["a"],ComboboxTaskType:ni,DownloadIcon:U["i"],EntityThumbnail:be["a"],ModelViewer:ii["a"],PeopleAvatar:ue["a"],PictureViewer:ai["a"],TaskTypeName:xn["a"],ValidationTag:le["a"],Spinner:l["a"],TaskInfo:ss["a"],VideoPlayer:oi["a"]},data:function(){return{currentNewsId:null,currentPage:1,currentTask:null,errors:{news:!1},loading:{more:!1,news:!1,currentTask:!0},previewMode:"comments",previewOptions:[{label:this.$t("news.only_comments"),value:"comments"},{label:this.$t("news.only_previews"),value:"previews"}],taskStatusId:"",taskTypeId:""}},mounted:function(){this.$options.silent=!0,this.previewMode=localStorage.getItem("news:preview-mode")||"comments",this.taskTypeId=localStorage.getItem("news:task-type-id")||"",this.taskStatusId=localStorage.getItem("news:task-status-id")||"",this.$options.silent=!1,window.addEventListener("keydown",this.onKeyDown,!1),(0===this.newsList.length||this.currentProduction&&this.newsList[0].project_id!==this.currentProduction.id)&&!this.loading.news&&this.init()},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:ci({},Object(d["c"])(["currentProduction","newsList","newsListByDay","personMap","taskStatusMap","taskTypeMap","taskStatus","taskTypes","user"]),{params:function(){var e={productionId:this.currentProduction.id,only_preview:"previews"===this.previewMode,page_size:"previews"===this.previewMode?6:50,task_type_id:""!==this.taskTypeId?this.taskTypeId:void 0,task_status_id:""!==this.taskStatusId?this.taskStatusId:void 0,page:this.currentPage};return e},taskStatusList:function(){return[{id:"",color:"#999",short_name:this.$t("news.all")}].concat(Object(Ae["c"])(Object(K["a"])(this.taskStatus)))},taskTypeList:function(){return[{id:"",color:"#999",name:this.$t("news.all")}].concat(Object(Ae["c"])(Object(K["a"])(this.taskTypes)))},timezone:function(){return this.user.timezone||x.a.tz.guess()}}),methods:ci({},Object(d["b"])(["loadNews","loadSingleNews","loadMoreNews","loadTask"]),{onKeyDown:function(e){if(this.newsList&&this.newsList.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.newsList.length-1:t-1,this.onNewsSelected(this.newsList[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.newsList.length?t=0:t+1,this.onNewsSelected(this.newsList[t]))}},loadFollowingNews:function(){var e=this;this.loading.more||this.loading.news||(this.loading.more=!0,this.currentPage+=1,this.loadMoreNews(this.params).then((function(){e.loading.more=!1})))},formatDay:function(e){var t=x.a.tz(e,"UTC").tz(this.timezone);return t.format("LL")},formatTime:function(e){var t=x.a.tz(e,"UTC").tz(this.timezone);return t.format("HH:mm")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNews:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNews:function(e){return ci({},this.taskTypeMap[e.task_type_id],{episode_id:e.episode_id})},onNewsSelected:function(e){var t=this;this.loading.currentTask=!0,this.lastSelection=this.newsList.findIndex((function(t){return t.id===e.id})),this.loadTask({taskId:e.task_id,callback:function(s,n){s&&console.log(s),t.loading.currentTask=!1,t.currentTask=n,t.currentNewsId=e.id}}),this.scrollToLine(e)},scrollToLine:function(e){var t=this.$refs["news-".concat(e.id)];if(t&&this.$refs.body){var s=30,n=t[0].getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),a=n.bottom>i.bottom-s,o=n.top<i.top+s;if(a){var r=n.bottom-i.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=i.top-n.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},init:function(){var e=this;this.currentPage=1,this.loading.news=!0,this.errors.news=!1,this.currentTask=null,this.loadNews(this.params).then((function(){e.loading.news=!1})).catch((function(t){console.error(t),e.loading.news=!1,e.errors.news=!0}))},onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&(this.newsList.length%50===0&&"comments"===this.previewMode||this.newsList.length%6===0&&"previews"===this.previewMode)&&this.loadFollowingNews()},getPreviewPath:function(e){var t=e.preview_file_id,s=e.preview_file_extension;return"/api/pictures/originals/preview-files/".concat(t,".").concat(s)},getPreviewDlPath:function(e){var t=e.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,"/download")},hasRetakeValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_retake)},hasDoneValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_done)}}),socket:{events:{"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id,n=e.extension;this.$store.commit("NEWS_ADD_PREVIEW",{previewId:s,commentId:t,extension:n})},"news:new":function(e){e.project_id!==this.currentProduction.id||this.taskTypeId&&this.taskTypeId!==e.task_type_id||this.taskStatusId&&this.taskStatusId!==e.task_status_id||this.loadSingleNews({productionId:this.currentProduction.id,newsId:e.news_id})}}},watch:{currentProduction:function(){this.$options.silent||this.loading.news||this.init()},previewMode:function(){localStorage.setItem("news:preview-mode",this.previewMode),this.$options.silent||this.init()},taskTypeId:function(){localStorage.setItem("news:task-type-id",this.taskTypeId),this.$options.silent||this.init()},taskStatusId:function(){localStorage.setItem("news:task-status-id",this.taskStatusId),this.init()}},metaInfo:function(){return this.currentProduction?{title:"".concat(this.currentProduction.name," ").concat(this.$t("news.title")," - Kitsu")}:{title:"".concat(this.$t("news.title")," - Kitsu")}}},li=di,ui=(s("1dc9"),Object(m["a"])(li,Gn,Kn,!1,null,"01f9b6c9",null)),pi=ui.exports,fi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sequences page fixed-page"},[s("div",{staticClass:"sequence-list-header page-header flexrow"},[s("search-field",{ref:"sequence-search-field",staticClass:"flexrow-item mt1",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("combobox",{staticClass:"mb0 flexrow-item",attrs:{label:e.$t("statistics.display_mode"),"locale-key-prefix":"statistics.",options:e.displayModeOptions},model:{value:e.displayMode,callback:function(t){e.displayMode=t},expression:"displayMode"}}),s("combobox",{staticClass:"mb0 flexrow-item",attrs:{label:e.$t("statistics.count_mode"),"locale-key-prefix":"statistics.",options:e.countModeOptions},model:{value:e.countMode,callback:function(t){e.countMode=t},expression:"countMode"}}),s("span",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download"},on:{click:e.exportStatisticsToCsv}})],1),s("div",{staticClass:"query-list mt1"},[s("search-query-list",{attrs:{queries:e.sequenceSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1),s("sequence-list",{ref:"sequence-list",attrs:{"count-mode":e.countMode,"display-mode":e.displayMode,entries:e.displayedSequences,"is-loading":e.isShotsLoading||e.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns,"sequence-stats":e.sequenceStats,"show-all":0===e.sequenceSearchText.length},on:{scroll:e.saveScrollPosition}}),s("edit-sequence-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-error":e.errors.edit,"cancel-route":e.sequencesPath,"sequence-to-edit":e.sequenceToEdit},on:{confirm:e.confirmEditSequence}}),s("delete-modal",{attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.loading.del,"is-error":e.errors.del,text:e.deleteText(),"error-text":e.$t("sequences.delete_error"),"cancel-route":e.sequencesPath},on:{confirm:e.confirmDeleteSequence}})],1)},hi=[],mi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.sequenceToEdit&&this.sequenceToEdit.id?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("sequences.edit_title"))+" "+e._s(e.sequenceToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("sequences.new_sequence"))+"\n      ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("sequences.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("sequences.fields.description")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runConfirmation(t):null}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v("\n          "+e._s(e.$t("main.cancel"))+"\n        ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v("\n          "+e._s(e.$t("sequences.edit_fail"))+"\n        ")]):e._e(),s("p",{staticClass:"success has-text-right info-message"},[e._v("\n          "+e._s(e.sequenceSuccessText)+"\n        ")])],1)])])])},_i=[];function vi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vi(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vi(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var gi={name:"edit-sequence-modal",components:{TextField:X["a"],TextareaField:J["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","sequenceToEdit","errorText"],data:function(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},sequenceSuccessText:""}},computed:bi({},Object(d["c"])(["currentProduction"])),methods:bi({},Object(d["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm:function(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},sequenceToEdit:function(){this.resetForm()}}},yi=gi,ki=(s("fb8a"),Object(m["a"])(yi,mi,_i,!1,null,"17e984db",null)),Si=ki.exports,wi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{ref:"th-sequence",staticClass:"name"},[e._v("\n            "+e._s(e.$t("shots.fields.sequence"))+"\n          ")]),s("th",{staticClass:"description"},[e._v(e._s(e.$t("shots.fields.description")))]),s("th",{staticClass:"validation"},[e._v(e._s(e.$t("main.all")))]),e._l(e.validationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,staticClass:"validation validation-cell",style:e.getValidationStyle(t)},[s("router-link",{attrs:{to:e.taskTypePath(t)}},[e._v("\n              "+e._s(e.taskTypeMap[t].name)+"\n            ")])],1)})),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("sequences.empty_list")))])]),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("sequences.empty_list_client")))])]):e._e(),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},[e.showAll&&!e.isEmptyList?s("tr",{staticClass:"all-line"},[s("td",{staticClass:"name"},[e._v("\n            "+e._s(e.$t("sequences.all_sequences"))+"\n          ")]),s("td",{staticClass:"description"}),s("stats-cell",{staticClass:"all-validation",attrs:{colors:e.chartColors("all","all"),data:e.chartData("all","all"),"frames-data":e.chartData("all","all","frames"),countMode:e.countMode,displayMode:e.displayMode}}),e._l(e.validationColumns,(function(t){return s("stats-cell",{key:"all-"+t,style:e.getValidationStyle(t),attrs:{colors:e.chartColors("all",t),data:e.chartData("all",t),"frames-data":e.chartData("all",t,"frames"),countMode:e.countMode,displayMode:e.displayMode}})})),s("td",{staticClass:"actions"})],2):e._e(),e._l(e.entries,(function(t){return e.isEntryStats(t.id)?s("tr",{key:t.id},[s("td",{staticClass:"name"},[e._v("\n            "+e._s(t.name)+"\n          ")]),s("td",{staticClass:"description"},[e._v("\n            "+e._s(t.description)+"\n          ")]),e.isStats(t.id,"all")?s("stats-cell",{attrs:{colors:e.chartColors(t.id,"all"),data:e.chartData(t.id,"all"),"frames-data":e.chartData(t.id,"all","frames"),countMode:e.countMode,displayMode:e.displayMode}}):s("td"),e._l(e.validationColumns,(function(n){return e.isStats(t.id,n)?s("stats-cell",{key:t.id+n,style:e.getValidationStyle(n),attrs:{colors:e.chartColors(t.id,n),data:e.chartData(t.id,n),"frames-data":e.chartData(t.id,n,"frames"),countMode:e.countMode,displayMode:e.displayMode}}):s("td",{style:e.getValidationStyle(n)})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"edit-route":e.editPath(t.id),"delete-route":e.deletePath(t.id)}}):s("td",{staticClass:"actions"})],2):e._e()}))],2)])]),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-sequences"},[e._v("\n    "+e._s(e.displayedSequencesLength)+"\n    "+e._s(e.$tc("sequences.number",e.displayedSequencesLength))+"\n  ")])],1)},Oi=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])}],Ti=s("09d3"),Ci=s("b131");function Pi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ei(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pi(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pi(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ji={name:"sequence-list",mixins:[$e["a"]],components:{RowActions:Re["a"],StatsCell:Ci["a"],TableInfo:de["a"]},props:{countMode:{type:String,default:"count"},displayMode:{type:String,default:"pie"},entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},sequenceStats:{type:Object,default:function(){}},showAll:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{busy:!1,lastSelection:null}},computed:Ei({},Object(d["c"])(["currentProduction","currentEpisode","displayedSequencesLength","isDarkTheme","isCurrentUserClient","isCurrentUserManager","isTVShow","sequenceSearchText","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.sequenceSearchText||0===this.sequenceSearchText.length)}}),methods:Ei({},Object(d["b"])(["displayMoreSequences","loadMoreSequences"]),{chartColors:function(e,t){return Object(Ti["b"])(this.sequenceStats,e,t)},chartData:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"count";return Object(Ti["c"])(this.sequenceStats,e,t,s)},isStats:function(e,t){return this.sequenceStats[e]&&this.sequenceStats[e][t]},isEntryStats:function(e){var t=this;if(!this.sequenceStats[e]&&this.sequenceSearchText)return!1;if(!this.sequenceStats[e])return!0;var s=!1;return Object.keys(this.sequenceStats[e]).forEach((function(n){s=s||t.sequenceStats[e][n]})),s},onHeaderScroll:function(e,t){this.$refs.tableWrapper.scrollLeft=t.scrollLeft},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreSequences()},loadMoreSequences:function(){this.displayMoreSequences(),this.$nextTick(this.resizeHeaders)},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},resizeHeaders:function(){if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var e=this.$refs["body-tbody"].children[0].children[0].offsetWidth;this.$refs["th-sequence"].style="min-width: ".concat(e,"px")}},editPath:function(e){return this.getPath("edit-sequence",e)},deletePath:function(e){return this.getPath("delete-sequence",e)},taskTypePath:function(e){var t={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"shots"}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-task-type",t.params.episode_id=this.currentEpisode.id),t},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.sequence_id=t),s}})},Di=ji,xi=(s("b98d"),Object(m["a"])(Di,wi,Oi,!1,null,"dc81dbc0",null)),Ai=xi.exports;function Mi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Li(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mi(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mi(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ii={name:"sequences",components:{ButtonSimple:H["a"],Combobox:Z["a"],DeleteModal:Et["a"],EditSequenceModal:Si,SearchField:Nt["a"],SearchQueryList:Ft["a"],SequenceList:Ai},data:function(){return{countMode:"count",displayMode:"pie",initialLoading:!0,sequenceToDelete:null,sequenceToEdit:null,countModeOptions:[{label:"shots",value:"count"},{label:"frames",value:"frames"}],displayModeOptions:[{label:"pie",value:"pie"},{label:"count",value:"count"}],errors:{edit:!1,del:!1},loading:{edit:!1,del:!1},modals:{isNewDisplayed:!1,isDeleteDisplayed:!1}}},computed:Li({},Object(d["c"])(["currentEpisode","currentProduction","displayedSequences","isCurrentUserManager","isShotsLoading","isShotsLoadingError","isTVShow","searchSequenceFilters","sequences","sequenceMap","sequencesPath","sequenceStats","sequenceSearchText","sequenceSearchQueries","sequenceListScrollPosition","shotValidationColumns","taskTypeMap","taskStatusMap"])),mounted:function(){var e=this;setTimeout((function(){e.initSequences().then(e.handleModalsDisplay).then(e.resizeHeaders).then((function(){e.initialLoading=!1})),e.setDefaultSearchText(),e.setDefaultListScrollPosition()}),100)},methods:Li({},Object(d["b"])(["computeSequenceStats","deleteSequence","editSequence","hideAssignations","initSequences","loadComment","removeSequenceSearch","saveSequenceSearch","setLastProductionScreen","setSequenceSearch","setSequenceListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.sequenceSearchText.length>0&&this.$refs["sequence-search-field"].setValue(this.sequenceSearchText)},setDefaultListScrollPosition:function(){this.$refs["sequence-list"]&&this.$refs["sequence-list"].setScrollPosition(this.sequenceListScrollPosition)},navigateToList:function(){this.$router.push(this.sequencesPath)},confirmEditSequence:function(e){var t=this;this.loading.edit=!0,this.errors.edit=!1,this.editSequence(e).then((function(){t.loading.edit=!1,t.resizeHeaders(),t.navigateToList()})).catch((function(){t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteSequence:function(){var e=this;this.loading.del=!0,this.deleteSequence(this.sequenceToDelete).then((function(){e.loading.del=!1,e.resizeHeaders(),e.navigateToList()})).catch((function(){e.loading.del=!1,e.errors.del=!0}))},resetEditModal:function(){var e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.sequenceToEdit=e},deleteText:function(){var e=this.sequenceToDelete;return e?this.$t("sequences.delete_text",{name:e.name}):""},handleModalsDisplay:function(){var e=this.$store.state.route.path,t=this.$store.state.route.params.sequence_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},e.indexOf("edit")>0?(this.sequenceToEdit=this.sequenceMap[t],this.modals.isNewDisplayed=!0):e.indexOf("delete")>0&&(this.sequenceToDelete=this.sequenceMap[t],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(e){var t=this.$refs["sequence-search-field"].getValue();this.setSequenceSearch(t)},changeSearch:function(e){this.$refs["sequence-search-field"].setValue(e.search_query),this.$refs["sequence-search-field"].$emit("change",e.search_query),this.resizeHeaders()},saveSearchQuery:function(e){this.saveSequenceSearch(e).catch(console.error)},removeSearchQuery:function(e){this.removeSequenceSearch(e).catch(console.error)},saveScrollPosition:function(e){this.setSequenceListScrollPosition(e)},resizeHeaders:function(){var e=this;setTimeout((function(){e.$refs["sequence-list"]&&e.$refs["sequence-list"].resizeHeaders()}),0)},exportStatisticsToCsv:function(){var e=[De()().format("YYYYMMDD"),this.currentProduction.name,"sequences","statistics"];this.currentEpisode&&e.splice(2,0,this.currentEpisode.name);var t=Object(Me["b"])(e.join("_"));xe["a"].generateStatReports(t,this.sequenceStats,this.taskTypeMap,this.taskStatusMap,this.sequenceMap,this.countMode)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){this.$refs["sequence-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.isTVShow||this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders)},currentEpisode:function(){var e=this;this.isTVShow&&this.currentEpisode&&this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders).then((function(){e.initialLoading=!1}))},searchSequenceFilters:function(){this.computeSequenceStats()}},socket:{events:{"comment:new":function(e){var t=this,s=e.comment_id;this.loadComment({commentId:s,callback:function(){t.computeSequenceStats()}})}}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("sequences.title")," - Kitsu")}:{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" ".concat(this.$t("sequences.title")," - Kitsu")}}},$i=Ii,qi=(s("6925"),Object(m["a"])($i,fi,hi,!1,null,"d48d3560",null)),Ni=qi.exports,Fi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page shot"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:e.shotsPath}},[s("chevron-left-icon")],1),e.currentShot?s("entity-thumbnail",{staticClass:"shot-thumbnail flexrow-item",attrs:{entity:e.currentShot,"with-link":!1}}):e._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:e.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(t){e.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:e.$t("shots.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:e.currentShot?e.currentShot.tasks:[],"is-loading":!e.currentShot,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:e.$t("main.info")}}),s("div",{staticClass:"table-body"},[e.currentShot?s("table",{staticClass:"table"},[s("tbody",[e.currentShot.data&&e.currentShot.data.fps?s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.fps")))]),s("td",[e._v("\n                "+e._s(e.currentShot?e.currentShot.data.fps:"")+"\n              ")])]):e._e(),e.currentShot.data&&e.currentShot.data.frame_in?s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.frame_in")))]),s("td",[e._v("\n                "+e._s(e.currentShot?e.currentShot.data.frame_in:"")+"\n              ")])]):e._e(),e.currentShot.data&&e.currentShot.data.frame_out?s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.frame_out")))]),s("td",[e._v("\n                "+e._s(e.currentShot?e.currentShot.data.frame_out:"")+"\n              ")])]):e._e(),s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.description")))]),s("description-cell",{attrs:{entry:e.currentShot,full:!0}})],1),s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.nb_frames")))]),s("td",[e._v("\n                "+e._s(e.currentShot?e.currentShot.nb_frames:"")+"\n              ")])]),e._l(e.shotMetadataDescriptors,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"field-label"},[e._v(e._s(t.name))]),s("td",[e._v("\n                "+e._s(e.currentShot.data?e.currentShot.data[t.field_name]:"")+"\n              ")])])}))],2)]):e._e()])],1)]),s("div",{staticClass:"shot-casting"},[s("page-subtitle",{attrs:{text:e.$t("shots.casting")}}),e.currentShot?s("div",[e.currentShot.castingAssetsByType&&e.currentShot.castingAssetsByType[0].length>0?s("div",e._l(e.currentShot.castingAssetsByType,(function(t){return s("div",{key:t.length>0?t[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[e._v("\n            "+e._s(t.length>0?t[0].asset_type_name:"")+"\n          ")]),s("div",{staticClass:"asset-list"},e._l(t,(function(t){return s("router-link",{key:t.id,staticClass:"asset-link",attrs:{to:{name:"asset",params:{production_id:e.currentProduction.id,asset_id:t.asset_id}}}},[s("entity-thumbnail",{attrs:{entity:t,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[e._v(e._s(t.asset_name))]),t.nb_occurences>1?s("span",[e._v("\n                  ("+e._s(t.nb_occurences)+")\n                ")]):e._e()])],1)})),1)])})),0):s("div",[e._v("\n        "+e._s(e.$t("shots.no_casting"))+"\n      ")])]):s("table-info",{attrs:{"is-loading":e.casting.isLoadin,"is-error":e.casting.isError}})],1),s("edit-shot-modal",{ref:"edit-shot-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"shot-to-edit":e.currentShot},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditShot}})],1)},Ri=[],zi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("shots.edit_title"))+" "+e._s(e.shotToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("shots.new_shot"))+"\n      ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("shots.fields.sequence"),options:e.getSequenceOptions},model:{value:e.form.sequence_id,callback:function(t){e.$set(e.form,"sequence_id",t)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("shots.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("shots.fields.description")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runConfirmation(t):null}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbFramesField",attrs:{label:e.$t("shots.fields.nb_frames"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.nb_frames,callback:function(t){e.$set(e.form,"nb_frames",t)},expression:"form.nb_frames"}}),s("text-field",{ref:"frameInField",attrs:{label:e.$t("shots.fields.frame_in"),type:"number"},model:{value:e.form.frameIn,callback:function(t){e.$set(e.form,"frameIn",t)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:e.$t("shots.fields.frame_out"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.frameOut,callback:function(t){e.$set(e.form,"frameOut",t)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:e.$t("shots.fields.fps"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}),e._l(e.shotMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),e.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v("\n          "+e._s(e.$t("main.close"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.close"))+"\n        ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v("\n          "+e._s(e.$t("shots.edit_fail"))+"\n        ")]):e._e(),s("p",{staticClass:"success has-text-right info-message"},[e._v("\n          "+e._s(e.shotSuccessText)+"\n        ")])],1)])])])},Bi=[];function Vi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ui(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vi(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vi(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Hi={name:"edit-shot-modal",mixins:[Q["a"]],components:{Combobox:Z["a"],TextField:X["a"],TextareaField:J["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return{form:{data:{}},shotSuccessText:""}},computed:Ui({},Object(d["c"])(["currentProduction","getSequenceOptions","getOpenProductionOptions","openProductions","sequences","shots","shotCreated","shotMetadataDescriptors"]),{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:Ui({},Object(d["b"])([]),{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(K["a"])(t))},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,nb_frames:this.shotToEdit.nb_frames,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps,data:Ui({},this.shotToEdit.data)||{}}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="",this.form.nb_frames=0,this.form.data={})}}),mounted:function(){this.resetForm()},watch:{active:function(){var e=this;this.shotSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},Wi=Hi,Yi=(s("eae5"),Object(m["a"])(Wi,zi,Bi,!1,null,"219c6310",null)),Gi=Yi.exports;function Ki(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ki(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ki(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Xi={name:"shot",components:{ButtonSimple:H["a"],ChevronLeftIcon:U["e"],DescriptionCell:W["a"],EditShotModal:Gi,EntityThumbnail:be["a"],EntityTaskList:ve,PageSubtitle:ye["a"],PageTitle:ge["a"],TableInfo:de["a"]},data:function(){return{currentShot:null,casting:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var e=this;if(this.currentProduction){var t={productionId:this.currentProduction.id};this.currentEpisode&&(t.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",t)}else this.setProduction(this.$route.params.production_id);this.clearSelectedTasks(),this.currentShot=this.getCurrentShot(),this.casting.isLoading=!0,this.casting.isError=!1,this.currentShot?this.loadShotCasting(this.currentShot).then((function(){e.casting.isLoading=!1})).catch((function(t){e.casting.isError=!0,console.error(t)})):this.loadShot(this.route.params.shot_id).then((function(){return e.currentShot=e.getCurrentShot(),e.loadShotCasting(e.currentShot)})).then((function(){e.casting.isLoading=!1})).catch((function(t){e.casting.isError=!0,console.error(t)}))},computed:Qi({},Object(d["c"])(["currentProduction","route","shotMap","shotMetadataDescriptors","shotsPath"]),{title:function(){return this.currentShot?this.currentShot.episode_name?"".concat(this.currentShot.episode_name," / ")+"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"Loading..."},shotThumbnailPath:function(){var e=this.currentShot.preview_file_id;return"/api/pictures/originals/preview-files/".concat(e,".png")},isPreview:function(){return this.currentShot&&this.currentShot.preview_file_id&&this.currentShot.preview_file_id.length>0}}),methods:Qi({},Object(d["b"])(["editShot","loadShot","loadShotCasting","clearSelectedTasks"]),{changeTab:function(e){this.selectedTab=e},getCurrentShot:function(){return this.shotMap[this.route.params.shot_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditShot:function(e){var t=this;e.id=this.currentShot.id,this.loading.edit=!0,this.errors.edit=!1,this.editShot({data:e,callback:function(e){e?(t.loading.edit=!1,t.errors.edit=!0):(t.loading.edit=!1,t.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Ji=Xi,Zi=(s("8a49"),Object(m["a"])(Ji,Fi,Ri,!1,null,"f9867ae8",null)),ea=Zi.exports,ta=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"shots page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("shots.manage"),icon:"plus"},on:{click:e.showManageShots}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isShotsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.shotSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1)]),s("shot-list",{ref:"shot-list",attrs:{"displayed-shots":e.displayedShotsBySequence,"is-loading":e.isShotsLoading||e.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns},on:{"create-tasks":e.showCreateTasksModal,scroll:e.saveScrollPosition,"delete-all-tasks":e.onDeleteAllTasksClicked,"add-metadata":e.onAddMetadataClicked,"delete-metadata":e.onDeleteMetadataClicked,"edit-metadata":e.onEditMetadataClicked,"add-shots":e.showManageShots}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("manage-shots-modal",{attrs:{active:e.modals.isManageDisplayed,"is-loading":e.loading.manage,"is-error":!1,"is-success":!1,"cancel-route":e.shotsPath},on:{cancel:e.hideManageShots}}),s("edit-shot-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-loading-stay":e.loading.stay,"is-error":e.editShot.isCreateError,"is-success":e.editShot.isSuccess,"cancel-route":e.shotsPath,"shot-to-edit":e.shotToEdit},on:{confirm:e.confirmEditShot}}),s("delete-modal",{ref:"delete-shot-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.deleteShot.isLoading,"is-error":e.deleteShot.isError,"cancel-route":e.shotsPath,text:e.deleteText(),"error-text":e.$t("shots.delete_error")},on:{confirm:e.confirmDeleteShot}}),s("delete-modal",{ref:"restore-shot-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.restoreShot.isLoading,"is-error":e.restoreShot.isError,"cancel-route":e.shotsPath,text:e.restoreText(),"error-text":e.$t("shots.restore_error")},on:{confirm:e.confirmRestoreShot}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1},confirm:e.confirmDeleteMetadata}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,"cancel-route":e.shotsPath,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText},on:{confirm:e.confirmDeleteAllTasks}}),s("import-modal",{attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.shotsCsvFormData,columns:e.columns},on:{cancel:e.hideImportModal,fileselected:e.selectFile,confirm:e.uploadImportFile}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.creatingTasksStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_shot"),text:e.$t("tasks.create_tasks_shot_explaination"),"error-text":e.$t("tasks.create_tasks_shot_failed")},on:{cancel:e.hideCreateTasksModal,confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{cancel:e.closeMetadataModal,confirm:e.confirmAddMetadata}})],1)},sa=[],na=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{staticClass:"title",attrs:{text:e.$t("shots.manage")}}),s("div",{staticClass:"explaination"},[e._v(e._s(e.$t("shots.creation_explaination")))]),s("div",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{ref:"shot-padding",staticClass:"shot-padding flexrow-item",attrs:{label:e.$t("shots.padding"),options:e.shotPaddingOptions},model:{value:e.shotPadding,callback:function(t){e.shotPadding=t},expression:"shotPadding"}})],1)]),s("div",{staticClass:"shot-columns"},[e.isTVShow?s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.episodes")))]),s("div",{staticClass:"list"},e._l(e.episodes,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedEpisodeId},on:{click:function(s){return e.selectEpisode(t.id)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:e.names.episode},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddSequence(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addEpisode(t)}],input:function(t){t.target.composing||e.$set(e.names,"episode",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addEpisode},attrs:{disabled:!e.isAddEpisodeAllowed},on:{click:e.addEpisode}},[e._v("\n              "+e._s(e.$t("main.add"))+"\n            ")])])]):e._e(),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.sequences")))]),s("div",{staticClass:"list"},e._l(e.displayedSequences,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedSequenceId},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddShot(t)},click:function(s){return e.selectSequence(t.id)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:e.names.sequence},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSequence(t)},input:function(t){t.target.composing||e.$set(e.names,"sequence",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addSequence},attrs:{disabled:!e.isAddSequenceAllowed},on:{click:e.addSequence}},[e._v("\n              "+e._s(e.$t("main.add"))+"\n            ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.title")))]),s("div",{staticClass:"list"},e._l(e.displayedShots,(function(t){return s("div",{key:t.id,staticClass:"entity-line"},[e._v("\n              "+e._s(t.name)+"\n            ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:e.names.shot},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addShot(t)},input:function(t){t.target.composing||e.$set(e.names,"shot",t.target.value)}}})]),s("div",{staticClass:"field"},[s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addShot},attrs:{disabled:!e.isAddShotAllowed},on:{click:e.addShot}},[e._v("\n              "+e._s(e.$t("main.add"))+"\n            ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.close"))+"\n        ")])])],1)])])},ia=[];s("8615");function aa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?aa(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):aa(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ra={name:"manage-shot-modal",mixins:[Q["a"]],components:{Combobox:Z["a"],PageTitle:ge["a"]},props:{active:{default:!0,type:Boolean}},data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null,shotPaddingOptions:[{label:"1",padding:"1"},{label:"2",padding:"2"},{label:"10",padding:"10"}],shotPadding:"1"}},watch:{active:function(){var e=this;this.active&&(this.shotPadding="1",setTimeout((function(){e.isTVShow?e.$refs.addEpisodeInput.focus():e.$refs.addSequenceInput.focus()}),100))},sequences:function(){this.displayedSequences=this.sequences,this.displayedShots=[]}},computed:oa({},Object(d["c"])(["currentProduction","episodes","isTVShow","sequences","shotMap"]),{isAddEpisodeAllowed:function(){var e=this,t=""===this.names.episode,s=this.episodes.find((function(t){return e.names.episode===t.name}));return!t&&!s},isAddSequenceAllowed:function(){var e=this,t=""===this.names.sequence,s=this.displayedSequences.find((function(t){return e.names.sequence===t.name}));return!t&&!s&&(this.selectedEpisodeId||!this.isTVShow)},isAddShotAllowed:function(){var e=this,t=""===this.names.shot,s=this.displayedShots.find((function(t){return e.names.shot===t.name}));return!t&&!s&&this.selectedSequenceId}}),methods:oa({},Object(d["b"])(["newEpisode","newSequence","newShot","setCurrentEpisode"]),{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(e){this.isTVShow?(this.selectedEpisodeId=e,this.$router.push({name:"episode-shots",params:{production_id:this.currentProduction.id,episode_id:e}})):(this.selectedEpisodeId=e,this.displayedSequences=this.sequences.filter((function(t){return t.parent_id===e})),this.displayedShots=[])},selectSequence:function(e){this.selectedSequenceId=e,this.displayedShots=Object.values(this.shotMap).filter((function(t){return t.sequence_id===e}))},addEpisode:function(){var e=this;if(this.isAddEpisodeAllowed){var t=this.names.episode;if(t.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode({episode:s,callback:function(t,s){t&&console.log(t),e.loading.addEpisode=!1,e.selectEpisode(s.id),e.names.episode=Me["a"].generateNextName(s.name)}})}}},addSequence:function(){var e=this;if(this.isAddSequenceAllowed){var t=this.names.sequence;if(t.length>0&&(this.selectedEpisodeId||!this.isTVShow)){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence({sequence:s,callback:function(t,s){t&&console.log(t),e.loading.addSequence=!1,e.selectEpisode(e.selectedEpisodeId),e.selectSequence(s.id),e.names.sequence=Me["a"].generateNextName(s.name)}})}}},addShot:function(){var e=this;if(this.isAddShotAllowed){var t=this.names.shot;if(this.loading.addShot=!0,t.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.loading.addShot=!1,this.newShot({shot:s,callback:function(t){t&&console.log(t),e.loading.addShot=!1,e.selectSequence(e.selectedSequenceId),e.names.shot=Me["a"].generateNextName(s.name,parseInt(e.shotPadding))}})}}}})},ca=ra,da=(s("976d"),Object(m["a"])(ca,na,ia,!1,null,"16886222",null)),la=da.exports,ua=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"thumbnail"}),s("th",{ref:"th-shot",staticClass:"name shot-name"},[e._v("\n            "+e._s(e.$t("shots.fields.name"))+"\n          ")]),!e.isCurrentUserClient&&e.isShowInfos?s("th",{staticClass:"description"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v("\n                "+e._s(e.$t("shots.fields.description"))+"\n              ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]):e._e(),e._l(e.shotMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[e._v("\n              "+e._s(t.name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isTime?s("th",{ref:"th-spent",staticClass:"time-spent"},[e._v("\n            "+e._s(e.$t("shots.fields.time_spent"))+"\n          ")]):e._e(),e.isShowInfos?s("th",{staticClass:"frames"},[e._v("\n            "+e._s(e.$t("shots.fields.nb_frames"))+"\n          ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("th",{staticClass:"framein"},[e._v("\n            "+e._s(e.$t("shots.fields.frame_in"))+"\n          ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("th",{staticClass:"frameout"},[e._v("\n            "+e._s(e.$t("shots.fields.frame_out"))+"\n          ")]):e._e(),e.isFps&&e.isShowInfos?s("th",{staticClass:"fps"},[e._v("\n            "+e._s(e.$t("shots.fields.fps"))+"\n          ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},style:e.getValidationStyle(t)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item validation-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v("\n                "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions"},[e.isCurrentUserManager?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("shots.new_shots")},on:{click:function(t){return e.$emit("add-shots")}}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list_client")))])]):e._e(),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[e.isListVisible?s("table",{staticClass:"table splitted-table unselectable"},e._l(e.displayedShots,(function(t,n){return s("tbody",{key:t[0]?t[0].sequence_id+t[0].canceled:"",ref:"body-tbody",refInFor:!0,staticClass:"tbody"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[e._v("\n            "+e._s(t[0]?t[0].sequence_name:"")+"\n          ")])]),e._l(t,(function(t,i){return s("tr",{key:t.id,class:{canceled:t.canceled}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:t}})],1),s("td",{class:{"shot-name":!0,name:!0,bold:!t.canceled}},[s("router-link",{attrs:{to:e.shotPath(t.id)}},[e._v("\n              "+e._s(t.name)+"\n            ")])],1),!e.isCurrentUserClient&&e.isShowInfos?s("description-cell",{staticClass:"description",attrs:{entry:t}}):e._e(),e._l(e.shotMetadataDescriptors,(function(n){return e.isShowInfos?s("td",{key:t.id+"-"+n.id,staticClass:"metadata-descriptor"},[e._v("\n            "+e._s(t.data?t.data[n.field_name]:"")+"\n          ")]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isTime?s("td",{staticClass:"time-spent"},[e._v("\n            "+e._s(e.formatDuration(t.timeSpent))+"\n          ")]):e._e(),!e.isCurrentUserClient&&e.isShowInfos?s("td",{staticClass:"frames"},[e._v("\n            "+e._s(t.nb_frames)+"\n          ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("td",{staticClass:"framein"},[e._v("\n            "+e._s(t.data&&t.data.frame_in?t.data.frame_in:"")+"\n          ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("td",{staticClass:"frameout"},[e._v("\n            "+e._s(t.data&&t.data.frame_out?t.data.frame_out:"")+"\n          ")]):e._e(),e.isFps&&e.isShowInfos?s("td",{staticClass:"fps"},[e._v("\n            "+e._s(t.data&&t.data.fps?t.data.fps:"")+"\n          ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(i,n)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],minimized:e.hiddenColumns[a],selected:e.shotSelectionGrid[e.getIndex(i,n)][o],rowX:e.getIndex(i,n),columnY:o,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"edit-route":e.editPath(t.id),"restore-route":e.restorePath(t.id),"delete-route":e.deletePath(t.id)}}):s("td",{staticClass:"actions"})],2)})),e._m(2,!0)],2)})),0):e._e()]),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-shots"},[e._v("\n    "+e._s(e.displayedShotsLength)+" "+e._s(e.$tc("shots.number",e.displayedShotsLength))+"\n    ("+e._s(e.formatDuration(e.displayedShotsTimeSpent))+"\n     "+e._s(e.$tc("main.days_spent",e.displayedShotsTimeSpent))+", "+e._s(e.displayedShotsFrames)+" "+e._s(e.$tc("main.nb_frames",e.displayedShotsFrames))+")\n\n  ")])],1)},pa=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",{staticClass:"empty-line"},[s("td",{attrs:{colspan:"30"}})])}];function fa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ha(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fa(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fa(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ma={name:"shot-list",mixins:[$e["a"],Ne["a"],qe["a"]],props:{displayedShots:{type:Array,default:function(){return[]}},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonSimple:H["a"],ChevronDownIcon:U["d"],DescriptionCell:W["a"],EntityThumbnail:be["a"],RowActions:Re["a"],TableHeaderMenu:Ge,TableMetadataHeaderMenu:st,TableInfo:de["a"],ValidationCell:nt["a"]},computed:ha({},Object(d["c"])(["currentProduction","currentEpisode","displayedShotsLength","displayedShotsTimeSpent","displayedShotsFrames","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isFps","isFrameIn","isFrameOut","isSingleEpisode","isShowAssignations","isShowInfos","isTime","isTVShow","nbSelectedTasks","shotFilledColumns","shotMap","shotMetadataDescriptors","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap"]),{isEmptyList:function(){return this.displayedShots&&0===this.displayedShots[0].length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)},createTasksPath:function(){return this.getPath("create-shot-tasks")},manageShotsPath:function(){var e={name:"manage-shots",params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-manage-shots",e.params.episode_id=this.currentEpisode.id),e},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedShotsLength>0},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.shotFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:ha({},Object(d["b"])(["displayMoreShots"]),{onHeaderScroll:function(e,t){this.$refs.tableWrapper.scrollLeft=t.scrollLeft},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreShots()},loadMoreShots:function(){this.displayMoreShots(),this.$nextTick(this.resizeHeaders)},resizeHeaders:function(){this.resizeSplittedTableHeaders([{index:1,name:"shot"}])},taskTypePath:function(e){return this.isTVShow&&this.currentEpisode?{name:"episode-task-type",params:{production_id:this.currentProduction.id,episode_id:this.currentEpisode.id,task_type_id:e,type:"shots"}}:{name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"shots"}}},shotPath:function(e){return this.getPath("shot",e)},editPath:function(e){return this.getPath("edit-shot",e)},deletePath:function(e){return this.getPath("delete-shot",e)},restorePath:function(e){return this.getPath("restore-shot",e)},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.shot_id=t),s},getIndex:function(e,t){var s=0,n=0;while(s<t)n+=this.displayedShots[s].length,s++;return e+n}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},_a=ma,va=(s("13cc"),Object(m["a"])(_a,ua,pa,!1,null,"2ae6c1da",null)),ba=va.exports;function ga(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ya(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ga(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ga(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ka={name:"shots",components:{AddMetadataModal:gt,ButtonSimple:H["a"],CreateTasksModal:Pt,DeleteModal:Et["a"],EditShotModal:Gi,ImportModal:jt["a"],HardDeleteModal:qt,ManageShotsModal:la,SearchField:Nt["a"],SearchQueryList:Ft["a"],ShowAssignationsButton:Yt,ShowInfosButton:ts,ShotList:ba,TaskInfo:ss["a"]},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isImportDisplayed:!1,isManageDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1},loading:{addMetadata:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,importing:!1},descriptorToEdit:{},shotToDelete:null,shotToEdit:null,columns:["Episode","Sequence","Name","Description","FPS","Frame In","Frame Out"],deleteAllTasksLockText:null}},computed:ya({},Object(d["c"])(["currentEpisode","currentProduction","deleteShot","displayedShotsBySequence","editShot","episodeMap","episodes","isCurrentUserManager","isFrameIn","isFrameOut","isFps","isTime","isShotsLoading","isShotsLoadingError","isShowAssignations","isTVShow","nbSelectedTasks","openProductions","restoreShot","sequences","selectedTasks","shotMap","shotFilledColumns","shotsCsvFormData","shotSearchQueries","shotSearchText","shotsPath","shotValidationColumns","shotListScrollPosition","taskTypeMap"])),created:function(){this.setLastProductionScreen("shots")},mounted:function(){var e=this;this.shotSearchText.length>0&&this.$refs["shot-search-field"].setValue(this.shotSearchText),Object.keys(this.shotMap).length<2||this.shotValidationColumns.length>0&&!Object.keys(this.shotMap)[0].validations?setTimeout((function(){e.loadShots((function(t){setTimeout((function(){e.initialLoading=!1}),200),e.resizeHeaders(),t||(e.onSearchChange(),e.handleModalsDisplay(),setTimeout((function(){e.resizeHeaders(),e.$refs["shot-list"].setScrollPosition(e.shotListScrollPosition)}),500))}))}),100):(this.isShotsLoading||(this.initialLoading=!1),this.resizeHeaders(),this.onSearchChange(),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition))},methods:ya({},Object(d["b"])(["addMetadataDescriptor","getShotsCsvLines","deleteAllTasks","deleteMetadataDescriptor","hideAssignations","loadShots","loadComment","removeShotSearch","saveShotSearch","setLastProductionScreen","setShotSearch","showAssignations","uploadShotFile"]),{confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Shot",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},closeMetadataModal:function(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},confirmEditShot:function(e){var t=this,s="newShot";this.loading.edit=!0,this.editShot.isCreateError=!1,this.shotToEdit&&this.shotToEdit.id&&(s="editShot",e.id=this.shotToEdit.id),this.$store.dispatch(s,{data:e,callback:function(e){e?(t.loading.edit=!1,t.editShot.isCreateError=!0):(t.loading.edit=!1,t.modals.isNewDisplayed=!1,t.$router.push(t.shotsPath))}})},confirmDeleteAllTasks:function(){var e=this,t=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:t}).then((function(){e.loading.deleteAllTasks=!1,e.loadShots((function(){e.resizeHeaders()})),e.$router.push(e.shotsPath)})).catch((function(t){console.error(t),e.loading.deleteAllTasks=!1,e.errors.deleteAllTasks=!0}))},confirmDeleteShot:function(){var e=this;this.$store.dispatch("deleteShot",{shot:this.shotToDelete,callback:function(t){t||e.$router.push(e.shotsPath)}})},confirmRestoreShot:function(){var e=this;this.$store.dispatch("restoreShot",{shot:this.shotToRestore,callback:function(t){t||e.$router.push(e.shotsPath)}})},confirmCreateTasks:function(e){var t=this;this.loading.creatingTasks=!0,this.runTasksCreation(e,(function(){t.hideCreateTasksModal(),t.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(e){var t=this;this.loading.creatingTasksStay=!0,this.runTasksCreation(e,(function(){t.loading.creatingTasksStay=!1}))},runTasksCreation:function(e,t){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:e.task_type_id,project_id:this.currentProduction.id,type:"shots",callback:function(e){e?s.errors.creatingTasks=!0:s.loadShots((function(){s.resizeHeaders()})),t(e)}})},resetEditModal:function(){var e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.shotToEdit=e},deleteText:function(){var e=this.shotToDelete;return e?this.$t("shots.delete_text",{name:e.name}):""},deleteAllTasksText:function(){var e=this.taskTypeMap[this.$route.params.task_type_id];return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText:function(){var e=this.shotToRestore;return e?this.$t("shots.restore_text",{name:e.name}):""},handleModalsDisplay:function(){var e=this.$route.path,t=this.$route.params.shot_id;this.editShot.isSuccess=!1,this.editShot.isError=!1,Object.assign(this.modals,{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}),e.indexOf("new")>0?(this.resetEditModal(),this.modals.isNewDisplayed=!0):e.indexOf("edit")>0?(this.shotToEdit=this.shotMap[t],this.modals.isNewDisplayed=!0):e.indexOf("delete-all-tasks")>0?this.modals.isDeleteAllTasksDisplayed=!0:e.indexOf("delete")>0?(this.shotToDelete=this.shotMap[t],this.modals.isDeleteDisplayed=!0):e.indexOf("restore")>0&&(this.shotToRestore=this.shotMap[t],this.modals.isRestoreDisplayed=!0)},selectFile:function(e){this.$store.commit("SHOT_CSV_FILE_SELECTED",e)},uploadImportFile:function(){var e=this;this.loading.importing=!0,this.errors.importing=!1,this.uploadShotFile((function(t){t?(e.loading.importing=!1,e.errors.importing=!0):(e.loading.importing=!1,e.hideImportModal(),e.loadShots((function(){e.resizeHeaders()})))}))},onDeleteAllTasksClicked:function(e){var t=this.getPath("delete-all-shot-tasks"),s=this.taskTypeMap[e];t.params.task_type_id=e,this.deleteAllTasksLockText=s.name,this.$router.push(t)},onSearchChange:function(e){var t=this.$refs["shot-search-field"].getValue();1!==t.length&&(this.setShotSearch(t),this.resizeHeaders())},saveScrollPosition:function(e){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",e)},changeSearch:function(e){this.$refs["shot-search-field"].setValue(e.search_query),this.$refs["shot-search-field"].$emit("change",e.search_query),this.resizeHeaders()},saveSearchQuery:function(e){this.saveShotSearch(e).catch(console.error)},removeSearchQuery:function(e){this.removeShotSearch(e).catch(console.error)},resizeHeaders:function(){var e=this;setTimeout((function(){e.$refs["shot-list"]&&e.$refs["shot-list"].resizeHeaders()}),0)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},showManageShots:function(){this.modals.isManageDisplayed=!0},hideManageShots:function(){this.modals.isManageDisplayed=!1},showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1},onExportClick:function(){var e=this;this.getShotsCsvLines().then((function(t){var s=[De()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("shots.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var n=Object(Me["b"])(s.join("_")),i=[e.$t("shots.fields.name"),e.$t("shots.fields.description")];Object(Ae["c"])(Object(K["a"])(e.currentProduction.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(e){i.push(e.field_name)})),i.push(e.$t("shots.fields.nb_frames")),e.isFrameIn&&i.push(e.$t("shots.fields.frame_in")),e.isFrameOut&&i.push(e.$t("shots.fields.frame_out")),e.isFps&&i.push(e.$t("shots.fields.fps")),e.isTime&&i.push(e.$t("shots.fields.time_spent")),e.shotValidationColumns.forEach((function(t){i.push(e.taskTypeMap[t].name)})),xe["a"].buildCsvFile(n,[i].concat(t))}))}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var e=this;this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.isTVShow||this.loadShots((function(t){e.initialLoading=!1,e.resizeHeaders(),t||e.handleModalsDisplay()}))},currentEpisode:function(){var e=this;this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadShots((function(t){e.initialLoading=!1,e.resizeHeaders(),t||e.handleModalsDisplay()})))},displayedShots:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("shots.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},Sa=ka,wa=(s("beda"),Object(m["a"])(Sa,ta,sa,!1,null,"77008e04",null)),Oa=wa.exports,Ta=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"flexrow mt2 add-people"},[s("span",{staticClass:"flexrow-item people-field-label"},[e._v("\n      "+e._s(e.$t("people.add_member_to_team"))+"\n    ")]),s("people-field",{ref:"people-field",staticClass:"flexrow-item add-people-field",attrs:{people:e.unlistedPeople},on:{enter:e.addPerson},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}}),s("button",{staticClass:"button flexrow-item",on:{click:e.addPerson}},[e._v("\n      "+e._s(e.$t("main.add"))+"\n    ")])],1),s("production-team-list",{attrs:{entries:e.teamPersons,"is-loading":e.isTeamLoading,"is-error":e.isTeamLoadingError},on:{remove:e.removePerson}})],1)},Ca=[],Pa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[e._v("\n          "+e._s(e.$t("people.list.name"))+"\n          ")]),s("th",{staticClass:"email"},[e._v("\n          "+e._s(e.$t("people.list.email"))+"\n          ")]),s("th",{staticClass:"phone"},[e._v("\n          "+e._s(e.$t("people.list.phone"))+"\n          ")]),s("th",{staticClass:"role"},[e._v("\n          "+e._s(e.$t("people.list.role"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),e.isEmpty?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.entries,(function(t){return s("tr",{key:t.id},[s("people-name-cell",{staticClass:"name",attrs:{person:t}}),s("td",{staticClass:"email"},[e._v(e._s(t.email))]),s("td",{staticClass:"phone"},[e._v(e._s(t.phone))]),s("td",{staticClass:"role"},[e._v(e._s(e.$t("people.role."+t.role)))]),e.isCurrentUserAdmin?s("td",{staticClass:"actions"},[s("button",{staticClass:"button",on:{click:function(s){return e.removePerson(t)}}},[e._v("\n              "+e._s(e.$t("main.remove"))+"\n            ")])]):s("td",{staticClass:"actions"})],1)})),0)])]),e.isEmpty?s("div",{staticClass:"table-body"},[e.isEmpty?s("p",{staticClass:"has-text-centered mt2"},[e._v("\n      "+e._s(e.$t("people.empty_team"))+"\n    ")]):e._e()]):e._e(),s("p",{staticClass:"has-text-centered footer-info"},[e._v("\n    "+e._s(e.entries.length)+" "+e._s(e.$tc("people.persons",e.entries.length))+"\n  ")])])},Ea=[],ja=s("7365");function Da(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Da(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Da(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Aa={name:"production-team-list",components:{PeopleNameCell:ja["a"]},props:["entries"],computed:xa({},Object(d["c"])(["isCurrentUserAdmin"]),{isEmpty:function(){return!this.entries||0===this.entries.length}}),methods:xa({},Object(d["b"])(["removePersonFromTeam"]),{removePerson:function(e){this.removePersonFromTeam(e)},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")}})},Ma=Aa,La=(s("dea4"),Object(m["a"])(Ma,Pa,Ea,!1,null,"f3c95f54",null)),Ia=La.exports;function $a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$a(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$a(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Na={name:"people",components:{PeopleField:rn,ProductionTeamList:Ia},data:function(){return{person:null,isTeamLoading:!1,isTeamLoadingError:!1}},computed:qa({},Object(d["c"])(["currentProduction","productionMap","openProductions","personMap","people"]),{teamPersons:function(){var e=this;return Object(Ae["e"])(this.currentProduction.team.map((function(t){return e.personMap[t]})))},unlistedPeople:function(){var e=this;return this.people.filter((function(t){return!e.currentProduction.team.includes(t.id)&&t.active}))}}),methods:qa({},Object(d["b"])(["addPersonToTeam"]),{addPerson:function(){var e=this;this.addPersonToTeam(this.person),setTimeout((function(){e.$refs["people-field"].clear()}),1)},removePerson:function(e){this.removePersonFromTeam(e)}}),metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("people.team")," - Kitsu")}}},Fa=Na,Ra=(s("dda8"),Object(m["a"])(Fa,Ta,Ca,!1,null,"b2c59084",null)),za=Ra.exports,Ba=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-type columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{ref:"page",staticClass:"task-type page"},[s("div",{ref:"header",staticClass:"task-type-header page-header flexrow-item"},[s("div",{staticClass:"flexcolumn-item flexrow"},[e.currentTaskType.for_shots?s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:e.shotsPath}},[s("chevron-left-icon")],1):s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:e.assetsPath}},[s("chevron-left-icon")],1),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":e.currentTaskType}}),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item"},[e.isActiveTab("schedule")?e._e():s("button-simple",{attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}})],1)],1),s("div",{staticClass:"tabs mt1"},[s("ul",[s("li",{class:{"is-active":e.isActiveTab("tasks")}},[s("router-link",{attrs:{to:e.tasksPath}},[e._v("\n                "+e._s(e.$t("tasks.tasks"))+"\n              ")])],1),s("li",{class:{"is-active":e.isActiveTab("schedule")}},[s("router-link",{attrs:{to:e.schedulePath}},[e._v("\n                "+e._s(e.$t("schedule.title"))+"\n              ")])],1)])]),s("div",{staticClass:"flexcolumn-item flexrow"},[s("div",{staticClass:"flexrow-item"},[s("search-field",{ref:"task-search-field",attrs:{"can-save":!0,placeholder:"ex: retake chara"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1),s("div",{staticClass:"filler"}),e.isActiveTab("tasks")?s("div",{staticClass:"flexrow-item"},[s("combobox",{attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item color-option"},[s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("tasks.colors.title"),options:e.schedule.colorOptions,"locale-key-prefix":"tasks.colors."},model:{value:e.schedule.currentColor,callback:function(t){e.$set(e.schedule,"currentColor",t)},expression:"schedule.currentColor"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item"},[e.isActiveTab("schedule")?s("combobox-number",{attrs:{label:e.$t("schedule.zoom_level"),options:e.schedule.zoomOptions},model:{value:e.schedule.zoomLevel,callback:function(t){e.$set(e.schedule,"zoomLevel",t)},expression:"schedule.zoomLevel"}}):e._e()],1):e._e()])]),s("div",{staticClass:"query-list"},[e.loading.entities?e._e():s("search-query-list",{attrs:{queries:e.searchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1),e.isActiveTab("tasks")?s("task-list",{ref:"task-list",attrs:{tasks:e.tasks,"is-assets":e.isAssets,"is-loading":e.loading.entities,"is-error":e.errors.entities},on:{"task-selected":e.onTaskSelected}}):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"task-type-schedule flexrow-item"},[s("schedule",{ref:"schedule-widget",attrs:{"start-date":e.schedule.startDate,"end-date":e.schedule.endDate,hierarchy:e.schedule.scheduleItems,"zoom-level":e.schedule.zoomLevel,height:e.schedule.scheduleHeight,"is-loading":e.loading.entities},on:{"item-changed":e.saveScheduleItem,"root-element-expanded":e.expandPersonElement}})],1):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},Va=[],Ua=(s("55dd"),s("ceca")),Ha=s.n(Ua),Wa=s("ca76"),Ya=s("1e4c"),Ga=s("d7c7"),Ka=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",{ref:"thead"},[s("tr",[s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),e.isAssets?s("th",{ref:"th-type",staticClass:"asset-type"},[e._v("\n            "+e._s(e.$t("tasks.fields.asset_type"))+"\n          ")]):s("th",{ref:"th-type",staticClass:"sequence"},[e._v("\n            "+e._s(e.$t("tasks.fields.sequence"))+"\n          ")]),s("th",{ref:"th-name",staticClass:"name"},[e._v("\n            "+e._s(e.$t("tasks.fields.entity_name"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"status"},[e._v("\n            "+e._s(e.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{ref:"th-assignees",staticClass:"assignees"},[e._v("\n            "+e._s(e.$t("tasks.fields.assignees"))+"\n          ")]),e.isAssets?e._e():s("th",{ref:"th-frames",staticClass:"frames"},[e._v("\n            "+e._s(e.$t("tasks.fields.frames"))+"\n          ")]),s("th",{ref:"th-estimation",staticClass:"estimation"},[e._v("\n            "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+".\n          ")]),s("th",{ref:"th-duration",staticClass:"duration"},[e._v("\n            "+e._s(e.$t("tasks.fields.duration").substring(0,3))+".\n          ")]),s("th",{ref:"th-retake-count",staticClass:"retake-count"},[e._v("\n            "+e._s(e.$t("tasks.fields.retake_count"))+"\n          ")]),s("th",{ref:"th-estimation",staticClass:"due-date"},[e._v("\n            "+e._s(e.$t("tasks.fields.due_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"real-start-date"},[e._v("\n            "+e._s(e.$t("tasks.fields.real_start_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"real-end-date"},[e._v("\n            "+e._s(e.$t("tasks.fields.real_end_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"last-comment-date"},[e._v("\n            "+e._s(e.$t("tasks.fields.last_comment_date"))+"\n          ")]),s("th",{ref:"",staticClass:"empty"},[e._v("\n             \n          ")])])])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table unselectable"},[s("tbody",{ref:"body-tbody",staticClass:"tbody"},e._l(e.displayedTasks,(function(t,n){return s("tr",{key:t.id,ref:"task-"+t.id,refInFor:!0,class:{"task-line":!0,selected:e.selectionGrid[t.id]},on:{click:function(s){return e.selectTask(s,n,t)}}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e.getEntity(t.entity.id),width:50,height:33}})],1),e.isAssets?s("td",{staticClass:"asset-type"},[e._v("\n            "+e._s(e.getEntity(t.entity.id).asset_type_name)+"\n          ")]):s("td",{staticClass:"sequence"},[e._v("\n            "+e._s(e.getEntity(t.entity.id).sequence_name)+"\n          ")]),s("td",{staticClass:"name"},[e._v("\n            "+e._s(e.getEntity(t.entity.id).name)+"\n          ")]),s("validation-cell",{staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!1,"is-static":!0}}),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},e._l(t.assignees,(function(n){return s("people-avatar",{key:t.id+"-"+n,staticClass:"flexrow-item",attrs:{person:e.personMap[n],size:30,"font-size":17}})})),1)]),e.isAssets?e._e():s("td",{staticClass:"frames"},[e._v("\n            "+e._s(e.getEntity(t.entity.id).nb_frames)+"\n          ")]),s("td",{staticClass:"estimation"},[e._v("\n            "+e._s(e.formatEstimation(t.estimation))+"\n          ")]),s("td",{class:{duration:!0,error:e.isEstimationBurned(t)}},[e._v("\n            "+e._s(e.formatDuration(t.duration))+"\n          ")]),s("td",{staticClass:"retake-count"},e._l(t.retake_count,(function(t){return s("span",{key:t},[e._v("\n              •\n            ")])})),0),s("td",{staticClass:"due-date"},[e._v("\n            "+e._s(e.formatDate(t.due_date))+"\n          ")]),s("td",{staticClass:"real-start-date"},[e._v("\n            "+e._s(e.formatDate(t.real_start_date))+"\n          ")]),s("td",{staticClass:"real-end-date"},[e._v("\n            "+e._s(e.formatDate(t.end_date))+"\n          ")]),s("td",{staticClass:"last-comment-date"},[e._v("\n            "+e._s(e.formatDate(t.last_comment_date))+"\n          ")]),s("td")],1)})),0)])]),e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-tasks"},[e._v("\n    "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.number",e.tasks.length))+"\n    ("+e._s(e.formatDuration(e.timeSpent))+"\n     "+e._s(e.$tc("main.days_spent",Math.floor((e.timeSpent?e.timeSpent:0)/60)/8))),e.isAssets?e._e():s("span",[e._v(", "+e._s(e.nbFrames)+" "+e._s(e.$tc("main.nb_frames",e.nbFrames)))]),e._v(")\n  ")])],1)},Qa=[],Xa=s("3657");function Ja(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Za(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ja(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ja(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var eo={name:"task-list",mixins:[qe["a"]],components:{EntityThumbnail:be["a"],PeopleAvatar:ue["a"],TableInfo:de["a"],ValidationCell:nt["a"]},data:function(){return{lastSelection:null,page:1,selectionGrid:{}}},props:{isAssets:{type:Boolean,default:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}},taskType:{type:Object,default:function(){}}},mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.$nextTick(this.resizeHeaders)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Za({},Object(d["c"])(["assetMap","nbSelectedTasks","personMap","selectedTasks","shotMap"]),{timeSpent:function(){var e=0;return this.tasks.forEach((function(t){e+=t.duration})),e},nbFrames:function(){var e=this,t=0;return this.tasks.forEach((function(s){var n=e.shotMap[s.entity.id];n&&n.nb_frames&&(t+=n.nb_frames)})),t},displayedTasks:function(){return this.tasks&&this.tasks.length>0?this.tasks.slice(0,60*this.page):[]}}),methods:Za({},Object(d["b"])(["addSelectedTask","addSelectedTasks","clearSelectedTasks","removeSelectedTask"]),{formatEstimation:function(e){return e?e<10?e:this.formatDuration(e):0},formatDate:function(e){return e?x()(e).format("YYYY-MM-DD"):""},isEstimationBurned:function(e){return e.estimation&&e.estimation>0&&e.duration>e.estimation},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},getEntity:function(e){return this.isAssets?this.assetMap[e]:this.shotMap[e]},onKeyDown:function(e){if(this.tasks.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.tasks.length-1:t-1,this.selectTask({},t,this.tasks[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.tasks.length?t=0:t+1,this.selectTask({},t,this.tasks[t]))}},selectTask:function(e,t,s){var n=this,a=this.selectionGrid[s.id],o=Object.keys(this.selectionGrid).length>1;if(e.ctrlKey||e.shiftKey||(this.clearSelectedTasks({task:s}),this.resetSelection()),e.shiftKey){this.selectionGrid={};var r=[];r=this.lastSelection>t?Object(Xa["j"])(t,this.lastSelection):Object(Xa["j"])(this.lastSelection,t);var c=r.map((function(e){return{task:n.tasks[e]}}));c.forEach((function(e){i.a.set(n.selectionGrid,e.task.id,!0)})),this.addSelectedTasks(c)}else this.selectionGrid[s.id]?(this.removeSelectedTask({task:s}),i.a.set(this.selectionGrid,s.id,void 0)):a&&!o||(this.addSelectedTask({task:s}),this.$emit("task-selected",s),i.a.set(this.selectionGrid,s.id,!0),this.lastSelection=t);this.scrollToLine(s.id)},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},scrollToLine:function(e){var t=this.$refs["task-"+e];if(t&&this.$refs.body){var s=30,n=t[0].getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),a=n.bottom>i.bottom-s,o=n.top<i.top+s;if(a){var r=n.bottom-i.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=i.top-n.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},resetSelection:function(){this.selectionGrid={},this.lastSelection=null},resizeHeaders:function(){var e=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var t=this.$refs["body-tbody"].children[0],s=[{index:1,name:"type"},{index:2,name:"name"},{index:4,name:"assignees"}];s.forEach((function(s){var n=Math.max(t.children[s.index].offsetWidth,100);e.$refs["th-"+s.name].style["min-width"]="".concat(n,"px")}))}},getTableData:function(){var e=this,t=[this.isAssets?this.$t("tasks.fields.asset_type"):this.$t("tasks.fields.sequence"),this.$t("tasks.fields.entity_name"),this.$t("tasks.fields.task_status"),this.$t("tasks.fields.assignees"),this.$t("tasks.fields.estimation"),this.$t("tasks.fields.duration"),this.$t("tasks.fields.retake_count"),this.$t("tasks.fields.real_start_date"),this.$t("tasks.fields.real_end_date"),this.$t("tasks.fields.last_comment_date")];this.isAssets||t.splice(4,0,"otot");var s=[t];return this.tasks.forEach((function(t){var n=t.assignees.map((function(t){var s=e.personMap[t];return s?s.name:""})).join(", "),i=[e.isAssets?e.getEntity(t.entity.id).asset_type_name:e.getEntity(t.entity.id).sequence_name,e.getEntity(t.entity.id).name,t.task_status_short_name,n,e.formatDuration(t.estimation),e.formatDuration(t.duration),t.retake_count,e.formatDate(t.real_start_date),e.formatDate(t.end_date),e.formatDate(t.last_comment_date)];if(!e.isAssets){var a=e.getEntity(t.entity.id).nb_frames;i.splice(4,0,a)}s.push(i)})),s}}),watch:{tasks:function(){this.page=1,this.resetSelection(),this.$nextTick(this.resizeHeaders)},nbSelectedTasks:function(){0===this.nbSelectedTasks&&this.resetSelection()}}},to=eo,so=(s("2866"),Object(m["a"])(to,Ka,Qa,!1,null,"8fb0353a",null)),no=so.exports;function io(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ao(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?io(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):io(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var oo={name:"task-type-page",mixins:[qe["a"]],components:{ButtonSimple:H["a"],ChevronLeftIcon:U["e"],Combobox:Z["a"],ComboboxNumber:Ya["a"],Schedule:Ga["a"],SearchField:Nt["a"],SearchQueryList:Ft["a"],TaskList:no,TaskInfo:ss["a"],TaskTypeName:xn["a"]},entityListCache:[],data:function(){return{activeTab:"tasks",currentSort:"entity_name",currentTask:null,isAssets:!0,tasks:[],selection:{},errors:{entities:!1},loading:{entities:!1},schedule:{currentColor:"neutral",endDate:De()().add("months",3),scheduleItems:[],scheduleHeight:800,startDate:De()().add("months",-1),zoomLevel:1,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],colorOptions:[{label:"Neutral",value:"neutral"},{label:"Status",value:"status"},{label:"Late",value:"late"}]}}},created:function(){if(this.currentProduction){var e={productionId:this.currentProduction.id};this.currentEpisode&&(e.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",e)}else this.setProduction(this.$route.params.production_id)},mounted:function(){var e=this;this.isAssets=this.$route.path.includes("assets"),this.$route.path.includes("schedule")&&(this.activeTab="schedule"),setTimeout((function(){e.initData(!1)}),100),window.addEventListener("resize",this.resetScheduleHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.resetScheduleHeight)},computed:ao({},Object(d["c"])(["assetMap","assetsPath","currentEpisode","currentProduction","currentTaskType","isCurrentUserManager","isTVShow","nbSelectedTasks","personMap","selectedTasks","sequenceSubscriptions","shotsByEpisode","shotMap","shotsPath","taskSearchQueries","taskStatusMap","taskMap","user"]),{assetTasks:function(){return this.getTasks(Object.values(this.assetMap))},shotTasks:function(){return this.getTasks(Object.values(this.shotMap))},title:function(){return this.currentProduction?this.isTVShow&&this.currentEpisode?"".concat(this.currentProduction.name," / ")+"".concat(this.currentEpisode.name," / ")+"".concat(this.currentTaskType.name):"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name):"Loading..."},tasksPath:function(){return this.getRoute("task-type")},schedulePath:function(){return this.getRoute("task-type-schedule")},sortOptions:function(){return["entity_name","task_status_short_name","priority","estimation","duration","retake_count","due_date","real_start_date","real_end_date","last_comment_date"].map((function(e){return{label:e,value:e}}))},searchQueries:function(){return this.isAssets?this.taskSearchQueries.filter((function(e){return"Asset"===e.entity_type})):this.taskSearchQueries},scheduleTeam:function(){var e=this,t=this.currentProduction.team.map((function(t){return e.personMap[t]}));return Object(Ae["e"])(t)}}),methods:ao({},Object(d["b"])(["clearSelectedTasks","initTaskType","removeTaskSearch","saveTaskSearch","setProduction","subscribeToSequence","updateTask","unsubscribeFromSequence"]),{initData:function(e){var t=this;this.resetTasks(),this.resetTaskIndex(),this.$refs["task-searc-field"]&&this.$refs["task-search-field"].focus(),0===this.tasks.length?(this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(e).then((function(){t.loading.entities=!1,t.resetTasks(),t.resetTaskIndex(),t.$refs["task-search-field"].focus(),t.isActiveTab("schedule")&&t.resetScheduleItems()})).catch((function(e){console.error(e),t.loading.entities=!1,t.errors.entities=!0}))):this.isActiveTab("schedule")&&this.resetScheduleItems()},isActiveTab:function(e){return this.activeTab===e},updateActiveTab:function(){this.$route.path.indexOf("schedule")>0?this.activeTab="schedule":this.activeTab="tasks"},getRoute:function(e){var t=this.$route.params.task_type_id,s=this.currentTaskType?this.currentTaskType.id:t,n={name:e,params:{production_id:this.currentProduction.id,task_type_id:s}};return this.isTVShow&&this.currentEpisode&&(n.name="episode-".concat(n.name),n.params.episode_id=this.currentEpisode.id),n},changeSearch:function(e){this.$refs["task-search-field"].setValue(e.search_query),this.$refs["task-search-field"].$emit("change",e.search_query)},onSearchChange:function(e){var t=this;if(e&&1!==e.length){e=e.toLowerCase().trim();var s=this.currentProduction.descriptors.filter((function(e){return e.entityType===t.isAssets?"Asset":"Shot"})),n=Object(Wa["e"])(e)||[],i=Object(Wa["c"])(e)||[],a=Object(Wa["b"])(s,e);if(n.length>0||i.length>0||a.length>0){var o=[],r=Object(Wa["f"])(this.$options.taskIndex,e).concat(a);n.length>0?o=Object(en["h"])(this.$options.taskIndex,n):(this.resetTasks(),o=this.tasks),o=Object(Wa["a"])(o,r,this.taskMap),this.tasks=this.sortTasks(o),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems();this.clearSelectedTasks()},saveSearchQuery:function(e){var t=this.isAssets?"Asset":"Shot";this.saveTaskSearch({searchQuery:e,entityType:t}).then((function(){})).catch((function(e){e&&console.log("error")}))},removeSearchQuery:function(e){this.removeTaskSearch(e).then((function(){})).catch((function(e){e&&console.log("error")}))},onTaskSelected:function(e){this.currentTask=e},resetTasks:function(){this.isAssets?this.tasks=this.assetTasks:this.tasks=this.shotTasks,this.tasks=this.sortTasks()},resetTaskIndex:function(){this.isAssets?this.$options.taskIndex=Object(en["f"])(this.assetTasks,this.personMap):this.$options.taskIndex=Object(en["f"])(this.shotTasks,this.personMap),this.$options.taskIndex["me"]=Object(en["h"])(this.$options.taskIndex,this.user.full_name.split(" "))},getTasks:function(e){var t=this,s=[];return e.forEach((function(e){e.tasks.forEach((function(n){var i=t.taskMap[n];i.data=e.data,i&&i.task_type_id===t.currentTaskType.id&&s.push(i)}))})),s},sortTasks:function(e){e||(e=this.tasks);var t=["task_status_short_name","entity_name","due_date"].includes(this.currentSort);return e.sort(Ha()(this.currentSort,t?1:-1).thenBy("entity_name"))},onExportClick:function(){var e=this.$refs["task-list"].getTableData(),t=[De()().format("YYYY-MM-DD"),this.currentProduction.name,this.currentTaskType.name,"tasks"];this.currentEpisode&&t.splice(1,0,this.currentEpisode.name);var s=Object(Me["b"])(t.join("_"));xe["a"].buildCsvFile(s,e)},resetScheduleItems:function(){var e=this,t=this.buildAssignationMap(),s=this.scheduleTeam.map((function(s){return e.buildPersonElement(s,t)})).filter((function(e){return e.children.length>0}));0!==t.unassigned.length&&(s=s.concat([this.buildPersonElement({id:"unassigned"},t)])),this.schedule.scheduleItems=s,this.resetScheduleDates()},resetScheduleDates:function(){var e=this.schedule.startDate,t=this.schedule.endDate;this.schedule.scheduleItems.forEach((function(s){e&&!e.isAfter(s.startDate)||(e=s.startDate.clone()),t&&!t.isBefore(s.endDate)||(t=s.endDate.clone())})),this.schedule.startDate=e.add("days",-1),this.schedule.endDate=t},buildAssignationMap:function(){var e={unassigned:[]};return this.scheduleTeam.forEach((function(t){e[t.id]=[]})),this.tasks.forEach((function(t){t.assignees.length>0?t.assignees.forEach((function(s){e[s]||(e[s]=[]),e[s].push(t)})):e.unassigned.push(t)})),e},buildPersonElement:function(e,t){var s,n,i,a=this,o=0,r=t[e.id];i="unassigned"===e.id?{avatar:!1,id:e.id,name:"Unassigned",color:"#888",for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1}:{avatar:!0,has_avatar:e.has_avatar,avatarPath:e.avatarPath,uniqueHash:e.uniqueHash,initials:e.initials,id:e.id,name:e.full_name,color:e.color,for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1};var c=r.map((function(e){var t,r=a.formatEstimation(e.estimation),c=De()();if(e.start_date?c=De()(e.start_date,"YYYY-MM-DD"):e.real_start_date&&(c=De()(e.real_start_date,"YYYY-MM-DD")),e.due_date?t=De()(e.due_date,"YYYY-MM-DD"):e.end_date?t=De()(e.end_date,"YYYY-MM-DD"):e.estimation&&(t=c.add("days",r)),!t||t.isBefore(c)){var d=5===c.isoWeekday()?3:1;t=c.add("days",d)}if(c||(c=De()()),!t.isAfter(c)){var l=5===c.isoWeekday()?3:1;t=c.clone().add("days",l)}return r&&(o+=parseInt(r)),s&&!s.isAfter(c)||(s=c.clone()),n&&!n.isBefore(t)||(n=t.clone()),ao({},e,{name:e.entity_name,startDate:c,endDate:t,expanded:!1,loading:!1,man_days:r,editable:a.isCurrentUserManager,parentElement:i,color:a.getTaskElementColor(e,t),children:[]})}));return Object.assign(i,{children:c,startDate:s,endDate:n,man_days:o}),i},getTaskElementColor:function(e,t){if("status"===this.schedule.currentColor)return this.taskStatusMap[e.task_status_id].color;if("late"===this.schedule.currentColor){var s=!this.taskStatusMap[e.task_status_id].is_done&&t.isBefore(De()());return s?"#FF3860":null}return null},saveScheduleItem:function(e){var t=this;this.$options.savingBuffer||(this.$options.savingBuffer={}),this.$options.savingBuffer[e.id]?this.$options.savingBuffer[e.id]=e:(this.$options.savingBuffer[e.id]=e,setTimeout((function(){e=ao({},t.$options.savingBuffer[e.id]),e.startDate&&e.endDate&&(e.parentElement.startDate=t.getMinDate(e.parentElement),e.parentElement.endDate=t.getMaxDate(e.parentElement),t.updateTask({taskId:e.id,data:{start_date:e.startDate.format("YYYY-MM-DD"),due_date:e.endDate.format("YYYY-MM-DD")}})),t.$options.savingBuffer[e.id]=void 0}),1e3))},getMinDate:function(e){var t=this.schedule.endDate.clone();return e.children.forEach((function(e){e.startDate&&e.startDate.isBefore(t)&&(t=e.startDate)})),t.clone()},getMaxDate:function(e){var t=this.schedule.startDate.clone();return e.children.forEach((function(e){e.endDate&&e.endDate.isAfter(t)&&(t=e.endDate)})),t.clone()},expandPersonElement:function(e){e.expanded=!e.expanded},resetScheduleHeight:function(){var e=this;this.$nextTick((function(){if(e.isActiveTab("schedule")){var t=e.$refs["page"].offsetHeight,s=e.$refs["header"].offsetHeight;e.schedule.scheduleHeight=t-s+20,e.$refs["schedule-widget"].resetScheduleSize()}}))}}),watch:{$route:function(){this.initData(!0),this.updateActiveTab()},currentProduction:function(){this.initData(!0)},currentSort:function(){this.sortTasks(),this.$refs["task-list"].resetSelection(),this.clearSelectedTasks()},"schedule.currentColor":function(){this.resetScheduleItems()},activeTab:function(){this.isActiveTab("schedule")&&(this.resetScheduleItems(),this.resetScheduleHeight())}},socket:{events:{"task:update":function(e){this.taskMap[e.task_id]&&setTimeout(this.resetTaskIndex,1e3)}}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},ro=oo,co=(s("392f"),Object(m["a"])(ro,Ba,Va,!1,null,"28d84030",null)),lo=co.exports,uo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[e.isCurrentUserManager?s("div",{staticClass:"timesheets page"},[s("div",{staticClass:"page-header flexrow"},[s("page-title",{staticClass:"flexrow-item",attrs:{text:e.$t("timesheets.title")}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("timesheets.detail_level"),options:e.detailOptions},model:{value:e.detailLevelString,callback:function(t){e.detailLevelString=t},expression:"detailLevelString"}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("timesheets.year"),options:e.yearOptions},model:{value:e.yearString,callback:function(t){e.yearString=t},expression:"yearString"}}),"day"===e.detailLevelString?s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("timesheets.month"),options:e.monthOptions},model:{value:e.monthString,callback:function(t){e.monthString=t},expression:"monthString"}}):e._e(),s("div",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("timesheets.export_timesheet"),icon:"download"},on:{click:e.exportTimesheet}})],1),s("people-timesheet-list",{staticClass:"data-list",attrs:{people:e.filteredPeople,timesheet:e.timesheet,"detail-level":e.detailLevel,month:e.currentMonth,year:e.currentYear,"is-loading":e.isLoading,"is-error":e.isLoadingError}})],1):e._e()]),e.showInfo?s("div",{staticClass:"column side-column"},[s("people-timesheet-info",{attrs:{person:e.currentPerson,year:e.currentYear,month:e.currentMonth,week:e.currentWeek,day:e.currentDay,"is-loading":e.isInfoLoading,"is-loading-error":e.isInfoLoadingError,tasks:e.tasks},on:{close:e.hideSideInfo}})],1):e._e()])},po=[],fo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[e._v("\n            "+e._s(e.$t("people.list.name"))+"\n          ")]),e._l(e.monthRange,(function(t){return"month"===e.detailLevel?s("th",{key:"month-"+t,staticClass:"time month"},[e._v("\n            "+e._s(e.monthToString(t))+"\n          ")]):e._e()})),e._l(e.weekRange,(function(t){return"week"===e.detailLevel?s("th",{key:"week-"+t,staticClass:"daytime"},[e._v("\n            "+e._s(t)+"\n          ")]):e._e()})),e._l(e.dayRange,(function(t){return"day"===e.detailLevel?s("th",{key:"day-"+t,staticClass:"daytime"},[e._v("\n            "+e._s(t)+"\n          ")]):e._e()})),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.people,(function(t){return s("tr",{key:t.id},[s("people-name-cell",{staticClass:"name",attrs:{person:t}}),e._l(e.monthRange,(function(n){return"month"===e.detailLevel?s("td",{key:"month-"+n+"-"+t.id,class:{time:!0,month:!0,selected:e.isMonthSelected(t.id,e.year,n)}},[e.monthDuration(n,t.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-month-person",params:{person_id:t.id,year:e.year,month:n}}}},[e._v("\n              "+e._s(e.monthDuration(n,t.id))+"\n            ")]):s("span",[e._v("\n            -\n            ")])],1):e._e()})),e._l(e.weekRange,(function(n){return"week"===e.detailLevel?s("td",{key:"week-"+n+"-"+t.id,class:{daytime:!0,selected:e.isWeekSelected(t.id,e.year,n)}},[e.weekDuration(n,t.id)>0?s("router-link",{class:{duration:!0,warning:e.weekDuration(n,t.id)>5*e.organisation.hours_by_day},attrs:{to:{name:"timesheets-week-person",params:{person_id:t.id,year:e.year,week:n}}}},[e._v("\n              "+e._s(e.weekDuration(n,t.id))+"\n            ")]):s("span",[e._v("\n            -\n            ")])],1):e._e()})),e._l(e.dayRange,(function(n){return"day"===e.detailLevel?s("td",{key:"day-"+n+"-"+t.id,staticClass:"daytime",class:{daytime:!0,weekend:e.isWeekend(e.year,e.month,n),selected:e.isDaySelected(t.id,e.year,e.month,n)}},[e.dayDuration(n,t.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-day-person",params:{person_id:t.id,year:e.year,month:e.month,day:n}}}},[e._v("\n              "+e._s(e.dayDuration(n,t.id))+"\n            ")]):s("span",[e._v("\n            -\n            ")])],1):e._e()})),s("td",{staticClass:"actions"})],2)})),0)])]),e.isLoading?e._e():s("p",{staticClass:"has-text-centered footer-info"},[e._v("\n    "+e._s(e.people.length)+" "+e._s(e.$tc("people.persons",e.people.length))+"\n  ")])],1)},ho=[];function mo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mo(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mo(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var vo={name:"people-timesheet-list",components:{PeopleNameCell:ja["a"],TableInfo:de["a"]},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Month",value:"month"}],currentMonth:x()().month()+1,currentYear:x()().year(),currentWeek:x()().week()}},props:{timesheet:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},detailLevel:{type:String,default:"day"},year:{type:Number,default:0},month:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:_o({},Object(d["c"])(["isCurrentUserManager","organisation","route"]),{monthRange:function(){return Object(Xa["f"])(this.year,this.currentYear,this.currentMonth)},dayRange:function(){return Object(Xa["b"])(this.year,this.month,this.currentYear,this.currentMonth)},weekRange:function(){return Object(Xa["h"])(this.year,this.currentYear,this.currentWeek)}}),methods:_o({},Object(d["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")},monthToString:Xa["i"],monthDuration:function(e,t){var s="".concat(e);return this.getDuration(s,t)},weekDuration:function(e,t){return this.getDuration(e,t)},dayDuration:function(e,t){return this.getDuration(e,t)},getDuration:function(e,t){return this.timesheet&&this.timesheet[e]&&this.timesheet[e][t]?this.timesheet[e][t]/60:"-"},isWeekend:function(e,t,s){var n=x()("".concat(e,"-").concat(t,"-").concat(s));return s<10&&(n=x()("".concat(e,"-").concat(t,"-0").concat(s))),[0,6].includes(n.day())},isDaySelected:function(e,t,s,n){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t&&this.$route.params.month===s&&this.$route.params.day===n},isWeekSelected:function(e,t,s){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t&&this.$route.params.week===s},isMonthSelected:function(e,t,s){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t&&this.$route.params.month===s}}),watch:{detailLevel:function(){this.$refs.headerWrapper.style.left=0},route:function(){var e=document.getElementsByClassName("selected");0===e.length&&(this.$refs.body.scrollLeft+=350)}}},bo=vo,go=(s("2bdb"),Object(m["a"])(bo,fo,ho,!1,null,"a6b9b238",null)),yo=go.exports,ko=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"people-timesheet-info"},[s("div",{staticClass:"close"},[s("router-link",{staticClass:"close-button",attrs:{to:e.closeRoute}},[s("x-icon")],1)],1),s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.person,"no-cache":!0}}),s("page-title",{staticClass:"flexrow-item",attrs:{text:e.person.full_name}})],1),e.isMonthInfo?s("div",{staticClass:"info-date"},[e._v("\n    "+e._s(e.monthString)+" "+e._s(e.year)+"\n  ")]):e.isWeekInfo?s("div",{staticClass:"info-date"},[e._v("\n    week "+e._s(e.week)+", "+e._s(e.startDay)+" - "+e._s(e.endDay)+" "+e._s(e.weekMonth)+" "+e._s(e.year)+"\n  ")]):e.isDayInfo?s("div",{staticClass:"info-date"},[e._v("\n    "+e._s(e.day)+" "+e._s(e.monthString)+" "+e._s(e.year)+"\n  ")]):e._e(),s("time-spent-task-list",{staticClass:"time-spent-list",attrs:{tasks:e.tasks,"is-loading":e.isLoading,"is-error":e.isLoadingError}})],1)},So=[],wo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isLoadingError}}),s("div",{staticClass:"aggregated-time-spents"},e._l(Object.keys(e.projects),(function(t){return s("div",{key:t,staticClass:"by-project"},[e.projectNames[t]?s("production-name",{attrs:{project:{id:t,name:e.projectNames[t]}}}):e._e(),e._l(Object.keys(e.projects[t]),(function(n){return s("div",{key:n,staticClass:"by-task-type-id"},[s("task-type-name",{attrs:{"task-type":e.taskTypeMap[n]}}),s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.projects[t][n],(function(t){return s("tr",{key:t.id,staticClass:"by-task-type-id"},[s("td",{staticClass:"name"},[e._v(e._s(t.name))]),s("td",{staticClass:"duration"},[e._v(e._s(t.duration/60))])])})),0)])])],1)}))],2)})),0)],1)},Oo=[],To=s("4736");function Co(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Po(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Co(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Co(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Eo={name:"todos-list",components:{TableInfo:de["a"],ProductionName:To["a"],TaskTypeName:xn["a"]},data:function(){return{projectNames:{}}},props:{tasks:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1}},computed:Po({},Object(d["c"])(["currentProduction","lastProductionScreen","taskTypeMap"]),{projects:function(){var e={};return this.tasks.forEach((function(t){e[t.project_id]||(e[t.project_id]={}),e[t.project_id][t.task_type_id]||(e[t.project_id][t.task_type_id]=[]);var s=t.entity_name;["Shot","Sequence"].includes(t.entity_type_name)?(s="".concat(t.sequence_name," / ").concat(s),t.episode_name&&(s="".concat(t.episode_name," / ").concat(s))):s="".concat(t.entity_type_name," / ").concat(s),e[t.project_id][t.task_type_id].push({id:t.id,name:s,duration:t.duration})})),Object.keys(e).forEach((function(t){Object.keys(e[t]).forEach((function(s){e[t][s]=Object(Ae["c"])(e[t][s])}))})),e}}),methods:Po({},Object(d["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")}}),watch:{tasks:function(){this.projectNames=this.tasks.reduce((function(e,t){return e[t.project_id]=t.project_name,e}),{})}}},jo=Eo,Do=(s("f8b1"),Object(m["a"])(jo,wo,Oo,!1,null,"31ebad26",null)),xo=Do.exports;function Ao(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ao(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ao(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Lo={name:"people-timesheet-info",components:{XIcon:U["I"],PageTitle:ge["a"],PeopleAvatar:ue["a"],TimeSpentTaskList:xo},props:{person:{type:Object,default:function(){}},year:{type:Number,default:0},month:{type:Number,default:0},week:{type:Number,default:0},day:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}}},computed:Mo({},Object(d["c"])([]),{startDay:function(){return x()().day("Monday").year(this.year).week(this.week).date()},endDay:function(){return x()().day("Monday").year(this.year).week(this.week).add("days",6).date()},weekMonth:function(){return x()().day("Monday").year(this.year).week(this.week).format("MMM")},monthString:function(){return Object(Xa["i"])(this.month)},isMonthInfo:function(){return this.$route.path.indexOf("month")>0},isWeekInfo:function(){return this.$route.path.indexOf("week")>0},isDayInfo:function(){return this.$route.path.indexOf("day")>0},closeRoute:function(){return this.isMonthInfo?{name:"timesheets-month",params:{year:this.year}}:this.isWeekInfo?{name:"timesheets-week",params:{year:this.year}}:this.isDayInfo?{name:"timesheets-day",params:{year:this.year,month:this.month}}:{name:"timesheets"}}}),methods:Mo({},Object(d["b"])([]),{onCloseClicked:function(){this.$emit("close")}})},Io=Lo,$o=(s("0fef"),Object(m["a"])(Io,ko,So,!1,null,"7275f22e",null)),qo=$o.exports;function No(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?No(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):No(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ro={name:"people",components:{ButtonSimple:H["a"],Combobox:Z["a"],PageTitle:ge["a"],PeopleTimesheetList:yo,PeopleTimesheetInfo:qo},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"}],detailLevelString:"day",detailLevel:"day",yearString:"".concat(x()().year()),monthString:"".concat(x()().month()+1),currentYear:x()().year(),currentMonth:x()().month()+1,currentWeek:x()().week(),currentDay:x()().date(),currentPerson:this.getCurrentPerson(),isLoading:!1,isLoadingError:!1,showInfo:!0,isInfoLoading:!1,isInfoLoadingError:!1,tasks:[]}},created:function(){var e=this;this.isLoading=!0,0===this.people.length?this.loadPeople((function(){e.loadRoute()})):this.loadRoute()},computed:Fo({},Object(d["c"])(["isCurrentUserManager","people","personMap","timesheet"]),{filteredPeople:function(){var e=this;return this.people.filter((function(t){var s=Object.keys(e.timesheet),n=!1,i=0;do{e.timesheet[s[i]]&&(n=void 0!==e.timesheet[s[i]][t.id]),i++}while(!n&&i<s.length);return t.active&&n}))},yearOptions:function(){var e=2018,t=x()().year();return Object(Xa["j"])(e,t).map((function(e){return{label:e,value:"".concat(e)}}))},monthOptions:function(){var e="".concat(x()().year()),t=1,s=x()().month()+1,n=Object(Xa["j"])(t,12);return e===this.yearString&&(n=Object(Xa["j"])(t,s)),n.map((function(e){return{label:Object(Xa["i"])(e),value:"".concat(e)}}))}}),methods:Fo({},Object(d["b"])(["loadPeople","loadAggregatedPersonTimeSpents","loadTimesheets"]),{reloadTimesheet:function(){var e=this;this.isLoading=!0,this.loadTimesheets({detailLevel:this.detailLevel,year:this.currentYear,month:this.currentMonth}).then((function(t){e.isLoading=!1})).catch((function(){e.isLoading=!1,e.isLoadingError=!0}))},showSideInfo:function(){this.showInfo=!0},hideSideInfo:function(){this.showInfo=!1},loadRoute:function(){var e=this.$route.params,t=e.month,s=e.year,n=e.week,i=e.day,a="".concat(this.detailLevel),o="".concat(this.currentMonth),r="".concat(this.currentYear);this.$route.path.indexOf("week")>0&&(this.detailLevel="week"),this.$route.path.indexOf("month")>0&&(this.detailLevel="month"),this.$route.path.indexOf("day")>0&&(this.detailLevel="day"),this.currentPerson=this.getCurrentPerson(),this.detailLevelString=this.detailLevel,t&&(this.currentMonth=Number(t),this.monthString="".concat(t)),s&&(this.currentYear=Number(s),this.yearString="".concat(s)),n&&(this.currentWeek=Number(n),this.weekString="".concat(n)),i&&(this.currentDay=Number(i));var c=a!==this.detailLevel,d=0!==o.localeCompare("".concat(this.currentMonth)),l=0!==r.localeCompare("".concat(this.currentYear));this.$route.path.indexOf("person")>0?(this.showSideInfo(),this.loadAggregate(),this.isLoading&&this.reloadTimesheet()):(this.hideSideInfo(),(this.isLoading||d||l||c)&&this.reloadTimesheet())},loadAggregate:function(){var e=this;this.isInfoLoading=!0,this.isInfoLoadingError=!1,this.tasks=[],this.loadAggregatedPersonTimeSpents({personId:this.$route.params.person_id,detailLevel:this.detailLevel,year:this.$route.params.year,month:this.$route.params.month,week:this.$route.params.week,day:this.$route.params.day}).then((function(t){e.isInfoLoading=!1,e.tasks=t.filter((function(e){return e.duration>0}))})).catch((function(t){console.error(t),e.isInfoLoadingError=!0}))},getCurrentPerson:function(){var e=this.$route.params.person_id;return e&&this.personMap?this.personMap[e]:{}},exportTimesheet:function(){var e=["timesheet",this.detailLevel,this.currentYear];"day"===this.detailLevel&&e.push(this.currentMonth);var t=Object(Me["b"])(e.join("_"));xe["a"].generateTimesheet(t,this.timesheet,this.filteredPeople,this.detailLevel,this.currentYear,this.currentMonth,x()().month()+1,x()().year(),x()().week())}}),watch:{detailLevelString:function(){this.detailLevel!==this.detailLevelString&&("month"===this.detailLevelString?this.$router.push({name:"timesheets-month",params:{year:this.currentYear}}):"week"===this.detailLevelString?this.$router.push({name:"timesheets-week",params:{year:this.currentYear}}):"day"===this.detailLevelString&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:this.currentMonth}}))},yearString:function(){var e=Number(this.yearString),t=x()().month();this.currentYear!==e&&("month"===this.detailLevel?this.$router.push({name:"timesheets-month",params:{year:e}}):"week"===this.detailLevel?this.$router.push({name:"timesheets-week",params:{year:e}}):this.$router.push({name:"timesheets-day",params:{year:e,month:Math.min(Number(this.monthString),t)}}))},monthString:function(){this.currentMonth!==Number(this.monthString)&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:Number(this.monthString)}})},$route:function(){this.loadRoute()}},metaInfo:function(){return{title:"".concat(this.$t("timesheets.title")," - Kitsu")}}},zo=Ro,Bo=(s("104d"),Object(m["a"])(zo,uo,po,!1,null,"04694d4c",null)),Vo=Bo.exports,Uo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"flexrow project-dates"},[s("div",{staticClass:"flexrow-item"},[s("label",{staticClass:"label"},[e._v("\n          "+e._s(e.$t("main.start_date"))+"\n        ")]),s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"d MMMM yyyy"},model:{value:e.selectedStartDate,callback:function(t){e.selectedStartDate=t},expression:"selectedStartDate"}})],1),s("div",{staticClass:"flexrow-item field"},[s("label",{staticClass:"label"},[e._v("\n          "+e._s(e.$t("main.end_date"))+"\n        ")]),s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"d MMMM yyyy"},model:{value:e.selectedEndDate,callback:function(t){e.selectedEndDate=t},expression:"selectedEndDate"}})],1),s("combobox-number",{staticClass:"flexrow-item zoom-level",attrs:{label:e.$t("schedule.zoom_level"),options:e.zoomOptions},model:{value:e.zoomLevel,callback:function(t){e.zoomLevel=t},expression:"zoomLevel"}})],1),s("schedule",{attrs:{"start-date":e.startDate,"end-date":e.endDate,hierarchy:e.scheduleItems,"zoom-level":e.zoomLevel,"is-loading":e.loading.schedule,"is-error":e.errors.schedule},on:{"item-changed":e.onScheduleItemChanged,"change-zoom":e.changeZoom,"root-element-expanded":e.expandProductionElement}})],1)])},Ho=[],Wo=s("2430"),Yo=s("fa33"),Go=s("9d8b");function Ko(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ko(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ko(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Xo={name:"production-schedule",components:{ComboboxNumber:Ya["a"],Datepicker:Yo["a"],Schedule:Ga["a"]},data:function(){return{endDate:x()().add(6,"months"),scheduleItems:[],startDate:x()(),selectedStartDate:null,selectedEndDate:null,zoomLevel:2,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],loading:{schedule:!1},errors:{schedule:!1}}},mounted:function(){this.reset()},computed:Qo({},Object(d["c"])(["openProductions","taskTypeMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?Wo["fr"]:Wo["en"]}}),methods:Qo({},Object(d["b"])(["editProduction","loadScheduleItems","saveScheduleItem"]),{changeZoom:function(e){e.wheelDelta<0&&this.zoomLevel>1&&this.zoomLevel--,e.wheelDelta>0&&this.zoomLevel<3&&this.zoomLevel++},reset:function(){this.scheduleItems=this.convertScheduleItems(this.openProductions),this.startDate=Object(Xa["d"])(this.scheduleItems),this.endDate=Object(Xa["e"])(this.scheduleItems),this.selectedStartDate=this.startDate.toDate(),this.selectedEndDate=this.endDate.toDate()},convertScheduleItems:function(e){return e.map((function(e){var t=Object(Xa["g"])(e.start_date),s=Object(Xa["c"])(t,e.end_date);return Qo({},e,{avatar:"Project"===e.type,color:e.color||Rn["a"].fromString(e.name,!0),startDate:t,endDate:s,expanded:!1,loading:!1,editable:!0,route:Object(Go["a"])(e.id),children:[]})}))},convertTaskTypeScheduleItems:function(e){var t=this;return e.map((function(e){var s=Object(Xa["g"])(e.start_date),n=Object(Xa["c"])(s,e.end_date),i=t.taskTypeMap[e.task_type_id];return Qo({},e,{name:i.name,color:i.color,startDate:s,endDate:n,expanded:!1,loading:!1,editable:!0,children:[]})}))},expandProductionElement:function(e){var t=this;e.expanded?e.expanded=!1:(e.loading=!0,e.expanded=!0,this.loadScheduleItems(e).then((function(s){s=t.convertTaskTypeScheduleItems(s),e.children=s,e.loading=!1})))},onScheduleItemChanged:function(e){"Project"!==e.type?this.saveScheduleItem(e):this.editProduction({data:{id:e.id,start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")}})}}),socket:{},watch:{},metaInfo:function(){return{title:"".concat(this.$t("schedule.title_main")," - Kitsu")}}},Jo=Xo,Zo=(s("6345"),Object(m["a"])(Jo,Uo,Ho,!1,null,"d4427b36",null)),er=Zo.exports,tr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"todos page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":e.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[e._v("\n              "+e._s(e.$t("tasks.current"))+"\n            ")])],1),s("li",{class:{"is-active":e.isTabActive("done")},on:{click:function(t){return e.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[e._v("\n              "+e._s(e.$t("tasks.done"))+" ("+e._s(e.displayedDoneTasks.length)+")\n            ")])],1),s("li",{class:{"is-active":e.isTabActive("timesheets")},on:{click:function(t){return e.selectTab("timesheets")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[e._v("\n              "+e._s(e.$t("timesheets.title"))+"\n            ")])],1)])]),s("div",{staticClass:"flexrow"},[e.isTabActive("done")?e._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0,"flexrow-item":!0},attrs:{"can-save":!0},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("span",{staticClass:"flexrow-item push-right"}),s("span",{staticClass:"flexrow-item"}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1),e.isTabActive("todos")||e.isTabActive("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:e.todoSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1):e._e(),e.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{tasks:e.sortedTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"selection-grid":e.todoSelectionGrid},on:{scroll:e.setTodoListScrollPosition}}):e._e(),e.isTabActive("done")?s("div",[e._v("\n         \n      ")]):e._e(),e.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{tasks:e.displayedDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,done:!0}}):e._e(),e.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:e.loggableTodos,"done-tasks":e.loggableDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"time-spent-map":e.timeSpentMap,"time-spent-total":e.timeSpentTotal,"hide-done":e.todosSearchText.length>0||0===e.loggableDoneTasks.length},on:{"date-changed":e.onDateChanged,"time-spent-change":e.onTimeSpentChange}}):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},sr=[],nr=s("b11e"),ir=s("e739");function ar(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function or(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ar(s,!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ar(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var rr={name:"todos",components:{Combobox:Z["a"],SearchField:Nt["a"],SearchQueryList:Ft["a"],TaskInfo:ss["a"],TimesheetList:nr["a"],TodosList:ir["a"]},data:function(){return{activeTab:"todos",currentSort:"priority",selectedDate:x()().format("YYYY-MM-DD"),sortOptions:["entity_name","priority","task_status_short_name","estimation","last_comment_date"].map((function(e){return{label:e,value:e}}))}},mounted:function(){var e=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.loadTodos({date:this.selectedDate,callback:function(){e.todoList&&e.$nextTick((function(){e.todoList.setScrollPosition(e.todoListScrollPosition)})),e.resizeHeaders()}})},afterDestroy:function(){this.$store.commit("USER_LOAD_TODOS_END",{tasks:[],userFilters:{},taskTypeMap:this.taskTypeMap})},computed:or({},Object(d["c"])(["displayedDoneTasks","displayedTodos","isTodosLoading","isTodosLoadingError","nbSelectedTasks","selectedTasks","taskTypeMap","todosSearchText","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries","user"]),{loggableTodos:function(){var e=this;return this.displayedTodos.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},loggableDoneTasks:function(){var e=this;return this.displayedDoneTasks.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},todoList:function(){return this.$refs["todo-list"]},haveDoneList:function(){return this.$refs["done-list"]},sortedTasks:function(){var e="entity_name"===this.currentSort,t=Object(K["a"])(this.displayedTodos);return e?t.sort(Ha()("project_name").thenBy("task_type_name").thenBy("full_entity_name")):t.sort(Ha()(this.currentSort,-1).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name"))}}),methods:or({},Object(d["b"])(["loadTodos","loadOpenProductions","removeTodoSearch","saveTodoSearch","setTodoListScrollPosition","setTodosSearch","setTimeSpent"]),{isTabActive:function(e){return this.activeTab===e},resizeHeaders:function(){var e=this;this.$nextTick((function(){e.todoList&&e.todoList.resizeHeaders(),e.haveDoneList&&e.haveDoneList.resizeHeaders()}))},selectTab:function(e){var t=this;this.activeTab=e,this.resizeHeaders(),setTimeout((function(){t.$refs["todos-search-field"]&&t.$refs["todos-search-field"].focus()}),300)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(e){this.setTodosSearch(e)},changeSearch:function(e){this.$refs["todos-search-field"].setValue(e.search_query),this.$refs["todos-search-field"].$emit("change",e.search_query)},saveSearchQuery:function(e){this.saveTodoSearch(e).then((function(){})).catch((function(e){e&&console.log("error",e)}))},removeSearchQuery:function(e){this.removeTodoSearch(e).then((function(){})).catch((function(e){e&&console.log("error",e)}))},onDateChanged:function(e){this.selectedDate=x()(e).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onTimeSpentChange:function(e){e.personId=this.user.id,e.date=this.selectedDate,this.setTimeSpent(e)},onAssignation:function(e){var t=this;this.user.id===e.person_id&&this.loadOpenProductions((function(){t.loadTodos({forced:!0,date:t.selectedDate,callback:function(){t.todoList&&t.$nextTick((function(){t.todoList.setScrollPosition(t.todoListScrollPosition)})),t.resizeHeaders()}})}))}}),socket:{events:{"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e)}}},watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},cr=rr,dr=(s("b023"),Object(m["a"])(cr,tr,sr,!1,null,"7c5dd5f7",null)),lr=dr.exports,ur=function(){return s.e("chunk-68557d2a").then(s.bind(null,"319f"))},pr=function(){return s.e("chunk-5a4b5a16").then(s.bind(null,"fd5f"))},fr=function(){return s.e("chunk-7e6c82cc").then(s.bind(null,"38fe"))},hr=function(){return s.e("chunk-124c07a4").then(s.bind(null,"a591"))},mr=function(){return s.e("chunk-2d22d490").then(s.bind(null,"f79b"))},_r=function(){return s.e("chunk-3aa178f9").then(s.bind(null,"a01b"))},vr=function(){return s.e("chunk-1c263337").then(s.bind(null,"6893"))},br=function(){return s.e("chunk-687027a2").then(s.bind(null,"d1e3"))},gr=function(){return s.e("chunk-accc4560").then(s.bind(null,"4e82"))},yr=function(){return s.e("chunk-4170de0c").then(s.bind(null,"d46a"))},kr=function(){return s.e("chunk-48875fa6").then(s.bind(null,"9633"))},Sr=function(){return s.e("chunk-0e61bcc0").then(s.bind(null,"421c"))},wr=function(){return s.e("chunk-2d21082e").then(s.bind(null,"b7cf"))},Or=function(){return s.e("chunk-2d0dacb1").then(s.bind(null,"6cb0"))},Tr=function(){return s.e("chunk-2d0cfa35").then(s.bind(null,"6522"))},Cr=function(){return s.e("chunk-21d64005").then(s.bind(null,"2e31"))},Pr=function(){return s.e("chunk-17b75b00").then(s.bind(null,"99a3"))},Er=function(){return s.e("chunk-0b09a0ec").then(s.bind(null,"9f1e"))},jr=function(){return s.e("chunk-0caa9092").then(s.bind(null,"56b8"))},Dr=function(){return s.e("chunk-2d0c7360").then(s.bind(null,"503b"))},xr=[{path:"",component:Tn,beforeEnter:function(e,t,s){var n=E["a"].getParser(window.navigator.userAgent),i=n.satisfies({chrome:">20.1.1432",firefox:">31",edge:">79",vivaldi:">2.8"});if(!i)return s({name:"wrong-browser"});j["a"].requireAuth(e,t,(function(e){e?s(e):(I.setTimezone(),L.setLocale(),0===A["a"].state.productions.openProductions.length?F((function(e){e?s({name:"server-down"}):R["a"].getters.isCurrentUserCGArtist(R["a"].state)?s({name:"todos"}):s({name:"open-productions"})})):R["a"].getters.isCurrentUserCGArtist(R["a"].state)?(A["a"].commit("DATA_LOADING_END"),s({name:"todos"})):(A["a"].commit("DATA_LOADING_END"),s({name:"open-productions"})))}))}},{path:"/",component:Tn,beforeEnter:function(e,t,s){j["a"].requireAuth(e,t,(function(e){e?s(e):(I.setTimezone(),L.setLocale(),0===z["a"].state.taskTypes.length?F((function(){A["a"].commit("DATA_LOADING_END"),s()})):(A["a"].commit("DATA_LOADING_END"),s()))}))},children:[{path:"",name:"home"},{path:"asset-types",component:ur,children:[{path:"new",component:ur},{name:"edit-asset-type",path:"edit/:asset_type_id",component:ur},{name:"delete-asset-type",path:"delete/:asset_type_id",component:ur}]},{name:"custom-actions",path:"custom-actions",component:fr,children:[{name:"custom-actions-new",path:"new",component:fr},{name:"edit-custom-action",path:"edit/:custom_action_id",component:fr},{name:"delete-custom-action",path:"delete/:custom_action_id",component:fr}]},{name:"notifications",path:"notifications",component:qn},{path:"open-productions",component:Yn,name:"open-productions"},{path:"people",component:vr,name:"people",children:[{path:"new",component:vr,name:"new-people"},{path:"edit/:person_id",component:vr,name:"edit-person"},{name:"delete-person",path:"delete/:person_id",component:vr}]},{path:"people/:person_id",component:_r,name:"person",children:[{path:":tab",component:_r,name:"person-tab"}]},{path:"/main-schedule",component:er,name:"main-schedule"},{path:"/timesheets",component:Vo,name:"timesheets",children:[{path:"month/:year",component:Vo,name:"timesheets-month"},{path:"month/:year/:month/persons/:person_id",component:Vo,name:"timesheets-month-person"},{path:"week/:year",component:Vo,name:"timesheets-week"},{path:"week/:year/:week/persons/:person_id",component:Vo,name:"timesheets-week-person"},{path:"day/:year/:month",component:Vo,name:"timesheets-day"},{path:"day/:year/:month/:day/persons/:person_id",component:Vo,name:"timesheets-day-person"}]},{path:"profile",component:Sr,name:"profile",children:[{path:"change-avatar",component:Sr,name:"change-avatar"}]},{path:"settings",component:Cr,name:"settings"},{name:"task-types",path:"task-types",component:jr,children:[{path:"new",component:jr},{name:"edit-task-type",path:"edit/:task_type_id",component:jr},{name:"delete-task-type",path:"delete/:task_type_id",component:jr}]},{name:"task-status",path:"task-status",component:Er,children:[{name:"new-task-status",path:"new",component:Er},{name:"edit-task-status",path:"edit/:task_status_id",component:Er},{name:"delete-task-status",path:"delete/:task_status_id",component:Er}]},{path:"todos",component:lr,name:"todos",children:[{path:":tab",component:lr,name:"todos-tab"}]},{path:"productions",component:gr,name:"productions",children:[{path:"new",component:gr,name:"productions-new"},{path:"edit/:production_edit_id",component:gr,name:"edit-production"},{path:"delete/:production_delete_id",component:gr,name:"delete-production"}]},{path:"productions/:production_id/team",component:za,name:"team"},{path:"productions/:production_id/news-feed",component:pi,name:"news-feed"},{path:"productions/:production_id/schedule",component:kr,name:"schedule"},{path:"productions/:production_id/playlists",component:br,name:"playlists",children:[{name:"playlist",path:":playlist_id",component:br},{name:"delete-playlist",path:":playlist_id/delete",component:br},{name:"edit-playlist",path:":playlist_id/edit",component:br}]},{path:"productions/:production_id/breakdown",component:pr,name:"breakdown",children:[{path:"sequences/:sequence_id",component:pr,name:"breakdown-sequence"},{path:"asset-types/:asset_type_id",component:pr,name:"breakdown-asset-type"}]},{path:"productions/:production_id/assets",component:cs,name:"assets",children:[{path:"new",component:cs,name:"new-asset"},{path:"edit/:asset_id",component:cs,name:"edit-asset"},{path:"delete/:asset_id",component:cs,name:"delete-asset"},{path:"restore/:asset_id",component:cs,name:"restore-asset"},{path:"delete-all-tasks/:task_type_id",component:cs,name:"delete-all-asset-tasks"}]},{path:"productions/:production_id/assets/:asset_id",component:Ce,name:"asset"},{path:"productions/:production_id/shots",component:Oa,name:"shots",children:[{path:"delete-all-tasks/:task_type_id",component:Oa,name:"delete-all-shot-tasks"},{path:"edit/:shot_id",component:Oa,name:"edit-shot"},{path:"delete/:shot_id",component:Oa,name:"delete-shot"},{path:"restore/:shot_id",component:Oa,name:"restore-shot"}]},{path:"productions/:production_id/shots/:shot_id",component:ea,name:"shot"},{path:"productions/:production_id/sequences",component:Ni,name:"sequences",children:[{path:"edit/:sequence_id",component:Ni,name:"edit-sequence"},{path:"delete/:sequence_id",component:Ni,name:"delete-sequence"}]},{path:"productions/:production_id/asset-types",component:yr,name:"production-asset-types"},{path:"productions/:production_id/:type/task-types/:task_type_id",component:lo,name:"task-type",children:[{name:"task-type-schedule",path:"schedule",component:lo}]},{name:"task",path:"productions/:production_id/:type/tasks/:task_id",component:Pr,children:[{name:"task-delete",path:"delete",component:Pr},{name:"task-change-preview",path:"comments/:comment_id/change-preview",component:Pr},{name:"task-preview",path:"previews/:preview_id",component:Pr},{name:"task-edit-comment",path:"comments/:comment_id/edit",component:Pr},{name:"task-delete-comment",path:"comments/:comment_id/delete",component:Pr}]},{path:"productions/:production_id/episodes",component:hr,name:"episodes",children:[{path:"edit/:episode_id",component:hr,name:"edit-episode"},{path:"delete/:episode_id",component:hr,name:"delete-episode"}]},{path:"productions/:production_id/episodes/:episode_id/schedule",component:kr,name:"episode-schedule"},{path:"productions/:production_id/episodes/:episode_id/playlists",component:br,name:"episode-playlists",children:[{name:"episode-playlist",path:":playlist_id",component:br},{name:"episode-delete-playlist",path:":playlist_id/delete",component:br},{name:"episode-edit-playlist",path:":playlist_id/edit",component:br}]},{path:"productions/:production_id/episodes/:episode_id/breakdown",component:pr,name:"episode-breakdown",children:[{path:"sequences/:sequence_id",component:pr,name:"episode-breakdown-sequence"},{path:"asset-types/:asset_type_id",component:pr,name:"episode-breakdown-asset-type"}]},{path:"productions/:production_id/episodes/:episode_id/assets",component:cs,name:"episode-assets",children:[{path:"new",component:cs,name:"episode-new-asset"},{path:"edit/:asset_id",component:cs,name:"episode-edit-asset"},{path:"delete/:asset_id",component:cs,name:"episode-delete-asset"},{path:"restore/:asset_id",component:cs,name:"episode-restore-asset"},{path:"delete-all-tasks/:task_type_id",component:cs,name:"episode-delete-all-asset-tasks"}]},{path:"productions/:production_id/episodes/:episode_id/assets/:asset_id",component:Ce,name:"episode-asset"},{path:"productions/:production_id/episodes/:episode_id/shots",component:Oa,name:"episode-shots",children:[{path:"shots/manage",component:Oa,name:"episode-manage-shots"},{path:"delete-all-tasks/:task_type_id",component:Oa,name:"episode-delete-all-shot-tasks"},{path:"edit/:shot_id",component:Oa,name:"episode-edit-shot"},{path:"delete/:shot_id",component:Oa,name:"episode-delete-shot"},{path:"shots/restore/:shot_id",component:Oa,name:"episode-restore-shot"}]},{path:"productions/:production_id/episodes/:episode_id/shots/:shot_id",component:ea,name:"episode-shot"},{path:"productions/:production_id/episodes/:episode_id/asset-types",component:yr,name:"episode-production-asset-types"},{path:"productions/:production_id/episodes/:episode_id/sequences",component:Ni,name:"episode-sequences",children:[{path:"edit/:sequence_id",component:Ni,name:"episode-edit-sequence"},{path:"delete/:sequence_id",component:Ni,name:"episode-delete-sequence"}]},{path:"productions/:production_id/episodes/:episode_id/:type/task-types/:task_type_id",component:lo,name:"episode-task-type",children:[{path:"schedule",component:lo,name:"episode-task-type-schedule"}]},{path:"productions/:production_id/episodes/:episode_id/:type/tasks/:task_id",name:"episode-task",component:Pr,children:[{name:"episode-task-delete",path:"delete",component:Pr},{name:"episode-task-change-preview",path:"comments/:comment_id/change-preview",component:Pr},{name:"episode-task-preview",path:"previews/:preview_id",component:Pr},{name:"episode-task-edit-comment",path:"comments/:comment_id/edit",component:Pr},{name:"episode-task-delete-comment",path:"comments/:comment_id/delete",component:Pr}]}]},{path:"/login",component:_s,name:"login"},{path:"/reset-password",component:wr,name:"reset-password"},{path:"/reset-change-password/:token",component:Or,name:"reset-change-password"},{path:"/server-down",component:Tr,name:"server-down"},{path:"/wrong-browser",component:Dr,name:"wrong-browser"},{path:"/*",component:mr,name:"not-found"}];i.a.use(P["a"]);var Ar=function(e,t,s){return s||{x:0,y:0}},Mr=new P["a"]({mode:"history",scrollBehavior:Ar,routes:xr}),Lr=s("d051"),Ir=s.n(Lr),$r=s("30ef"),qr=s.n($r),Nr=s("58ca"),Fr=s("d842"),Rr=s("00e7"),zr=s.n(Rr),Br=s("df76"),Vr=s.n(Br),Ur=s("caf9"),Hr=s("b9dd"),Wr=s("802e"),Yr=s("6c34"),Gr=s.n(Yr),Kr=s("e37d");s("a507");i.a.config.productionTip=!1,i.a.use(Ir.a),i.a.use(Nr["a"]),i.a.use(Kr["a"]),i.a.use(Fr["a"],{adapter:qr.a}),i.a.use(zr.a),i.a.use(Ur["a"]),i.a.use(Hr["a"]),i.a.use(Vr.a),i.a.use(Wr["default"]),i.a.use(Gr.a,"/events"),Object(a["sync"])(A["a"],Mr),i.a.directive("focus",{inserted:function(e){e.focus()}}),i.a.prototype.$locale={change:function(e){C.locale=e},current:function(){return C.locale}},new i.a({el:"#app",components:{App:v},template:"<App/>",i18n:C,router:Mr,store:A["a"]}),document.addEventListener("keyup",(function(e){27===e.keyCode&&A["a"].commit("CLEAR_SELECTED_TASKS")})),i.a.config.keyCodes.backspace=8},"56f3":function(e,t,s){},"586b":function(e,t,s){},"58f5":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":e.entry,"production-id":e.productionId}})],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("274f");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"task-type-cell",components:{TaskTypeName:r["a"]},props:["entry","productionId"],computed:d({},Object(o["c"])([]),{color:function(){return"#000000"===this.entry.color.toUpperCase()?"$grey-strong":this.entry.color}}),methods:d({},Object(o["b"])([]))},u=l,p=(s("4267"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"6f7d3066",null);t["a"]=f.exports},"592c":function(e,t,s){"use strict";var n=s("7c00"),i=s.n(n);i.a},"5ab7":function(e,t,s){},"5aca":function(e,t,s){"use strict";var n=s("c54f"),i=s.n(n);i.a},"5b23":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.commentToEdit&&e.commentToEdit.id?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("comments.edit_title"))+"\n      ")]):e._e(),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"field"},[s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:"2"},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v("\n                  "+e._s(t.item.full_name)+"\n                ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.text,expression:"form.text"},{name:"focus",rawName:"v-focus"}],ref:"textField",staticClass:"input",domProps:{value:e.form.text},on:{keyup:function(t){return t.ctrlKey?e.runConfirmation(t):null},input:function(t){t.target.composing||e.$set(e.form,"text",t.target.value)}}})])],1)]),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.cancel"))+"\n        ")])]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v("\n        "+e._s(e.$t("assets.edit_fail"))+"\n      ")]):e._e()])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("53ff"),r=s.n(o),c=s("eb8c");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"edit-comment-modal",components:{AtTa:r.a,PeopleAvatar:c["a"]},props:["active","cancelRoute","isLoading","isError","commentToEdit","team"],watch:{commentToEdit:function(){this.commentToEdit&&this.commentToEdit.id?this.form.text=this.commentToEdit.text:this.form={text:""}},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.textField.focus()}),100)}},data:function(){return this.commentToEdit&&this.commentToEdit.id?{form:{text:this.commentToEdit.text}}:{form:{text:""}}},methods:{runConfirmation:function(e){13!==e.keyCode&&e.keyCode||this.$emit("confirm",l({id:this.commentToEdit.id},this.form))}}},p=u,f=(s("f52f"),s("2877")),h=Object(f["a"])(p,n,i,!1,null,"621d2267",null);t["a"]=h.exports},"5bf3":function(e,t,s){"use strict";var n=s("4cb5"),i=s.n(n);i.a},"5c0b":function(e,t,s){"use strict";var n=s("5e27"),i=s.n(n);i.a},"5c3d":function(e,t,s){e.exports=s.p+"img/spinner.c09255da.svg"},"5e27":function(e,t,s){},"5eef":function(e,t,s){},"5efb":function(e,t,s){},"5f48":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},on:{click:function(t){return e.$emit("confirm")}}},[e._v("\n            "+e._s(e.$t("main.confirmation"))+"\n          ")]),e.cancelRoute?s("router-link",{staticClass:"button is-text",attrs:{to:e.cancelRoute}},[e._v("\n            "+e._s(e.$t("main.cancel"))+"\n          ")]):s("button",{staticClass:"button is-text",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n            "+e._s(e.$t("main.cancel"))+"\n          ")])],1)])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"delete-modal",props:["text","active","cancelRoute","isLoading","isError","errorText"],computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]))},l=d,u=(s("826f"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"37caaffe",null);t["a"]=p.exports},6185:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return c}));s("8e6e"),s("ac6a"),s("456d");var n=s("bd86");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var o=function(e,t){for(var s={},n=0;n<e;n++){s[n]||(s[n]={});for(var i=0;i<t;i++)s[n][i]=!1}return s},r=function(e,t,s,n){for(var i=a({},e),o=t;o<s;o++){i[o]||(i[o]={});for(var r=0;r<n;r++)i[o][r]=!1}return i},c=function(e){for(var t=Object.keys(e).length,s=e[0]?Object.keys(e[0]).length:0,n=0;n<t;n++)for(var i=0;i<s;i++)e[n][i]&&(e[n][i]=!1);return e}},"620e":function(e,t,s){"use strict";var n=s("69ba"),i=s.n(n);i.a},6237:function(e,t,s){"use strict";var n=s("b302"),i=s.n(n);i.a},6345:function(e,t,s){"use strict";var n=s("8143"),i=s.n(n);i.a},6366:function(e,t,s){"use strict";var n=s("56f3"),i=s.n(n);i.a},"65e3":function(e,t,s){"use strict";var n=s("e990"),i=s.n(n);i.a},"66a5":function(e,t,s){e.exports=s.p+"img/empty_asset.bf75a153.png"},"66be":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o}));s("a481"),s("ac6a");var n=s("0e54"),i=s.n(n),a=function(e){var t="transparent";return e&&(t=e.task_type_color),{"border-left":"4px solid ".concat(t)}},o=function(e,t,s){var n=i()(e||"");return t&&t.forEach((function(e){var t=s[e];n=n.replace("@".concat(t.full_name),'<a class="mention" href="/people/'.concat(t.id,'">@').concat(t.full_name,"</a>"))})),n}},"66cf":function(e,t,s){},"66d4":function(e,t,s){"use strict";var n=s("4e8d"),i=s.n(n);i.a},"66e7":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"f",(function(){return i})),s.d(t,"e",(function(){return a})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return c}));s("ac4d"),s("8a81"),s("ac6a"),s("7514");var n=function(e){"Shot"===e.entity_type_name?(e.episode_name?e.full_entity_name="".concat(e.episode_name," / ").concat(e.sequence_name," / ").concat(e.entity_name):e.full_entity_name="".concat(e.sequence_name," / ").concat(e.entity_name),e.entity_path={name:"shot",params:{production_id:e.project_id,shot_id:e.entity_id}}):(e.full_entity_name="".concat(e.entity_type_name," / ").concat(e.entity_name),e.entity_path={name:"asset",params:{production_id:e.project_id,asset_id:e.entity_id}})},i=function(e,t){var s=e.find((function(e){return e.id===t.id}));return s&&Object.assign(s,t),s},a=function(e,t){return e.filter((function(e){return e.id!==t.id}))},o=function(e,t){return e.filter((function(e){return e!==t}))},r=function(e){var t={};return e.forEach((function(e){e.validations?Object.assign(t,e.validations):e.tasks.forEach((function(e){t[e.task_type_id]=e.id}))})),t},c=function(e,t){var s=[],n=[],i=null,a=!0,o=!1,r=void 0;try{for(var c,d=e[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var l=c.value;i&&l[t]!==i[t]&&(s.push(n.slice(0)),n=[]),n.push(l),i=l}}catch(u){o=!0,r=u}finally{try{a||null==d.return||d.return()}finally{if(o)throw r}}return s.push(n),s}},6925:function(e,t,s){"use strict";var n=s("5ab7"),i=s.n(n);i.a},"69ba":function(e,t,s){},"6a44":function(e,t,s){},"6ac8":function(e,t,s){},"6be5":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("article",{ref:"wrapper",class:{"add-comment":!0,"word-break":!0,media:!0,"is-dragging":e.isDragging},on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[e.light?e._e():s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:e.user}})],1)])]),s("div",{staticClass:"media-content"},[s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:2},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v("\n            "+e._s(t.item.full_name)+"\n          ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"commentTextarea",staticClass:"textarea flexrow-item",attrs:{placeholder:e.$t("comments.add_comment"),disabled:e.isLoading},domProps:{value:e.text},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runAddComment(e.text,e.task_status_id):null},input:function(t){t.target.composing||(e.text=t.target.value)}}})]),s("div",{staticClass:"flexrow preview-section"},[s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.$emit("add-preview")}}},[e._v("\n        "+e._s(e.$t("comments.add_preview"))+"\n      ")]),s("span",{staticClass:"attachment-file flexrow-item"},[e.isFileAttached?e._e():s("em",[e._v("\n          "+e._s(e.$t("comments.no_file_attached"))+"\n        ")]),e.isFileAttached?s("em",[e._v("\n          "+e._s(e.attachedFileName)+"\n        ")]):e._e()])]),s("div",{staticClass:"flexrow mt1"},[s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item status-combo-wrapper"},[s("combobox-status",{staticClass:"status-selector",attrs:{"task-status-list":e.taskStatus},model:{value:e.task_status_id,callback:function(t){e.task_status_id=t},expression:"task_status_id"}})],1),s("div",{staticClass:"flexrow-item post-button-wrapper"},[s("button",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},style:{"background-color":e.taskStatusColor},on:{click:function(t){return e.runAddComment(e.text,e.task_status_id)}}},[e._v("\n        "+e._s(e.$t("comments.post_status"))+"\n      ")])])]),e.isError?s("div",{staticClass:"error pull-right"},[s("em",[e._v(e._s(e.$t("comments.error")))])]):e._e()],1)])},i=[],a=(s("7514"),s("ac6a"),s("53ff")),o=s.n(a),r=s("56a0"),c=s("eb8c"),d={name:"add-comment",components:{AtTa:o.a,ComboboxStatus:r["a"],PeopleAvatar:c["a"]},data:function(){return{isDragging:!1,text:"",task_status_id:this.task.task_status_id}},props:{addComment:{type:Function,default:null},isLoading:{type:Boolean,default:null},isError:{type:Boolean,default:null},light:{type:Boolean,default:!1},task:{type:Object,default:function(){return[]}},taskStatus:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){}},attachedFileName:{type:String,default:""},team:{type:Array,default:function(){return[]}}},mounted:function(){var e=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:{isFileAttached:function(){return void 0!==this.attachedFileName&&this.attachedFileName.length>0},taskStatusColor:function(){var e=this,t=this.taskStatus.find((function(t){return t.id===e.task_status_id}))||this.taskStatus[0];return"todo"===t.short_name?"#666":t.color}},methods:{runAddComment:function(e,t){this.$emit("add-comment",e,t),this.text=""},updateValue:function(e){this.task_status_id=this.$refs.statusSelect.value},focus:function(){this.$refs.commentTextarea.focus()},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){for(var t=0;t<e.dataTransfer.files.length;t++){var s=new FormData;s.append("file",e.dataTransfer.files[t]),this.$emit("file-drop",s)}this.isDragging=!1}},watch:{task:function(){this.task_status_id=this.task.task_status_id}}},l=d,u=(s("1dea"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"afc16aec",null);t["a"]=p.exports},"6c12":function(e,t,s){},7038:function(e,t,s){"use strict";var n=s("6c12"),i=s.n(n);i.a},"712a":function(e,t,s){},7156:function(e,t,s){},"732b":function(e,t,s){e.exports=s.p+"img/empty_shot.8f70da90.png"},7365:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"name"},[s("div",{staticClass:"people-name"},[s("people-avatar",{staticClass:"avatar",attrs:{person:e.person}}),s("people-name",{staticClass:"people-name",attrs:{person:e.person}})],1)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("eb8c"),c=s("0073");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"people-name-cell",components:{PeopleName:c["a"],PeopleAvatar:r["a"]},props:{person:{type:Object,required:!0}},computed:l({},Object(o["c"])([])),methods:l({},Object(o["b"])([]))},p=u,f=(s("a109"),s("2877")),h=Object(f["a"])(p,n,i,!1,null,"4ddc0854",null);t["a"]=h.exports},"736c":function(e,t,s){"use strict";var n=s("5eef"),i=s.n(n);i.a},7434:function(e,t,s){},7798:function(e,t,s){},7930:function(e,t,s){"use strict";var n=s("4710"),i=s.n(n),a=s("6929"),o=s.n(a),r={},c={};t["a"]={fromString:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=new i.a({lightness:.7,saturation:.8});return(t||localStorage&&"true"===localStorage.getItem("dark-theme"))&&(s=new i.a({lightness:.6,saturation:.8})),s.hex(e)},validationBackgroundColor:function(e){return e?"wtg"===e.task_status_short_name?"#f5f5f5":"ip"===e.task_status_short_name?"#3273dc":"pndng"===e.task_status_short_name?"#ab26ff":"fin"===e.task_status_short_name?"#22d160":"rtk"===e.task_status_short_name?"#ff3860":"cfrm"===e.task_status_short_name?"#f1c40f":"recd"===e.task_status_short_name?"#1abc9c":e.task_status_color:"#ffffff"},validationTextColor:function(e){return e&&"todo"!==e.task_status_short_name&&"wtg"!==e.task_status_short_name?"white":"#333"},hexToRGBa:function(e,t){var s=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return t?"rgba("+s+", "+n+", "+i+", "+t+")":"rgb("+s+", "+n+", "+i+")"},darkenColor:function(e){return r[e]||(r[e]=o()(e).darken(.3).saturate(.6)),r[e]},lightenColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return c[e+t]||(c[e+t]=o()(e).fade(t)),c[e+t]}}},"795b":function(e,t,s){},"7bf8":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control flexrow"},[s("input",{ref:"input",class:"input flexrow-item"+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type,disabled:e.disabled,maxlength:e.maxlength,min:"0"},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()}}}),e.buttonLabel?s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.emitEnter()}}},[e._v("\n      "+e._s(e.buttonLabel)+"\n    ")]):e._e()])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("2f62"));function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"text-field",props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String},value:{default:"",type:[String,Number]},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String},buttonLabel:{default:"",type:String},maxlength:{default:524288,type:Number}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},l=d,u=(s("5037"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"45d78e8c",null);t["a"]=p.exports},"7c00":function(e,t,s){},"7c8c":function(e,t,s){"use strict";var n=s("b4ce"),i=s.n(n);i.a},"7d26":function(e,t,s){"use strict";var n=s("25e6"),i=s.n(n);i.a},"7d5f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-player"},[s("div",{ref:"video-wrapper",staticClass:"video-wrapper"},[e.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):e._e(),s("div",{staticClass:"canvas-wrapper"},[e.readOnly?e._e():s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"annotation-canvas"}})]),s("video",{ref:"movie",staticClass:"annotation-movie",style:{display:e.isLoading?"none":"block"},attrs:{id:"annotation-movie",preload:"auto",src:e.moviePath,poster:e.posterPath}}),e.isComparing&&e.previewToCompareId?s("video",{ref:"comparison-movie",staticClass:"annotation-movie",attrs:{id:"comparison-movie",preload:"auto",src:e.comparisonMoviePath,poster:e.comparisonPosterPath}}):e._e()]),s("div",{ref:"button-bar",staticClass:"button-bar"},[s("div",{staticClass:"video-progress pull-bottom"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])]),e.readOnly?e._e():s("annotation-bar",{ref:"annotation-bar",attrs:{annotations:e.annotations,maxDurationRaw:e.videoDuration},on:{"select-annotation":e.loadAnnotation}}),s("div",{staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[s("button",{staticClass:"button flexrow-item",on:{click:e.onPlayPauseClicked}},[e.isPlaying?s("pause-icon",{staticClass:"icon"}):e._e(),e.isPlaying?e._e():s("play-icon",{staticClass:"icon"})],1),!e.light||e.readOnly?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isRepeating},on:{click:e.onRepeatClicked}},[s("repeat-icon",{staticClass:"icon smaller"})],1):e._e(),s("span",{staticClass:"flexrow-item time-indicator"},[e._v("\n          "+e._s(e.currentTime)+"\n        ")]),!e.light||e.readOnly||e.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[e._v("\n        /\n        ")]):e._e(),!e.light||e.readOnly||e.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[e._v("\n         "+e._s(e.maxDuration)+"\n        ")]):e._e(),s("span",{staticClass:"flexrow-item time-indicator mr1"},[e._v("\n          ("+e._s(e.currentFrame)+")\n        ")]),!e.readOnly&&e.taskTypeOptions.length>0&&(!e.light||e.isFullScreen())?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isComparing,"comparison-button":!0},on:{click:e.onCompareClicked}},[s("copy-icon",{staticClass:"icon smaller"})],1):e._e(),e.readOnly||!e.isComparing||e.light&&!e.isFullScreen()?e._e():s("combobox",{staticClass:"comparison-combobox",attrs:{options:e.taskTypeOptions,"is-dark":!0},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),e.readOnly||!e.isComparing||e.light&&!e.isFullScreen()?e._e():s("combobox",{staticClass:"comparison-combobox",attrs:{options:e.previewFileOptions,"is-dark":!0},model:{value:e.previewToCompareId,callback:function(t){e.previewToCompareId=t},expression:"previewToCompareId"}})],1),s("div",{staticClass:"right flexrow"},[!e.readOnly&&e.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:e.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):e._e(),!e.readOnly&&e.isFullScreenEnabled?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isDrawing},on:{click:e.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):e._e(),e.readOnly?e._e():s("a",{staticClass:"button flexrow-item",attrs:{href:e.movieDlPath}},[s("download-icon",{staticClass:"icon"})],1),e.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:e.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):e._e()])])],1)])},i=[],a=(s("8e6e"),s("20d6"),s("55dd"),s("7514"),s("6762"),s("2fdb"),s("7f7f"),s("f576"),s("bd86")),o=(s("ac6a"),s("456d"),s("2f62")),r=s("7a94"),c=s("0a35"),d=s("bcd2"),l=s("8707"),u=s("992f"),p=s("be83"),f=s("9fbc");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={name:"video-player",mixins:[f["a"]],components:{AnnotationBar:l["a"],CopyIcon:c["g"],Combobox:u["a"],DownloadIcon:c["i"],Edit2Icon:c["j"],MaximizeIcon:c["r"],PauseIcon:c["u"],PlayIcon:c["v"],RepeatIcon:c["x"],Spinner:p["a"],XIcon:c["I"]},props:{preview:{type:Object,default:function(){}},entityPreviewFiles:{type:Object,default:function(){}},taskTypeMap:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{annotations:[],currentTime:"00:00.00",currentTimeRaw:0,fabricCanvas:null,isComparing:!1,isDrawing:!1,isLoading:!1,isPlaying:!1,isRepeating:!1,maxDuration:"00:00.00",previewToCompareId:null,taskTypeId:this.entityPreviewFIles?Object.keys(this.entityPreviewFiles)[0]:null,videoDuration:0}},mounted:function(){var e=this;this.reloadAnnotations(),this.container.style.height=this.getDefaultHeight()+"px",this.isLoading=!0,this.setupFabricCanvas(),setTimeout((function(){e.video&&(e.video.addEventListener("loadedmetadata",(function(){e.configureVideo(),e.onWindowResize(),e.isLoading=!1,e.setDefaultComparisonTaskType()})),e.video.addEventListener("ended",(function(){e.isLoading=!1})),e.video.addEventListener("error",(function(){e.$refs.movie.style.height=e.getDefaultHeight()-90+"px",e.isLoading=!1})),window.addEventListener("keydown",e.onKeyDown,!1),window.addEventListener("resize",e.onWindowResize),e.video.addEventListener("timeupdate",e.onTimeUpdate))}),0)},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},computed:m({},Object(o["c"])(["currentProduction"]),{currentFrame:function(){return console.log(this.currentTimeRaw,parseInt(this.fps)),"".concat(Math.floor(this.currentTimeRaw*this.fps)).padStart(3,"0")},canvas:function(){return this.$refs["annotation-canvas"]},container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},isVideo:function(){return this.$refs.movie&&this.videoDuration&&this.videoDuration>0},moviePath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,".mp4")},movieDlPath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,"/download")},posterPath:function(){return"/api/pictures/previews/preview-files/".concat(this.preview.id,".png")},comparisonMoviePath:function(){return"/api/movies/originals/preview-files/".concat(this.previewToCompareId,".mp4")},comparisonPosterPath:function(){return"/api/pictures/originals/preview-files/".concat(this.previewToCompareId,".png")},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},video:function(){return this.$refs.movie},comparisonVideo:function(){return this.$refs["comparison-movie"]},videoWrapper:function(){return this.$refs["video-wrapper"]},taskTypeOptions:function(){var e=this,t=Object.keys(this.entityPreviewFiles);return t.filter((function(t){return e.entityPreviewFiles[t].length>1||1===e.entityPreviewFiles[t].length&&e.entityPreviewFiles[t][0].id!==e.preview.id})).map((function(t){var s=e.taskTypeMap[t];return s?{label:s.name,value:s.id}:{label:"",value:""}}))},previewFileOptions:function(){var e=this,t=this.entityPreviewFiles[this.taskTypeId];return t?(t=t.filter((function(t){return t.id!==e.preview.id})),t&&t.length>0?t.map((function(e){return{label:"v".concat(e.revision),value:e.id}})):[]):[]}}),methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&(!this.light||this.readOnly)?500:200},getDimensions:function(){var e=this.video.videoHeight/this.video.videoWidth,t=this.container.offsetWidth-1,s=Math.floor(t*e);return s=Math.min(s,this.getDefaultHeight()-60),t=Math.floor(s/e),{width:t,height:s}},getTimelinePosition:function(e,t){if(this.$refs.movie){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},setCurrentTime:function(e){if(e=Object(d["a"])(e,this.fps),this.progress.value=e,this.progressBar.style.width=Math.floor(e/this.video.duration*100)+"%",this.clearCanvas(),this.video.currentTime=e,this.isComparing){var t=document.getElementById("comparison-movie");t&&(t.currentTime=e)}},configureVideo:function(){this.reloadAnnotations(),this.video.addEventListener("timeupdate",this.updateProgressBar),this.video.onended=this.onVideoEnd,0===this.video.currentTime&&(this.clearCanvas(),this.mountVideo())},mountVideo:function(){if(this.video.mute=!0,this.videoDuration=this.video.duration,this.progress.setAttribute("max",this.videoDuration),this.maxDuration=this.formatTime(this.videoDuration),this.isLoading=!1,this.isPlaying=!1,this.isRepeating=!1,this.container){var e=this.getDimensions(),t=e.width,s=e.height;if(s>0)if(this.isComparing){this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=t/2+"px",this.video.style.height=s/2+"px";var n=document.getElementById("comparison-movie");n&&(n.style.width=t/2+"px",n.style.height=s/2+"px"),this.videoWrapper.style.width=t+"px",this.videoWrapper.style.height=s+"px"}else this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=t+"px",this.video.style.height=s+"px",this.videoWrapper.style.width=t+"px",this.videoWrapper.style.height=s+"px";this.readOnly||this.resetCanvas()}},onTimeUpdate:function(e){this.video?this.currentTimeRaw=this.video.currentTime:this.currentTimeRaw=0},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},setupFabricCanvas:function(){var e=this;if(!this.readOnly)return this.fabricCanvas=new r["fabric"].Canvas("annotation-canvas"),this.fabricCanvas.on("object:moved",this.saveAnnotations),this.fabricCanvas.on("object:scaled",this.saveAnnotations),this.fabricCanvas.on("mouse:up",(function(){e.isDrawing&&e.saveAnnotations()})),this.fabricCanvas.setDimensions({width:100,height:100}),this.fabricCanvas.freeDrawingBrush.color="#ff3860",this.fabricCanvas.freeDrawingBrush.width=4,this.fabricCanvas},play:function(){if(this.clearCanvas(),this.isPlaying=!0,this.readOnly||(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1),this.video.play(),this.isComparing){var e=document.getElementById("comparison-movie");e&&e.play()}},pause:function(){if(this.isPlaying=!1,this.video.pause(),this.isComparing){var e=document.getElementById("comparison-movie");e&&e.pause()}},goPreviousFrame:function(){var e=this.video.currentTime-1/this.fps;e<0?this.setCurrentTime(0):this.setCurrentTime(e);var t=this.getAnnotation(this.video.currentTime);t&&this.loadAnnotation(t)},goNextFrame:function(){var e=this.video.currentTime+1/this.fps;e>this.video.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(e);var t=this.getAnnotation(this.video.currentTime);t&&this.loadAnnotation(t)},formatTime:function(e){var t=".".concat(Math.round(e%1*100));2===t.length&&(t+="0");try{return new Date(1e3*e).toISOString().substr(14,5)+t}catch(s){return console.error(s),"00:00.00"}},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onVideoEnd:function(){if(this.isPlaying=!1,this.isRepeating){if(this.video.currentTime=0,this.isComparing){var e=document.getElementById("comparison-movie");e&&(e.currentTime=0)}this.progress.value=0,this.play()}},onPlayPauseClicked:function(){this.video.paused||this.video.ended?this.play():this.pause()},onRepeatClicked:function(){this.isRepeating?this.isRepeating=!1:this.isRepeating=!0},onCompareClicked:function(){var e=this;this.isComparing?(this.isComparing=!1,this.mountVideo()):(this.isComparing=!0,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1),this.isDrawing=!1,this.$nextTick((function(){e.mountVideo(),e.$nextTick((function(){var t=e.getAnnotation(e.video.currentTime);t&&e.loadAnnotation(t)}))})))},onProgressClicked:function(e){var t=this.progress.offsetLeft;0!==t||this.isFullScreen()||(t=this.progress.parentElement.offsetParent.offsetLeft-10);var s=(e.pageX-t)/this.progress.offsetWidth,n=s*this.video.duration;this.setCurrentTime(n)},updateProgressBar:function(){this.progress.getAttribute("max")||this.progress.setAttribute("max",this.video.duration),this.progress.value=1*this.video.currentTime;var e=Math.floor(this.video.currentTime/this.video.duration*100);this.progressBar.style.width=e+"%",this.currentTime=this.formatTime(this.video.currentTime)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},onScaled:function(e){var t=e.target;t&&t.set({strokeWidth:8/(t.scaleX+t.scaleY)})},onPencilAnnotateClicked:function(){this.isDrawing?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(e){var t=this,s=(new Date).getTime();this.lastCall=this.lastCall||0,s-this.lastCall>600&&(this.lastCall=s,this.$nextTick((function(){t.mountVideo(),t.reloadAnnotations();var s=t.getAnnotation(t.video.currentTime);t.$nextTick((function(){s&&t.loadAnnotation(s)})),e&&"function"===typeof e&&e()})))},onKeyDown:function(e){["INPUT","TEXTAREA"].includes(e.target.tagName)||(46===e.keyCode&&this.fabricCanvas?this.deleteSelection():37===e.keyCode?this.goPreviousFrame():39===e.keyCode?this.goNextFrame():32===e.keyCode&&this.onPlayPauseClicked())},getAnnotation:function(e){return e=Object(d["a"])(e,this.fps),this.annotations.find((function(t){return t.time===e}))},saveAnnotations:function(){var e=Object(d["a"])(this.video.currentTime,this.fps)||0,t=this.getAnnotation(e),s=this.getNewAnnotations(e,t);this.$emit("annotationchanged",{preview:this.preview,annotations:s})},loadAnnotation:function(e){var t=this;if(e){var s=e.time||0;s=Object(d["a"])(s,this.fps),this.video.pause(),this.fabricCanvas||this.setupFabricCanvas(),this.resetCanvasSize(),this.video.currentTime=s,this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearCanvas();var n=1,i=1;e.width&&(n=this.fabricCanvas.width/e.width,i=this.fabricCanvas.width/e.width),e.height&&(i=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(e){var s={left:e.left*n,top:e.top*i,fill:"transparent",stroke:"#ff3860",strokeWidth:4,radius:e.radius,width:e.width,height:e.height,scaleX:e.scaleX*n,scaleY:e.scaleY*i};if("path"===e.type){var a=1;e.canvasWidth&&(a=e.canvasWidth/t.fabricCanvas.width);var o=new r["fabric"].Path(e.path,m({},s,{strokeWidth:3*a,canvasWidth:e.canvasWidth}));o.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(o)}}))}else console.error("Annotations are malformed and cannot be loaded.")},reloadAnnotations:function(){if(!this.readOnly){if(this.annotations=[],this.preview.annotations){var e=[];this.preview.annotations.forEach((function(t){return e.push(m({},t))})),this.annotations=e.sort((function(e,t){return e.time<t.time}))||[]}else this.annotations=[];return this.annotations}},getAnnotationStyles:function(e,t){return{cursor:"pointer",position:"relative",display:"inline-block",left:this.getTimelinePosition(e.time,t)+"px"}},deleteSelection:function(){this.fabricCanvas.remove(this.fabricCanvas.getActiveObject()),this.saveAnnotations()},setDefaultComparisonTaskType:function(){var e=this;if(!this.readOnly){var t=Object.keys(this.entityPreviewFiles);if(t&&t.length>0){var s=this.taskTypeOptions.find((function(t){return e.entityPreviewFiles[t.value].findIndex((function(t){return t.id===e.preview.id}))>=0}));s?this.taskTypeId=s.value:this.taskTypeOptions.length>0&&(this.taskTypeId=this.taskTypeOptions[0].value),this.taskTypeId&&this.setDefaultComparisonPreview()}else this.previewToCompareId=null}},setDefaultComparisonPreview:function(){var e=this,t=this.entityPreviewFiles[this.taskTypeId];t?(t=t.filter((function(t){return t.id!==e.preview.id})),t.length>0?this.previewToCompareId=t[0].id:this.previewToCompareId=null):this.previewToCompareId=null},resetCanvas:function(){this.fabricCanvas||this.setupFabricCanvas(),this.resetCanvasSize(),this.fabricCanvas.renderAll(),this.clearCanvas();var e=this.getAnnotation(this.video.currentTime);e&&this.loadAnnotation(e)},resetCanvasSize:function(){if(this.$refs["movie"]){var e=this.$refs["movie"].offsetWidth,t=this.$refs["movie"].offsetHeight;this.fabricCanvas.setDimensions({width:e,height:t})}}},watch:{preview:function(){this.maxDuration="00:00.00",this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.reloadAnnotations(),this.isComparing&&(this.isComparing=!1,this.mountVideo()),this.setDefaultComparisonTaskType()},previewToCompareId:function(){if(this.isComparing){this.pause();var e=this.video.currentTime;this.$nextTick((function(){var t=document.getElementById("comparison-movie");t&&(t.currentTime=e)}))}},taskTypeId:function(){this.setDefaultComparisonPreview()},light:function(){this.onWindowResize()}}},v=_,b=(s("6237"),s("2877")),g=Object(b["a"])(v,n,i,!1,null,"5ef2055a",null);t["a"]=g.exports},8019:function(e,t,s){"use strict";var n=s("abd7"),i=s.n(n);i.a},8078:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container"},[s("div",{ref:"model-viewer",class:{light:e.light&&!e.readOnly},attrs:{id:"model-viewer"}}),s("div",{staticClass:"viewer-actions flexrow"},[e.isLoading?s("span",[e._v(e._s(e.$t("main.loading")))]):e._e(),s("span",{staticClass:"filler"}),e.readOnly?e._e():s("a",{staticClass:"button flexrow-item",attrs:{href:e.previewDlPath}},[s("download-icon",{staticClass:"icon"})],1),s("button",{staticClass:"button flexrow-item",on:{click:e.goFullScreen}},[s("maximize-icon",{staticClass:"icon"})],1)])])},i=[],a=s("0a35"),o=s("9d51"),r={name:"model-viewer",components:{DownloadIcon:a["i"],MaximizeIcon:a["r"]},data:function(){return{isLoading:!1}},props:{previewUrl:{default:"",type:String},previewDlPath:{default:"",type:String},light:{default:!1,type:Boolean},readOnly:{default:!1,type:Boolean}},computed:{element:function(){return this.$refs["model-viewer"]},container:function(){return this.$refs["container"]}},methods:{goFullScreen:function(){Object(o["b"])(this.element)},loadObject:function(){var e=this;console.log("start"),this.isLoading=!0,Object(o["c"])(this.scene,this.previewUrl,null,(function(){e.isLoading=!1}))}},mounted:function(){var e=this;setTimeout((function(){e.scene=Object(o["d"])(e.element),e.loadObject()}),100)},watch:{previewUrl:function(){Object(o["a"])(this.scene),this.loadObject()},light:function(){var e=this;Object(o["a"])(this.scene),this.element.innerHTML="",setTimeout((function(){e.scene=Object(o["d"])(e.element),Object(o["c"])(e.scene,e.previewUrl)}),100)}}},c=r,d=(s("9960"),s("2877")),l=Object(d["a"])(c,n,i,!1,null,"33c75fbd",null);t["a"]=l.exports},8143:function(e,t,s){},"821b":function(e,t,s){},"826f":function(e,t,s){"use strict";var n=s("4e2d"),i=s.n(n);i.a},8485:function(e,t,s){},8707:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"playlist-annotation",staticClass:"annotation-bar"},e._l(e.annotations,(function(t,n){return s("span",{key:"annotation-"+n,staticClass:"annotation-mark",style:{left:e.getAnnotationPosition(t)+"px"},on:{click:function(s){return e.$emit("select-annotation",t)}}})})),0)},i=[],a=(s("c5f6"),{name:"annotation-bar",props:{annotations:{default:function(){return[]},type:Array},maxDurationRaw:{default:0,type:Number},width:{default:0,type:Number}},methods:{getAnnotationPosition:function(e){var t=e.time/this.maxDurationRaw,s=this.width;if(0===s){var n=this.$parent.progress,i=n.getBoundingClientRect();s=i.width}return s*t-3}}}),o=a,r=(s("a574"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"7f4a1724",null);t["a"]=c.exports},8751:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",{staticClass:"subtitle"},[e._v(e._s(e.text))])},i=[],a={name:"page-subtitle",props:{text:{default:"",type:String}}},o=a,r=(s("fb36"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"67ee08da",null);t["a"]=c.exports},"8a49":function(e,t,s){"use strict";var n=s("20e2"),i=s.n(n);i.a},"8ab4":function(e,t,s){"use strict";var n=s("2ca8"),i=s.n(n);i.a},"8b77":function(e,t,s){},"8bd9":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{class:{comment:!0,pinned:e.comment.pinned,highlighted:e.highlighted},style:{"border-left":"6px solid "+e.comment.task_status.color}},[n("div",{staticClass:"media"},[n("figure",{staticClass:"media-left"},[n("people-avatar",{staticClass:"level-item",attrs:{person:e.comment.person}})],1),n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"comment-person flexrow"},[n("div",{staticClass:"flexrow-item"},[n("strong",{},[n("people-name",{attrs:{person:e.comment.person}})],1),n("span",{staticClass:"comment-date"},[e._v("\n            "+e._s(e.formatDate(e.comment.created_at))+"\n          ")]),!e.light&&e.comment.previews.length>0?n("router-link",{staticClass:"revision",attrs:{to:e.previewRoute}},[e._v("\n            "+e._s(e.$t("comments.revision"))+" "+e._s(e.comment.previews[0].revision)+"\n          ")]):e._e()],1),n("span",{staticClass:"filler"}),n("div",{staticClass:"flexrow-item menu-wrapper"},[n("chevron-down-icon",{staticClass:"menu-icon",on:{click:e.toggleCommentMenu}}),n("comment-menu",{ref:"menu",attrs:{"is-pinned":e.comment.pinned,"is-editable":e.editable},on:{"pin-clicked":function(t){return e.$emit("pin-comment",e.comment)},"edit-clicked":function(t){e.$emit("edit-comment",e.comment),e.toggleCommentMenu()},"delete-clicked":function(t){e.$emit("delete-comment",e.comment),e.toggleCommentMenu()}}})],1)]),n("div",[e.light&&e.comment.previews.length>0?n("router-link",{staticClass:"revision",attrs:{to:e.previewRoute}},[e._v("\n          "+e._s(e.$t("comments.revision"))+" "+e._s(e.comment.previews[0].revision)+"\n        ")]):e._e()],1),"Done"===e.comment.task_status.name?n("p",[n("span",{style:{color:e.comment.task_status.color}},[e._v("\n          "+e._s(e.$t("comments.validated"))+"\n        ")])]):e._e(),e.taskStatus.is_done&&e.isLast?n("p",[n("img",{attrs:{src:s("ce80")}})]):e._e(),e.comment.text?n("p",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(e.comment.text,e.comment.mentions,e.personMap))}}):n("p",{staticClass:"comment-text empty word-break"},[e._v("\n        "+e._s(e.$t("comments.empty_text"))+"\n      ")]),e.checklist.length>0?n("div",e._l(e.checklist,(function(t,s){return n("div",{key:"comment-checklist-"+e.comment.id+"-"+s,class:{"checklist-entry":!0,flexrow:!0,checked:t.checked}},[n("span",{staticClass:"flexrow-item",on:{click:function(s){return e.toggleEntryChecked(t)}}},[t.checked?n("check-square-icon",{staticClass:"icon"}):n("square-icon",{staticClass:"icon"})],1),n("textarea-autosize",{ref:"checklist-entry-"+s,refInFor:!0,staticClass:"checklist-text flexrow-item",attrs:{type:"text",rows:"1",disabled:!e.isChangeChecklistAllowed},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addChecklistEntry(s,t))},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"backspace",void 0,t.key,void 0)?null:e.removeChecklistEntry(s)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.focusPrevious(s)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.focusNext(s)},function(t){return e.emitChangeEvent(t)}]},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"entry.text"}})],1)})),0):e._e(),e.comment.pinned?n("p",{staticClass:"pinned-text"},[e._v("\n        "+e._s(e.$t("comments.pinned"))+"\n      ")]):e._e()])])]),e.isAddChecklistAllowed?n("div",{staticClass:"has-text-centered add-checklist",on:{click:function(t){return e.addChecklistEntry(-1)}}},[e._v("\n    "+e._s(e.$t("comments.add_checklist"))+"\n  ")]):e._e()])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=s("75fc"),r=s("2f62"),c=s("3657"),d=s("66be"),l=s("66e7"),u=s("0a35"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"main",staticClass:"comment-menu hidden"},[s("div",{on:{click:e.onPinClicked}},[e.isPinned?s("span",[e._v("\n      "+e._s(e.$t("comments.unpin"))+"\n    ")]):s("span",[e._v(e._s(e.$t("comments.pin")))])]),e.isEditable?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v("\n    "+e._s(e.$t("main.edit"))+"\n  ")]):e._e(),e.isEditable?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v("\n    "+e._s(e.$t("main.delete"))+"\n  ")]):e._e()])},f=[];function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={name:"comment-menu",props:{isPinned:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1},isEditable:{type:Boolean,default:!0}},data:function(){return{}},computed:m({},Object(r["c"])([])),methods:m({},Object(r["b"])([]),{toggle:function(){var e=this.$refs.main;"comment-menu"===e.className?e.className="comment-menu hidden":e.className="comment-menu"},onPinClicked:function(){this.$emit("pin-clicked"),this.toggle()}})},v=_,b=(s("49b6"),s("2877")),g=Object(b["a"])(v,p,f,!1,null,"762a3f7a",null),y=g.exports,k=s("eb8c"),S=s("0073");function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var T={name:"comment",components:{CheckSquareIcon:u["c"],ChevronDownIcon:u["d"],CommentMenu:y,PeopleAvatar:k["a"],PeopleName:S["a"],SquareIcon:u["D"]},data:function(){return{checklist:[]}},props:{comment:{type:Object,default:function(){}},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},light:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},mounted:function(){this.comment.checklist&&(this.checklist=Object(o["a"])(this.comment.checklist))},computed:O({},Object(r["c"])(["currentProduction","user","personMap","taskMap","taskTypeMap","taskStatusMap"]),{previewRoute:function(){var e={name:"task",params:{task_id:this.comment.object_id,production_id:this.currentProduction.id}};this.comment.previews.length>0&&(e={name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.previews[0].id,production_id:this.currentProduction.id}}),this.$route.params.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=this.$route.params.episode_id);var t=this.taskMap[this.comment.object_id],s=this.taskTypeMap[t.task_type_id];return e.params.type=s.for_shots?"shots":"assets",e},deleteCommentPath:function(){return this.getPath("task-delete-comment")},editCommentPath:function(){return this.getPath("task-edit-comment")},addPreviewPath:function(){return this.getPath("task-add-preview")},taskStatus:function(){var e=this.taskStatusMap[this.comment.task_status.id];return e||this.comment.task_status},isAddChecklistAllowed:function(){return this.taskStatus.is_retake&&0===this.checklist.length&&this.user.id===this.comment.person_id},isChangeChecklistAllowed:function(){return this.taskStatus.is_retake&&this.user.id===this.comment.person_id}}),methods:{formatDate:function(e){return Object(c["a"])(e)},getPath:function(e){var t={name:e,params:{task_id:this.comment.object_id,comment_id:this.comment.id}};return this.$route.params.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=this.$route.params.episode_id),t},toggleCommentMenu:function(){this.$refs.menu.toggle()},addChecklistEntry:function(e,t){var s=this;t&&(this.checklist[e].text=this.checklist[e].text.trim()),-1!==e&&e!==this.checklist.length-1||this.checklist.push({text:"",checked:!1}),this.$nextTick((function(){s.focusNext(e)}))},removeChecklistEntry:function(e){var t=this.checklist[e];0===t.text.length&&(this.checklist=Object(l["d"])(this.checklist,t),this.focusPrevious(e))},toggleEntryChecked:function(e){e.checked=!e.checked,this.emitChangeEvent()},focusPrevious:function(e){if(this.checklist.length>0){0===e&&(e=this.checklist.length),e--;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},focusNext:function(e){if(this.checklist.length>0){e===this.checklist.length-1&&(e=-1),e++;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},emitChangeEvent:function(e){var t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>1e3&&(this.lastCall=t,this.$emit("checklist-updated",this.comment,this.checklist.filter((function(e){return e.text&&e.text.length>0}))))},renderComment:d["b"]},watch:{checklist:function(){this.emitChangeEvent()}}},C=T,P=(s("efab"),Object(b["a"])(C,n,i,!1,null,"007a30e1",null));t["a"]=P.exports},"8bf0":function(e,t,s){},"8c97":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));s("3b2b"),s("a481"),s("f576"),s("4917");t["a"]={generateNextName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=e.match(/\d+$/);if(s){var n=s[0],i=e.substring(0,e.length-n.length),a=parseInt(n);return 1===a&&10===t?a=10:a+=t,i+String(a).padStart(n.length,"0")}return""},shortenText:function(e,t){var s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"...",s=s.replace(/\n/g," ")),s}};var n=function(e){e=e.replace(/^\s+|\s+$/g,"").toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:",s="aaaaeeeeiiiioooouuuunc------",n=0,i=t.length;n<i;n++)e=e.replace(new RegExp(t.charAt(n),"g"),s.charAt(n));return e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_")}},"8d07":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"title hide-small-screen"},[e._v(e._s(e.text))])},i=[],a={name:"page-title",props:{text:{default:"",type:String}}},o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"ead134bc",null);t["a"]=c.exports},"8d3c":function(e,t,s){"use strict";var n=s("df2c"),i=s.n(n);i.a},"8ecf":function(e,t,s){},"8f49":function(e,t,s){"use strict";var n=s("93f7"),i=s.n(n);i.a},"900a":function(e,t,s){},9224:function(e){e.exports={a:"0.10.50"}},"93f7":function(e,t,s){},"95de":function(e,t,s){"use strict";var n=s("074d"),i=s.n(n);i.a},"971a":function(e,t,s){"use strict";var n=s("e446"),i=s.n(n);i.a},"976d":function(e,t,s){"use strict";var n=s("f38a"),i=s.n(n);i.a},"978d":function(e,t,s){},"97c8":function(e,t,s){"use strict";var n=s("8b77"),i=s.n(n);i.a},9856:function(e,t,s){},"992f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0,"is-top":this.isTop}},[s("select",{ref:"select",staticClass:"select-input",attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,n){return s("option",{key:n+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v("\n          "+e._s(e.getOptionLabel(t))+"\n        ")])})),0)])])])},i=[],a={name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:String},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isTop:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},emitEnter:function(){this.$emit("enter",this.$refs.select.value)},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}},o=a,r=(s("97c8"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"a55ff27a",null);t["a"]=c.exports},9960:function(e,t,s){"use strict";var n=s("33d0"),i=s.n(n);i.a},"9b9d":function(e,t,s){"use strict";var n=s("49c1"),i=s.n(n);i.a},"9d8b":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return d}));s("7f7f");var n=function(e,t,s,n,i){var a=e.project_id?e.project_id:t.id,o={name:"task",params:{production_id:a,task_id:e.id}};s&&n&&(o.name="episode-task",o.params.episode_id=e.episode_id||n.id);var r=i[e.task_type_id];return o.params.type=r.for_shots?"shots":"assets",o},i=function(e,t){if(e){var s=e.entity_type_name,n=e.entity?e.entity.id:e.entity_id,i={name:"Shot"===s?"shot":"asset",params:{production_id:e.project_id}};return"Shot"===s?i.params.shot_id=n:i.params.asset_id=n,t&&(i.name="episode-".concat(i.name),i.params.episode_id=t),i}return{name:"open-productions"}},a=function(e,t){return{name:e,params:{production_id:t}}},o=function(e,t){return t&&(e.name="episode-".concat(e.name),e.params.episode_id=t),e},r=function(e,t,s){return o(a(e,t),s)},c=function(e,t,s,n){var i=r("task-type-schedule",t,s);return i.params.task_type_id=e,i.params.type=n,i},d=function(e){return a("schedule",e)}},"9d94":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.task?s("div",{ref:"side-panel",staticClass:"side task-info",style:e.panelStyle},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow header-title"},[s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:e.taskEntityPath}},[e._v("\n          "+e._s(e.task?e.title:"Loading...")+"\n        ")])],1),e.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":e.currentTaskType,"production-id":e.currentProduction.id}}):e._e()],1),s("div",{staticClass:"flexrow task-information"},[e.isWide&&e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"right",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"left",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e._e(),e.isCurrentUserManager&&e.isPreview?s("button-simple",{staticClass:"flexrow-item set-thumbnail-button",attrs:{icon:"image",disabled:!e.isSetThumbnailAllowed,title:e.$t("tasks.set_preview")},on:{click:e.setCurrentPreviewAsEntityThumbnail}}):e._e(),e.isAssigned?e._e():s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:e.isAssigned||e.isSubscribed},on:{click:e.toggleSubscribe}}),s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:e.task,"is-static":!0}}),s("div",{staticClass:"filler"}),e.isPreview?s("div",{staticClass:"preview-list flexrow"},[e._l(e.lastFivePreviews,(function(t,n){return s("span",{key:"preview-"+t.revision,class:{"flexrow-item":!0,selected:e.currentPreviewIndex===n},on:{click:function(t){return e.onPreviewChanged(n)}}},[e._v("\n          "+e._s(t.revision)+"\n        ")])})),s("router-link",{staticClass:"history-button flexrow-item",attrs:{to:e.taskPath}},[e._v("\n          ...\n        ")])],2):e._e()],1)]),s("div",{ref:"task-columns",staticClass:"task-columns"},[e.isPreview?s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"preview"},[s("div",{staticClass:"preview-picture"},[e.isMoviePreview?s("div",[s("video-player",{ref:"preview-movie",attrs:{preview:e.currentPreview,"entity-preview-files":e.taskEntityPreviews,"task-type-map":e.taskTypeMap,light:!e.isWide},on:{annotationchanged:e.onAnnotationChanged}})],1):e.isStandardPreview?s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",staticClass:"button",attrs:{href:e.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v("\n                  "+e._s(e.$t("tasks.download_pdf_file",{extension:e.extension}))+"\n                ")])],1)]):e.is3DModelPreview?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":e.currentPreviewPath,"preview-dl-path":e.currentPreviewDlPath,light:!e.isWide}}):e.isPicturePreview?s("picture-viewer",{ref:"preview-picture",attrs:{preview:e.currentPreview,light:!e.isWide},on:{"annotation-changed":e.onAnnotationChanged,"add-preview":e.onAddExtraPreview}}):e._e(),e.taskPreviews&&0!==e.taskPreviews.length?e._e():s("div",{staticClass:"no-preview"},[s("em",[e._v(e._s(e.$t("tasks.no_preview")))])])],1)])])]):e._e(),s("div",{staticClass:"task-column comments-column"},[s("div",[s("div",[e.isCommentingAllowed?s("add-comment",{ref:"add-comment",attrs:{user:e.user,team:e.currentTeam,task:e.task,"task-status":e.taskStatusForCurrentUser,light:!0,"is-loading":e.loading.addComment,"attached-file-name":e.attachedFileName,"is-error":e.errors.addComment},on:{"add-comment":e.addComment,"add-preview":e.onAddPreviewClicked,"file-drop":e.selectFile}}):e._e(),e.taskComments.length>0&&!e.loading.task?s("div",{staticClass:"comments"},e._l(e.taskComments,(function(t,n){return s("comment",{key:"comment"+t.id,attrs:{comment:t,light:!0,"add-preview":e.onAddPreviewClicked,"is-last":n===e.pinnedCount,editable:t.person&&e.user.id===t.person.id},on:{"pin-comment":e.onPinComment,"edit-comment":e.onEditComment,"delete-comment":e.onDeleteComment,"checklist-updated":e.saveComment}})})),1):e.loading.task?e._e():s("div",{staticClass:"no-comment"},[s("em",[e._v("\n              "+e._s(e.$t("tasks.no_comment"))+"\n            ")])])],1)]),e.loading.task?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e()])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:e.modals.addPreview,"is-loading":e.loading.addPreview,"is-error":e.errors.addPreview},on:{cancel:e.onClosePreview,fileselected:e.selectFile,confirm:e.onClosePreview}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:e.modals.addExtraPreview,"is-loading":e.loading.addExtraPreview,"is-error":e.errors.addExtraPreview,"form-data":e.addExtraPreviewFormData,extensions:".png,.jpg,.jpeg"},on:{cancel:e.onCloseExtraPreview,fileselected:e.selectFile,confirm:e.createExtraPreview}}),s("edit-comment-modal",{attrs:{active:e.modals.editComment,"is-loading":e.loading.editComment,"is-error":e.errors.editComment,"comment-to-edit":e.commentToEdit,team:e.currentTeam},on:{confirm:e.confirmEditTaskComment,cancel:e.onCancelEditComment}}),s("delete-modal",{attrs:{active:e.modals.deleteComment,"is-loading":e.loading.deleteComment,"is-error":e.errors.deleteComment,text:e.$t("tasks.delete_comment"),"error-text":e.$t("tasks.delete_comment_error")},on:{confirm:e.confirmDeleteTaskComment,cancel:e.onCancelDeleteComment}})],1):s("div",{staticClass:"side task-info has-text-centered"},[e._v("\n  "+e._s(e.$t("tasks.no_task_selected"))+"\n")])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("6762"),s("2fdb"),s("7514"),s("bd86")),o=s("2f62"),r=s("0a35"),c=s("9d8b"),d=s("66be"),l=s("6be5"),u=s("ee35"),p=s("de40"),f=s("8bd9"),h=s("5f48"),m=s("5b23"),_=s("8078"),v=s("41e2"),b=s("be83"),g=s("d228"),y=s("274f"),k=s("fe13"),S=s("7d5f");function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var T={name:"task-info",components:{AddComment:l["a"],AddPreviewModal:u["a"],ButtonSimple:p["a"],Comment:f["a"],DownloadIcon:r["i"],DeleteModal:h["a"],EditCommentModal:m["a"],ModelViewer:_["a"],PictureViewer:v["a"],Spinner:b["a"],SubscribeButton:g["a"],TaskTypeName:y["a"],ValidationTag:k["a"],VideoPlayer:S["a"]},props:{task:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!0},isPreview:{type:Boolean,default:!0}},data:function(){return{addExtraPreviewFormData:null,attachedFileName:"",currentPreviewIndex:0,currentPreviewPath:"",currentPreviewDlPath:"",commentToEdit:null,isSubscribed:!1,isWide:!1,otherPreviews:[],taskComments:[],taskPreviews:[],errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,task:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,task:!1},modals:{addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1}}},mounted:function(){this.loadTaskData(),this.$refs["add-comment"]&&(this.$refs["add-comment"].text=this.lastCommentDraft)},beforeDestroy:function(){var e="".concat(this.$refs["add-comment"].text);this.$store.commit("SET_LAST_COMMENT_DRAFT",e)},computed:O({},Object(o["c"])(["currentEpisode","currentProduction","getTaskComment","getTaskComments","getTaskPreviews","isCurrentUserManager","isSingleEpisode","isTVShow","lastCommentDraft","personMap","previewFormData","productionMap","taskEntityPreviews","taskStatusForCurrentUser","taskTypeMap","user"]),{currentTeam:function(){var e=this,t=this.productionMap[this.task.project_id];return t.team.map((function(t){return e.personMap[t]}))},title:function(){if(this.task){var e=this.task.full_entity_name||this.task.entity_name;return"".concat(e)}return"Loading..."},isAssigned:function(){var e=this;return!!this.task&&this.task.assignees.some((function(t){return t===e.user.id}))},isCommentingAllowed:function(){var e=this;return this.isCurrentUserManager||this.task.assignees.find((function(t){return t===e.user.id}))},isSetThumbnailAllowed:function(){return this.currentPreviewId&&this.task&&this.task.entity&&this.currentPreviewId!==this.task.entity.preview_file_id},currentTaskType:function(){return this.task?this.taskTypeMap[this.task.task_type_id]:null},currentPreview:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e]:null},currentPreviewId:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0&&this.taskPreviews[e]?this.taskPreviews[e].id:null},extension:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e].extension:""},isStandardPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["ai","blend","ma","mb","pdf","psd","rar","zip"].includes(this.extension)},isMoviePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"mp4"===this.extension},isPicturePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"png"===this.extension},is3DModelPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"obj"===this.extension},moviePath:function(){var e=null;return e=this.currentPreview.id,"/api/movies/originals/preview-files/".concat(e,".mp4")},tasktypeStyle:function(){return Object(d["a"])(this.task)},taskPath:function(){return Object(c["c"])(this.task,this.currentProduction,this.isTVShow,this.currentEpisode,this.taskTypeMap)},taskEntityPath:function(){var e=this.$route.params.episode_id;return Object(c["b"])(this.task,e)},lastFivePreviews:function(){return this.taskPreviews.slice(0,5)},panelStyle:function(){return{width:this.isWide?700:350}},pinnedCount:function(){return this.taskComments.filter((function(e){return e.pinned})).length}}),methods:O({},Object(o["b"])(["addCommentExtraPreview","commentTask","commentTaskWithPreview","deleteTaskComment","editTaskComment","loadPreviewFileFormData","loadTask","loadTaskComments","loadTaskSubscribed","refreshPreview","pinComment","setPreview","subscribeToTask","unsubscribeFromTask","updatePreviewAnnotation"]),{loadTaskData:function(){var e=this;this.task&&(this.loading.task=!0,this.errors.task=!1,this.loadTaskComments({taskId:this.task.id,entityId:this.task.entity_id,callback:function(t){t?(console.log(t),e.errors.task=!0):e.loadTaskSubscribed({taskId:e.task.id,callback:function(t,s){t&&console.log(t),e.loading.task=!1,e.reset(),e.isSubscribed=s}})}}))},addComment:function(e,t){var s=this,n=function(e,t){e?s.errors.addComment=!0:(s.$refs["add-preview-modal"].reset(),s.reset(),s.attachedFileName=""),s.loading.addComment=!1},i={taskId:this.task.id,taskStatusId:t,commentText:e,comment:e,callback:n};this.loading.addComment=!0,this.errors.addComment=!1,this.attachedFileName?this.commentTaskWithPreview(i):this.commentTask(i)},reset:function(){var e=this;this.task&&(this.taskComments=this.getTaskComments(this.task.id),this.taskPreviews=this.getTaskPreviews(this.task.id),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.$nextTick((function(){e.$refs["add-comment"]&&e.$refs["add-comment"].focus()})))},focusCommentTextarea:function(){this.$refs["add-comment"]&&this.$refs["add-comment"].focus()},getOriginalPath:function(){var e=this.currentPreviewId,t=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)},getOriginalDlPath:function(){var e=this.currentPreviewId;return"/api/pictures/originals/preview-files/".concat(e,"/download")},setOtherPreviews:function(){var e=this;return this.taskPreviews&&(this.otherPreviews=this.taskPreviews.filter((function(t){return t.id!==e.currentPreviewId&&"mp4"===t.extension}))),this.otherPreviews},selectFile:function(e){this.loadPreviewFileFormData(e),this.attachedFileName=e.get("file").name},createExtraPreview:function(){var e=this,t=this.currentPreviewIndex;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0,this.addCommentExtraPreview({taskId:this.task.id,commentId:this.taskComments[0].id,previewId:this.taskPreviews[t].id,callback:function(t,s){e.loading.addExtraPreview=!1,t?e.errors.addExtraPreview=!0:(e.$refs["add-extra-preview-modal"].reset(),e.reset(),setTimeout((function(){e.$refs["preview-picture"].displayLast()}),0),e.modals.addExtraPreview=!1)}})},onPreviewAdded:function(e){var t=e.task_id,s=e.comment_id,n=e.preview_file_id,i=e.revision,a=e.extension,o=this.$store.getters.getTaskComment(t,s);!o||0!==o.previews.length&&o.previews[0].id===n||t!==this.task.id||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:n,revision:i,extension:a},taskId:t,commentId:s,comment:o}),this.reset())},onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,n=this.task.id;this.updatePreviewAnnotation({taskId:n,preview:t,annotations:s})},onAddPreviewClicked:function(e){this.modals.addPreview=!0},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},onClosePreview:function(){this.modals.addPreview=!1},onCloseExtraPreview:function(){this.modals.addExtraPreview=!1},onPreviewChanged:function(e){this.currentPreviewIndex=e,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath()},setCurrentPreviewAsEntityThumbnail:function(){this.setPreview({taskId:this.task.id,entityId:this.task.entity.id,previewId:this.currentPreviewId,callback:function(){}})},toggleSubscribe:function(){this.task&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.task.id),this.isSubscribed=!1):(this.subscribeToTask(this.task.id),this.isSubscribed=!0))},toggleWidth:function(){this.isWide=!this.isWide;var e=this.$refs["side-panel"];this.isWide?e.parentElement.style["min-width"]="700px":e.parentElement.style["min-width"]="350px"},onPinComment:function(e){this.pinComment(e)},onEditComment:function(e){this.commentToEdit=e,this.modals.editComment=!0},onDeleteComment:function(e){this.commentToEdit=e,this.modals.deleteComment=!0},onCancelEditComment:function(e){this.modals.editComment=!1},onCancelDeleteComment:function(e){this.modals.deleteComment=!1},saveComment:function(e,t){this.editTaskComment({taskId:this.task.id,comment:e,checklist:t})},confirmDeleteTaskComment:function(){var e=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var t=this.commentToEdit.id;this.deleteTaskComment({taskId:this.task.id,commentId:t,callback:function(t){e.loading.deleteComment=!1,t?e.errors.deleteComment=!0:(e.reset(),e.modals.deleteComment=!1)}})},confirmEditTaskComment:function(e){var t=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.task.id,comment:e,callback:function(e){t.loading.editComment=!1,e?t.errors.editComment=!0:t.modals.editComment=!1}})}}),watch:{task:function(){this.attachedFileName="",this.currentPreviewIndex=0,this.loadTaskData()},isLoading:function(){this.task.loading=this.isLoading}},socket:{events:{"preview-file:add-file":function(e){this.onPreviewAdded(e)},"preview-file:update":function(e){var t=this,s=this.taskPreviews.filter((function(t){return t.id===e.preview_file_id}));s&&this.refreshPreview({taskId:this.task.id,previewId:e.preview_file_id}).then((function(){t.$refs["preview-movie"]?t.$refs["preview-movie"].isDrawing||t.$refs["preview-movie"].reloadAnnotations():t.$refs["preview-picture"]&&(t.$refs["preview-picture"].isDrawing||t.$refs["preview-picture"].reset())}))}}}},C=T,P=(s("7d26"),s("2877")),E=Object(P["a"])(C,n,i,!1,null,"8c167aea",null);t["a"]=E.exports},"9fb0":function(e,t,s){"use strict";s.d(t,"of",(function(){return n})),s.d(t,"pf",(function(){return i})),s.d(t,"qf",(function(){return a})),s.d(t,"Ve",(function(){return o})),s.d(t,"Uc",(function(){return r})),s.d(t,"Sc",(function(){return c})),s.d(t,"Tc",(function(){return d})),s.d(t,"Pd",(function(){return l})),s.d(t,"lf",(function(){return u})),s.d(t,"uc",(function(){return p})),s.d(t,"be",(function(){return f})),s.d(t,"zc",(function(){return h})),s.d(t,"xc",(function(){return m})),s.d(t,"yc",(function(){return _})),s.d(t,"kb",(function(){return v})),s.d(t,"ib",(function(){return b})),s.d(t,"jb",(function(){return g})),s.d(t,"jf",(function(){return y})),s.d(t,"sc",(function(){return k})),s.d(t,"Xb",(function(){return S})),s.d(t,"Vb",(function(){return w})),s.d(t,"Wb",(function(){return O})),s.d(t,"kf",(function(){return T})),s.d(t,"tc",(function(){return C})),s.d(t,"Wc",(function(){return P})),s.d(t,"Vc",(function(){return E})),s.d(t,"Ye",(function(){return j})),s.d(t,"Fe",(function(){return D})),s.d(t,"me",(function(){return x})),s.d(t,"ff",(function(){return A})),s.d(t,"ae",(function(){return M})),s.d(t,"ce",(function(){return L})),s.d(t,"Xe",(function(){return I})),s.d(t,"Zd",(function(){return $})),s.d(t,"We",(function(){return q})),s.d(t,"Of",(function(){return N})),s.d(t,"Nf",(function(){return F})),s.d(t,"Pf",(function(){return R})),s.d(t,"E",(function(){return z})),s.d(t,"Af",(function(){return B})),s.d(t,"Cf",(function(){return V})),s.d(t,"Bf",(function(){return U})),s.d(t,"Df",(function(){return H})),s.d(t,"Ef",(function(){return W})),s.d(t,"Hf",(function(){return Y})),s.d(t,"Jf",(function(){return G})),s.d(t,"If",(function(){return K})),s.d(t,"Ff",(function(){return Q})),s.d(t,"Gf",(function(){return X})),s.d(t,"gf",(function(){return J})),s.d(t,"Cd",(function(){return Z})),s.d(t,"Dd",(function(){return ee})),s.d(t,"hf",(function(){return te})),s.d(t,"td",(function(){return se})),s.d(t,"Wd",(function(){return ne})),s.d(t,"Xd",(function(){return ie})),s.d(t,"lc",(function(){return ae})),s.d(t,"kc",(function(){return oe})),s.d(t,"sd",(function(){return re})),s.d(t,"ud",(function(){return ce})),s.d(t,"S",(function(){return de})),s.d(t,"xb",(function(){return le})),s.d(t,"Ob",(function(){return ue})),s.d(t,"bb",(function(){return pe})),s.d(t,"de",(function(){return fe})),s.d(t,"ee",(function(){return he})),s.d(t,"i",(function(){return me})),s.d(t,"h",(function(){return _e})),s.d(t,"ob",(function(){return ve})),s.d(t,"J",(function(){return be})),s.d(t,"wf",(function(){return ge})),s.d(t,"l",(function(){return ye})),s.d(t,"m",(function(){return ke})),s.d(t,"oe",(function(){return Se})),s.d(t,"N",(function(){return we})),s.d(t,"r",(function(){return Oe})),s.d(t,"rf",(function(){return Te})),s.d(t,"Ie",(function(){return Ce})),s.d(t,"ue",(function(){return Pe})),s.d(t,"tf",(function(){return Ee})),s.d(t,"Ue",(function(){return je})),s.d(t,"fd",(function(){return De})),s.d(t,"dd",(function(){return xe})),s.d(t,"ed",(function(){return Ae})),s.d(t,"k",(function(){return Me})),s.d(t,"xf",(function(){return Le})),s.d(t,"ne",(function(){return Ie})),s.d(t,"Rc",(function(){return $e})),s.d(t,"Pc",(function(){return qe})),s.d(t,"Qc",(function(){return Ne})),s.d(t,"id",(function(){return Fe})),s.d(t,"gd",(function(){return Re})),s.d(t,"hd",(function(){return ze})),s.d(t,"dc",(function(){return Be})),s.d(t,"bc",(function(){return Ve})),s.d(t,"cc",(function(){return Ue})),s.d(t,"rb",(function(){return He})),s.d(t,"pb",(function(){return We})),s.d(t,"qb",(function(){return Ye})),s.d(t,"Oe",(function(){return Ge})),s.d(t,"ge",(function(){return Ke})),s.d(t,"fe",(function(){return Qe})),s.d(t,"mf",(function(){return Xe})),s.d(t,"nf",(function(){return Je})),s.d(t,"d",(function(){return Ze})),s.d(t,"vf",(function(){return et})),s.d(t,"hb",(function(){return tt})),s.d(t,"Bd",(function(){return st})),s.d(t,"zd",(function(){return nt})),s.d(t,"Ad",(function(){return it})),s.d(t,"rc",(function(){return at})),s.d(t,"pc",(function(){return ot})),s.d(t,"qc",(function(){return rt})),s.d(t,"Db",(function(){return ct})),s.d(t,"Bb",(function(){return dt})),s.d(t,"Cb",(function(){return lt})),s.d(t,"xd",(function(){return ut})),s.d(t,"vd",(function(){return pt})),s.d(t,"wd",(function(){return ft})),s.d(t,"oc",(function(){return ht})),s.d(t,"mc",(function(){return mt})),s.d(t,"nc",(function(){return _t})),s.d(t,"Ab",(function(){return vt})),s.d(t,"yb",(function(){return bt})),s.d(t,"zb",(function(){return gt})),s.d(t,"Lc",(function(){return yt})),s.d(t,"Jc",(function(){return kt})),s.d(t,"Kc",(function(){return St})),s.d(t,"Rb",(function(){return wt})),s.d(t,"Pb",(function(){return Ot})),s.d(t,"Qb",(function(){return Tt})),s.d(t,"eb",(function(){return Ct})),s.d(t,"cb",(function(){return Pt})),s.d(t,"db",(function(){return Et})),s.d(t,"Ic",(function(){return jt})),s.d(t,"Gc",(function(){return Dt})),s.d(t,"Hc",(function(){return xt})),s.d(t,"Nb",(function(){return At})),s.d(t,"Lb",(function(){return Mt})),s.d(t,"Mb",(function(){return Lt})),s.d(t,"ab",(function(){return It})),s.d(t,"Y",(function(){return $t})),s.d(t,"Z",(function(){return qt})),s.d(t,"Ke",(function(){return Nt})),s.d(t,"af",(function(){return Ft})),s.d(t,"K",(function(){return Rt})),s.d(t,"Ec",(function(){return zt})),s.d(t,"Cc",(function(){return Bt})),s.d(t,"Dc",(function(){return Vt})),s.d(t,"Fc",(function(){return Ut})),s.d(t,"q",(function(){return Ht})),s.d(t,"wc",(function(){return Wt})),s.d(t,"vc",(function(){return Yt})),s.d(t,"Kb",(function(){return Gt})),s.d(t,"Ib",(function(){return Kt})),s.d(t,"Jb",(function(){return Qt})),s.d(t,"X",(function(){return Xt})),s.d(t,"V",(function(){return Jt})),s.d(t,"W",(function(){return Zt})),s.d(t,"Ae",(function(){return es})),s.d(t,"ye",(function(){return ts})),s.d(t,"ze",(function(){return ss})),s.d(t,"Le",(function(){return ns})),s.d(t,"Ee",(function(){return is})),s.d(t,"ie",(function(){return as})),s.d(t,"Eb",(function(){return os})),s.d(t,"P",(function(){return rs})),s.d(t,"Me",(function(){return cs})),s.d(t,"a",(function(){return ds})),s.d(t,"sf",(function(){return ls})),s.d(t,"he",(function(){return us})),s.d(t,"s",(function(){return ps})),s.d(t,"O",(function(){return fs})),s.d(t,"od",(function(){return hs})),s.d(t,"md",(function(){return ms})),s.d(t,"nd",(function(){return _s})),s.d(t,"jd",(function(){return vs})),s.d(t,"Mc",(function(){return bs})),s.d(t,"qd",(function(){return gs})),s.d(t,"pd",(function(){return ys})),s.d(t,"if",(function(){return ks})),s.d(t,"Bc",(function(){return Ss})),s.d(t,"Ac",(function(){return ws})),s.d(t,"jc",(function(){return Os})),s.d(t,"hc",(function(){return Ts})),s.d(t,"ic",(function(){return Cs})),s.d(t,"gc",(function(){return Ps})),s.d(t,"ec",(function(){return Es})),s.d(t,"fc",(function(){return js})),s.d(t,"Ub",(function(){return Ds})),s.d(t,"Sb",(function(){return xs})),s.d(t,"Tb",(function(){return As})),s.d(t,"Vd",(function(){return Ms})),s.d(t,"Td",(function(){return Ls})),s.d(t,"Ud",(function(){return Is})),s.d(t,"Sd",(function(){return $s})),s.d(t,"Qd",(function(){return qs})),s.d(t,"Rd",(function(){return Ns})),s.d(t,"Od",(function(){return Fs})),s.d(t,"Md",(function(){return Rs})),s.d(t,"Nd",(function(){return zs})),s.d(t,"wb",(function(){return Bs})),s.d(t,"ub",(function(){return Vs})),s.d(t,"vb",(function(){return Us})),s.d(t,"tb",(function(){return Hs})),s.d(t,"sb",(function(){return Ws})),s.d(t,"gb",(function(){return Ys})),s.d(t,"fb",(function(){return Gs})),s.d(t,"De",(function(){return Ks})),s.d(t,"Be",(function(){return Qs})),s.d(t,"Ce",(function(){return Xs})),s.d(t,"b",(function(){return Js})),s.d(t,"uf",(function(){return Zs})),s.d(t,"ke",(function(){return en})),s.d(t,"n",(function(){return tn})),s.d(t,"yf",(function(){return sn})),s.d(t,"pe",(function(){return nn})),s.d(t,"o",(function(){return an})),s.d(t,"zf",(function(){return on})),s.d(t,"re",(function(){return rn})),s.d(t,"t",(function(){return cn})),s.d(t,"ef",(function(){return dn})),s.d(t,"He",(function(){return ln})),s.d(t,"te",(function(){return un})),s.d(t,"cf",(function(){return pn})),s.d(t,"Ge",(function(){return fn})),s.d(t,"qe",(function(){return hn})),s.d(t,"Qe",(function(){return mn})),s.d(t,"Hb",(function(){return _n})),s.d(t,"Gb",(function(){return vn})),s.d(t,"Fb",(function(){return bn})),s.d(t,"df",(function(){return gn})),s.d(t,"bf",(function(){return yn})),s.d(t,"Pe",(function(){return kn})),s.d(t,"R",(function(){return Sn})),s.d(t,"Q",(function(){return wn})),s.d(t,"Ne",(function(){return On})),s.d(t,"L",(function(){return Tn})),s.d(t,"Re",(function(){return Cn})),s.d(t,"xe",(function(){return Pn})),s.d(t,"U",(function(){return En})),s.d(t,"T",(function(){return jn})),s.d(t,"F",(function(){return Dn})),s.d(t,"G",(function(){return xn})),s.d(t,"Fd",(function(){return An})),s.d(t,"Gd",(function(){return Mn})),s.d(t,"Ed",(function(){return Ln})),s.d(t,"Id",(function(){return In})),s.d(t,"Hd",(function(){return $n})),s.d(t,"Kf",(function(){return qn})),s.d(t,"Mf",(function(){return Nn})),s.d(t,"Lf",(function(){return Fn})),s.d(t,"Je",(function(){return Rn})),s.d(t,"ve",(function(){return zn})),s.d(t,"B",(function(){return Bn})),s.d(t,"A",(function(){return Vn})),s.d(t,"z",(function(){return Un})),s.d(t,"D",(function(){return Hn})),s.d(t,"C",(function(){return Wn})),s.d(t,"y",(function(){return Yn})),s.d(t,"x",(function(){return Gn})),s.d(t,"w",(function(){return Kn})),s.d(t,"u",(function(){return Qn})),s.d(t,"v",(function(){return Xn})),s.d(t,"Zc",(function(){return Jn})),s.d(t,"Xc",(function(){return Zn})),s.d(t,"Yc",(function(){return ei})),s.d(t,"cd",(function(){return ti})),s.d(t,"ad",(function(){return si})),s.d(t,"bd",(function(){return ni})),s.d(t,"ac",(function(){return ii})),s.d(t,"Yb",(function(){return ai})),s.d(t,"Zb",(function(){return oi})),s.d(t,"nb",(function(){return ri})),s.d(t,"lb",(function(){return ci})),s.d(t,"mb",(function(){return di})),s.d(t,"p",(function(){return li})),s.d(t,"se",(function(){return ui})),s.d(t,"I",(function(){return pi})),s.d(t,"H",(function(){return fi})),s.d(t,"rd",(function(){return hi})),s.d(t,"g",(function(){return mi})),s.d(t,"Kd",(function(){return _i})),s.d(t,"je",(function(){return vi})),s.d(t,"Nc",(function(){return bi})),s.d(t,"Oc",(function(){return gi})),s.d(t,"Jd",(function(){return yi})),s.d(t,"Yd",(function(){return ki})),s.d(t,"yd",(function(){return Si})),s.d(t,"kd",(function(){return wi})),s.d(t,"ld",(function(){return Oi})),s.d(t,"M",(function(){return Ti})),s.d(t,"j",(function(){return Ci})),s.d(t,"c",(function(){return Pi})),s.d(t,"Ld",(function(){return Ei})),s.d(t,"Ze",(function(){return ji})),s.d(t,"Se",(function(){return Di})),s.d(t,"Te",(function(){return xi})),s.d(t,"we",(function(){return Ai})),s.d(t,"e",(function(){return Mi})),s.d(t,"f",(function(){return Li})),s.d(t,"le",(function(){return Ii}));var n="TOGGLE_DARK_THEME",i="TOGGLE_SIDEBAR",a="TOGGLE_USER_MENU",o="SET_LAST_PRODUCTION_SCREEN",r="LOAD_PEOPLE_START",c="LOAD_PEOPLE_END",d="LOAD_PEOPLE_ERROR",l="NEW_PEOPLE_END",u="SHOW_IMPORT_PEOPLE_MODAL",p="HIDE_IMPORT_PEOPLE_MODAL",f="PERSON_CSV_FILE_SELECTED",h="IMPORT_PEOPLE_START",m="IMPORT_PEOPLE_END",_="IMPORT_PEOPLE_ERROR",v="DELETE_PEOPLE_START",b="DELETE_PEOPLE_END",g="DELETE_PEOPLE_ERROR",y="SHOW_DELETE_PEOPLE_MODAL",k="HIDE_DELETE_PEOPLE_MODAL",S="EDIT_PEOPLE_START",w="EDIT_PEOPLE_END",O="EDIT_PEOPLE_ERROR",T="SHOW_EDIT_PEOPLE_MODAL",C="HIDE_EDIT_PEOPLE_MODAL",P="LOAD_PERSON_TASKS_END",E="LOAD_PERSON_DONE_TASKS_END",j="SET_PERSON_TASKS_SEARCH",D="SAVE_PERSON_TASKS_SEARCH_END",x="REMOVE_PERSON_TASKS_SEARCH_END",A="SET_TIME_SPENT",M="PEOPLE_TIMESHEET_LOADED",L="PERSON_LOAD_TIME_SPENTS_END",I="SET_PERSON_TASKS_SCROLL_POSITION",$="PEOPLE_SEARCH_CHANGE",q="SET_ORGANISATION",N="USER_SAVE_PROFILE_LOADING",F="USER_SAVE_PROFILE_ERROR",R="USER_SAVE_PROFILE_SUCCESS",z="CHANGE_AVATAR_FILE",B="UPLOAD_AVATAR_END",V="USER_CHANGE_PASSWORD_LOADING",U="USER_CHANGE_PASSWORD_ERROR",H="USER_CHANGE_PASSWORD_SUCCESS",W="USER_CHANGE_PASSWORD_UNVALID",Y="USER_LOAD_TODOS_END",G="USER_LOAD_TODOS_START",K="USER_LOAD_TODOS_ERROR",Q="USER_LOAD_DONE_TASKS_END",X="USER_LOAD_TIME_SPENTS_END",J="SET_TODOS_SEARCH",Z="LOAD_USER_FILTERS_END",ee="LOAD_USER_FILTERS_ERROR",te="SET_TODO_LIST_SCROLL_POSITION",se="LOAD_TASK_END",ne="NEW_TASK_COMMENT_END",ie="NEW_TASK_END",ae="EDIT_TASK_END",oe="EDIT_TASK_DATES",re="LOAD_TASK_COMMENTS_END",ce="LOAD_TASK_ENTITY_PREVIEW_FILES_END",de="CREATE_TASKS_END",le="DELETE_TASK_END",ue="EDIT_COMMENT_END",pe="DELETE_COMMENT_END",fe="PIN_COMMENT",he="PREVIEW_FILE_SELECTED",me="ADD_PREVIEW_START",_e="ADD_PREVIEW_END",ve="DELETE_PREVIEW_END",be="CHANGE_PREVIEW_END",ge="UPDATE_PREVIEW_ANNOTATION",ye="ADD_SELECTED_TASK",ke="ADD_SELECTED_TASKS",Se="REMOVE_SELECTED_TASK",we="CLEAR_SELECTED_TASKS",Oe="ASSIGN_TASKS",Te="UNASSIGN_TASKS",Ce="SAVE_TASK_SEARCH_END",Pe="REMOVE_TASK_SEARCH_END",Ee="UPDATE_COMMENT_CHECKLIST",je="SET_LAST_COMMENT_DRAFT",De="LOAD_PRODUCTIONS_START",xe="LOAD_PRODUCTIONS_END",Ae="LOAD_PRODUCTIONS_ERROR",Me="ADD_PRODUCTION",Le="UPDATE_PRODUCTION",Ie="REMOVE_PRODUCTION",$e="LOAD_OPEN_PRODUCTIONS_START",qe="LOAD_OPEN_PRODUCTIONS_END",Ne="LOAD_OPEN_PRODUCTIONS_ERROR",Fe="LOAD_PRODUCTION_STATUS_START",Re="LOAD_PRODUCTION_STATUS_END",ze="LOAD_PRODUCTION_STATUS_ERROR",Be="EDIT_PRODUCTION_START",Ve="EDIT_PRODUCTION_END",Ue="EDIT_PRODUCTION_ERROR",He="DELETE_PRODUCTION_START",We="DELETE_PRODUCTION_END",Ye="DELETE_PRODUCTION_ERROR",Ge="SET_CURRENT_PRODUCTION",Ke="PRODUCTION_PICTURE_FILE_SELECTED",Qe="PRODUCTION_AVATAR_UPLOADED",Xe="TEAM_ADD_PERSON",Je="TEAM_REMOVE_PERSON",Ze="ADD_METADATA_DESCRIPTOR_END",et="UPDATE_METADATA_DESCRIPTOR_END",tt="DELETE_METADATA_DESCRIPTOR_END",st="LOAD_TASK_TYPES_START",nt="LOAD_TASK_TYPES_END",it="LOAD_TASK_TYPES_ERROR",at="EDIT_TASK_TYPE_START",ot="EDIT_TASK_TYPE_END",rt="EDIT_TASK_TYPE_ERROR",ct="DELETE_TASK_TYPE_START",dt="DELETE_TASK_TYPE_END",lt="DELETE_TASK_TYPE_ERROR",ut="LOAD_TASK_STATUSES_START",pt="LOAD_TASK_STATUSES_END",ft="LOAD_TASK_STATUSES_ERROR",ht="EDIT_TASK_STATUS_START",mt="EDIT_TASK_STATUS_END",_t="EDIT_TASK_STATUS_ERROR",vt="DELETE_TASK_STATUS_START",bt="DELETE_TASK_STATUS_END",gt="DELETE_TASK_STATUS_ERROR",yt="LOAD_CUSTOM_ACTIONS_START",kt="LOAD_CUSTOM_ACTIONS_END",St="LOAD_CUSTOM_ACTIONS_ERROR",wt="EDIT_CUSTOM_ACTION_START",Ot="EDIT_CUSTOM_ACTION_END",Tt="EDIT_CUSTOM_ACTION_ERROR",Ct="DELETE_CUSTOM_ACTION_START",Pt="DELETE_CUSTOM_ACTION_END",Et="DELETE_CUSTOM_ACTION_ERROR",jt="LOAD_ASSET_TYPES_START",Dt="LOAD_ASSET_TYPES_END",xt="LOAD_ASSET_TYPES_ERROR",At="EDIT_ASSET_TYPE_START",Mt="EDIT_ASSET_TYPE_END",Lt="EDIT_ASSET_TYPE_ERROR",It="DELETE_ASSET_TYPE_START",$t="DELETE_ASSET_TYPE_END",qt="DELETE_ASSET_TYPE_ERROR",Nt="SET_ASSET_LIST_SCROLL_POSITION",Ft="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",Rt="CLEAR_ASSETS",zt="LOAD_ASSETS_START",Bt="LOAD_ASSETS_END",Vt="LOAD_ASSETS_ERROR",Ut="LOAD_ASSET_CAST_IN_END",Ht="ASSET_CSV_FILE_SELECTED",Wt="IMPORT_ASSETS_START",Yt="IMPORT_ASSETS_END",Gt="EDIT_ASSET_START",Kt="EDIT_ASSET_END",Qt="EDIT_ASSET_ERROR",Xt="DELETE_ASSET_START",Jt="DELETE_ASSET_END",Zt="DELETE_ASSET_ERROR",es="RESTORE_ASSET_START",ts="RESTORE_ASSET_END",ss="RESTORE_ASSET_ERROR",ns="SET_ASSET_SEARCH",is="SAVE_ASSET_SEARCH_END",as="REMOVE_ASSET_SEARCH_END",os="DISPLAY_MORE_ASSETS",rs="COMPUTE_ASSET_TYPE_STATS",cs="SET_ASSET_TYPE_SEARCH",ds="ADD_ASSET",ls="UPDATE_ASSET",us="REMOVE_ASSET",ps="CANCEL_ASSET",fs="CLEAR_SHOTS",hs="LOAD_SHOTS_START",ms="LOAD_SHOTS_END",_s="LOAD_SHOTS_ERROR",vs="LOAD_SEQUENCES_END",bs="LOAD_EPISODES_END",gs="LOAD_SHOT_END",ys="LOAD_SHOT_CASTING_END",ks="SHOT_CSV_FILE_SELECTED",Ss="IMPORT_SHOTS_START",ws="IMPORT_SHOTS_END",Os="EDIT_SHOT_START",Ts="EDIT_SHOT_END",Cs="EDIT_SHOT_ERROR",Ps="EDIT_SEQUENCE_START",Es="EDIT_SEQUENCE_END",js="EDIT_SEQUENCE_ERROR",Ds="EDIT_EPISODE_START",xs="EDIT_EPISODE_END",As="EDIT_EPISODE_ERROR",Ms="NEW_SHOT_START",Ls="NEW_SHOT_END",Is="NEW_SHOT_ERROR",$s="NEW_SEQUENCE_START",qs="NEW_SEQUENCE_END",Ns="NEW_SEQUENCE_ERROR",Fs="NEW_EPISODE_START",Rs="NEW_EPISODE_END",zs="NEW_EPISODE_ERROR",Bs="DELETE_SHOT_START",Vs="DELETE_SHOT_END",Us="DELETE_SHOT_ERROR",Hs="DELETE_SEQUENCE_START",Ws="DELETE_SEQUENCE_ERROR",Ys="DELETE_EPISODE_START",Gs="DELETE_EPISODE_ERROR",Ks="RESTORE_SHOT_START",Qs="RESTORE_SHOT_END",Xs="RESTORE_SHOT_ERROR",Js="ADD_EPISODE",Zs="UPDATE_EPISODE",en="REMOVE_EPISODE",tn="ADD_SEQUENCE",sn="UPDATE_SEQUENCE",nn="REMOVE_SEQUENCE",an="ADD_SHOT",on="UPDATE_SHOT",rn="REMOVE_SHOT",cn="CANCEL_SHOT",dn="SET_SHOT_SEARCH",ln="SAVE_SHOT_SEARCH_END",un="REMOVE_SHOT_SEARCH_END",pn="SET_SEQUENCE_SEARCH",fn="SAVE_SEQUENCE_SEARCH_END",hn="REMOVE_SEQUENCE_SEARCH_END",mn="SET_EPISODE_SEARCH",_n="DISPLAY_MORE_SHOTS",vn="DISPLAY_MORE_SEQUENCES",bn="DISPLAY_MORE_EPISODES",gn="SET_SHOT_LIST_SCROLL_POSITION",yn="SET_SEQUENCE_LIST_SCROLL_POSITION",kn="SET_EPISODE_LIST_SCROLL_POSITION",Sn="COMPUTE_SEQUENCE_STATS",wn="COMPUTE_EPISODE_STATS",On="SET_CURRENT_EPISODE",Tn="CLEAR_EPISODES",Cn="SET_EPISODE_STATS",Pn="RESET_PRODUCTION_PATH",En="DATA_LOADING_START",jn="DATA_LOADING_END",Dn="CHANGE_EMAIL",xn="CHANGE_PASSWORD",An="LOGIN_RUN",Mn="LOGIN_SUCCESS",Ln="LOGIN_FAILURE",In="LOGOUT_SUCCESS",$n="LOGOUT_FAILURE",qn="USER_LOGIN",Nn="USER_LOGOUT",Fn="USER_LOGIN_FAIL",Rn="SAVE_TODO_SEARCH_END",zn="REMOVE_TODO_SEARCH_END",Bn="CASTING_SET_SEQUENCE",Vn="CASTING_SET_EPISODE",Un="CASTING_SET_CASTING",Hn="CASTING_SET_SHOTS",Wn="CASTING_SET_SEQUENCES",Yn="CASTING_SET_ASSET_TYPES",Gn="CASTING_SET_ASSET_TYPE",Kn="CASTING_SET_ASSETS",Qn="CASTING_ADD_TO_CASTING",Xn="CASTING_REMOVE_FROM_CASTING",Jn="LOAD_PLAYLISTS_START",Zn="LOAD_PLAYLISTS_END",ei="LOAD_PLAYLISTS_ERROR",ti="LOAD_PLAYLIST_START",si="LOAD_PLAYLIST_END",ni="LOAD_PLAYLIST_ERROR",ii="EDIT_PLAYLIST_START",ai="EDIT_PLAYLIST_END",oi="EDIT_PLAYLIST_ERROR",ri="DELETE_PLAYLIST_START",ci="DELETE_PLAYLIST_END",di="DELETE_PLAYLIST_ERROR",li="ADD_SHOT_TO_PLAYLIST",ui="REMOVE_SHOT_FROM_PLAYLIST",pi="CHANGE_PLAYLIST_PREVIEW",fi="CHANGE_PLAYLIST_ORDER",hi="LOAD_SHOT_PREVIEW_FILES_END",mi="ADD_NEW_JOB",_i="MARK_JOB_AS_DONE",vi="REMOVE_BUILD_JOB",bi="LOAD_NOTIFICATIONS_END",gi="LOAD_NOTIFICATION_END",yi="MARK_ALL_NOTIFICATIONS_AS_READ",ki="NOTIFICATION_ADD_PREVIEW",Si="LOAD_TASK_SUBSCRIBE_END",wi="LOAD_SEQUENCE_SUBSCRIBE_END",Oi="LOAD_SEQUENCE_SUBSCRIPTION_END",Ti="CLEAR_NEWS",Ci="ADD_PREVIOUS_NEWS",Pi="ADD_FIRST_NEWS",Ei="NEWS_ADD_PREVIEW",ji="SET_PREVIEW",Di="SET_IS_SHOW_ASSIGNATIONS",xi="SET_IS_SHOW_INFOS",Ai="RESET_ALL",Mi="ADD_MILESTONE",Li="ADD_MILESTONES",Ii="REMOVE_MILESTONE"},"9fbc":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("8e6e"),s("456d"),s("55dd"),s("20d6"),s("ac6a");var n=s("bd86"),i=s("2f62");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(s,!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var r={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:o({},Object(i["c"])([])),methods:{getNewAnnotations:function(e,t){var s=this;if(this.fabricCanvas.getObjects().forEach((function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=s.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),t){if(t.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),t.width=this.fabricCanvas.width,t.height=this.fabricCanvas.height,t.time=e,t.drawing&&t.drawing.objects.length<1){var n=this.annotations.findIndex((function(t){return t.time===e}));this.annotations.splice(n,1)}}else this.annotations.push({time:e,width:this.fabricCanvas.width,height:this.fabricCanvas.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])}),this.annotations=this.annotations.sort((function(e,t){return e.time<t.time}))||[];var i=[];return this.annotations.forEach((function(e){return i.push(o({},e))})),i}}}},a068:function(e,t,s){"use strict";var n=s("e4ed"),i=s.n(n);i.a},a109:function(e,t,s){"use strict";var n=s("712a"),i=s.n(n);i.a},a29d:function(e,t,s){"use strict";var n=s("b67d"),i=s.n(n);i.a},a574:function(e,t,s){"use strict";var n=s("5306"),i=s.n(n);i.a},a6e9:function(e,t,s){"use strict";var n=s("e8e9"),i=s.n(n);i.a},a81e:function(e,t,s){},abd7:function(e,t,s){},ac90:function(e,t,s){},ad52:function(e,t,s){"use strict";var n=s("ec7b"),i=s.n(n);i.a},ad6c:function(e,t,s){e.exports=s.p+"img/kitsu.b07d6464.png"},ae79:function(e,t,s){},b023:function(e,t,s){"use strict";var n=s("26fc"),i=s.n(n);i.a},b11e:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:e.locale,"disabled-dates":e.disabledDates,"monday-first":!0,format:"d MMMM yyyy"},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow time-spent-total"},[e._v("\n    -  \n    "+e._s(e.timeSpentTotal)+" "+e._s(e.$t("timesheets.hours"))+"\n    ")])]),s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[e._v("\n            "+e._s(e.$t("tasks.fields.production"))+"\n          ")]),s("th",{staticClass:"type"},[e._v("\n            "+e._s(e.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"name"},[e._v("\n            "+e._s(e.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"time-spent"},[e._v("\n            "+e._s(e.$t("timesheets.time_spents"))+"\n          ")])])])])]),e.tasks.length>0&&!e.isLoading?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.displayedTasks,(function(t,n){return s("tr",{key:t.id+"-"+n},[s("production-name-cell",{staticClass:"production",attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":t.project_id,entry:e.taskTypeMap[t.task_type_id]}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entityPath(t)}},[e._v("\n              "+e._s(t.full_entity_name)+"\n            ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)})),0)]),e.hideDone?e._e():s("page-subtitle",{attrs:{text:e.$t("timesheets.done_tasks")}}),e.isLoading||e.hideDone?e._e():s("table",{staticClass:"table"},[s("tbody",e._l(e.doneTasks,(function(t,n){return s("tr",{key:t+"-"+n},[s("production-name-cell",{staticClass:"production",attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":t.project_id,entry:{id:t.task_type_id,name:t.task_type_name,color:t.task_type_color}}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:t.entity_path}},[e._v("\n             "+e._s(t.full_entity_name)+"\n           ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)})),0)])],1):e._e(),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("p",{staticClass:"has-text-centered footer-info"},[e._v("\n    "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+"\n  ")])],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("2f62")),r=s("7f45"),c=s.n(r),d=s("fa33"),l=s("2430"),u=s("de26"),p=s("8751"),f=s("09a4"),h=s("58f5"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[e._v("\n      "+e._s(e.value)+"\n    ")]),s("vue-slider",e._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"vue-slider",e.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(1)}}},[e._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(4)}}},[e._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(8)}}},[e._v("8")])],1)])},_=[],v=s("4971"),b=s.n(v);s("24df");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var k={name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,marks:!0,hideLabel:!0,piecewise:!0,tooltip:"focus",tooltipPlacement:"bottom",processStyle:{"background-color":"#8F91EB"},railStyle:{background:"#CCC"}}}},components:{VueSlider:b.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:y({},Object(o["c"])([])),methods:y({},Object(o["b"])([]),{setValue:function(e){this.value=e}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}},S=k,w=(s("66d4"),s("2877")),O=Object(w["a"])(S,m,_,!1,null,"5d7ea8f4",null),T=O.exports,C=s("e60b");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var j={name:"timesheet-list",components:{Datepicker:d["a"],ProductionNameCell:f["a"],PageSubtitle:p["a"],TableInfo:C["a"],TaskTypeName:h["a"],TimeSliderCell:T},data:function(){return{disabledDates:{from:c()().toDate()},page:1,selectedDate:c()().toDate()}},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},computed:E({},Object(o["c"])(["nbSelectedTasks","productionMap","taskTypeMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?l["fr"]:l["en"]},displayedTasks:function(){return this.tasks.slice(0,this.page*(u["a"]/2))}}),methods:E({},Object(o["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px");var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},currentDate:function(){return c()().format("LL")},onSliderChange:function(e){this.$emit("time-spent-change",e)},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};return"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id,e.episode_id&&(s.name="episode-".concat(t),s.params.episode_id=e.episode_id),s}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},D=j,x=(s("15b1"),Object(w["a"])(D,n,i,!1,null,"2e4dc7d8",null));t["a"]=x.exports},b131:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"validation"},["pie"===e.displayMode?s("div",[s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:e.colors,data:e.selectedData}})],1):s("div",e._l(e.selectedData,(function(t){return t[0]?s("div",{key:t[0]},[s("span",{staticClass:"stats-name",style:{color:t[2]}},[e._v("\n       "+e._s(t[0])+"\n      ")]),s("span",[e._v("\n      :\n      ")]),s("span",{staticClass:"stats-value"},[e._v("\n        "+e._s(t[1])+" ("+e._s(e.percent(t[1]))+"%)\n      ")])]):e._e()})),0)])},i=[],a={name:"stats-cell",components:{},props:{colors:{type:Array,required:!0},countMode:{type:String,default:"count"},data:{type:Array,default:function(){return[]}},displayMode:{type:String,default:"pie"},framesData:{type:Array,default:function(){return[]}}},computed:{selectedData:function(){return"frames"===this.countMode?this.framesData:this.data},total:function(){return this.selectedData.reduce((function(e,t){return t[1]?e+t[1]:e}),0)}},methods:{percent:function(e){var t=0;return this.total>0&&(t=e/this.total*100),t.toFixed(2)}}},o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"0b145201",null);t["a"]=c.exports},b302:function(e,t,s){},b493:function(e,t,s){},b4ce:function(e,t,s){},b67d:function(e,t,s){},b6c5:function(e,t,s){},b98d:function(e,t,s){"use strict";var n=s("7798"),i=s.n(n);i.a},bb21:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isPreview&&e.withLink?s("a",{style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"},attrs:{href:e.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",style:e.imgStyle})]):e.isPreview&&!e.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:e.square},style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"}})},i=[],a=(s("c5f6"),{name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},emptyWidth:{default:50,type:Number},emptyHeight:{default:30,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},imgStyle:function(){var e={};return this.width&&(e.width=this.width+"px"),this.height&&(e.height=this.height+"px"),e},thumbnailPath:function(){var e=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+e+".png":"/api/pictures/thumbnails/preview-files/"+e+".png"},thumbnailKey:function(){var e=this.previewFileId||this.entity.preview_file_id;return"thumbnail-".concat(e)}}}),o=a,r=(s("7038"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"35bcb98c",null);t["a"]=c.exports},bcd2:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n=function(e,t){var s=Math.round(1/t*100)/100,n=Math.round(e/s),i=n*s;return i=Math.round(100*i)/100,i}},bd6d:function(e,t,s){},be83:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isWhite?n("div",{staticClass:"has-text-centered",style:e.style},[n("img",{attrs:{src:s("c9e4")}})]):n("div",{staticClass:"has-text-centered",style:e.style},[n("img",{attrs:{src:s("5c3d")}})])},i=[],a=(s("c5f6"),{name:"spinner",data:function(){return{style:{width:this.size?this.size+"px":"auto"}}},props:{isWhite:{type:Boolean,default:!1},size:{type:Number}}}),o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"67d74856",null);t["a"]=c.exports},beda:function(e,t,s){"use strict";var n=s("4d98"),i=s.n(n);i.a},bf01:function(e,t,s){"use strict";var n=s("3aff"),i=s.n(n);i.a},bf43:function(e,t,s){"use strict";var n=s("013b"),i=s.n(n);i.a},c053:function(e,t,s){},c266:function(e,t,s){"use strict";var n=s("287b"),i=s.n(n);i.a},c54f:function(e,t,s){},c9e4:function(e,t,s){e.exports=s.p+"img/spinner-white.da0c6413.svg"},ca76:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"e",(function(){return o})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return c})),s.d(t,"f",(function(){return d})),s.d(t,"b",(function(){return u}));s("f559"),s("4917"),s("a481"),s("28a5"),s("ac6a");var n=s("2017"),i=/([^ ]*)=([^ ]*)|\[([^[]*)\]=([^ ]*)/g,a=function(e,t,s){var n={status:!0},i={assignation:!0},a={exclusion:!0},o={descriptor:!0};return t&&t.length>0?e.filter((function(e){var r=!0;return t.forEach((function(t){var c=null;if(!r)return!1;if(t.taskType&&e.validations[t.taskType.id]&&(c=s[e.validations[t.taskType.id]]),n[t.type])r=c&&c.task_status_id===t.taskStatus.id,t.excluding&&(r=!r);else if(i[t.type])r=t.assigned?c&&c.assignees&&c.assignees.length>0:!c||c&&c.assignees&&0===c.assignees.length;else if(a[t.type])r=!t.excludedIds[e.id];else if(o[t.type]){if(e.data&&e.data[t.descriptor.field_name]&&t.value){var d=e.data[t.descriptor.field_name];d=d.toLowerCase(),r=d.indexOf(t.value.toLowerCase())>=0}else r=!1;t.excluding&&(r=!r)}})),r})):e},o=function(e){return e?e.replace(i,"").split(" ").filter((function(e){return e.length>0&&"-"!==e[0]})):[]},r=function(e){return e.replace(i,"").split(" ").filter((function(e){return e.length>0&&"-"===e[0]})).map((function(e){return e.substring(1)}))},c=function(e,t,s,i,a){var o=l(t,s,a),c=u(i,a),d=r(a)||[];return o=o.concat(c),d.forEach((function(t){var s={},i=Object(n["h"])(e,[t])||[];i.forEach((function(e){s[e.id]=!0})),o.push({type:"exclusion",excludedIds:s})})),o},d=function(e,t){var s=[],i=r(t)||[];return i.forEach((function(t){var i={},a=Object(n["h"])(e,[t])||[];a.forEach((function(e){i[e.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},l=function(e,t,s){if(!s)return[];var a=[],o=s.match(i),r=Object(n["c"])(e,!1),c={};return t.forEach((function(e){c[e.short_name.toLowerCase()]=e})),o&&o.forEach((function(e){var t=e.split("="),s=t[1],n=s.startsWith("-");n&&(s=s.substring(1));var i=t[0];"["===i[0]&&(i=i.substring(1,i.length-1));var o=r[i.toLowerCase()];o&&("unassigned"===s?a.push({taskType:o[0],assigned:!1,type:"assignation"}):"assigned"===s?a.push({taskType:o[0],assigned:!0,type:"assignation"}):s&&c[s.toLowerCase()]&&a.push({taskType:o[0],taskStatus:c[s.toLowerCase()],type:"status",excluding:n}))})),a},u=function(e,t){if(!t)return[];var s=[],a=t.match(i),o=Object(n["c"])(e,!1);return a&&a.forEach((function(e){var t=e.split("="),n=t[1],i=t[0];"["===i[0]&&(i=i.substring(1,i.length-1));var a=o[i.toLowerCase()],r=n.startsWith("-");r&&(n=n.substring(1)),a&&s.push({descriptor:a[0],value:n,type:"descriptor",excluding:r})})),s}},cb0e:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{ref:"cell",class:{validation:e.selectable&&!e.isCurrentUserClient,selected:e.selectable&e.selected},style:{"border-left":e.isBorder?"1px solid "+e.column.color:"none",background:e.isBorder?e.getBackground():"transparent"},on:{mouseover:e.onMouseOver,mouseout:e.onMouseOut,click:e.onClick}},[e.minimized?s("div",{staticClass:"wrapper"},[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color}},[e._v("\n       \n    ")])]):s("div",{staticClass:"wrapper"},[e.task?s("span",[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color}},[e._v("\n        "+e._s(e.taskStatus.short_name)+"\n      ")]),e.isCurrentUserClient?e._e():s("span",{staticClass:"priority"},[e._v("\n        "+e._s(e.priority)+"\n      ")])]):e._e(),e._l(e.assignees,(function(t){return e.isAssignees?s("span",{key:"avatar-"+t,staticClass:"avatar has-text-centered",style:{background:e.personMap[t].color,width:"20px",height:"20px","font-size":"10px"},attrs:{title:e.personMap[t].full_name}},[e.personMap[t].has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath(t),expression:"avatarPath(personId)"}],key:e.avatarKey(t),attrs:{width:"20",height:"20"}}):s("span",[e._v("\n        "+e._s(e.personMap[t].initials)+"\n      ")])]):e._e()}))],2)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("2f62")),r=s("7930");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"validation-cell",data:function(){return{task:null}},components:{},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isStatic:{default:!1,type:Boolean},isAssignees:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},selectable:{default:!0,type:Boolean},clickable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},mounted:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])},computed:d({},Object(o["c"])(["isDarkTheme","isCurrentUserClient","personMap","taskMap","taskStatusMap"]),{assignees:function(){return this.task?this.task.assignees:[]},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}}}),methods:d({},Object(o["b"])([]),{getBackground:function(){if(this.isBorder){var e=this.isDarkTheme?.15:.08;return r["a"].hexToRGBa(this.column.color,e)}return"transparent"},onMouseOver:function(e){if(this.selectable&&!this.selected){var t=this.isDarkTheme?"#878B97":"#CCFFCC";this.changeStyle(t)}},onMouseOut:function(e){if(this.selectable&&!this.selected){var t=this.getBackground();this.changeStyle(t)}},onClick:function(e){this.clickable&&this.select(e)},changeStyle:function(e){var t=this.isBorder?"1px solid "+this.column.color:"none";this.$refs["cell"].style="border-left: ".concat(t,"; background: ").concat(e,";")},select:function(e){var t=!1!==e.isUserClick;this.selectable&&!this.isCurrentUserClient&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey,isShiftKey:e.shiftKey,isUserClick:t}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey,isShiftKey:e.shiftKey,isUserClick:t}))},avatarPath:function(e){var t=this.personMap[e];return t?t.avatarPath+"?unique="+t.uniqueHash:""},avatarKey:function(e){var t=this.personMap[e];return t?t.id+"-"+t.uniqueHash:""}}),watch:{selected:function(){if(this.selected){var e=this.isDarkTheme?"#5E60BA":"#D1C4E9";this.changeStyle(e)}else{var t=this.getBackground(this.column.color);this.changeStyle(t)}},taskTest:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])}}},u=l,p=(s("ff4d"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"6e35f2c4",null);t["a"]=f.exports},cb88:function(e,t,s){e.exports=s.p+"img/studio_collaboration.1e49fa73.png"},cd0b:function(e,t,s){"use strict";var n=s("ae79"),i=s.n(n);i.a},ce6b:function(e,t,s){"use strict";s("7f7f");var n=s("edbf");t["a"]={getOrganisation:function(){return new Promise((function(e,t){n["a"].get("/api/data/organisations",(function(s,n){if(s)t(s);else{var i={name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:!1,chat_token_slack:""};n.length>0&&(i=n[0]),i.use_original_file_name=i.use_original_file_name?"true":"false",e(i)}}))}))},updateOrganisation:function(e){return new Promise((function(t,s){var i={name:e.name,hours_by_day:e.hours_by_day,use_original_file_name:"true"===e.use_original_file_name,chat_token_slack:e.chat_token_slack};n["a"].put("/api/data/organisations/".concat(e.id),i,(function(e,n){e?s(e):t(n)}))}))},postOrganisationLogo:function(e,t){return new Promise((function(s,i){n["a"].post("/api/pictures/thumbnails/organisations/".concat(e),t,(function(e,t){e?i(e):s(t)}))}))},getPeople:function(e){n["a"].get("/api/data/persons",e)},getPerson:function(e,t){n["a"].get("/api/data/persons/".concat(e),t)},newPerson:function(e){return new Promise((function(t,s){var i={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,role:e.role,active:e.active};n["a"].post("/api/data/persons/new",i,(function(e,n){e?s(e):t(n)}))}))},invitePerson:function(e){return new Promise((function(t,s){n["a"].get("/api/actions/persons/".concat(e.id,"/invite"),(function(n){n?s(n):t(e)}))}))},updatePerson:function(e){return new Promise((function(t,s){var i={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,timezone:e.timezone,locale:e.locale,role:e.role,active:e.active,notifications_enabled:"true"===e.notifications_enabled,notifications_slack_enabled:"true"===e.notifications_slack_enabled,notifications_slack_userid:e.notifications_slack_userid};n["a"].put("/api/data/persons/".concat(e.id),i,(function(e,n){e?s(e):t(n)}))}))},deletePerson:function(e,t){n["a"].del("/api/data/persons/".concat(e),t)},postCsv:function(e,t){n["a"].post("/api/import/csv/persons",e,t)},postAvatar:function(e,t,s){n["a"].post("/api/pictures/thumbnails/persons/".concat(e),t,s)},changePassword:function(e,t){var s={old_password:e.oldPassword,password:e.password,password_2:e.password2};n["a"].post("/api/auth/change-password",s,t)},loadTodos:function(e){n["a"].get("/api/data/user/tasks",e)},loadDone:function(e){n["a"].get("/api/data/user/done-tasks",e)},loadTimeSpents:function(e,t){n["a"].get("/api/data/user/time-spents/".concat(e),t)},getPersonTasks:function(e,t){n["a"].get("/api/data/persons/".concat(e,"/tasks"),t)},getPersonDoneTasks:function(e,t){n["a"].get("/api/data/persons/".concat(e,"/done-tasks"),t)},getUserSearchFilters:function(e){n["a"].get("/api/data/user/filters",e)},createFilter:function(e,t,s,i,a,o){var r={list_type:e,name:t,query:s,entity_type:a,project_id:i};n["a"].post("/api/data/user/filters",r,o)},removeFilter:function(e,t){n["a"].del("/api/data/user/filters/".concat(e.id),t)},getTimeSpents:function(e,t,s){n["a"].get("/api/data/persons/".concat(e,"/time-spents/").concat(t),s)},setTimeSpent:function(e,t,s,i,a){var o={duration:60*i};n["a"].post("/api/actions/tasks/".concat(e,"/time-spents/").concat(s,"/persons/").concat(t),o,a)},getDayTable:function(e,t){return new Promise((function(s,i){n["a"].get("/api/data/persons/time-spents/day-table/".concat(e,"/").concat(t),(function(e,t){e?i(e):s(t)}))}))},getWeekTable:function(e){return new Promise((function(t,s){n["a"].get("/api/data/persons/time-spents/week-table/".concat(e),(function(e,n){e?s(e):t(n)}))}))},getMonthTable:function(e){return new Promise((function(t,s){n["a"].get("/api/data/persons/time-spents/month-table/".concat(e),(function(e,n){e?s(e):t(n)}))}))},getAggregatedPersonTimeSpents:function(e,t,s,i,a,o){return new Promise((function(r,c){var d="/api/data/persons/".concat(e,"/time-spents/");d+="month"===t?"month/".concat(s,"/").concat(i):"week"===t?"week/".concat(s,"/").concat(a):"day/".concat(s,"/").concat(i,"/").concat(o),n["a"].get(d,(function(e,t){e?c(e):r(t)}))}))}}},ce80:function(e,t,s){e.exports=s.p+"img/validated.a1d2a358.png"},ce93:function(e,t,s){},d065:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n={beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{onKeyDown:function(e){"Escape"===e.key&&this.$emit("cancel")}},watch:{active:function(){this.active?window.addEventListener("keydown",this.onKeyDown,!1):window.removeEventListener("keydown",this.onKeyDown)}}}},d114:function(e,t,s){"use strict";var n=s("821b"),i=s.n(n);i.a},d228:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"button",attrs:{title:e.buttonTitle},on:{click:function(t){return e.$emit("click")}}},[e.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},i=[],a=s("0a35"),o={name:"subscribe-button",components:{EyeIcon:a["l"],EyeOffIcon:a["m"]},props:{subscribed:{default:!1,type:Boolean}},computed:{buttonTitle:function(){return this.subscribed?this.$t("tasks.unsubscribe_notifications"):this.$t("tasks.subscribe_notifications")}}},r=o,c=(s("5bf3"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"76d14e74",null);t["a"]=d.exports},d339:function(e,t,s){},d3ce:function(e,t,s){},d5c9:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isError?s("p",{staticClass:"error"},[e._v("\n    "+e._s(e.errorText)+"\n  ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":e.isDisabled},on:{click:function(t){return e.$emit("confirm")}}},[e._v("\n      "+e._s(e.$t("main.confirmation"))+"\n    ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n      "+e._s(e.$t("main.cancel"))+"\n    ")])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"modal-footer",components:{},props:{errorText:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([])),watch:{}},l=d,u=(s("e70e"),s("2877")),p=Object(u["a"])(l,n,i,!1,null,"7dbe110d",null);t["a"]=p.exports},d7c7:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"schedule-wrapper"},[s("div",{ref:"schedule",class:e.scheduleClass},[s("div",{ref:"entity-list",staticClass:"entities",on:{mousedown:e.startBrowsingY}},[s("div",{staticClass:"has-text-right total-man-days mr0"},[s("span",{staticClass:"total-value"},[e._v("\n          "+e._s(e.totalManDays)+" "+e._s(e.$t("schedule.md"))+"\n        ")])]),s("div",{staticClass:"entity-name-list"},e._l(e.hierarchy,(function(t){return s("div",{key:"entity-"+t.id},[s("div",{class:{"entity-line":!0,"entity-name":!0,flexrow:!0,root:!0,expanded:t.expanded},style:e.entityLineStyle(t)},[s("span",{staticClass:"expand flexrow-item mr1",on:{click:function(s){return e.expandRootElement(t)}}},[t.expanded?s("chevron-down-icon"):s("chevron-right-icon")],1),t.avatar?s("span",{staticClass:"avatar flexrow-item"},["Project"===t.type?s("production-name",{attrs:{project:t,"only-avatar":!0,size:30}}):s("people-avatar",{attrs:{person:t,"is-link":!1,size:30,"no-cache":!0}})],1):e._e(),t.route?s("router-link",{staticClass:"filler flexrow-item root-element-name",attrs:{to:t.route}},[e._v("\n            "+e._s(t.name)+"\n          ")]):s("span",{staticClass:"filler flexrow-item root-element-name"},[e._v("\n            "+e._s(t.name)+"\n          ")]),!t.avatar&&t.editable?s("input",{directives:[{name:"model",rawName:"v-model",value:t.man_days,expression:"rootElement.man_days"}],staticClass:"flexrow-item",attrs:{type:"number",placeholder:"0"},domProps:{value:t.man_days},on:{input:[function(s){s.target.composing||e.$set(t,"man_days",s.target.value)},function(s){return e.$emit("item-changed",t)}]}}):e._e(),!t.avatar&&t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v("\n            "+e._s(e.$t("schedule.md"))+"\n          ")]):e._e(),t.avatar||!t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v("\n            "+e._s(t.man_days)+"\n            "+e._s(e.$t("schedule.md"))+"\n          ")]):e._e()],1),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px"}})],1):e._e(),e._l(t.children,(function(n,i){return s("div",{key:"entity-"+n.id,staticClass:"child-name"},[s("div",{staticClass:"entity-line entity-name child-line flexrow",style:e.childNameStyle(t,i)},[s("span",{staticClass:"filler flexrow-item"},[e._v("\n                "+e._s(n.name)+"\n              ")]),n.man_days?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v("\n                "+e._s(n.man_days)+"\n                "+e._s(e.$t("schedule.md"))+"\n              ")]):e._e()])])}))],2):e._e()])})),0)]),s("div",{staticClass:"timeline"},[s("div",{ref:"timeline-header",staticClass:"timeline-header",on:{mousedown:e.startBrowsingX}},e._l(e.daysAvailable,(function(t,n){return s("div",{key:"header-"+t.text,staticClass:"day",style:e.dayStyle(t)},[e.milestones[t.text]?s("div",{staticClass:"milestone",on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("div",{staticClass:"milestone-tooltip flexrow",style:e.milestoneTooltipStyle},[s("span",{staticClass:"bull flexrow-item"},[e._v("•")]),s("span",{staticClass:"flexrow-item"},[e._v("\n                "+e._s(e.milestones[t.text].name)+"\n              ")]),s("span",{staticClass:"filler"}),s("edit2-icon",{staticClass:"edit-icon flexrow-item"})],1),e._m(0,!0)]):s("div",{staticClass:"milestone"},[e._m(1,!0)]),s("div",{staticClass:"date-widget"},[s("div",{staticClass:"add-milestone",attrs:{title:e.addMilestoneTitle(t)},on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("span",[e._v("+")])]),s("div",{staticClass:"date-name"},[t.newMonth||0===n?s("span",{staticClass:"month-name"},[e._v("\n                "+e._s(t.monthText)+"\n              ")]):e._e(),s("div",{class:e.dayClass(t,n)},[!t.weekend&&e.zoomLevel>2?s("span",[e._v("\n                  "+e._s(t.dayText)+" /\n                ")]):e._e(),t.weekend?e._e():s("span",{staticClass:"day-number"},[e._v("\n                  "+e._s(t.dayNumber)+"\n                ")])])])])])})),0),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onTimelineScroll,expression:"onTimelineScroll"}],ref:"timeline-content-wrapper",staticClass:"timeline-content-wrapper"},[s("div",{ref:"timeline-content",staticClass:"timeline-content",on:{mousedown:e.startBrowsing,mousewheel:function(t){return e.$emit("change-zoom",t)}}},[s("div",{ref:"timeline-today-position",staticClass:"timeline-position today",style:e.timelineTodayPositionStyle}),s("div",{ref:"timeline-position",staticClass:"timeline-position",style:e.timelinePositionStyle}),e._l(Object.values(e.milestones),(function(t){return s("div",{key:"milestone-"+t.date,staticClass:"milestone-vertical-line",style:e.milestoneLineStyle(t)})})),e._l(e.hierarchy,(function(t){return s("div",{key:"entity-line-"+t.id},[s("div",{staticClass:"entity-line",style:e.entityLineStyle(t)},[s("div",{staticClass:"timebar",style:e.timebarStyle(t)},[s("div",{class:{"timebar-left-hand":t.editable},on:{mousedown:function(s){return e.moveTimebarLeftSide(t,s)}}}),s("div",{staticClass:"filler",on:{mousedown:function(s){return e.moveTimebar(t,s)}}}),s("div",{class:{"timebar-right-hand":t.editable},on:{mousedown:function(s){return e.moveTimebarRightSide(t,s)}}})])]),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px",opacity:"0"}})],1):e._e(),e._l(t.children,(function(n){return s("div",{key:"entity-line-"+n.id,staticClass:"entity-line child-line"},[s("div",{staticClass:"timebar",style:e.timebarChildStyle(n,t,!0),attrs:{title:n.name+" ("+n.startDate.format("DD-MM")+" - "+n.endDate.format("DD-MM")+")"}},[s("div",{class:{"timebar-left-hand":n.editable},on:{mousedown:function(t){return e.moveTimebarLeftSide(n,t)}}}),s("div",{staticClass:"filler",on:{mousedown:function(t){return e.moveTimebar(n,t)}}}),s("div",{class:{"timebar-right-hand":n.editable},on:{mousedown:function(t){return e.moveTimebarRightSide(n,t)}}})])])}))],2):e._e()])}))],2)])])]),s("edit-milestone-modal",{ref:"edit-milestone-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"milestone-to-edit":e.milestoneToEdit},on:{confirm:e.confirmEditMilestone,cancel:e.hideEditMilestoneModal,"remove-milestone":e.removeMilestone}})],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"},[e._v("•")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"},[e._v(" ")])])}],a=(s("8e6e"),s("456d"),s("ac6a"),s("6762"),s("2fdb"),s("bd86")),o=(s("c5f6"),s("2f62")),r=s("7f45"),c=s.n(r),d=s("7930"),l=s("0a35"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEdit?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("schedule.milestone.edit_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+"\n      ")]):s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("schedule.milestone.add_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+"\n      ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("schedule.milestone.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isEdit?s("button-simple",{staticClass:"button is-link error",attrs:{text:"Delete milestone"},on:{click:function(t){return e.$emit("remove-milestone",e.milestoneToEdit)}}}):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("schedule.milestone.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},p=[],f=(s("7f7f"),s("d065")),h=s("de40"),m=s("d5c9"),_=s("7bf8");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"edit-milestone-modal",mixins:[f["a"]],components:{ButtonSimple:h["a"],ModalFooter:m["a"],TextField:_["a"]},props:{active:{type:Boolean,default:!1},milestoneToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:""}}},mounted:function(){this.reset()},computed:b({},Object(o["c"])([]),{isEdit:function(){return void 0!==this.milestoneToEdit.id},isFormFilled:function(){return this.form.name.length>0}}),methods:b({},Object(o["b"])([]),{confirm:function(){return this.$emit("confirm",this.form)},reset:function(){this.form={id:this.milestoneToEdit.id||void 0,name:"".concat(this.milestoneToEdit.name||""),date:this.milestoneToEdit.date}}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},y=g,k=s("2877"),S=Object(k["a"])(y,u,p,!1,null,"74c6ef6d",null),w=S.exports,O=s("eb8c"),T=s("4736"),C=s("be83");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var j={name:"schedule",components:{ChevronDownIcon:l["d"],ChevronRightIcon:l["f"],Edit2Icon:l["j"],EditMilestoneModal:w,PeopleAvatar:O["a"],ProductionName:T["a"],Spinner:C["a"]},data:function(){return{currentMilestoneDate:null,isBrowsingX:!1,isBrowsingY:!1,isChangeSize:!1,milestoneToEdit:{date:c()()},timelineDisplayedDaysIndex:{},errors:{edit:!1},modals:{edit:!1},loading:{edit:!1}}},props:{endDate:{type:Object,required:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!0},height:{type:Number,default:0},hierarchy:{default:function(){return[]},type:Array},startDate:{type:Object,required:!0},zoomLevel:{type:Number,default:2}},mounted:function(){this.resetScheduleSize(),document.addEventListener("mouseup",this.stopBrowsing),document.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.resetScheduleSize)},destroyed:function(){document.removeEventListener("mouseup",this.stopBrowsing),document.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.resetScheduleSize),document.body.style.cursor="default"},computed:E({},Object(o["c"])(["milestones"]),{cellWidth:function(){return 20*this.zoomLevel},daysAvailable:function(){var e=[],t=this.startDate.clone().add(-1,"days"),s=t.toDate(),n=this.endDate.toDate();s.isoweekday=t.isoWeekday(),s.monthday=t.month();while(s<n){var i=new Date(Number(s));i.setDate(s.getDate()+1),i.isoweekday=s.isoweekday+1,i.isoweekday>7&&(i.isoweekday=1,i.newWeek=!0),i.monthday=s.monthday+1,i.monthday>27&&i.getMonth()!==s.getMonth()&&(i.newMonth=!0,i.monthday=1),[6,7].includes(i.isoweekday)&&(i.weekend=!0);var a=c()(i);a.newWeek=i.newWeek,a.newMonth=i.newMonth,a.weekend=i.weekend,a.text=a.format("YYYY-MM-DD"),a.monthText=a.format("MMMM"),a.dayNumber=a.format("DD"),a.dayText=a.format("ddd")[0],e.push(a),s=i}return e},displayedDays:function(){return this.daysAvailable.filter((function(e){return!e.weekend}))},nbDisplayedDays:function(){return this.displayedDays.length},displayedDaysIndex:function(){var e=0,t={};return this.displayedDays.forEach((function(s){t[s.text]=e,e++})),t},totalManDays:function(){return this.hierarchy.reduce((function(e,t){var s=e,n=t.man_days;return t.man_days&&("string"===typeof n&&(n=parseInt(n)),s=e+n),s}),0)},entityList:function(){return this.$refs["entity-list"]},schedule:function(){return this.$refs["schedule"]},timelineContent:function(){return this.$refs["timeline-content"]},timelineContentWrapper:function(){return this.$refs["timeline-content-wrapper"]},timelineHeader:function(){return this.$refs["timeline-header"]},timelinePosition:function(){return this.$refs["timeline-position"]},scheduleClass:function(){var e={schedule:!0,unselectable:!0};return e["zoom-level-".concat(this.zoomLevel)]=!0,e},timelinePositionStyle:function(){return{width:"".concat(this.cellWidth,"px")}},timelineTodayPositionStyle:function(){var e=c()();return{width:"".concat(this.cellWidth,"px"),left:"".concat(this.getTimebarLeft({startDate:e})-5,"px")}},milestoneTooltipStyle:function(){return{left:-40-10*(3-this.zoomLevel)+"px"}}}),methods:E({},Object(o["b"])(["deleteMilestone","saveMilestone"]),{resetScheduleSize:function(){this.height&&(this.schedule.style.height="".concat(this.height,"px")),this.timelineContent&&(this.timelineContent.style.width=this.nbDisplayedDays*this.cellWidth+"px",this.timelineContentWrapper.style.height=this.schedule.offsetHeight-250+"px",this.entityList.style.height=this.schedule.offsetHeight-169+"px")},onMouseMove:function(e){this.isChangeStartDate?this.changeStartDate(e):this.isChangeEndDate?this.changeEndDate(e):this.isChangeDates?this.changeDates(e):(this.isBrowsingX&&this.scrollScheduleLeft(e),this.isBrowsingY&&this.scrollScheduleTop(e)),this.updatePositionBarPosition(e)},updatePositionBarPosition:function(e){var t=this.timelineContentWrapper.scrollLeft+e.clientX;t-=320,t=Math.floor(t/this.cellWidth)*this.cellWidth,this.timelinePosition.style.left=t+"px"},isValidItemDates:function(e,t){return e&&t&&e.isAfter(this.startDate)&&t.isBefore(this.endDate)&&e.isBefore(t)&&t.isAfter(e)},getDisplayedDaysIndex:function(e){6===e.isoWeekday()&&(e=e.add("days",-1)),7===e.isoWeekday()&&(e=e.add("days",-2));var t=e.format("YYYY-MM-DD");return this.displayedDaysIndex[t]},changeDates:function(e){var t=e.clientX-this.initialClientX-this.cellWidth/2,s=Math.ceil(t/this.cellWidth),n=this.lastStartDate,i=this.lastEndDate,a=this.getDisplayedDaysIndex(n),o=this.getDisplayedDaysIndex(i),r=o-a,c=this.getDisplayedDaysIndex(n);c+=s,c<0&&(c=0);var d=this.displayedDays[c];if(d){var l=this.displayedDays[c+r];this.isValidItemDates(d,l)&&(this.currentElement.startDate=d,this.currentElement.endDate=l,this.$emit("item-changed",this.currentElement))}},changeStartDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.floor(t/this.cellWidth),n=this.lastStartDate,i=this.currentElement.endDate,a=this.getDisplayedDaysIndex(n),o=this.getDisplayedDaysIndex(i);a+=s,a>o&&(a=o-1),a<0&&(a=0);var r=this.displayedDays[a];this.isValidItemDates(r,this.currentElement.endDate)&&(this.currentElement.startDate=r,this.$emit("item-changed",this.currentElement))},changeEndDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.ceil(t/this.cellWidth),n=this.currentElement.startDate,i=this.lastEndDate,a=this.getDisplayedDaysIndex(n),o=this.getDisplayedDaysIndex(i);o+=s-1,o<a&&(o=a+1),o>this.displayedDaysIndex.length&&(o=this.displayedDaysIndex.length-1);var r=this.displayedDays[o];this.isValidItemDates(this.currentElement.startDate,r)&&(this.currentElement.endDate=r,this.$emit("item-changed",this.currentElement))},moveTimebar:function(e,t){this.isChangeStartDate||this.isChangeEndDate||!e.editable||(this.isChangeDates=!0,this.isChangeStartDate=!1,this.isChangeEnd=!1,this.currentElement=e,this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="ew-resize")},moveTimebarLeftSide:function(e,t){this.isChangeDates||this.isChangeEndDate||!e.editable||(this.isChangeDates=!1,this.isChangeStartDate=!0,this.isChangeEndDate=!1,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add("days",1)),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="w-resize")},moveTimebarRightSide:function(e,t){this.isChangeDates||this.isChangeStartDate||!e.editable||(this.isChangeDates=!1,this.isChangeStartDate=!1,this.isChangeEndDate=!0,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add("days",1)),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="e-resize")},onTimelineScroll:function(e,t){var s=t.scrollTop;this.entityList.scrollTop=s;var n=t.scrollLeft;this.timelineHeader.scrollLeft=n},scrollScheduleLeft:function(e){var t=this.timelineContentWrapper.scrollLeft,s=t-e.movementX;this.timelineContentWrapper.scrollLeft=s,this.timelineHeader.scrollLeft=s},scrollScheduleTop:function(e){var t=this.timelineContentWrapper.scrollTop,s=t-e.movementY;this.timelineContentWrapper.scrollTop=s,this.entityList.scrollTop=s},scrollToToday:function(){var e=this;setTimeout((function(){var t=c()();if(t.isAfter(e.startDate)&&t.isBefore(e.endDate)){var s=e.getTimebarLeft({startDate:t})-5,n=s-(e.schedule.offsetWidth/2-300);e.timelineContentWrapper.scrollLeft=n,e.timelineHeader.scrollLeft=n}}),10)},startBrowsing:function(e){this.isChangeStartDate||this.isChangeEndDate||this.isChangeDates||(document.body.style.cursor="grabbing",this.isBrowsingX=!0,this.isBrowsingY=!0)},startBrowsingX:function(e){document.body.style.cursor="grabbing",this.isBrowsingX=!0},startBrowsingY:function(e){document.body.style.cursor="grabbing",this.isBrowsingY=!0},stopBrowsing:function(e){document.body.style.cursor="default",this.isChangeStartDate=!1,this.isChangeEndDate=!1,this.isChangeDates=!1,this.isBrowsingX=!1,this.isBrowsingY=!1},businessDiff:function(e,t){var s=e.clone().endOf("isoweek"),n=t.clone().startOf("isoweek"),i=n.diff(s,"days");if(t.diff(e,"days")>6){var a=5*i/7,o=s.isoWeekday()-e.isoWeekday();0===e.isoWeekday()&&--o;var r=t.isoWeekday()-n.isoWeekday();return 6===t.day()&&--r,Math.ceil(o+a+r-1)}var d=c()(e),l=0;while(d.isBefore(t,"day"))0!==d.day()&&6!==d.day()&&l++,d.add(1,"days");return l},dayClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{"day-name":!0,"new-week":e.newWeek||!1,"new-month":e.newMonth||0===t||!1}},dayStyle:function(e){return{"min-width":e.weekend?"0px":this.cellWidth+"px","max-width":e.weekend?"0px":this.cellWidth+"px"}},entityLineStyle:function(e){var t={"background-color":e.color};return e.expanded&&(t["margin-bottom"]="0"),t},timebarStyle:function(e){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default"}},timebarChildStyle:function(e,t){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default",background:e.color||t.color}},getTimebarLeft:function(e){var t=e.startDate||this.startDate,s=this.businessDiff(this.startDate,t)||0;return s*this.cellWidth+5},getTimebarWidth:function(e){var t=e.startDate||this.startDate,s=e.endDate||e.startDate&&e.startDate.clone().add(1,"days")||this.startDate.clone().add(1,"days"),n=this.businessDiff(t,s)||1;return(n+1)*this.cellWidth-10},expandRootElement:function(e){this.$emit("root-element-expanded",e)},expandChildElement:function(e){},childNameStyle:function(e,t){var s=t%2===0,n=s?.7:.9;return{background:d["a"].lightenColor(e.color,n)}},childrenStyle:function(e){return{"border-bottom":"1px solid "+e.color}},showEditMilestoneModal:function(e,t){this.modals.edit=!0,t?(t.date=c()(t.date,"YYYY-MM-DD","en"),this.milestoneToEdit=t):this.milestoneToEdit={date:e}},hideEditMilestoneModal:function(){this.modals.edit=!1},confirmEditMilestone:function(e){var t=this;this.loading.edit=!0,this.saveMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},removeMilestone:function(e){var t=this;this.loading.edit=!0,this.deleteMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},milestoneLineStyle:function(e){var t=c()(e.date,"YYYY-MM-DD","en"),s=this.businessDiff(this.startDate,t);return{left:(s+.5)*this.cellWidth+"px"}},addMilestoneTitle:function(e){return"".concat(this.$t("schedule.milestone.add_milestone")," ")+"".concat(e.format("YYYY-MM-DD"))}}),socket:{},watch:{startDate:function(){this.resetScheduleSize(),this.scrollToToday()},endDate:function(){this.resetScheduleSize()},zoomLevel:function(){this.resetScheduleSize()},isLoading:function(){this.$nextTick(this.resetScheduleSize)},height:function(){this.$nextTick(this.resetScheduleSize)}}},D=j,x=(s("eb4f"),Object(k["a"])(D,n,i,!1,null,"286972ae",null));t["a"]=x.exports},d949:function(e,t,s){},dae3:function(e,t,s){},dd1c:function(e,t,s){},dd96:function(e,t,s){},dda8:function(e,t,s){"use strict";var n=s("dd96"),i=s.n(n);i.a},de26:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n=30},de40:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"button",attrs:{title:e.title},on:{click:function(t){return e.$emit("click")}}},["plus"===e.icon?s("plus-icon",{class:e.iconClass}):e._e(),"comment"===e.icon?s("message-square-icon",{class:e.iconClass}):e._e(),"download"===e.icon?s("download-icon",{class:e.iconClass}):e._e(),"upload"===e.icon?s("upload-icon",{class:e.iconClass}):e._e(),"film"===e.icon?s("film-icon",{class:e.iconClass}):e._e(),"play"===e.icon?s("play-icon",{class:e.iconClass}):e._e(),"pause"===e.icon?s("pause-icon",{class:e.iconClass}):e._e(),"edit"===e.icon?s("edit-icon",{class:e.iconClass}):e._e(),"image"===e.icon?s("image-icon",{class:e.iconClass}):e._e(),"maximize"===e.icon?s("maximize-icon",{class:e.iconClass}):e._e(),"delete"===e.icon?s("trash-icon",{class:e.iconClass}):e._e(),"restore"===e.icon?s("rotate-ccw-icon",{class:e.iconClass}):e._e(),"back"===e.icon?s("skip-back-icon",{class:e.iconClass}):e._e(),"forward"===e.icon?s("skip-forward-icon",{class:e.iconClass}):e._e(),"left"===e.icon?s("chevron-left-icon",{class:e.iconClass}):e._e(),"right"===e.icon?s("chevron-right-icon",{class:e.iconClass}):e._e(),"compare"===e.icon?s("copy-icon",{class:e.iconClass}):e._e(),"remove"===e.icon?s("x-icon",{class:e.iconClass}):e._e(),"pencil"===e.icon?s("edit2-icon",{class:e.iconClass}):e._e(),e.isText?s("span",{class:{text:!0,"is-hidden-touch":e.isResponsive}},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e()],1)},i=[],a=s("0a35"),o={name:"button-simple",components:{ChevronLeftIcon:a["e"],ChevronRightIcon:a["f"],CopyIcon:a["g"],DownloadIcon:a["i"],EditIcon:a["k"],Edit2Icon:a["j"],FilmIcon:a["n"],ImageIcon:a["o"],MaximizeIcon:a["r"],MessageSquareIcon:a["s"],PauseIcon:a["u"],PlayIcon:a["v"],PlusIcon:a["w"],RotateCcwIcon:a["y"],SkipBackIcon:a["B"],SkipForwardIcon:a["C"],TrashIcon:a["E"],UploadIcon:a["F"],XIcon:a["I"]},props:{icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean},text:{default:"",type:String},title:{default:"",type:String}},computed:{isText:function(){return this.text&&this.text.length>0},iconClass:function(){return{icon:!0,"is-small":!0,"only-icon":!this.isText}}}},r=o,c=(s("544d"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"2976d64c",null);t["a"]=d.exports},dea4:function(e,t,s){"use strict";var n=s("4663"),i=s.n(n);i.a},df2c:function(e,t,s){},dfeb:function(e,t,s){"use strict";var n=s("b6c5"),i=s.n(n);i.a},e007:function(e,t,s){"use strict";var n=s("dd1c"),i=s.n(n);i.a},e07d:function(e,t,s){"use strict";s("8e6e"),s("456d");var n,i=s("bd86"),a=(s("20d6"),s("ac6a"),s("7f7f"),s("edbf")),o=function(e){return{name:e.name,short_name:e.short_name,is_reviewable:Boolean("true"===e.is_reviewable),is_done:Boolean("true"===e.is_done),is_retake:Boolean("true"===e.is_retake),is_artist_allowed:Boolean("true"===e.is_artist_allowed),color:e.color}},r={getTaskStatuses:function(e){a["a"].get("/api/data/task-status",e)},getTaskStatus:function(e,t){a["a"].get("/api/data/task-status/".concat(e),t)},newTaskStatus:function(e,t){var s=o(e);a["a"].post("/api/data/task-status/",s,t)},updateTaskStatus:function(e,t){var s=o(e);a["a"].put("/api/data/task-status/".concat(e.id),s,t)},deleteTaskStatus:function(e,t){a["a"].del("/api/data/task-status/".concat(e.id),t)}},c=s("2229"),d=s("9fb0");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={taskStatus:[],taskStatusMap:{}},f=p,h={taskStatus:function(e){return e.taskStatus},taskStatusMap:function(e){return e.taskStatusMap},editTaskStatus:function(e){return e.editTaskStatus},deleteTaskStatus:function(e){return e.deleteTaskStatus},taskStatusForCurrentUser:function(e,t,s,n){return n.isCurrentUserManager?e.taskStatus:e.taskStatus.filter((function(e){return e.is_artist_allowed}))}},m={loadTaskStatuses:function(e,t){var s=e.commit;e.state;s(d["xd"]),r.getTaskStatuses((function(e,n){e?s(d["wd"]):s(d["vd"],n),t&&t(e)}))},loadTaskStatus:function(e,t){var s=e.commit;e.state;r.getTaskStatus(t,(function(e,t){e?console.error(e):s(d["mc"],t)}))},newTaskStatus:function(e,t){var s=e.commit,n=(e.state,t.form),i=t.callback;s(d["oc"],n),r.newTaskStatus(n,(function(e,t){e?s(d["nc"]):s(d["mc"],t),i&&i(e,t)}))},saveTaskStatus:function(e,t){var s=e.commit,n=(e.state,t.form),i=t.callback;s(d["oc"]),r.updateTaskStatus(n,(function(e,t){e?s(d["nc"]):s(d["mc"],t),i&&i(e)}))},deleteTaskStatus:function(e,t){var s=e.commit,n=(e.state,t.taskStatus),i=t.callback;s(d["Ab"]),r.deleteTaskStatus(n,(function(e){e?s(d["zb"]):s(d["yb"],n),i&&i(e)}))}},_=(n={},Object(i["a"])(n,d["xd"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(i["a"])(n,d["wd"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(i["a"])(n,d["vd"],(function(e,t){e.taskStatus=Object(c["c"])(t),e.taskStatusMap={},t.forEach((function(t){null===t.is_artist_allowed&&(t.is_artist_allowed=!0),e.taskStatusMap[t.id]=t}))})),Object(i["a"])(n,d["oc"],(function(e,t){})),Object(i["a"])(n,d["nc"],(function(e){})),Object(i["a"])(n,d["mc"],(function(e,t){var s=e.taskStatusMap[t.id];s&&s.id?Object.assign(s,t):(e.taskStatus.push(t),e.taskStatus=Object(c["c"])(e.taskStatus)),e.taskStatusMap[t.id]=t})),Object(i["a"])(n,d["Ab"],(function(e){})),Object(i["a"])(n,d["zb"],(function(e){})),Object(i["a"])(n,d["yb"],(function(e,t){var s=e.taskStatus.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskStatus.splice(s,1),delete e.taskStatusMap[t.id]})),Object(i["a"])(n,d["we"],(function(e){Object.assign(e,u({},p))})),n);t["a"]={state:f,getters:h,actions:m,mutations:_}},e211:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"button",attrs:{title:e.title,to:e.path}},[e.icon.length>0&&e.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+e.icon})]):e._e(),"plus"===e.icon?s("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"download"===e.icon?s("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"upload"===e.icon?s("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"edit"===e.icon?s("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"delete"===e.icon?s("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"restore"===e.icon?s("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),e.isText?s("span",{class:{text:!0,"is-hidden-touch":e.isResponsive}},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e()],1)},i=[],a=s("0a35"),o={name:"button-link",components:{DownloadIcon:a["i"],EditIcon:a["k"],PlusIcon:a["w"],RotateCcwIcon:a["y"],TrashIcon:a["E"],UploadIcon:a["F"]},props:{text:{default:"",type:String},title:{default:"",type:String},path:{default:""},icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean}},computed:{isText:function(){return this.text&&this.text.length>0}}},r=o,c=(s("8f49"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"143e1424",null);t["a"]=d.exports},e446:function(e,t,s){},e4ed:function(e,t,s){},e590:function(e,t,s){},e60b:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("spinner",{staticClass:"table-info"}):e._e(),e.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[e._v("\n      "+e._s(e.$t("main.loading_error"))+"\n    ")])]):e._e()],1)},i=[],a=s("be83"),o={name:"table-footer",components:{Spinner:a["a"]},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},r=o,c=s("2877"),d=Object(c["a"])(r,n,i,!1,null,"50ed1a32",null);t["a"]=d.exports},e632:function(e,t,s){"use strict";var n=s("586b"),i=s.n(n);i.a},e70e:function(e,t,s){"use strict";var n=s("d339"),i=s.n(n);i.a},e739:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list task-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[e._v("\n            "+e._s(e.$t("tasks.fields.production"))+"\n          ")]),s("th",{ref:"th-type",staticClass:"type"},[e._v("\n            "+e._s(e.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[e._v("\n            "+e._s(e.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"description"},[e._v("\n            "+e._s(e.$t("assets.fields.description"))+"\n          ")]),s("th",{staticClass:"estimation"},[e._v("\n            "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+".\n          ")]),s("th",{staticClass:"due-date"},[e._v("\n            "+e._s(e.$t("tasks.fields.due_date"))+"\n          ")]),s("th",{staticClass:"status"},[e._v("\n            "+e._s(e.$t("tasks.fields.task_status"))+"\n          ")]),e.done?s("th",{staticClass:"end-date"},[e._v("\n            "+e._s(e.$t("tasks.fields.end_date"))+"\n          ")]):s("th",{staticClass:"last-comment"},[e._v("\n            "+e._s(e.$t("tasks.fields.last_comment"))+"\n          ")])])])])]),e.tasks.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},e._l(e.displayedTasks,(function(t,n){return s("tr",{key:t+"-"+n,class:{selected:!(!e.selectionGrid||!e.selectionGrid[n])&&e.selectionGrid[n][0]},on:{click:function(t){return e.onLineClicked(n,t)}}},[s("production-name-cell",{staticClass:"production",attrs:{"is-tooltip":!0,entry:e.productionMap[t.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":t.project_id,entry:e.getTaskType(t)}}),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:t.entity_preview_file_id}}})],1),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entityPath(t)}},[e._v("\n              "+e._s(t.full_entity_name)+"\n            ")])],1),s("description-cell",{staticClass:"description",attrs:{entry:{description:t.entity_description}}}),s("td",{staticClass:"estimation"},[e._v("\n            "+e._s(e.formatDuration(t.estimation))+"\n          ")]),s("td",{staticClass:"due-date"},[e._v("\n            "+e._s(e.formatDate(t.due_date))+"\n          ")]),s("validation-cell",{ref:"validation-"+n+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!e.done,clickable:!1,selected:!(!e.selectionGrid||!e.selectionGrid[n])&&e.selectionGrid[n][0],rowX:n,columnY:0,column:t.taskStatus},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}}),e.done?s("td",{staticClass:"end-date"},[e._v("\n            "+e._s(e.formatDate(t.end_date))+"\n          ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:t}})],1)})),0)])]):e._e(),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),0!==e.tasks.length||e.isLoading?e._e():s("div",{staticClass:"has-text-centered empty-list"},[e._m(0),s("p",[e._v("\n      "+e._s(e.$t("people.no_task_assigned"))+"\n    ")])]),e.tasks.length&&!e.isLoading?s("p",{staticClass:"has-text-centered footer-info"},[e._v("\n    "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+"\n  ")]):e._e()],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("img",{attrs:{src:s("f64c")}})])}],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=s("2f62"),r=s("7f45"),c=s.n(r),d=s("bb21"),l=s("58f5"),u=s("e60b"),p=s("0fcb"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[e.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:e.task.last_comment.person}}):s("span",{staticClass:"no-avatar"},[e._v("\n       \n    ")]),e.commentText&&e.commentText.length>0?s("span",{staticClass:"flexrow-item last-comment pointer",domProps:{innerHTML:e._s(e.compileMarkdown(e.commentText))},on:{click:e.onClick}}):e.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[e._v("\n      "+e._s(e.$t("main.empty_comment"))+"\n    ")]):e._e()],1)])},h=[],m=s("0e54"),_=s.n(m),v=s("eb8c");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={name:"last-comment-cell",components:{PeopleAvatar:v["a"]},data:function(){return{isOpen:!1,timeout:null}},props:["task"],computed:g({},Object(o["c"])([]),{commentText:function(){var e=this.task.last_comment.text,t=140,s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"..."),s}}),methods:g({},Object(o["b"])([]),{compileMarkdown:function(e){return _()(e||"")},onClick:function(){this.isOpen=!this.isOpen}})},k=y,S=(s("8ab4"),s("2877")),w=Object(S["a"])(k,f,h,!1,null,"7c166565",null),O=w.exports,T=s("09a4"),C=s("cb0e"),P=s("1338"),E=s("4f18"),j=s("de26");function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var A={name:"todos-list",mixins:[E["a"],P["a"]],components:{EntityThumbnail:d["a"],DescriptionCell:p["a"],LastCommentCell:O,ProductionNameCell:T["a"],TableInfo:u["a"],TaskTypeName:l["a"],ValidationCell:C["a"]},props:["done","tasks","isLoading","isError","selectionGrid"],data:function(){return{page:1}},mounted:function(){this.page=1,this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:x({},Object(o["c"])(["nbSelectedTasks","taskTypeMap","productionMap"]),{displayedTasks:function(){return this.tasks.slice(0,this.page*j["a"])}}),methods:x({},Object(o["b"])([]),{setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},formatDate:function(e){return e?c()(e).fromNow():""},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},onLineClicked:function(e,t){var s="validation-"+e+"-0",n=this.$refs[s][0];n.select(t)},onTaskSelected:function(e){var t=this;if(e.isShiftKey){if(this.lastSelection){var s=this.lastSelection.x,n=e.x;e.x<this.lastSelection.x&&(s=e.x,n=this.lastSelection.x);for(var i=s;i<=n;i++){var a="validation-"+i+"-0",o=this.$refs[a][0];this.selectionGrid[i][0]||o.select({ctrlKey:!0,isUserClick:!1})}}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(this.$store.commit("ADD_SELECTED_TASK",e),!e.isShiftKey&&e.isUserClick){var r=e.x,c=0;this.lastSelection={x:r,y:c};var d="validation-"+r+"-"+c,l=this.$refs[d][0];this.$nextTick((function(){t.scrollToValidationCell(l)}))}},onTaskUnselected:function(e){e.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",e):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},getTaskType:function(e){var t=this.taskTypeMap[e.task_type_id],s=this.productionMap[e.project_id];return t.episode_id=e.episode_id,s&&"tvshow"===s.production_type&&!e.episode_id&&(t.episode_id=s.first_episode_id),t},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id;var n=this.productionMap[e.project_id],i=e.episode_id;return n&&"tvshow"===n.production_type&&!i&&(i=n.first_episode_id),i&&(s.name="episode-".concat(t),s.params.episode_id=i),s},onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,n=t.y,i=null;e.ctrlKey&&(37===e.keyCode?i=this.select(s,n-1):38===e.keyCode?i=this.select(s-1,n):39===e.keyCode?i=this.select(s,n+1):40===e.keyCode&&(i=this.select(s+1,n)),this.scrollToValidationCell(i))},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),i=s.bottom>n.bottom-t,a=s.top<n.top+t,o=s.right>n.right-t,r=s.left<n.left+t;if(i){var c=s.bottom-n.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var d=n.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-d)}if(o){var l=s.right-n.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+l)}else if(r){var u=n.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}},select:function(e,t){var s="validation-"+e+"-"+t,n=this.$refs[s];return n&&n[0].$el.click(),n?n[0]:0},resizeHeaders:function(){var e=this,t=this.$refs["body-tbody"],s=t&&t.children;if(s){var n=t.children[0],i=[{index:1,name:"type"},{index:3,name:"name"}];i.forEach((function(t){var s=Math.max(n.children[t.index].offsetWidth,100);e.$refs["th-"+t.name].style["min-width"]="".concat(s,"px")}))}}})},M=A,L=(s("bf01"),Object(S["a"])(M,n,i,!1,null,"d7aca152",null));t["a"]=L.exports},e8e9:function(e,t,s){},e8f3:function(e,t,s){"use strict";var n=s("ce93"),i=s.n(n);i.a},e990:function(e,t,s){},e9c6:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("7f7f"),s("ac6a");var n=s("7930"),i=s("ba4c"),a=s.n(i),o={created:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},mounted:function(){this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{getBackground:function(e){return n["a"].hexToRGBa(e,.08)},buildHideKey:function(e){return"column-".concat(this.currentProduction.id,"-").concat(e)},initHiddenColumns:function(e,t){var s=this;e&&t&&e.forEach((function(e){var n=s.buildHideKey(e);a.a.set(t,e,"true"===localStorage.getItem(n))}))},hideColumn:function(e){var t=this.buildHideKey(e),s=!0;return"true"===localStorage.getItem(t)&&(s=!1),localStorage.setItem(t,s),a.a.set(this.hiddenColumns,e,s),this.hiddenColumns[e]=s,s},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},getValidationStyle:function(e){var t=this.taskTypeMap[e];return{"border-left":"1px solid ".concat(t.color),background:this.getBackground(t.color)}},onTaskSelected:function(e){var t=this,s=[];if(e.isShiftKey){if(this.lastSelection){var n=this.lastSelection.x,i=e.x,a=this.lastSelection.y,o=e.y,r=this.assetSelectionGrid;r||(r=this.shotSelectionGrid),e.x<this.lastSelection.x&&(n=e.x,i=this.lastSelection.x),e.y<this.lastSelection.y&&(a=e.y,o=this.lastSelection.y);for(var c=n;c<=i;c++)for(var d=a;d<=o;d++){var l="validation-"+c+"-"+d,u=this.$refs[l][0];r[c][d]||s.push({entity:u.entity,column:u.column,task:u.task,x:u.rowX,y:u.columnY})}this.$store.commit("ADD_SELECTED_TASK",e)}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(0===s.length?this.$store.commit("ADD_SELECTED_TASK",e):this.$store.commit("ADD_SELECTED_TASKS",s),!e.isShiftKey&&e.isUserClick){var p=e.x,f=e.y;this.lastSelection={x:p,y:f};var h="validation-"+p+"-"+f,m=this.$refs[h][0];this.$nextTick((function(){t.scrollToValidationCell(m)}))}},onTaskUnselected:function(e){e.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",e):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},showHeaderMenu:function(e,t){var s=this.$refs.headerMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var n=t.srcElement.parentNode.parentNode;"TH"!==n.tagName&&(n=n.parentNode);var i=n.getBoundingClientRect(),a=i.left+11,o=i.bottom+10,r=Math.max(100,i.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastHeaderMenuDisplayed=e},showMetadataHeaderMenu:function(e,t){var s=this.$refs.headerMetadataMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var n=t.srcElement.parentNode.parentNode,i=n.getBoundingClientRect(),a=i.left+11,o=i.bottom+10,r=Math.max(100,i.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastMetadaDataHeaderMenuDisplayed=e},onMinimizeColumnToggled:function(){this.hideColumn(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onDeleteAllTasksClicked:function(){this.$emit("delete-all-tasks",this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onAddMetadataClicked:function(){this.$emit("add-metadata")},onEditMetadataClicked:function(){this.$emit("edit-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},onDeleteMetadataClicked:function(){this.$emit("delete-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},resizeSplittedTableHeaders:function(e){var t=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].length>0&&this.$refs["body-tbody"][0].children.length>1){var s=this.$refs["body-tbody"][0].children[1];e.forEach((function(e){var n=s.children[e.index].offsetWidth;t.$refs["th-"+e.name]&&(t.$refs["th-"+e.name].style["min-width"]="".concat(n,"px"))}))}}}}},eae5:function(e,t,s){"use strict";var n=s("1e0e"),i=s.n(n);i.a},eb4f:function(e,t,s){"use strict";var n=s("4279"),i=s.n(n);i.a},eb8c:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","min-width":e.size+"px","min-height":e.size+"px","font-size":e.person.has_avatar?0:e.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:e.person.id}},title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):e._e(),e.person.has_avatar?e._e():s("span",[e._v("\n       "+e._s(e.initials)+"\n      ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","font-size":e.fontSize+"px"},attrs:{title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):s("span",[e._v("\n    "+e._s(e.initials)+"\n  ")])])},i=[],a=(s("c5f6"),{name:"person-avatar",data:function(){return{avatarPath:"",avatarKey:"",initials:""}},props:{person:{type:Object,default:function(){return{id:"empty",color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0},"no-cache":{type:Boolean,default:!1}},created:function(){this.reloadAvatar()},methods:{reloadAvatar:function(){this.avatarPath=this.person.avatarPath+"?unique="+this.person.uniqueHash,this.avatarKey=this.person.id+"-"+this.person.uniqueHash}},mounted:function(){this.initials=this.person.initials},watch:{person:function(){this.reloadAvatar()},"person.uniqueHash":function(){this.reloadAvatar()}}}),o=a,r=(s("dfeb"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"498f1c85",null);t["a"]=c.exports},ec7b:function(e,t,s){},edbf:function(e,t,s){"use strict";var n=s("db82"),i=s.n(n),a=(s("a481"),{backToLogin:function(){"/login"!==window.location&&window.location.replace("/login")}}),o=a,r={get:function(e,t){i.a.get(e).end((function(e,s){t(e,s.body)}))},post:function(e,t,s){i.a.post(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},put:function(e,t,s){i.a.put(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},del:function(e,t){i.a.del(e).end((function(e,s){if(401===s.statusCode)return o.backToLogin();t(e,s.body)}))},pget:function(e){return new Promise((function(t,s){r.get(e,(function(e,n){e?s(e):t(n)}))}))},ppost:function(e,t,s){return new Promise((function(s,n){i.a.post(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),n(e)):e?n(e):s(t.body)}))}))},pput:function(e,t,s){return new Promise((function(s,n){i.a.put(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),n(e)):e?n(e):s(t.body)}))}))},getModel:function(e,t){return new Promise((function(s,n){var i="/api/data/".concat(e,"/").concat(t);r.get(i,(function(e,t){e?n(e):s(t)}))}))}};t["a"]=r},ee35:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEditing?s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("tasks.change_preview"))+"\n      ")]):s("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("tasks.add_preview"))+"\n      ")]),s("p",[e._v("\n        "+e._s(e.$t("tasks.select_preview_file"))+"\n      ")]),s("file-upload",{ref:"preview-field",attrs:{accept:e.extensions},on:{fileselected:e.onFileSelected}}),e.isError?s("p",{staticClass:"error"},[e._v("\n        "+e._s(e.$t("tasks.add_preview_error"))+"\n      ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":void 0==e.formData},on:{click:function(t){return e.$emit("confirm")}}},[e._v("\n          "+e._s(e.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n          "+e._s(e.$t("main.cancel"))+"\n        ")])])],1)])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("4085");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"add-preview-modal",components:{FileUpload:r["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.blend,.wmv,.m4v,.ai,.comp,.exr,.psd,.hip"}},data:function(){return{formData:null}},mounted:function(){this.formData=null},computed:d({},Object(o["c"])([])),methods:d({},Object(o["b"])([]),{onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},reset:function(){this.$refs["preview-field"].reset(),this.formData=null}}),watch:{active:function(){this.reset()}}},u=l,p=(s("7c8c"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"589bb067",null);t["a"]=f.exports},eef8:function(e,t,s){"use strict";var n=s("f547"),i=s.n(n);i.a},ef8b:function(e,t,s){"use strict";s("8e6e"),s("20d6"),s("ac6a"),s("456d"),s("7f7f");var n,i=s("bd86"),a=s("ba4c"),o=s.n(a),r=(s("c5f6"),s("edbf")),c={getTaskTypes:function(e){r["a"].get("/api/data/task-types",e)},newTaskType:function(e,t){var s={name:e.name,color:e.color,priority:Number(e.priority),for_shots:Boolean("true"===e.for_shots),allow_timelog:Boolean("true"===e.allow_timelog)};r["a"].post("/api/data/task-types/",s,t)},updateTaskType:function(e,t){var s={name:e.name,color:e.color,priority:Number(e.priority),for_shots:Boolean("true"===e.for_shots),allow_timelog:Boolean("true"===e.allow_timelog)};r["a"].put("/api/data/task-types/".concat(e.id),s,t)},deleteTaskType:function(e,t){r["a"].del("/api/data/task-types/".concat(e.id),t)},getTaskType:function(e,t){r["a"].get("/api/data/task-types/".concat(e),t)},getSequenceSubscriptions:function(e,t,s){r["a"].get("/api/data/user/projects/".concat(e,"/task-types/").concat(t,"/")+"sequence-subscriptions",s)}},d=s("2229"),l=s("9fb0");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={taskTypes:[],taskTypeMap:{},sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},h=p({},f),m={taskTypes:function(e){return e.taskTypes},taskTypeMap:function(e){return e.taskTypeMap},sequenceSubscriptions:function(e){return e.sequenceSubscriptions},editTaskType:function(e){return e.editTaskType},deleteTaskType:function(e){return e.deleteTaskType},currentTaskType:function(e,t,s){return e.taskTypeMap[s.route.params.task_type_id]||{}},getTaskTypeOptions:function(e){return e.taskTypes.map((function(e){return{label:e.name,value:e.id}}))},getAssetTaskTypeOptions:function(e){return e.taskTypes.filter((function(e){return!e.for_shots})).map((function(e){return{label:e.name,value:e.id}}))},getShotTaskTypeOptions:function(e){return e.taskTypes.filter((function(e){return e.for_shots})).map((function(e){return{label:e.name,value:e.id}}))},getTaskType:function(e,t){return function(t){return e.taskTypeMap[t]}}},_={loadTaskTypes:function(e,t){var s=e.commit;e.state;s(l["Bd"]),c.getTaskTypes((function(e,n){e?s(l["Ad"]):s(l["zd"],n),t&&t(e)}))},loadTaskType:function(e,t){var s=e.commit;e.state;c.getTaskType(t,(function(e,t){e?console.error(e):s(l["pc"],t)}))},newTaskType:function(e,t){var s=e.commit;e.state;s(l["rc"],t.data),c.newTaskType(t.data,(function(e,n){e?s(l["qc"]):s(l["pc"],n),t.callback&&t.callback(e)}))},editTaskType:function(e,t){var s=e.commit;e.state;s(l["rc"]),c.updateTaskType(t.data,(function(e,n){e?s(l["qc"]):s(l["pc"],n),t.callback&&t.callback(e)}))},deleteTaskType:function(e,t){var s=e.commit;e.state;s(l["Db"]);var n=t.taskType;c.deleteTaskType(n,(function(e){e?s(l["Cb"]):s(l["Bb"],n),t.callback&&t.callback(e)}))},initTaskType:function(e,t){var s=e.commit,n=e.dispatch,i=(e.state,e.rootState,e.rootGetters);return new Promise((function(e,a){i.currentTaskType.for_shots?c.getSequenceSubscriptions(i.currentProduction.id,i.currentTaskType.id,(function(o,r){o?a(o):(s(l["ld"],r),Object.keys(i.shotMap).length<2||t?0===i.episodes.length&&i.isTVShow?n("loadEpisodes",(function(t){t?a(t):n("loadShots",(function(t){t?a(t):e()}))})):n("loadShots",(function(t){t?a(t):e()})):e())})):Object.keys(i.assetMap).length<2||t?n("loadAssets",(function(t){t?a(t):e()})):e()}))}},v=(n={},Object(i["a"])(n,l["Bd"],(function(e){})),Object(i["a"])(n,l["Ad"],(function(e){e.taskTypes=[],e.taskTypeMap={}})),Object(i["a"])(n,l["zd"],(function(e,t){e.taskTypes=Object(d["k"])(t),e.taskTypeMap={},t.forEach((function(t){e.taskTypeMap[t.id]=t}))})),Object(i["a"])(n,l["rc"],(function(e,t){e.editTaskType.isLoading=!0,e.editTaskType.isError=!1})),Object(i["a"])(n,l["qc"],(function(e){e.editTaskType.isLoading=!1,e.editTaskType.isError=!0})),Object(i["a"])(n,l["pc"],(function(e,t){var s=m.getTaskType(e)(t.id);s&&s.id?Object.assign(s,t):(e.taskTypes.push(t),e.taskTypes=Object(d["k"])(e.taskTypes)),e.taskTypeMap[t.id]=t,e.editTaskType={isLoading:!1,isError:!1}})),Object(i["a"])(n,l["Db"],(function(e){e.deleteTaskType={isLoading:!0,isError:!1}})),Object(i["a"])(n,l["Cb"],(function(e){e.deleteTaskType={isLoading:!1,isError:!0}})),Object(i["a"])(n,l["Bb"],(function(e,t){var s=e.taskTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskTypes.splice(s,1),delete e.taskTypeMap[t.id],e.deleteTaskType={isLoading:!1,isError:!1}})),Object(i["a"])(n,l["kd"],(function(e,t){var s=t.sequenceId,n=t.subscribed;o.a.set(e.sequenceSubscriptions,s,n)})),Object(i["a"])(n,l["ld"],(function(e,t){e.sequenceSubscriptions={},t.forEach((function(t){e.sequenceSubscriptions[t]=!0}))})),Object(i["a"])(n,l["we"],(function(e){Object.assign(e,p({},f))})),n);t["a"]={state:h,getters:m,actions:_,mutations:v}},efab:function(e,t,s){"use strict";var n=s("2838"),i=s.n(n);i.a},f38a:function(e,t,s){},f52f:function(e,t,s){"use strict";var n=s("dae3"),i=s.n(n);i.a},f547:function(e,t,s){},f64c:function(e,t,s){e.exports=s.p+"img/empty_todo.1f922c20.png"},f883:function(e,t,s){"use strict";var n=s("900a"),i=s.n(n);i.a},f8b1:function(e,t,s){"use strict";var n=s("8ecf"),i=s.n(n);i.a},f95d:function(e,t,s){},fb36:function(e,t,s){"use strict";var n=s("3521"),i=s.n(n);i.a},fb8a:function(e,t,s){"use strict";var n=s("ff81"),i=s.n(n);i.a},fd61:function(e,t,s){"use strict";var n=s("9856"),i=s.n(n);i.a},fe13:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e.minimized?s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color,cursor:e.cursor}},[e._v("\n       \n    ")]):s("router-link",{staticClass:"tag dynamic",style:{background:e.backgroundColor,color:e.color},attrs:{to:e.taskPath(e.task)}},[e._v("\n        \n    ")])],1):s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color,cursor:e.cursor}},[e._v("\n      "+e._s(e.taskStatus.short_name)+"\n    ")]):s("router-link",{staticClass:"tag dynamic",style:{background:e.backgroundColor,color:e.color},attrs:{to:e.taskPath(e.task)}},[e._v("\n      "+e._s(e.taskStatus.short_name)+"\n    ")]),e.isPriority&&!e.isCurrentUserClient?s("span",{staticClass:"priority"},[e._v("\n      "+e._s(e.priority)+"\n    ")]):e._e()],1)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("7930");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean},isPriority:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},pointer:{default:!1,type:Boolean}},computed:d({},Object(o["c"])(["currentEpisode","currentProduction","isDarkTheme","isTVShow","taskMap","taskStatusMap","taskTypeMap","isCurrentUserClient"]),{cursor:function(){return this.pointer?"pointer":"default"},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""}}),methods:{taskPath:function(e){var t=this.task.project_id?this.task.project_id:this.currentProduction.id,s={name:"task",params:{production_id:t,task_id:e.id}};this.isTVShow&&this.currentEpisode&&(s.name="episode-task",s.params.episode_id=e.episode_id||this.currentEpisode.id);var n=this.taskTypeMap[e.task_type_id];return s.params.type=n.for_shots?"shots":"assets",s}}},u=l,p=(s("e632"),s("2877")),f=Object(p["a"])(u,n,i,!1,null,"f7d9b4a2",null);t["a"]=f.exports},ff4d:function(e,t,s){"use strict";var n=s("0084"),i=s.n(n);i.a},ff81:function(e,t,s){}});
//# sourceMappingURL=app.20361caf.js.map